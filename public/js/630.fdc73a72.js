"use strict";(self["webpackChunkepharma"]=self["webpackChunkepharma"]||[]).push([[630],{36630:(e,o,r)=>{r.r(o),r.d(o,{default:()=>J});r(62010);var s=r(56768),t=r(45130),a=r(24232),n=(0,s.Lk)("p",null,"Informations personnelles",-1),l={class:"form-row"},i={class:"form-group col-md-4"},c=(0,s.Lk)("label",null,"Nom(s)*",-1),d={class:"form-group col-md-4"},u=(0,s.Lk)("label",null,"Prénom(s)*",-1),m={class:"form-group col-md-4"},f=(0,s.Lk)("label",null,"Téléphone",-1),p={class:"form-group col-md-4"},k=(0,s.Lk)("label",null,"Email",-1),b={class:"d-flex justify-content-end"},h={type:"submit",class:"btn btn-light"},L={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},y={key:1,class:"container"},v=(0,s.Lk)("div",{class:"col-md-8 mx-auto mb-3"},[(0,s.Lk)("p",{class:"text-center h5"},"Le nouvel utilisateur a été créé avec succès! Veuillez récupérer les identifiants du compte ci-dessous")],-1),w={key:0,class:"col-md-4 text-center mx-auto bg-gris p-3"},g={class:"form-group"},x=(0,s.Lk)("label",null,"Nom d'utilisateur",-1),C={class:"row"},U={class:"form-group"},I=(0,s.Lk)("label",null,"Mot de passe temporaire",-1),R={class:"row"};function P(e,o,r,P,E,_){var T=this;return 0==e.userIsReady?((0,s.uX)(),(0,s.CE)("form",{key:0,onSubmit:o[5]||(o[5]=(0,t.D$)((function(o){return e.createLine()}),["prevent"]))},[(0,s.Lk)("div",null,[n,(0,s.Lk)("div",l,[(0,s.Lk)("div",i,[c,(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control border border-dark px-[4rem]",required:"","onUpdate:modelValue":o[0]||(o[0]=function(o){return e.form.last_name=o})},null,512),[[t.Jo,e.form.last_name]])]),(0,s.Lk)("div",d,[u,(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control border border-dark px-[4rem]",required:"","onUpdate:modelValue":o[1]||(o[1]=function(o){return e.form.first_name=o})},null,512),[[t.Jo,e.form.first_name]])]),(0,s.Lk)("div",m,[f,(0,s.bo)((0,s.Lk)("input",{type:"tel",class:"form-control border border-dark px-[4rem]","onUpdate:modelValue":o[2]||(o[2]=function(o){return e.form.telephone=o})},null,512),[[t.Jo,e.form.telephone]])]),(0,s.Lk)("div",p,[k,(0,s.bo)((0,s.Lk)("input",{type:"email",class:"form-control border border-dark px-[4rem]","onUpdate:modelValue":o[3]||(o[3]=function(o){return e.form.email=o})},null,512),[[t.Jo,e.form.email]])])])]),(0,s.Lk)("div",b,[(0,s.Lk)("button",{type:"button",class:"btn btn-light mr-2",onClick:o[4]||(o[4]=function(e){return T.dialogRef.close()})},"Fermer"),(0,s.Lk)("button",h,[(0,s.eW)(" Enregistrer "),1==e.isLoading?((0,s.uX)(),(0,s.CE)("span",L)):(0,s.Q3)("",!0)])])],32)):((0,s.uX)(),(0,s.CE)("div",y,[v,null!=e.newUser?((0,s.uX)(),(0,s.CE)("div",w,[(0,s.Lk)("div",g,[x,(0,s.Lk)("div",C,[(0,s.Lk)("h5",{class:"col-md-10 text-primary",ref:"usernameRef"},(0,a.v_)(e.newUser.user.name),513),(0,s.Lk)("button",{onClick:o[6]||(o[6]=function(o){return e.copyToClipboard("usernameRef")}),class:"col-md-2 btn btn-light"},[(0,s.Lk)("i",{class:(0,a.C4)(e.copyIconUsername)},null,2)])])]),(0,s.Lk)("div",U,[I,(0,s.Lk)("div",R,[(0,s.Lk)("h5",{class:"col-md-10 text-primary",ref:"passwordRef"},(0,a.v_)(e.newUser.password),513),(0,s.Lk)("button",{onClick:o[7]||(o[7]=function(o){return e.copyToClipboard("passwordRef")}),class:"col-md-2 btn btn-light"},[(0,s.Lk)("i",{class:(0,a.C4)(e.copyIconPassword)},null,2)])])])])):(0,s.Q3)("",!0)]))}r(51629),r(26099),r(23500),r(76031);var E=r(46587),_=r.n(E);const T=(0,s.pM)({name:"CreateUtilisateur",inject:["dialogRef"],data:function(){return{table:"utilisateurs",isLoading:!1,userIsReady:!1,newUser:null,form:{},copiedUsername:!1,copiedPassword:!1,copyIconUsername:"fas fa-copy",copyIconPassword:"fas fa-copy"}},methods:{createLine:function(){var e=this;this.isLoading=!0,this.form.fullname=this.form.last_name+" "+this.form.first_name,this.axios.post("/api/"+this.table,this.form).then((function(o){e.isLoading=!1,!0===o.data.success?(e.resetForm(),_()("#refresh"+e.table).click(),e.$toast.add({severity:"success",detail:o.data.message,life:3e3}),e.newUser=o.data.data,e.userIsReady=!0):o.data.errors.forEach((function(o){e.$toast.add({severity:"warn",summary:"Oups !",detail:o,life:7e3})}))}))["catch"]((function(){e.isLoading=!1,e.$toast.add({severity:"error",summary:"Probleme de connexion",detail:"Une erreur s'est produite lors de la connexion au serveur !",life:5e3})}))},resetForm:function(){this.form={}},copyToClipboard:function(e){var o=this,r=this.$refs[e].innerText,s=document.createElement("textarea");s.value=r,document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s),"usernameRef"===e?(this.copiedUsername=!0,this.copyIconUsername="fas fa-check",setTimeout((function(){o.copiedUsername=!1,o.copyIconUsername="fas fa-copy"}),5e3)):"passwordRef"===e&&(this.copiedPassword=!0,this.copyIconPassword="fas fa-check",setTimeout((function(){o.copiedPassword=!1,o.copyIconPassword="fas fa-copy"}),5e3))}}});var V=r(71241);const $=(0,V.A)(T,[["render",P]]),J=$}}]);
//# sourceMappingURL=630.fdc73a72.js.map