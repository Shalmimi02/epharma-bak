{"version":3,"file":"js/616.6f00dcba.js","mappings":"mKA8BA,IAAIA,GAAe,EACfC,EAAc,EACdC,EAAa,EAWjB,SAASC,EAAUC,EAAOC,EAAOC,EAAYC,EAASC,GAEpD,GAAIJ,IAAUC,EACZ,OAAID,EACK,CAAC,CAACF,EAAYE,IAEhB,GAGT,GAAkB,MAAdE,EAAoB,CACtB,IAAIG,EAAWC,EAAsBN,EAAOC,EAAOC,GACnD,GAAIG,EACF,OAAOA,CAEX,CAGA,IAAIE,EAAeC,EAAkBR,EAAOC,GACxCQ,EAAeT,EAAMU,UAAU,EAAGH,GACtCP,EAAQA,EAAMU,UAAUH,GACxBN,EAAQA,EAAMS,UAAUH,GAGxBA,EAAeI,EAAkBX,EAAOC,GACxC,IAAIW,EAAeZ,EAAMU,UAAUV,EAAMa,OAASN,GAClDP,EAAQA,EAAMU,UAAU,EAAGV,EAAMa,OAASN,GAC1CN,EAAQA,EAAMS,UAAU,EAAGT,EAAMY,OAASN,GAG1C,IAAIO,EAAQC,EAAcf,EAAOC,GAajC,OAVIQ,GACFK,EAAME,QAAQ,CAAClB,EAAYW,IAEzBG,GACFE,EAAMG,KAAK,CAACnB,EAAYc,IAE1BM,EAAkBJ,EAAOV,GACrBD,GACFgB,EAAqBL,GAEhBA,CACT,CASA,SAASC,EAAcf,EAAOC,GAC5B,IAAIa,EAEJ,IAAKd,EAEH,MAAO,CAAC,CAACH,EAAaI,IAGxB,IAAKA,EAEH,MAAO,CAAC,CAACL,EAAaI,IAGxB,IAAIoB,EAAWpB,EAAMa,OAASZ,EAAMY,OAASb,EAAQC,EACjDoB,EAAYrB,EAAMa,OAASZ,EAAMY,OAASZ,EAAQD,EAClDsB,EAAIF,EAASG,QAAQF,GACzB,IAAW,IAAPC,EAWF,OATAR,EAAQ,CACN,CAACjB,EAAauB,EAASV,UAAU,EAAGY,IACpC,CAACxB,EAAYuB,GACb,CAACxB,EAAauB,EAASV,UAAUY,EAAID,EAAUR,UAG7Cb,EAAMa,OAASZ,EAAMY,SACvBC,EAAM,GAAG,GAAKA,EAAM,GAAG,GAAKlB,GAEvBkB,EAGT,GAAyB,IAArBO,EAAUR,OAGZ,MAAO,CACL,CAACjB,EAAaI,GACd,CAACH,EAAaI,IAKlB,IAAIuB,EAAKC,EAAgBzB,EAAOC,GAChC,GAAIuB,EAAI,CAEN,IAAIE,EAAUF,EAAG,GACbG,EAAUH,EAAG,GACbI,EAAUJ,EAAG,GACbK,EAAUL,EAAG,GACbM,EAAaN,EAAG,GAEhBO,EAAUhC,EAAU2B,EAASE,GAC7BI,EAAUjC,EAAU4B,EAASE,GAEjC,OAAOE,EAAQE,OAAO,CAAC,CAACnC,EAAYgC,IAAcE,EACpD,CAEA,OAAOE,EAAalC,EAAOC,EAC7B,CAWA,SAASiC,EAAalC,EAAOC,GAW3B,IATA,IAAIkC,EAAenC,EAAMa,OACrBuB,EAAenC,EAAMY,OACrBwB,EAAQC,KAAKC,MAAMJ,EAAeC,GAAgB,GAClDI,EAAWH,EACXI,EAAW,EAAIJ,EACfK,EAAK,IAAIC,MAAMF,GACfG,EAAK,IAAID,MAAMF,GAGVI,EAAI,EAAGA,EAAIJ,EAAUI,IAC5BH,EAAGG,IAAM,EACTD,EAAGC,IAAM,EAEXH,EAAGF,EAAW,GAAK,EACnBI,EAAGJ,EAAW,GAAK,EAWnB,IAVA,IAAIM,EAAQX,EAAeC,EAGvBW,EAAQD,EAAQ,IAAM,EAGtBE,EAAU,EACVC,EAAQ,EACRC,EAAU,EACVC,EAAQ,EACHC,EAAI,EAAGA,EAAIf,EAAOe,IAAK,CAE9B,IAAK,IAAIC,GAAMD,EAAIJ,EAASK,GAAMD,EAAIH,EAAOI,GAAM,EAAG,CACpD,IAAIC,EAAYd,EAAWa,EAGzBE,EADEF,KAAQD,GAAMC,IAAOD,GAAKV,EAAGY,EAAY,GAAKZ,EAAGY,EAAY,GAC1DZ,EAAGY,EAAY,GAEfZ,EAAGY,EAAY,GAAK,EAE3B,IAAIE,EAAKD,EAAKF,EACd,MACEE,EAAKpB,GACLqB,EAAKpB,GACLpC,EAAMyD,OAAOF,KAAQtD,EAAMwD,OAAOD,GAElCD,IACAC,IAGF,GADAd,EAAGY,GAAaC,EACZA,EAAKpB,EAEPc,GAAS,OACJ,GAAIO,EAAKpB,EAEdY,GAAW,OACN,GAAID,EAAO,CAChB,IAAIW,EAAYlB,EAAWM,EAAQO,EACnC,GAAIK,GAAa,GAAKA,EAAYjB,IAA+B,IAAnBG,EAAGc,GAAmB,CAElE,IAAIC,EAAKxB,EAAeS,EAAGc,GAC3B,GAAIH,GAAMI,EAER,OAAOC,EAAkB5D,EAAOC,EAAOsD,EAAIC,EAE/C,CACF,CACF,CAGA,IAAK,IAAIK,GAAMT,EAAIF,EAASW,GAAMT,EAAID,EAAOU,GAAM,EAAG,CAChDH,EAAYlB,EAAWqB,EAGzBF,EADEE,KAAQT,GAAMS,IAAOT,GAAKR,EAAGc,EAAY,GAAKd,EAAGc,EAAY,GAC1Dd,EAAGc,EAAY,GAEfd,EAAGc,EAAY,GAAK,EAE3B,IAAII,EAAKH,EAAKE,EACd,MACEF,EAAKxB,GACL2B,EAAK1B,GACLpC,EAAMyD,OAAOtB,EAAewB,EAAK,KAC/B1D,EAAMwD,OAAOrB,EAAe0B,EAAK,GAEnCH,IACAG,IAGF,GADAlB,EAAGc,GAAaC,EACZA,EAAKxB,EAEPgB,GAAS,OACJ,GAAIW,EAAK1B,EAEdc,GAAW,OACN,IAAKH,EAAO,CACbO,EAAYd,EAAWM,EAAQe,EACnC,GAAIP,GAAa,GAAKA,EAAYb,IAA+B,IAAnBC,EAAGY,GAAmB,CAClE,IAAIC,EAAKb,EAAGY,GACRE,EAAKhB,EAAWe,EAAKD,EAGzB,GADAK,EAAKxB,EAAewB,EAChBJ,GAAMI,EAER,OAAOC,EAAkB5D,EAAOC,EAAOsD,EAAIC,EAE/C,CACF,CACF,CACF,CAGA,MAAO,CACL,CAAC5D,EAAaI,GACd,CAACH,EAAaI,GAElB,CAWA,SAAS2D,EAAkB5D,EAAOC,EAAO4C,EAAGkB,GAC1C,IAAIC,EAAShE,EAAMU,UAAU,EAAGmC,GAC5BoB,EAAShE,EAAMS,UAAU,EAAGqD,GAC5BG,EAASlE,EAAMU,UAAUmC,GACzBsB,EAASlE,EAAMS,UAAUqD,GAGzBjD,EAAQf,EAAUiE,EAAQC,GAC1BG,EAASrE,EAAUmE,EAAQC,GAE/B,OAAOrD,EAAMmB,OAAOmC,EACtB,CASA,SAAS5D,EAAkBR,EAAOC,GAEhC,IAAKD,IAAUC,GAASD,EAAMyD,OAAO,KAAOxD,EAAMwD,OAAO,GACvD,OAAO,EAIT,IAAIY,EAAa,EACbC,EAAahC,KAAKiC,IAAIvE,EAAMa,OAAQZ,EAAMY,QAC1C2D,EAAaF,EACbG,EAAe,EACnB,MAAOJ,EAAaG,EAEhBxE,EAAMU,UAAU+D,EAAcD,IAC9BvE,EAAMS,UAAU+D,EAAcD,IAE9BH,EAAaG,EACbC,EAAeJ,GAEfC,EAAaE,EAEfA,EAAalC,KAAKoC,OAAOJ,EAAaD,GAAc,EAAIA,GAO1D,OAJIM,EAAwB3E,EAAM4E,WAAWJ,EAAa,KACxDA,IAGKA,CACT,CAUA,SAASK,EAAoB7E,EAAOC,GAElC,IAAIkC,EAAenC,EAAMa,OACrBuB,EAAenC,EAAMY,OAEzB,GAAoB,GAAhBsB,GAAqC,GAAhBC,EACvB,OAAO,EAGLD,EAAeC,EACjBpC,EAAQA,EAAMU,UAAUyB,EAAeC,GAC9BD,EAAeC,IACxBnC,EAAQA,EAAMS,UAAU,EAAGyB,IAE7B,IAAI2C,EAAcxC,KAAKiC,IAAIpC,EAAcC,GAEzC,GAAIpC,GAASC,EACX,OAAO6E,EAMT,IAAIC,EAAO,EACPlE,EAAS,EACb,MAAO,EAAM,CACX,IAAImE,EAAUhF,EAAMU,UAAUoE,EAAcjE,GACxCoE,EAAQhF,EAAMsB,QAAQyD,GAC1B,IAAc,GAAVC,EACF,OAAOF,EAETlE,GAAUoE,EAEC,GAATA,GACAjF,EAAMU,UAAUoE,EAAcjE,IAAWZ,EAAMS,UAAU,EAAGG,KAE5DkE,EAAOlE,EACPA,IAEJ,CACF,CAQA,SAASF,EAAkBX,EAAOC,GAEhC,IAAKD,IAAUC,GAASD,EAAMkF,OAAO,KAAOjF,EAAMiF,OAAO,GACvD,OAAO,EAIT,IAAIb,EAAa,EACbC,EAAahC,KAAKiC,IAAIvE,EAAMa,OAAQZ,EAAMY,QAC1C2D,EAAaF,EACba,EAAa,EACjB,MAAOd,EAAaG,EAEhBxE,EAAMU,UAAUV,EAAMa,OAAS2D,EAAYxE,EAAMa,OAASsE,IAC1DlF,EAAMS,UAAUT,EAAMY,OAAS2D,EAAYvE,EAAMY,OAASsE,IAE1Dd,EAAaG,EACbW,EAAad,GAEbC,EAAaE,EAEfA,EAAalC,KAAKoC,OAAOJ,EAAaD,GAAc,EAAIA,GAO1D,OAJIe,EAAsBpF,EAAM4E,WAAW5E,EAAMa,OAAS2D,KACxDA,IAGKA,CACT,CAYA,SAAS/C,EAAgBzB,EAAOC,GAC9B,IAAImB,EAAWpB,EAAMa,OAASZ,EAAMY,OAASb,EAAQC,EACjDoB,EAAYrB,EAAMa,OAASZ,EAAMY,OAASZ,EAAQD,EACtD,GAAIoB,EAASP,OAAS,GAAwB,EAAnBQ,EAAUR,OAAaO,EAASP,OACzD,OAAO,KAeT,SAASwE,EAAiBjE,EAAUC,EAAWC,GAE7C,IAGIgE,EAAiBC,EAAiBC,EAAkBC,EAHpDC,EAAOtE,EAASV,UAAUY,EAAGA,EAAIgB,KAAKoC,MAAMtD,EAASP,OAAS,IAC9D8E,GAAK,EACLC,EAAc,GAElB,OAAiD,KAAzCD,EAAItE,EAAUE,QAAQmE,EAAMC,EAAI,IAAY,CAClD,IAAIE,EAAerF,EACjBY,EAASV,UAAUY,GACnBD,EAAUX,UAAUiF,IAElBG,EAAenF,EACjBS,EAASV,UAAU,EAAGY,GACtBD,EAAUX,UAAU,EAAGiF,IAErBC,EAAY/E,OAASiF,EAAeD,IACtCD,EACEvE,EAAUX,UAAUiF,EAAIG,EAAcH,GACtCtE,EAAUX,UAAUiF,EAAGA,EAAIE,GAC7BP,EAAkBlE,EAASV,UAAU,EAAGY,EAAIwE,GAC5CP,EAAkBnE,EAASV,UAAUY,EAAIuE,GACzCL,EAAmBnE,EAAUX,UAAU,EAAGiF,EAAIG,GAC9CL,EAAmBpE,EAAUX,UAAUiF,EAAIE,GAE/C,CACA,OAAyB,EAArBD,EAAY/E,QAAcO,EAASP,OAC9B,CACLyE,EACAC,EACAC,EACAC,EACAG,GAGK,IAEX,CAGA,IAWIpE,EAaAE,EAASC,EAASC,EAASC,EAxB3BkE,EAAMV,EACRjE,EACAC,EACAiB,KAAKC,KAAKnB,EAASP,OAAS,IAG1BmF,EAAMX,EACRjE,EACAC,EACAiB,KAAKC,KAAKnB,EAASP,OAAS,IAG9B,IAAKkF,IAAQC,EACX,OAAO,KAOPxE,EANUwE,EAEAD,GAILA,EAAI,GAAGlF,OAASmF,EAAI,GAAGnF,OAASkF,EAHhCC,EAFAD,EAUH/F,EAAMa,OAASZ,EAAMY,QACvBa,EAAUF,EAAG,GACbG,EAAUH,EAAG,GACbI,EAAUJ,EAAG,GACbK,EAAUL,EAAG,KAEbI,EAAUJ,EAAG,GACbK,EAAUL,EAAG,GACbE,EAAUF,EAAG,GACbG,EAAUH,EAAG,IAEf,IAAIM,EAAaN,EAAG,GACpB,MAAO,CAACE,EAASC,EAASC,EAASC,EAASC,EAC9C,CAMA,SAASX,EAAqBL,GAC5B,IAAImF,GAAU,EACVC,EAAa,GACbC,EAAmB,EAEnBC,EAAe,KAEfC,EAAU,EAEVC,EAAqB,EACrBC,EAAoB,EAEpBC,EAAqB,EACrBC,EAAoB,EACxB,MAAOJ,EAAUvF,EAAMD,OACjBC,EAAMuF,GAAS,IAAMvG,GAEvBoG,EAAWC,KAAsBE,EACjCC,EAAqBE,EACrBD,EAAoBE,EACpBD,EAAqB,EACrBC,EAAoB,EACpBL,EAAetF,EAAMuF,GAAS,KAG1BvF,EAAMuF,GAAS,IAAMxG,EACvB2G,GAAsB1F,EAAMuF,GAAS,GAAGxF,OAExC4F,GAAqB3F,EAAMuF,GAAS,GAAGxF,OAKvCuF,GACAA,EAAavF,QACXyB,KAAKoE,IAAIJ,EAAoBC,IAC/BH,EAAavF,QAAUyB,KAAKoE,IAAIF,EAAoBC,KAGpD3F,EAAM6F,OAAOT,EAAWC,EAAmB,GAAI,EAAG,CAChDvG,EACAwG,IAGFtF,EAAMoF,EAAWC,EAAmB,GAAK,GAAG,GAAKtG,EAEjDsG,IAEAA,IACAE,EAAUF,EAAmB,EAAID,EAAWC,EAAmB,IAAM,EACrEG,EAAqB,EACrBC,EAAoB,EACpBC,EAAqB,EACrBC,EAAoB,EACpBL,EAAe,KACfH,GAAU,IAGdI,IAIEJ,GACF/E,EAAkBJ,GAEpB8F,EAA6B9F,GAQ7BuF,EAAU,EACV,MAAOA,EAAUvF,EAAMD,OAAQ,CAC7B,GACEC,EAAMuF,EAAU,GAAG,IAAMzG,GACzBkB,EAAMuF,GAAS,IAAMxG,EACrB,CACA,IAAIgH,EAAW/F,EAAMuF,EAAU,GAAG,GAC9BS,EAAYhG,EAAMuF,GAAS,GAC3BU,EAAkBlC,EAAoBgC,EAAUC,GAChDE,EAAkBnC,EAAoBiC,EAAWD,GACjDE,GAAmBC,GAEnBD,GAAmBF,EAAShG,OAAS,GACrCkG,GAAmBD,EAAUjG,OAAS,KAGtCC,EAAM6F,OAAON,EAAS,EAAG,CACvBvG,EACAgH,EAAUpG,UAAU,EAAGqG,KAEzBjG,EAAMuF,EAAU,GAAG,GAAKQ,EAASnG,UAC/B,EACAmG,EAAShG,OAASkG,GAEpBjG,EAAMuF,EAAU,GAAG,GAAKS,EAAUpG,UAAUqG,GAC5CV,MAIAW,GAAmBH,EAAShG,OAAS,GACrCmG,GAAmBF,EAAUjG,OAAS,KAItCC,EAAM6F,OAAON,EAAS,EAAG,CACvBvG,EACA+G,EAASnG,UAAU,EAAGsG,KAExBlG,EAAMuF,EAAU,GAAG,GAAKxG,EACxBiB,EAAMuF,EAAU,GAAG,GAAKS,EAAUpG,UAChC,EACAoG,EAAUjG,OAASmG,GAErBlG,EAAMuF,EAAU,GAAG,GAAKzG,EACxBkB,EAAMuF,EAAU,GAAG,GAAKQ,EAASnG,UAAUsG,GAC3CX,KAGJA,GACF,CACAA,GACF,CACF,CAEA,IAAIY,EAAwB,eACxBC,EAAmB,KACnBC,EAAkB,SAClBC,EAAqB,WACrBC,EAAuB,cAQ3B,SAAST,EAA6B9F,GAWpC,SAASwG,EAA2BC,EAAKC,GACvC,IAAKD,IAAQC,EAEX,OAAO,EAQT,IAAIC,EAAQF,EAAI9D,OAAO8D,EAAI1G,OAAS,GAChC6G,EAAQF,EAAI/D,OAAO,GACnBkE,EAAmBF,EAAMG,MAAMX,GAC/BY,EAAmBH,EAAME,MAAMX,GAC/Ba,EAAcH,GAAoBF,EAAMG,MAAMV,GAC9Ca,EAAcF,GAAoBH,EAAME,MAAMV,GAC9Cc,EAAaF,GAAeL,EAAMG,MAAMT,GACxCc,EAAaF,GAAeL,EAAME,MAAMT,GACxCe,EAAaF,GAAcT,EAAIK,MAAMR,GACrCe,EAAaF,GAAcT,EAAII,MAAMP,GAEzC,OAAIa,GAAcC,EAET,EACEH,GAAcC,EAEhB,EACEN,IAAqBG,GAAeC,EAEtC,EACED,GAAeC,EAEjB,EACEJ,GAAoBE,EAEtB,EAEF,CACT,CAEA,IAAIxB,EAAU,EAEd,MAAOA,EAAUvF,EAAMD,OAAS,EAAG,CACjC,GACEC,EAAMuF,EAAU,GAAG,IAAMvG,GACzBgB,EAAMuF,EAAU,GAAG,IAAMvG,EACzB,CAEA,IAAIsI,EAAYtH,EAAMuF,EAAU,GAAG,GAC/BgC,EAAOvH,EAAMuF,GAAS,GACtBiC,EAAYxH,EAAMuF,EAAU,GAAG,GAG/BkC,EAAe5H,EAAkByH,EAAWC,GAChD,GAAIE,EAAc,CAChB,IAAIC,EAAeH,EAAK3H,UAAU2H,EAAKxH,OAAS0H,GAChDH,EAAYA,EAAU1H,UAAU,EAAG0H,EAAUvH,OAAS0H,GACtDF,EAAOG,EAAeH,EAAK3H,UAAU,EAAG2H,EAAKxH,OAAS0H,GACtDD,EAAYE,EAAeF,CAC7B,CAGA,IAAIG,EAAgBL,EAChBM,EAAWL,EACXM,EAAgBL,EAChBM,EACFtB,EAA2Bc,EAAWC,GACtCf,EAA2Be,EAAMC,GACnC,MAAOD,EAAK5E,OAAO,KAAO6E,EAAU7E,OAAO,GAAI,CAC7C2E,GAAaC,EAAK5E,OAAO,GACzB4E,EAAOA,EAAK3H,UAAU,GAAK4H,EAAU7E,OAAO,GAC5C6E,EAAYA,EAAU5H,UAAU,GAChC,IAAImI,EACFvB,EAA2Bc,EAAWC,GACtCf,EAA2Be,EAAMC,GAE/BO,GAASD,IACXA,EAAYC,EACZJ,EAAgBL,EAChBM,EAAWL,EACXM,EAAgBL,EAEpB,CAEIxH,EAAMuF,EAAU,GAAG,IAAMoC,IAEvBA,EACF3H,EAAMuF,EAAU,GAAG,GAAKoC,GAExB3H,EAAM6F,OAAON,EAAU,EAAG,GAC1BA,KAEFvF,EAAMuF,GAAS,GAAKqC,EAChBC,EACF7H,EAAMuF,EAAU,GAAG,GAAKsC,GAExB7H,EAAM6F,OAAON,EAAU,EAAG,GAC1BA,KAGN,CACAA,GACF,CACF,CAQA,SAASnF,EAAkBJ,EAAOgI,GAChChI,EAAMG,KAAK,CAACnB,EAAY,KACxB,IAKIS,EALA8F,EAAU,EACV0C,EAAe,EACfC,EAAe,EACfC,EAAc,GACdC,EAAc,GAElB,MAAO7C,EAAUvF,EAAMD,OACrB,GAAIwF,EAAUvF,EAAMD,OAAS,IAAMC,EAAMuF,GAAS,GAChDvF,EAAM6F,OAAON,EAAS,QAGxB,OAAQvF,EAAMuF,GAAS,IACrB,KAAKxG,EACHmJ,IACAE,GAAepI,EAAMuF,GAAS,GAC9BA,IACA,MACF,KAAKzG,EACHmJ,IACAE,GAAenI,EAAMuF,GAAS,GAC9BA,IACA,MACF,KAAKvG,EACH,IAAIqJ,EAAoB9C,EAAU2C,EAAeD,EAAe,EAChE,GAAID,EAAa,CAWf,GACEK,GAAqB,GACrBC,EAAqBtI,EAAMqI,GAAmB,IAC9C,CACA,IAAIE,EAAQvI,EAAMqI,GAAmB,GAAGjE,OAAO,GAO/C,GANApE,EAAMqI,GAAmB,GAAKrI,EAAMqI,GAAmB,GAAGjE,MACxD,GACC,GAEH+D,EAAcI,EAAQJ,EACtBC,EAAcG,EAAQH,GACjBpI,EAAMqI,GAAmB,GAAI,CAEhCrI,EAAM6F,OAAOwC,EAAmB,GAChC9C,IACA,IAAIiD,EAAIH,EAAoB,EACxBrI,EAAMwI,IAAMxI,EAAMwI,GAAG,KAAOzJ,IAC9BmJ,IACAE,EAAcpI,EAAMwI,GAAG,GAAKJ,EAC5BI,KAEExI,EAAMwI,IAAMxI,EAAMwI,GAAG,KAAO1J,IAC9BmJ,IACAE,EAAcnI,EAAMwI,GAAG,GAAKL,EAC5BK,KAEFH,EAAoBG,CACtB,CACF,CACA,GAAIC,EAAqBzI,EAAMuF,GAAS,IAAK,CACvCgD,EAAQvI,EAAMuF,GAAS,GAAG5C,OAAO,GACrC3C,EAAMuF,GAAS,GAAKvF,EAAMuF,GAAS,GAAGnB,MAAM,GAC5C+D,GAAeI,EACfH,GAAeG,CACjB,CACF,CACA,GAAIhD,EAAUvF,EAAMD,OAAS,IAAMC,EAAMuF,GAAS,GAAI,CAEpDvF,EAAM6F,OAAON,EAAS,GACtB,KACF,CACA,GAAI4C,EAAYpI,OAAS,GAAKqI,EAAYrI,OAAS,EAAG,CAEhDoI,EAAYpI,OAAS,GAAKqI,EAAYrI,OAAS,IAEjDN,EAAeC,EAAkB0I,EAAaD,GACzB,IAAjB1I,IACE4I,GAAqB,EACvBrI,EAAMqI,GAAmB,IAAMD,EAAYxI,UACzC,EACAH,IAGFO,EAAM6F,OAAO,EAAG,EAAG,CACjB7G,EACAoJ,EAAYxI,UAAU,EAAGH,KAE3B8F,KAEF6C,EAAcA,EAAYxI,UAAUH,GACpC0I,EAAcA,EAAYvI,UAAUH,IAGtCA,EAAeI,EAAkBuI,EAAaD,GACzB,IAAjB1I,IACFO,EAAMuF,GAAS,GACb6C,EAAYxI,UAAUwI,EAAYrI,OAASN,GAC3CO,EAAMuF,GAAS,GACjB6C,EAAcA,EAAYxI,UACxB,EACAwI,EAAYrI,OAASN,GAEvB0I,EAAcA,EAAYvI,UACxB,EACAuI,EAAYpI,OAASN,KAK3B,IAAIiJ,EAAIR,EAAeD,EACI,IAAvBE,EAAYpI,QAAuC,IAAvBqI,EAAYrI,QAC1CC,EAAM6F,OAAON,EAAUmD,EAAGA,GAC1BnD,GAAoBmD,GACY,IAAvBP,EAAYpI,QACrBC,EAAM6F,OAAON,EAAUmD,EAAGA,EAAG,CAAC3J,EAAaqJ,IAC3C7C,EAAUA,EAAUmD,EAAI,GACQ,IAAvBN,EAAYrI,QACrBC,EAAM6F,OAAON,EAAUmD,EAAGA,EAAG,CAAC5J,EAAaqJ,IAC3C5C,EAAUA,EAAUmD,EAAI,IAExB1I,EAAM6F,OACJN,EAAUmD,EACVA,EACA,CAAC5J,EAAaqJ,GACd,CAACpJ,EAAaqJ,IAEhB7C,EAAUA,EAAUmD,EAAI,EAE5B,CACgB,IAAZnD,GAAiBvF,EAAMuF,EAAU,GAAG,KAAOvG,GAE7CgB,EAAMuF,EAAU,GAAG,IAAMvF,EAAMuF,GAAS,GACxCvF,EAAM6F,OAAON,EAAS,IAEtBA,IAEF2C,EAAe,EACfD,EAAe,EACfE,EAAc,GACdC,EAAc,GACd,MAG6B,KAA/BpI,EAAMA,EAAMD,OAAS,GAAG,IAC1BC,EAAM2I,MAMR,IAAIxD,GAAU,EACdI,EAAU,EAEV,MAAOA,EAAUvF,EAAMD,OAAS,EAE5BC,EAAMuF,EAAU,GAAG,KAAOvG,GAC1BgB,EAAMuF,EAAU,GAAG,KAAOvG,IAIxBgB,EAAMuF,GAAS,GAAG3F,UAChBI,EAAMuF,GAAS,GAAGxF,OAASC,EAAMuF,EAAU,GAAG,GAAGxF,UAC7CC,EAAMuF,EAAU,GAAG,IAGzBvF,EAAMuF,GAAS,GACbvF,EAAMuF,EAAU,GAAG,GACnBvF,EAAMuF,GAAS,GAAG3F,UAChB,EACAI,EAAMuF,GAAS,GAAGxF,OAASC,EAAMuF,EAAU,GAAG,GAAGxF,QAErDC,EAAMuF,EAAU,GAAG,GAAKvF,EAAMuF,EAAU,GAAG,GAAKvF,EAAMuF,EAAU,GAAG,GACnEvF,EAAM6F,OAAON,EAAU,EAAG,GAC1BJ,GAAU,GAEVnF,EAAMuF,GAAS,GAAG3F,UAAU,EAAGI,EAAMuF,EAAU,GAAG,GAAGxF,SACrDC,EAAMuF,EAAU,GAAG,KAGnBvF,EAAMuF,EAAU,GAAG,IAAMvF,EAAMuF,EAAU,GAAG,GAC5CvF,EAAMuF,GAAS,GACbvF,EAAMuF,GAAS,GAAG3F,UAAUI,EAAMuF,EAAU,GAAG,GAAGxF,QAClDC,EAAMuF,EAAU,GAAG,GACrBvF,EAAM6F,OAAON,EAAU,EAAG,GAC1BJ,GAAU,IAGdI,IAGEJ,GACF/E,EAAkBJ,EAAOgI,EAE7B,CAEA,SAASnE,EAAwB+E,GAC/B,OAAOA,GAAY,OAAUA,GAAY,KAC3C,CAEA,SAAStE,EAAsBsE,GAC7B,OAAOA,GAAY,OAAUA,GAAY,KAC3C,CAEA,SAASH,EAAqBI,GAC5B,OAAOvE,EAAsBuE,EAAI/E,WAAW,GAC9C,CAEA,SAASwE,EAAqBO,GAC5B,OAAOhF,EAAwBgF,EAAI/E,WAAW+E,EAAI9I,OAAS,GAC7D,CAEA,SAAS+I,EAAoBC,GAE3B,IADA,IAAIC,EAAM,GACDxI,EAAI,EAAGA,EAAIuI,EAAOhJ,OAAQS,IAC7BuI,EAAOvI,GAAG,GAAGT,OAAS,GACxBiJ,EAAI7I,KAAK4I,EAAOvI,IAGpB,OAAOwI,CACT,CAEA,SAASC,EAAiBC,EAAQC,EAAWC,EAAWC,GACtD,OAAIf,EAAqBY,IAAWT,EAAqBY,GAChD,KAEFP,EAAoB,CACzB,CAAC9J,EAAYkK,GACb,CAACpK,EAAaqK,GACd,CAACpK,EAAaqK,GACd,CAACpK,EAAYqK,IAEjB,CAEA,SAAS7J,EAAsB8J,EAASC,EAASnK,GAE/C,IAAIoK,EACoB,kBAAfpK,EACH,CAAEqK,MAAOrK,EAAYW,OAAQ,GAC7BX,EAAWoK,SACbE,EAAiC,kBAAftK,EAA0B,KAAOA,EAAWsK,SAK9DC,EAAYL,EAAQvJ,OACpB6J,EAAYL,EAAQxJ,OACxB,GAAwB,IAApByJ,EAASzJ,SAA8B,OAAb2J,GAAyC,IAApBA,EAAS3J,QAAe,CAEzE,IAAI8J,EAAYL,EAASC,MACrBK,EAAYR,EAAQlF,MAAM,EAAGyF,GAC7BE,EAAWT,EAAQlF,MAAMyF,GACzBG,EAAiBN,EAAWA,EAASD,MAAQ,KAG3CQ,EAAYJ,EAAYD,EAAYD,EACxC,IAAuB,OAAnBK,GAA2BA,IAAmBC,MAG9CA,EAAY,GAAKA,EAAYL,GAAjC,CAGA,IAAIM,EAAYX,EAAQnF,MAAM,EAAG6F,GAC7BE,EAAWZ,EAAQnF,MAAM6F,GAC7B,GAAIE,IAAaJ,EAAjB,CAGA,IAAIhF,EAAevD,KAAKiC,IAAIoG,EAAWI,GACnCG,EAAYN,EAAU1F,MAAM,EAAGW,GAC/BsF,EAAYH,EAAU9F,MAAM,EAAGW,GACnC,GAAIqF,IAAcC,EAAlB,CAGA,IAAIlB,EAAYW,EAAU1F,MAAMW,GAC5BqE,EAAYc,EAAU9F,MAAMW,GAChC,OAAOkE,EAAiBmB,EAAWjB,EAAWC,EAAWW,EAHzD,CANA,CALA,CAkBA,GAAuB,OAAnBC,GAA2BA,IAAmBH,EAAlD,CAGA,IAAIS,EAAST,EACTK,EAAYX,EAAQnF,MAAM,EAAGkG,GAC7BH,EAAWZ,EAAQnF,MAAMkG,GAC7B,GAAIJ,IAAcJ,EAAlB,CAGA,IAAI9E,EAAexD,KAAKiC,IAAIkG,EAAYW,EAAQV,EAAYU,GACxDC,EAAYR,EAAS3F,MAAM2F,EAAShK,OAASiF,GAC7CwF,EAAYL,EAAS/F,MAAM+F,EAASpK,OAASiF,GACjD,GAAIuF,IAAcC,EAAlB,CAGIrB,EAAYY,EAAS3F,MAAM,EAAG2F,EAAShK,OAASiF,GAChDoE,EAAYe,EAAS/F,MAAM,EAAG+F,EAASpK,OAASiF,GACpD,OAAOiE,EAAiBa,EAAWX,EAAWC,EAAWmB,EAHzD,CANA,CANA,CAiBJ,CACA,GAAIf,EAASzJ,OAAS,GAAK2J,GAAgC,IAApBA,EAAS3J,OAAc,CAGtDqK,EAAYd,EAAQlF,MAAM,EAAGoF,EAASC,OACtCc,EAAYjB,EAAQlF,MAAMoF,EAASC,MAAQD,EAASzJ,QACpDgF,EAAeqF,EAAUrK,OACzBiF,EAAeuF,EAAUxK,OAC7B,KAAI6J,EAAY7E,EAAeC,GAA/B,CAGIqF,EAAYd,EAAQnF,MAAM,EAAGW,GAC7ByF,EAAYjB,EAAQnF,MAAMwF,EAAY5E,GAC1C,GAAIoF,IAAcC,GAAaE,IAAcC,EAA7C,CAGIrB,EAAYG,EAAQlF,MAAMW,EAAc4E,EAAY3E,GACpDoE,EAAYG,EAAQnF,MAAMW,EAAc6E,EAAY5E,GACxD,OAAOiE,EAAiBmB,EAAWjB,EAAWC,EAAWmB,EAHzD,CALA,CAUJ,CAEA,OAAO,IACT,CAEA,SAASE,EAAKvL,EAAOC,EAAOC,EAAYC,GAGtC,OAAOJ,EAAUC,EAAOC,EAAOC,EAAYC,GAAS,EACtD,CAEAoL,EAAKC,OAAS3L,EACd0L,EAAKE,OAAS7L,EACd2L,EAAKG,MAAQ5L,EAEb6L,EAAOC,QAAUL,C,4TCvmCjB,IAAIM,EAAmB,IAGnBC,EAAiB,4BAGjBC,EAAmB,iBAGnBC,EAAU,qBACVC,EAAW,iBACXC,EAAU,mBACVC,EAAU,gBACVC,EAAW,iBACXC,EAAU,oBACVC,EAAS,6BACTC,EAAS,eACTC,EAAY,kBACZC,EAAY,kBACZC,EAAa,mBACbC,EAAY,kBACZC,EAAS,eACTC,EAAY,kBACZC,EAAY,kBACZC,EAAa,mBAEbC,EAAiB,uBACjBC,EAAc,oBACdC,EAAa,wBACbC,EAAa,wBACbC,EAAU,qBACVC,EAAW,sBACXC,EAAW,sBACXC,EAAW,sBACXC,EAAkB,6BAClBC,EAAY,uBACZC,EAAY,uBAMZC,EAAe,sBAGfC,EAAU,OAGVC,EAAe,8BAGfC,EAAW,mBAGXC,EAAgB,CAAC,EACrBA,EAAc/B,GAAW+B,EAAc9B,GACvC8B,EAAcf,GAAkBe,EAAcd,GAC9Cc,EAAc7B,GAAW6B,EAAc5B,GACvC4B,EAAcb,GAAca,EAAcZ,GAC1CY,EAAcX,GAAWW,EAAcV,GACvCU,EAAcT,GAAYS,EAAcxB,GACxCwB,EAAcvB,GAAauB,EAActB,GACzCsB,EAAcpB,GAAaoB,EAAcnB,GACzCmB,EAAclB,GAAakB,EAAcjB,GACzCiB,EAAcR,GAAYQ,EAAcP,GACxCO,EAAcN,GAAaM,EAAcL,IAAa,EACtDK,EAAc3B,GAAY2B,EAAc1B,GACxC0B,EAAchB,IAAc,EAG5B,IAAIiB,EAA8B,WAAJ,qBAANC,EAAAA,EAAM,YAAAC,EAAND,EAAAA,KAAsBA,EAAAA,GAAUA,EAAAA,EAAOE,SAAWA,QAAUF,EAAAA,EAGhFG,EAA0B,WAAJ,qBAAJC,KAAI,YAAAH,EAAJG,QAAoBA,MAAQA,KAAKF,SAAWA,QAAUE,KAGxEC,EAAON,GAAcI,GAAYG,SAAS,cAATA,GAGjCC,EAAgC,UAAJN,EAAPtC,IAAuBA,IAAYA,EAAQ6C,UAAY7C,EAG5E8C,EAAaF,GAAgC,UAAJN,EAANvC,IAAsBA,IAAWA,EAAO8C,UAAY9C,EAGvFgD,EAAgBD,GAAcA,EAAW9C,UAAY4C,EAUzD,SAASI,EAAYC,EAAKC,GAGxB,OADAD,EAAIE,IAAID,EAAK,GAAIA,EAAK,IACfD,CACT,CAUA,SAASG,EAAYD,EAAKE,GAGxB,OADAF,EAAIG,IAAID,GACDF,CACT,CAWA,SAASI,EAAUC,EAAOC,GACxB,IAAI9E,GAAS,EACT1J,EAASuO,EAAQA,EAAMvO,OAAS,EAEpC,QAAS0J,EAAQ1J,EACf,IAA6C,IAAzCwO,EAASD,EAAM7E,GAAQA,EAAO6E,GAChC,MAGJ,OAAOA,CACT,CAUA,SAASE,EAAUF,EAAOG,GACxB,IAAIhF,GAAS,EACT1J,EAAS0O,EAAO1O,OAChB2O,EAASJ,EAAMvO,OAEnB,QAAS0J,EAAQ1J,EACfuO,EAAMI,EAASjF,GAASgF,EAAOhF,GAEjC,OAAO6E,CACT,CAcA,SAASK,EAAYL,EAAOC,EAAUK,EAAaC,GACjD,IAAIpF,GAAS,EACT1J,EAASuO,EAAQA,EAAMvO,OAAS,EAEhC8O,GAAa9O,IACf6O,EAAcN,IAAQ7E,IAExB,QAASA,EAAQ1J,EACf6O,EAAcL,EAASK,EAAaN,EAAM7E,GAAQA,EAAO6E,GAE3D,OAAOM,CACT,CAWA,SAASE,EAAUpG,EAAG6F,GACpB,IAAI9E,GAAS,EACTsF,EAASlN,MAAM6G,GAEnB,QAASe,EAAQf,EACfqG,EAAOtF,GAAS8E,EAAS9E,GAE3B,OAAOsF,CACT,CAUA,SAASC,EAASC,EAAQC,GACxB,OAAiB,MAAVD,OAAiBE,EAAYF,EAAOC,EAC7C,CASA,SAASE,EAAajB,GAGpB,IAAIY,GAAS,EACb,GAAa,MAATZ,GAA0C,mBAAlBA,EAAMkB,SAChC,IACEN,KAAYZ,EAAQ,GACtB,CAAE,MAAOmB,GAAI,CAEf,OAAOP,CACT,CASA,SAASQ,EAAWxB,GAClB,IAAItE,GAAS,EACTsF,EAASlN,MAAMkM,EAAIyB,MAKvB,OAHAzB,EAAI0B,SAAQ,SAAStB,EAAOe,GAC1BH,IAAStF,GAAS,CAACyF,EAAKf,EAC1B,IACOY,CACT,CAUA,SAASW,GAAQC,EAAMC,GACrB,OAAO,SAASC,GACd,OAAOF,EAAKC,EAAUC,GACxB,CACF,CASA,SAASC,GAAW7B,GAClB,IAAIxE,GAAS,EACTsF,EAASlN,MAAMoM,EAAIuB,MAKvB,OAHAvB,EAAIwB,SAAQ,SAAStB,GACnBY,IAAStF,GAAS0E,CACpB,IACOY,CACT,CAGA,IAAIgB,GAAalO,MAAMmO,UACnBC,GAAYxC,SAASuC,UACrBE,GAAc7C,OAAO2C,UAGrBG,GAAa3C,EAAK,sBAGlB4C,GAAc,WAChB,IAAIC,EAAM,SAASC,KAAKH,IAAcA,GAAWI,MAAQJ,GAAWI,KAAKC,UAAY,IACrF,OAAOH,EAAO,iBAAmBA,EAAO,EAC1C,CAHkB,GAMdI,GAAeR,GAAUZ,SAGzBqB,GAAiBR,GAAYQ,eAO7BC,GAAiBT,GAAYb,SAG7BuB,GAAaC,OAAO,IACtBJ,GAAaK,KAAKJ,IAAgBK,QAAQlE,EAAc,QACvDkE,QAAQ,yDAA0D,SAAW,KAI5EC,GAASnD,EAAgBL,EAAKwD,YAAS7B,EACvC8B,GAASzD,EAAKyD,OACdC,GAAa1D,EAAK0D,WAClBC,GAAezB,GAAQrC,OAAO+D,eAAgB/D,QAC9CgE,GAAehE,OAAOiE,OACtBC,GAAuBrB,GAAYqB,qBACnC1L,GAASkK,GAAWlK,OAGpB2L,GAAmBnE,OAAOoE,sBAC1BC,GAAiBV,GAASA,GAAOW,cAAWxC,EAC5CyC,GAAalC,GAAQrC,OAAOkD,KAAMlD,QAGlCwE,GAAWC,GAAUtE,EAAM,YAC3BuE,GAAMD,GAAUtE,EAAM,OACtBwE,GAAUF,GAAUtE,EAAM,WAC1ByE,GAAMH,GAAUtE,EAAM,OACtB0E,GAAUJ,GAAUtE,EAAM,WAC1B2E,GAAeL,GAAUzE,OAAQ,UAGjC+E,GAAqBC,GAASR,IAC9BS,GAAgBD,GAASN,IACzBQ,GAAoBF,GAASL,IAC7BQ,GAAgBH,GAASJ,IACzBQ,GAAoBJ,GAASH,IAG7BQ,GAAczB,GAASA,GAAOjB,eAAYb,EAC1CwD,GAAgBD,GAAcA,GAAYE,aAAUzD,EASxD,SAAS0D,GAAKC,GACZ,IAAIrJ,GAAS,EACT1J,EAAS+S,EAAUA,EAAQ/S,OAAS,EAExCgT,KAAKC,QACL,QAASvJ,EAAQ1J,EAAQ,CACvB,IAAIkT,EAAQH,EAAQrJ,GACpBsJ,KAAK9E,IAAIgF,EAAM,GAAIA,EAAM,GAC3B,CACF,CASA,SAASC,KACPH,KAAKI,SAAWhB,GAAeA,GAAa,MAAQ,CAAC,CACvD,CAYA,SAASiB,GAAWlE,GAClB,OAAO6D,KAAKM,IAAInE,WAAe6D,KAAKI,SAASjE,EAC/C,CAWA,SAASoE,GAAQpE,GACf,IAAIqE,EAAOR,KAAKI,SAChB,GAAIhB,GAAc,CAChB,IAAIpD,EAASwE,EAAKrE,GAClB,OAAOH,IAAW/D,OAAiBmE,EAAYJ,CACjD,CACA,OAAO2B,GAAeI,KAAKyC,EAAMrE,GAAOqE,EAAKrE,QAAOC,CACtD,CAWA,SAASqE,GAAQtE,GACf,IAAIqE,EAAOR,KAAKI,SAChB,OAAOhB,QAA6BhD,IAAdoE,EAAKrE,GAAqBwB,GAAeI,KAAKyC,EAAMrE,EAC5E,CAYA,SAASuE,GAAQvE,EAAKf,GACpB,IAAIoF,EAAOR,KAAKI,SAEhB,OADAI,EAAKrE,GAAQiD,SAA0BhD,IAAVhB,EAAuBnD,EAAiBmD,EAC9D4E,IACT,CAgBA,SAASW,GAAUZ,GACjB,IAAIrJ,GAAS,EACT1J,EAAS+S,EAAUA,EAAQ/S,OAAS,EAExCgT,KAAKC,QACL,QAASvJ,EAAQ1J,EAAQ,CACvB,IAAIkT,EAAQH,EAAQrJ,GACpBsJ,KAAK9E,IAAIgF,EAAM,GAAIA,EAAM,GAC3B,CACF,CASA,SAASU,KACPZ,KAAKI,SAAW,EAClB,CAWA,SAASS,GAAgB1E,GACvB,IAAIqE,EAAOR,KAAKI,SACZ1J,EAAQoK,GAAaN,EAAMrE,GAE/B,GAAIzF,EAAQ,EACV,OAAO,EAET,IAAIqK,EAAYP,EAAKxT,OAAS,EAM9B,OALI0J,GAASqK,EACXP,EAAK5K,MAEL9C,GAAOiL,KAAKyC,EAAM9J,EAAO,IAEpB,CACT,CAWA,SAASsK,GAAa7E,GACpB,IAAIqE,EAAOR,KAAKI,SACZ1J,EAAQoK,GAAaN,EAAMrE,GAE/B,OAAOzF,EAAQ,OAAI0F,EAAYoE,EAAK9J,GAAO,EAC7C,CAWA,SAASuK,GAAa9E,GACpB,OAAO2E,GAAad,KAAKI,SAAUjE,IAAQ,CAC7C,CAYA,SAAS+E,GAAa/E,EAAKf,GACzB,IAAIoF,EAAOR,KAAKI,SACZ1J,EAAQoK,GAAaN,EAAMrE,GAO/B,OALIzF,EAAQ,EACV8J,EAAKpT,KAAK,CAAC+O,EAAKf,IAEhBoF,EAAK9J,GAAO,GAAK0E,EAEZ4E,IACT,CAgBA,SAASmB,GAASpB,GAChB,IAAIrJ,GAAS,EACT1J,EAAS+S,EAAUA,EAAQ/S,OAAS,EAExCgT,KAAKC,QACL,QAASvJ,EAAQ1J,EAAQ,CACvB,IAAIkT,EAAQH,EAAQrJ,GACpBsJ,KAAK9E,IAAIgF,EAAM,GAAIA,EAAM,GAC3B,CACF,CASA,SAASkB,KACPpB,KAAKI,SAAW,CACd,KAAQ,IAAIN,GACZ,IAAO,IAAKd,IAAO2B,IACnB,OAAU,IAAIb,GAElB,CAWA,SAASuB,GAAelF,GACtB,OAAOmF,GAAWtB,KAAM7D,GAAK,UAAUA,EACzC,CAWA,SAASoF,GAAYpF,GACnB,OAAOmF,GAAWtB,KAAM7D,GAAKqF,IAAIrF,EACnC,CAWA,SAASsF,GAAYtF,GACnB,OAAOmF,GAAWtB,KAAM7D,GAAKmE,IAAInE,EACnC,CAYA,SAASuF,GAAYvF,EAAKf,GAExB,OADAkG,GAAWtB,KAAM7D,GAAKjB,IAAIiB,EAAKf,GACxB4E,IACT,CAgBA,SAAS2B,GAAM5B,GACbC,KAAKI,SAAW,IAAIO,GAAUZ,EAChC,CASA,SAAS6B,KACP5B,KAAKI,SAAW,IAAIO,EACtB,CAWA,SAASkB,GAAY1F,GACnB,OAAO6D,KAAKI,SAAS,UAAUjE,EACjC,CAWA,SAAS2F,GAAS3F,GAChB,OAAO6D,KAAKI,SAASoB,IAAIrF,EAC3B,CAWA,SAAS4F,GAAS5F,GAChB,OAAO6D,KAAKI,SAASE,IAAInE,EAC3B,CAYA,SAAS6F,GAAS7F,EAAKf,GACrB,IAAI6G,EAAQjC,KAAKI,SACjB,GAAI6B,aAAiBtB,GAAW,CAC9B,IAAIuB,EAAQD,EAAM7B,SAClB,IAAKpB,IAAQkD,EAAMlV,OAASgL,EAAmB,EAE7C,OADAkK,EAAM9U,KAAK,CAAC+O,EAAKf,IACV4E,KAETiC,EAAQjC,KAAKI,SAAW,IAAIe,GAASe,EACvC,CAEA,OADAD,EAAM/G,IAAIiB,EAAKf,GACR4E,IACT,CAiBA,SAASmC,GAAc/G,EAAOgH,GAG5B,IAAIpG,EAAUqG,GAAQjH,IAAUkH,GAAYlH,GACxCW,EAAUX,EAAMpO,OAAQuV,QACxB,GAEAvV,EAASgP,EAAOhP,OAChBwV,IAAgBxV,EAEpB,IAAK,IAAImP,KAAOf,GACTgH,IAAazE,GAAeI,KAAK3C,EAAOe,IACvCqG,IAAuB,UAAPrG,GAAmBsG,GAAQtG,EAAKnP,KACpDgP,EAAO5O,KAAK+O,GAGhB,OAAOH,CACT,CAYA,SAAS0G,GAAYxG,EAAQC,EAAKf,GAChC,IAAIuH,EAAWzG,EAAOC,GAChBwB,GAAeI,KAAK7B,EAAQC,IAAQyG,GAAGD,EAAUvH,UACxCgB,IAAVhB,GAAyBe,KAAOD,KACnCA,EAAOC,GAAOf,EAElB,CAUA,SAAS0F,GAAavF,EAAOY,GAC3B,IAAInP,EAASuO,EAAMvO,OACnB,MAAOA,IACL,GAAI4V,GAAGrH,EAAMvO,GAAQ,GAAImP,GACvB,OAAOnP,EAGX,OAAQ,CACV,CAWA,SAAS6V,GAAW3G,EAAQ4G,GAC1B,OAAO5G,GAAU6G,GAAWD,EAAQtF,GAAKsF,GAAS5G,EACpD,CAgBA,SAAS8G,GAAU5H,EAAO6H,EAAQC,EAAQC,EAAYhH,EAAKD,EAAQkH,GACjE,IAAIpH,EAIJ,GAHImH,IACFnH,EAASE,EAASiH,EAAW/H,EAAOe,EAAKD,EAAQkH,GAASD,EAAW/H,SAExDgB,IAAXJ,EACF,OAAOA,EAET,IAAKqH,GAASjI,GACZ,OAAOA,EAET,IAAIkI,EAAQjB,GAAQjH,GACpB,GAAIkI,GAEF,GADAtH,EAASuH,GAAenI,IACnB6H,EACH,OAAOO,GAAUpI,EAAOY,OAErB,CACL,IAAIyH,EAAMC,GAAOtI,GACbuI,EAASF,GAAOjL,GAAWiL,GAAOhL,EAEtC,GAAImG,GAASxD,GACX,OAAOwI,GAAYxI,EAAO6H,GAE5B,GAAIQ,GAAO7K,GAAa6K,GAAOtL,GAAYwL,IAAWzH,EAAS,CAC7D,GAAIG,EAAajB,GACf,OAAOc,EAASd,EAAQ,CAAC,EAG3B,GADAY,EAAS6H,GAAgBF,EAAS,CAAC,EAAIvI,IAClC6H,EACH,OAAOa,GAAY1I,EAAOyH,GAAW7G,EAAQZ,GAEjD,KAAO,CACL,IAAKlB,EAAcuJ,GACjB,OAAOvH,EAASd,EAAQ,CAAC,EAE3BY,EAAS+H,GAAe3I,EAAOqI,EAAKT,GAAWC,EACjD,CACF,CAEAG,IAAUA,EAAQ,IAAIzB,IACtB,IAAIqC,EAAUZ,EAAM5B,IAAIpG,GACxB,GAAI4I,EACF,OAAOA,EAIT,GAFAZ,EAAMlI,IAAIE,EAAOY,IAEZsH,EACH,IAAIW,EAAQf,EAASgB,GAAW9I,GAASoC,GAAKpC,GAUhD,OARAE,EAAU2I,GAAS7I,GAAO,SAAS+I,EAAUhI,GACvC8H,IACF9H,EAAMgI,EACNA,EAAW/I,EAAMe,IAGnBuG,GAAY1G,EAAQG,EAAK6G,GAAUmB,EAAUlB,EAAQC,EAAQC,EAAYhH,EAAKf,EAAOgI,GACvF,IACOpH,CACT,CAUA,SAASoI,GAAWC,GAClB,OAAOhB,GAASgB,GAAS/F,GAAa+F,GAAS,CAAC,CAClD,CAaA,SAASC,GAAepI,EAAQqI,EAAUC,GACxC,IAAIxI,EAASuI,EAASrI,GACtB,OAAOmG,GAAQnG,GAAUF,EAASP,EAAUO,EAAQwI,EAAYtI,GAClE,CASA,SAASuI,GAAWrJ,GAClB,OAAOwC,GAAeG,KAAK3C,EAC7B,CAUA,SAASsJ,GAAatJ,GACpB,IAAKiI,GAASjI,IAAUuJ,GAASvJ,GAC/B,OAAO,EAET,IAAIjK,EAAWyT,GAAWxJ,IAAUiB,EAAajB,GAAUyC,GAAa7D,EACxE,OAAO7I,EAAQ0T,KAAKvF,GAASlE,GAC/B,CASA,SAAS0J,GAAS5I,GAChB,IAAK6I,GAAY7I,GACf,OAAO2C,GAAW3C,GAEpB,IAAIF,EAAS,GACb,IAAK,IAAIG,KAAO7B,OAAO4B,GACjByB,GAAeI,KAAK7B,EAAQC,IAAe,eAAPA,GACtCH,EAAO5O,KAAK+O,GAGhB,OAAOH,CACT,CAUA,SAAS4H,GAAYoB,EAAQ/B,GAC3B,GAAIA,EACF,OAAO+B,EAAO3T,QAEhB,IAAI2K,EAAS,IAAIgJ,EAAOC,YAAYD,EAAOhY,QAE3C,OADAgY,EAAOE,KAAKlJ,GACLA,CACT,CASA,SAASmJ,GAAiBC,GACxB,IAAIpJ,EAAS,IAAIoJ,EAAYH,YAAYG,EAAYC,YAErD,OADA,IAAIlH,GAAWnC,GAAQd,IAAI,IAAIiD,GAAWiH,IACnCpJ,CACT,CAUA,SAASsJ,GAAcC,EAAUtC,GAC/B,IAAI+B,EAAS/B,EAASkC,GAAiBI,EAASP,QAAUO,EAASP,OACnE,OAAO,IAAIO,EAASN,YAAYD,EAAQO,EAASC,WAAYD,EAASF,WACxE,CAWA,SAASI,GAASzK,EAAKiI,EAAQyC,GAC7B,IAAInK,EAAQ0H,EAASyC,EAAUlJ,EAAWxB,IAAM,GAAQwB,EAAWxB,GACnE,OAAOY,EAAYL,EAAOR,EAAa,IAAIC,EAAIiK,YACjD,CASA,SAASU,GAAYC,GACnB,IAAI5J,EAAS,IAAI4J,EAAOX,YAAYW,EAAO9C,OAAQ/I,EAAQwD,KAAKqI,IAEhE,OADA5J,EAAO+E,UAAY6E,EAAO7E,UACnB/E,CACT,CAWA,SAAS6J,GAAS3K,EAAK+H,EAAQyC,GAC7B,IAAInK,EAAQ0H,EAASyC,EAAU3I,GAAW7B,IAAM,GAAQ6B,GAAW7B,GACnE,OAAOU,EAAYL,EAAOJ,EAAa,IAAID,EAAI+J,YACjD,CASA,SAASa,GAAYC,GACnB,OAAOnG,GAAgBtF,OAAOsF,GAAc7B,KAAKgI,IAAW,CAAC,CAC/D,CAUA,SAASC,GAAgBC,EAAYhD,GACnC,IAAI+B,EAAS/B,EAASkC,GAAiBc,EAAWjB,QAAUiB,EAAWjB,OACvE,OAAO,IAAIiB,EAAWhB,YAAYD,EAAQiB,EAAWT,WAAYS,EAAWjZ,OAC9E,CAUA,SAASwW,GAAUV,EAAQvH,GACzB,IAAI7E,GAAS,EACT1J,EAAS8V,EAAO9V,OAEpBuO,IAAUA,EAAQzM,MAAM9B,IACxB,QAAS0J,EAAQ1J,EACfuO,EAAM7E,GAASoM,EAAOpM,GAExB,OAAO6E,CACT,CAYA,SAASwH,GAAWD,EAAQmB,EAAO/H,EAAQiH,GACzCjH,IAAWA,EAAS,CAAC,GAErB,IAAIxF,GAAS,EACT1J,EAASiX,EAAMjX,OAEnB,QAAS0J,EAAQ1J,EAAQ,CACvB,IAAImP,EAAM8H,EAAMvN,GAEZwP,EAAW/C,EACXA,EAAWjH,EAAOC,GAAM2G,EAAO3G,GAAMA,EAAKD,EAAQ4G,QAClD1G,EAEJsG,GAAYxG,EAAQC,OAAkBC,IAAb8J,EAAyBpD,EAAO3G,GAAO+J,EAClE,CACA,OAAOhK,CACT,CAUA,SAAS4H,GAAYhB,EAAQ5G,GAC3B,OAAO6G,GAAWD,EAAQqD,GAAWrD,GAAS5G,EAChD,CASA,SAASgI,GAAWhI,GAClB,OAAOoI,GAAepI,EAAQsB,GAAM2I,GACtC,CAUA,SAAS7E,GAAWtG,EAAKmB,GACvB,IAAIqE,EAAOxF,EAAIoF,SACf,OAAOgG,GAAUjK,GACbqE,EAAmB,iBAAPrE,EAAkB,SAAW,QACzCqE,EAAKxF,GACX,CAUA,SAAS+D,GAAU7C,EAAQC,GACzB,IAAIf,EAAQa,EAASC,EAAQC,GAC7B,OAAOuI,GAAatJ,GAASA,OAAQgB,CACvC,CA9tBA0D,GAAK7C,UAAUgD,MAAQE,GACvBL,GAAK7C,UAAU,UAAYoD,GAC3BP,GAAK7C,UAAUuE,IAAMjB,GACrBT,GAAK7C,UAAUqD,IAAMG,GACrBX,GAAK7C,UAAU/B,IAAMwF,GA4GrBC,GAAU1D,UAAUgD,MAAQW,GAC5BD,GAAU1D,UAAU,UAAY4D,GAChCF,GAAU1D,UAAUuE,IAAMR,GAC1BL,GAAU1D,UAAUqD,IAAMW,GAC1BN,GAAU1D,UAAU/B,IAAMgG,GA0F1BC,GAASlE,UAAUgD,MAAQmB,GAC3BD,GAASlE,UAAU,UAAYoE,GAC/BF,GAASlE,UAAUuE,IAAMD,GACzBJ,GAASlE,UAAUqD,IAAMmB,GACzBN,GAASlE,UAAU/B,IAAMwG,GAwFzBC,GAAM1E,UAAUgD,MAAQ2B,GACxBD,GAAM1E,UAAU,UAAY4E,GAC5BF,GAAM1E,UAAUuE,IAAMM,GACtBH,GAAM1E,UAAUqD,IAAMyB,GACtBJ,GAAM1E,UAAU/B,IAAM8G,GAybtB,IAAImE,GAAa1H,GAAmB9B,GAAQ8B,GAAkBnE,QAAU+L,GASpE3C,GAASe,GAkCb,SAASlB,GAAehI,GACtB,IAAIvO,EAASuO,EAAMvO,OACfgP,EAAST,EAAM0J,YAAYjY,GAO/B,OAJIA,GAA6B,iBAAZuO,EAAM,IAAkBoC,GAAeI,KAAKxC,EAAO,WACtES,EAAOtF,MAAQ6E,EAAM7E,MACrBsF,EAAOsK,MAAQ/K,EAAM+K,OAEhBtK,CACT,CASA,SAAS6H,GAAgB3H,GACvB,MAAqC,mBAAtBA,EAAO+I,aAA8BF,GAAY7I,GAE5D,CAAC,EADDkI,GAAWhG,GAAalC,GAE9B,CAeA,SAAS6H,GAAe7H,EAAQuH,EAAKiC,EAAWzC,GAC9C,IAAIsD,EAAOrK,EAAO+I,YAClB,OAAQxB,GACN,KAAKtK,EACH,OAAOgM,GAAiBjJ,GAE1B,KAAK7D,EACL,KAAKC,EACH,OAAO,IAAIiO,GAAMrK,GAEnB,KAAK9C,EACH,OAAOkM,GAAcpJ,EAAQ+G,GAE/B,KAAK5J,EAAY,KAAKC,EACtB,KAAKC,EAAS,KAAKC,EAAU,KAAKC,EAClC,KAAKC,EAAU,KAAKC,EAAiB,KAAKC,EAAW,KAAKC,EACxD,OAAOmM,GAAgB9J,EAAQ+G,GAEjC,KAAKvK,EACH,OAAO+M,GAASvJ,EAAQ+G,EAAQyC,GAElC,KAAK/M,EACL,KAAKK,EACH,OAAO,IAAIuN,EAAKrK,GAElB,KAAKpD,EACH,OAAO6M,GAAYzJ,GAErB,KAAKnD,EACH,OAAO8M,GAAS3J,EAAQ+G,EAAQyC,GAElC,KAAKzM,EACH,OAAO6M,GAAY5J,GAEzB,CAUA,SAASuG,GAAQrH,EAAOpO,GAEtB,OADAA,EAAmB,MAAVA,EAAiBkL,EAAmBlL,IACpCA,IACU,iBAAToO,GAAqBnB,EAAS4K,KAAKzJ,KAC1CA,GAAS,GAAKA,EAAQ,GAAK,GAAKA,EAAQpO,CAC7C,CASA,SAASoZ,GAAUhL,GACjB,IAAIoL,EAAInM,EAAUe,GAClB,MAAgB,UAARoL,GAA4B,UAARA,GAA4B,UAARA,GAA4B,WAARA,EACrD,cAAVpL,EACU,OAAVA,CACP,CASA,SAASuJ,GAAS/H,GAChB,QAASS,IAAeA,MAAcT,CACxC,CASA,SAASmI,GAAY3J,GACnB,IAAImL,EAAOnL,GAASA,EAAM6J,YACtBZ,EAAwB,mBAARkC,GAAsBA,EAAKtJ,WAAcE,GAE7D,OAAO/B,IAAUiJ,CACnB,CASA,SAAS/E,GAAS1C,GAChB,GAAY,MAARA,EAAc,CAChB,IACE,OAAOc,GAAaK,KAAKnB,EAC3B,CAAE,MAAOL,GAAI,CACb,IACE,OAAQK,EAAO,EACjB,CAAE,MAAOL,GAAI,CACf,CACA,MAAO,EACT,CAoBA,SAASkK,GAAUrL,GACjB,OAAO4H,GAAU5H,GAAO,GAAM,EAChC,CAkCA,SAASwH,GAAGxH,EAAOsL,GACjB,OAAOtL,IAAUsL,GAAUtL,IAAUA,GAASsL,IAAUA,CAC1D,CAoBA,SAASpE,GAAYlH,GAEnB,OAAOuL,GAAkBvL,IAAUuC,GAAeI,KAAK3C,EAAO,aAC1DoD,GAAqBT,KAAK3C,EAAO,WAAawC,GAAeG,KAAK3C,IAAUjD,EAClF,EAjQK2G,IAAY4E,GAAO,IAAI5E,GAAS,IAAI8H,YAAY,MAAQxN,GACxD4F,IAAO0E,GAAO,IAAI1E,KAAQtG,GAC1BuG,IAAWyE,GAAOzE,GAAQ4H,YAAchO,GACxCqG,IAAOwE,GAAO,IAAIxE,KAAQnG,GAC1BoG,IAAWuE,GAAO,IAAIvE,KAAYjG,KACrCwK,GAAS,SAAStI,GAChB,IAAIY,EAAS4B,GAAeG,KAAK3C,GAC7BmL,EAAOvK,GAAUpD,EAAYwC,EAAM6J,iBAAc7I,EACjD0K,EAAaP,EAAOjH,GAASiH,QAAQnK,EAEzC,GAAI0K,EACF,OAAQA,GACN,KAAKzH,GAAoB,OAAOjG,EAChC,KAAKmG,GAAe,OAAO7G,EAC3B,KAAK8G,GAAmB,OAAO3G,EAC/B,KAAK4G,GAAe,OAAO1G,EAC3B,KAAK2G,GAAmB,OAAOxG,EAGnC,OAAO8C,CACT,GAsQF,IAAIqG,GAAUvT,MAAMuT,QA2BpB,SAAS0E,GAAY3L,GACnB,OAAgB,MAATA,GAAiB4L,GAAS5L,EAAMpO,UAAY4X,GAAWxJ,EAChE,CA2BA,SAASuL,GAAkBvL,GACzB,OAAO6L,GAAa7L,IAAU2L,GAAY3L,EAC5C,CAmBA,IAAIwD,GAAWD,IAAkBuI,GAmBjC,SAAStC,GAAWxJ,GAGlB,IAAIqI,EAAMJ,GAASjI,GAASwC,GAAeG,KAAK3C,GAAS,GACzD,OAAOqI,GAAOjL,GAAWiL,GAAOhL,CAClC,CA4BA,SAASuO,GAAS5L,GAChB,MAAuB,iBAATA,GACZA,GAAS,GAAKA,EAAQ,GAAK,GAAKA,GAASlD,CAC7C,CA2BA,SAASmL,GAASjI,GAChB,IAAIoL,EAAInM,EAAUe,GAClB,QAASA,IAAkB,UAARoL,GAA4B,YAARA,EACzC,CA0BA,SAASS,GAAa7L,GACpB,QAASA,GAAyB,UAAhBf,EAAOe,EAC3B,CA8BA,SAASoC,GAAKtB,GACZ,OAAO6K,GAAY7K,GAAUiG,GAAcjG,GAAU4I,GAAS5I,EAChE,CAoBA,SAASmK,KACP,MAAO,EACT,CAeA,SAASa,KACP,OAAO,CACT,CAEApP,EAAOC,QAAU0O,E,0SCzsDjB,IAAIzO,EAAmB,IAGnBC,EAAiB,4BAGjBkP,EAAuB,EACvBC,EAAyB,EAGzBlP,EAAmB,iBAGnBC,EAAU,qBACVC,EAAW,iBACXiP,EAAW,yBACXhP,EAAU,mBACVC,EAAU,gBACVC,EAAW,iBACXC,EAAU,oBACVC,EAAS,6BACTC,EAAS,eACTC,EAAY,kBACZ2O,EAAU,gBACV1O,EAAY,kBACZC,EAAa,mBACb0O,EAAW,iBACXzO,EAAY,kBACZC,EAAS,eACTC,EAAY,kBACZC,EAAY,kBACZuO,EAAe,qBACftO,EAAa,mBAEbC,EAAiB,uBACjBC,EAAc,oBACdC,EAAa,wBACbC,EAAa,wBACbC,EAAU,qBACVC,EAAW,sBACXC,EAAW,sBACXC,EAAW,sBACXC,EAAkB,6BAClBC,EAAY,uBACZC,EAAY,uBAMZC,EAAe,sBAGfE,EAAe,8BAGfC,EAAW,mBAGXwN,EAAiB,CAAC,EACtBA,EAAepO,GAAcoO,EAAenO,GAC5CmO,EAAelO,GAAWkO,EAAejO,GACzCiO,EAAehO,GAAYgO,EAAe/N,GAC1C+N,EAAe9N,GAAmB8N,EAAe7N,GACjD6N,EAAe5N,IAAa,EAC5B4N,EAAetP,GAAWsP,EAAerP,GACzCqP,EAAetO,GAAkBsO,EAAepP,GAChDoP,EAAerO,GAAeqO,EAAenP,GAC7CmP,EAAelP,GAAYkP,EAAejP,GAC1CiP,EAAe/O,GAAU+O,EAAe9O,GACxC8O,EAAe7O,GAAa6O,EAAe3O,GAC3C2O,EAAe1O,GAAU0O,EAAezO,GACxCyO,EAAevO,IAAc,EAG7B,IAAIiB,EAA8B,WAAJ,qBAANC,EAAAA,EAAM,YAAAC,EAAND,EAAAA,KAAsBA,EAAAA,GAAUA,EAAAA,EAAOE,SAAWA,QAAUF,EAAAA,EAGhFG,EAA0B,WAAJ,qBAAJC,KAAI,YAAAH,EAAJG,QAAoBA,MAAQA,KAAKF,SAAWA,QAAUE,KAGxEC,EAAON,GAAcI,GAAYG,SAAS,cAATA,GAGjCC,EAAgC,UAAJN,EAAPtC,IAAuBA,IAAYA,EAAQ6C,UAAY7C,EAG5E8C,EAAaF,GAAgC,UAAJN,EAANvC,IAAsBA,IAAWA,EAAO8C,UAAY9C,EAGvFgD,EAAgBD,GAAcA,EAAW9C,UAAY4C,EAGrD+M,EAAc5M,GAAiBX,EAAWwN,QAG1CC,EAAY,WACd,IACE,OAAOF,GAAeA,EAAYG,SAAWH,EAAYG,QAAQ,OACnE,CAAE,MAAOtL,GAAI,CACf,CAJgB,GAOZuL,EAAmBF,GAAYA,EAASG,aAW5C,SAASC,EAAYzM,EAAO0M,GAC1B,IAAIvR,GAAS,EACT1J,EAAkB,MAATuO,EAAgB,EAAIA,EAAMvO,OACnCkb,EAAW,EACXlM,EAAS,GAEb,QAAStF,EAAQ1J,EAAQ,CACvB,IAAIoO,EAAQG,EAAM7E,GACduR,EAAU7M,EAAO1E,EAAO6E,KAC1BS,EAAOkM,KAAc9M,EAEzB,CACA,OAAOY,CACT,CAUA,SAASP,GAAUF,EAAOG,GACxB,IAAIhF,GAAS,EACT1J,EAAS0O,EAAO1O,OAChB2O,EAASJ,EAAMvO,OAEnB,QAAS0J,EAAQ1J,EACfuO,EAAMI,EAASjF,GAASgF,EAAOhF,GAEjC,OAAO6E,CACT,CAYA,SAAS4M,GAAU5M,EAAO0M,GACxB,IAAIvR,GAAS,EACT1J,EAAkB,MAATuO,EAAgB,EAAIA,EAAMvO,OAEvC,QAAS0J,EAAQ1J,EACf,GAAIib,EAAU1M,EAAM7E,GAAQA,EAAO6E,GACjC,OAAO,EAGX,OAAO,CACT,CAWA,SAASQ,GAAUpG,EAAG6F,GACpB,IAAI9E,GAAS,EACTsF,EAASlN,MAAM6G,GAEnB,QAASe,EAAQf,EACfqG,EAAOtF,GAAS8E,EAAS9E,GAE3B,OAAOsF,CACT,CASA,SAASoM,GAAUxL,GACjB,OAAO,SAASxB,GACd,OAAOwB,EAAKxB,EACd,CACF,CAUA,SAASiN,GAASpG,EAAO9F,GACvB,OAAO8F,EAAM3B,IAAInE,EACnB,CAUA,SAASF,GAASC,EAAQC,GACxB,OAAiB,MAAVD,OAAiBE,EAAYF,EAAOC,EAC7C,CASA,SAASK,GAAWxB,GAClB,IAAItE,GAAS,EACTsF,EAASlN,MAAMkM,EAAIyB,MAKvB,OAHAzB,EAAI0B,SAAQ,SAAStB,EAAOe,GAC1BH,IAAStF,GAAS,CAACyF,EAAKf,EAC1B,IACOY,CACT,CAUA,SAASW,GAAQC,EAAMC,GACrB,OAAO,SAASC,GACd,OAAOF,EAAKC,EAAUC,GACxB,CACF,CASA,SAASC,GAAW7B,GAClB,IAAIxE,GAAS,EACTsF,EAASlN,MAAMoM,EAAIuB,MAKvB,OAHAvB,EAAIwB,SAAQ,SAAStB,GACnBY,IAAStF,GAAS0E,CACpB,IACOY,CACT,CAGA,IAAIgB,GAAalO,MAAMmO,UACnBC,GAAYxC,SAASuC,UACrBE,GAAc7C,OAAO2C,UAGrBG,GAAa3C,EAAK,sBAGlBiD,GAAeR,GAAUZ,SAGzBqB,GAAiBR,GAAYQ,eAG7BN,GAAc,WAChB,IAAIC,EAAM,SAASC,KAAKH,IAAcA,GAAWI,MAAQJ,GAAWI,KAAKC,UAAY,IACrF,OAAOH,EAAO,iBAAmBA,EAAO,EAC1C,CAHkB,GAUdgL,GAAuBnL,GAAYb,SAGnCuB,GAAaC,OAAO,IACtBJ,GAAaK,KAAKJ,IAAgBK,QAAQlE,EAAc,QACvDkE,QAAQ,yDAA0D,SAAW,KAI5EC,GAASnD,EAAgBL,EAAKwD,YAAS7B,EACvC8B,GAASzD,EAAKyD,OACdC,GAAa1D,EAAK0D,WAClBK,GAAuBrB,GAAYqB,qBACnC1L,GAASkK,GAAWlK,OACpByV,GAAiBrK,GAASA,GAAOsK,iBAAcpM,EAG/CqC,GAAmBnE,OAAOoE,sBAC1BC,GAAiBV,GAASA,GAAOW,cAAWxC,EAC5CyC,GAAalC,GAAQrC,OAAOkD,KAAMlD,QAGlCwE,GAAWC,GAAUtE,EAAM,YAC3BuE,GAAMD,GAAUtE,EAAM,OACtBwE,GAAUF,GAAUtE,EAAM,WAC1ByE,GAAMH,GAAUtE,EAAM,OACtB0E,GAAUJ,GAAUtE,EAAM,WAC1B2E,GAAeL,GAAUzE,OAAQ,UAGjC+E,GAAqBC,GAASR,IAC9BS,GAAgBD,GAASN,IACzBQ,GAAoBF,GAASL,IAC7BQ,GAAgBH,GAASJ,IACzBQ,GAAoBJ,GAASH,IAG7BQ,GAAczB,GAASA,GAAOjB,eAAYb,EAC1CwD,GAAgBD,GAAcA,GAAYE,aAAUzD,EASxD,SAAS0D,GAAKC,GACZ,IAAIrJ,GAAS,EACT1J,EAAoB,MAAX+S,EAAkB,EAAIA,EAAQ/S,OAE3CgT,KAAKC,QACL,QAASvJ,EAAQ1J,EAAQ,CACvB,IAAIkT,EAAQH,EAAQrJ,GACpBsJ,KAAK9E,IAAIgF,EAAM,GAAIA,EAAM,GAC3B,CACF,CASA,SAASC,KACPH,KAAKI,SAAWhB,GAAeA,GAAa,MAAQ,CAAC,EACrDY,KAAKvD,KAAO,CACd,CAYA,SAAS4D,GAAWlE,GAClB,IAAIH,EAASgE,KAAKM,IAAInE,WAAe6D,KAAKI,SAASjE,GAEnD,OADA6D,KAAKvD,MAAQT,EAAS,EAAI,EACnBA,CACT,CAWA,SAASuE,GAAQpE,GACf,IAAIqE,EAAOR,KAAKI,SAChB,GAAIhB,GAAc,CAChB,IAAIpD,EAASwE,EAAKrE,GAClB,OAAOH,IAAW/D,OAAiBmE,EAAYJ,CACjD,CACA,OAAO2B,GAAeI,KAAKyC,EAAMrE,GAAOqE,EAAKrE,QAAOC,CACtD,CAWA,SAASqE,GAAQtE,GACf,IAAIqE,EAAOR,KAAKI,SAChB,OAAOhB,QAA8BhD,IAAdoE,EAAKrE,GAAsBwB,GAAeI,KAAKyC,EAAMrE,EAC9E,CAYA,SAASuE,GAAQvE,EAAKf,GACpB,IAAIoF,EAAOR,KAAKI,SAGhB,OAFAJ,KAAKvD,MAAQuD,KAAKM,IAAInE,GAAO,EAAI,EACjCqE,EAAKrE,GAAQiD,SAA0BhD,IAAVhB,EAAuBnD,EAAiBmD,EAC9D4E,IACT,CAgBA,SAASW,GAAUZ,GACjB,IAAIrJ,GAAS,EACT1J,EAAoB,MAAX+S,EAAkB,EAAIA,EAAQ/S,OAE3CgT,KAAKC,QACL,QAASvJ,EAAQ1J,EAAQ,CACvB,IAAIkT,EAAQH,EAAQrJ,GACpBsJ,KAAK9E,IAAIgF,EAAM,GAAIA,EAAM,GAC3B,CACF,CASA,SAASU,KACPZ,KAAKI,SAAW,GAChBJ,KAAKvD,KAAO,CACd,CAWA,SAASoE,GAAgB1E,GACvB,IAAIqE,EAAOR,KAAKI,SACZ1J,EAAQoK,GAAaN,EAAMrE,GAE/B,GAAIzF,EAAQ,EACV,OAAO,EAET,IAAIqK,EAAYP,EAAKxT,OAAS,EAO9B,OANI0J,GAASqK,EACXP,EAAK5K,MAEL9C,GAAOiL,KAAKyC,EAAM9J,EAAO,KAEzBsJ,KAAKvD,MACA,CACT,CAWA,SAASuE,GAAa7E,GACpB,IAAIqE,EAAOR,KAAKI,SACZ1J,EAAQoK,GAAaN,EAAMrE,GAE/B,OAAOzF,EAAQ,OAAI0F,EAAYoE,EAAK9J,GAAO,EAC7C,CAWA,SAASuK,GAAa9E,GACpB,OAAO2E,GAAad,KAAKI,SAAUjE,IAAQ,CAC7C,CAYA,SAAS+E,GAAa/E,EAAKf,GACzB,IAAIoF,EAAOR,KAAKI,SACZ1J,EAAQoK,GAAaN,EAAMrE,GAQ/B,OANIzF,EAAQ,KACRsJ,KAAKvD,KACP+D,EAAKpT,KAAK,CAAC+O,EAAKf,KAEhBoF,EAAK9J,GAAO,GAAK0E,EAEZ4E,IACT,CAgBA,SAASmB,GAASpB,GAChB,IAAIrJ,GAAS,EACT1J,EAAoB,MAAX+S,EAAkB,EAAIA,EAAQ/S,OAE3CgT,KAAKC,QACL,QAASvJ,EAAQ1J,EAAQ,CACvB,IAAIkT,EAAQH,EAAQrJ,GACpBsJ,KAAK9E,IAAIgF,EAAM,GAAIA,EAAM,GAC3B,CACF,CASA,SAASkB,KACPpB,KAAKvD,KAAO,EACZuD,KAAKI,SAAW,CACd,KAAQ,IAAIN,GACZ,IAAO,IAAKd,IAAO2B,IACnB,OAAU,IAAIb,GAElB,CAWA,SAASuB,GAAelF,GACtB,IAAIH,EAASsF,GAAWtB,KAAM7D,GAAK,UAAUA,GAE7C,OADA6D,KAAKvD,MAAQT,EAAS,EAAI,EACnBA,CACT,CAWA,SAASuF,GAAYpF,GACnB,OAAOmF,GAAWtB,KAAM7D,GAAKqF,IAAIrF,EACnC,CAWA,SAASsF,GAAYtF,GACnB,OAAOmF,GAAWtB,KAAM7D,GAAKmE,IAAInE,EACnC,CAYA,SAASuF,GAAYvF,EAAKf,GACxB,IAAIoF,EAAOc,GAAWtB,KAAM7D,GACxBM,EAAO+D,EAAK/D,KAIhB,OAFA+D,EAAKtF,IAAIiB,EAAKf,GACd4E,KAAKvD,MAAQ+D,EAAK/D,MAAQA,EAAO,EAAI,EAC9BuD,IACT,CAiBA,SAASyI,GAAS/M,GAChB,IAAIhF,GAAS,EACT1J,EAAmB,MAAV0O,EAAiB,EAAIA,EAAO1O,OAEzCgT,KAAKI,SAAW,IAAIe,GACpB,QAASzK,EAAQ1J,EACfgT,KAAK3E,IAAIK,EAAOhF,GAEpB,CAYA,SAASgS,GAAYtN,GAEnB,OADA4E,KAAKI,SAASlF,IAAIE,EAAOnD,GAClB+H,IACT,CAWA,SAAS2I,GAAYvN,GACnB,OAAO4E,KAAKI,SAASE,IAAIlF,EAC3B,CAaA,SAASuG,GAAM5B,GACb,IAAIS,EAAOR,KAAKI,SAAW,IAAIO,GAAUZ,GACzCC,KAAKvD,KAAO+D,EAAK/D,IACnB,CASA,SAASmF,KACP5B,KAAKI,SAAW,IAAIO,GACpBX,KAAKvD,KAAO,CACd,CAWA,SAASoF,GAAY1F,GACnB,IAAIqE,EAAOR,KAAKI,SACZpE,EAASwE,EAAK,UAAUrE,GAG5B,OADA6D,KAAKvD,KAAO+D,EAAK/D,KACVT,CACT,CAWA,SAAS8F,GAAS3F,GAChB,OAAO6D,KAAKI,SAASoB,IAAIrF,EAC3B,CAWA,SAAS4F,GAAS5F,GAChB,OAAO6D,KAAKI,SAASE,IAAInE,EAC3B,CAYA,SAAS6F,GAAS7F,EAAKf,GACrB,IAAIoF,EAAOR,KAAKI,SAChB,GAAII,aAAgBG,GAAW,CAC7B,IAAIuB,EAAQ1B,EAAKJ,SACjB,IAAKpB,IAAQkD,EAAMlV,OAASgL,EAAmB,EAG7C,OAFAkK,EAAM9U,KAAK,CAAC+O,EAAKf,IACjB4E,KAAKvD,OAAS+D,EAAK/D,KACZuD,KAETQ,EAAOR,KAAKI,SAAW,IAAIe,GAASe,EACtC,CAGA,OAFA1B,EAAKtF,IAAIiB,EAAKf,GACd4E,KAAKvD,KAAO+D,EAAK/D,KACVuD,IACT,CAiBA,SAASmC,GAAc/G,EAAOgH,GAC5B,IAAIkB,EAAQjB,GAAQjH,GAChBwN,GAAStF,GAAShB,GAAYlH,GAC9ByN,GAAUvF,IAAUsF,GAAShK,GAASxD,GACtC0N,GAAUxF,IAAUsF,IAAUC,GAAUd,GAAa3M,GACrDoH,EAAcc,GAASsF,GAASC,GAAUC,EAC1C9M,EAASwG,EAAczG,GAAUX,EAAMpO,OAAQuV,QAAU,GACzDvV,EAASgP,EAAOhP,OAEpB,IAAK,IAAImP,KAAOf,GACTgH,IAAazE,GAAeI,KAAK3C,EAAOe,IACvCqG,IAEQ,UAAPrG,GAEC0M,IAAkB,UAAP1M,GAA0B,UAAPA,IAE9B2M,IAAkB,UAAP3M,GAA0B,cAAPA,GAA8B,cAAPA,IAEtDsG,GAAQtG,EAAKnP,KAElBgP,EAAO5O,KAAK+O,GAGhB,OAAOH,CACT,CAUA,SAAS8E,GAAavF,EAAOY,GAC3B,IAAInP,EAASuO,EAAMvO,OACnB,MAAOA,IACL,GAAI4V,GAAGrH,EAAMvO,GAAQ,GAAImP,GACvB,OAAOnP,EAGX,OAAQ,CACV,CAaA,SAASsX,GAAepI,EAAQqI,EAAUC,GACxC,IAAIxI,EAASuI,EAASrI,GACtB,OAAOmG,GAAQnG,GAAUF,EAASP,GAAUO,EAAQwI,EAAYtI,GAClE,CASA,SAASuI,GAAWrJ,GAClB,OAAa,MAATA,OACegB,IAAVhB,EAAsBoM,EAAeF,EAEtCiB,IAAkBA,MAAkBjO,OAAOc,GAC/C2N,GAAU3N,GACVwC,GAAexC,EACrB,CASA,SAAS4N,GAAgB5N,GACvB,OAAO6L,GAAa7L,IAAUqJ,GAAWrJ,IAAUjD,CACrD,CAgBA,SAAS8Q,GAAY7N,EAAOsL,EAAOwC,EAAS/F,EAAYC,GACtD,OAAIhI,IAAUsL,IAGD,MAATtL,GAA0B,MAATsL,IAAmBO,GAAa7L,KAAW6L,GAAaP,GACpEtL,IAAUA,GAASsL,IAAUA,EAE/ByC,GAAgB/N,EAAOsL,EAAOwC,EAAS/F,EAAY8F,GAAa7F,GACzE,CAgBA,SAAS+F,GAAgBjN,EAAQwK,EAAOwC,EAAS/F,EAAYiG,EAAWhG,GACtE,IAAIiG,EAAWhH,GAAQnG,GACnBoN,EAAWjH,GAAQqE,GACnB6C,EAASF,EAAWjR,EAAWsL,GAAOxH,GACtCsN,EAASF,EAAWlR,EAAWsL,GAAOgD,GAE1C6C,EAASA,GAAUpR,EAAUS,EAAY2Q,EACzCC,EAASA,GAAUrR,EAAUS,EAAY4Q,EAEzC,IAAIC,EAAWF,GAAU3Q,EACrB8Q,EAAWF,GAAU5Q,EACrB+Q,EAAYJ,GAAUC,EAE1B,GAAIG,GAAa/K,GAAS1C,GAAS,CACjC,IAAK0C,GAAS8H,GACZ,OAAO,EAET2C,GAAW,EACXI,GAAW,CACb,CACA,GAAIE,IAAcF,EAEhB,OADArG,IAAUA,EAAQ,IAAIzB,IACd0H,GAAYtB,GAAa7L,GAC7B0N,GAAY1N,EAAQwK,EAAOwC,EAAS/F,EAAYiG,EAAWhG,GAC3DyG,GAAW3N,EAAQwK,EAAO6C,EAAQL,EAAS/F,EAAYiG,EAAWhG,GAExE,KAAM8F,EAAU/B,GAAuB,CACrC,IAAI2C,EAAeL,GAAY9L,GAAeI,KAAK7B,EAAQ,eACvD6N,EAAeL,GAAY/L,GAAeI,KAAK2I,EAAO,eAE1D,GAAIoD,GAAgBC,EAAc,CAChC,IAAIC,EAAeF,EAAe5N,EAAOd,QAAUc,EAC/C+N,EAAeF,EAAerD,EAAMtL,QAAUsL,EAGlD,OADAtD,IAAUA,EAAQ,IAAIzB,IACfyH,EAAUY,EAAcC,EAAcf,EAAS/F,EAAYC,EACpE,CACF,CACA,QAAKuG,IAGLvG,IAAUA,EAAQ,IAAIzB,IACfuI,GAAahO,EAAQwK,EAAOwC,EAAS/F,EAAYiG,EAAWhG,GACrE,CAUA,SAASsB,GAAatJ,GACpB,IAAKiI,GAASjI,IAAUuJ,GAASvJ,GAC/B,OAAO,EAET,IAAIjK,EAAUyT,GAAWxJ,GAASyC,GAAa7D,EAC/C,OAAO7I,EAAQ0T,KAAKvF,GAASlE,GAC/B,CASA,SAAS+O,GAAiB/O,GACxB,OAAO6L,GAAa7L,IAClB4L,GAAS5L,EAAMpO,WAAaya,EAAehD,GAAWrJ,GAC1D,CASA,SAAS0J,GAAS5I,GAChB,IAAK6I,GAAY7I,GACf,OAAO2C,GAAW3C,GAEpB,IAAIF,EAAS,GACb,IAAK,IAAIG,KAAO7B,OAAO4B,GACjByB,GAAeI,KAAK7B,EAAQC,IAAe,eAAPA,GACtCH,EAAO5O,KAAK+O,GAGhB,OAAOH,CACT,CAeA,SAAS4N,GAAYrO,EAAOmL,EAAOwC,EAAS/F,EAAYiG,EAAWhG,GACjE,IAAIgH,EAAYlB,EAAU/B,EACtBkD,EAAY9O,EAAMvO,OAClBsd,EAAY5D,EAAM1Z,OAEtB,GAAIqd,GAAaC,KAAeF,GAAaE,EAAYD,GACvD,OAAO,EAGT,IAAIrG,EAAUZ,EAAM5B,IAAIjG,GACxB,GAAIyI,GAAWZ,EAAM5B,IAAIkF,GACvB,OAAO1C,GAAW0C,EAEpB,IAAIhQ,GAAS,EACTsF,GAAS,EACTuO,EAAQrB,EAAU9B,EAA0B,IAAIqB,QAAWrM,EAE/DgH,EAAMlI,IAAIK,EAAOmL,GACjBtD,EAAMlI,IAAIwL,EAAOnL,GAGjB,QAAS7E,EAAQ2T,EAAW,CAC1B,IAAIG,EAAWjP,EAAM7E,GACjB+T,EAAW/D,EAAMhQ,GAErB,GAAIyM,EACF,IAAIuH,EAAWN,EACXjH,EAAWsH,EAAUD,EAAU9T,EAAOgQ,EAAOnL,EAAO6H,GACpDD,EAAWqH,EAAUC,EAAU/T,EAAO6E,EAAOmL,EAAOtD,GAE1D,QAAiBhH,IAAbsO,EAAwB,CAC1B,GAAIA,EACF,SAEF1O,GAAS,EACT,KACF,CAEA,GAAIuO,GACF,IAAKpC,GAAUzB,GAAO,SAAS+D,EAAUE,GACnC,IAAKtC,GAASkC,EAAMI,KACfH,IAAaC,GAAYrB,EAAUoB,EAAUC,EAAUvB,EAAS/F,EAAYC,IAC/E,OAAOmH,EAAKnd,KAAKud,EAErB,IAAI,CACN3O,GAAS,EACT,KACF,OACK,GACDwO,IAAaC,IACXrB,EAAUoB,EAAUC,EAAUvB,EAAS/F,EAAYC,GACpD,CACLpH,GAAS,EACT,KACF,CACF,CAGA,OAFAoH,EAAM,UAAU7H,GAChB6H,EAAM,UAAUsD,GACT1K,CACT,CAmBA,SAAS6N,GAAW3N,EAAQwK,EAAOjD,EAAKyF,EAAS/F,EAAYiG,EAAWhG,GACtE,OAAQK,GACN,KAAKrK,EACH,GAAK8C,EAAOmJ,YAAcqB,EAAMrB,YAC3BnJ,EAAOsJ,YAAckB,EAAMlB,WAC9B,OAAO,EAETtJ,EAASA,EAAO8I,OAChB0B,EAAQA,EAAM1B,OAEhB,KAAK7L,EACH,QAAK+C,EAAOmJ,YAAcqB,EAAMrB,aAC3B+D,EAAU,IAAIjL,GAAWjC,GAAS,IAAIiC,GAAWuI,KAKxD,KAAKrO,EACL,KAAKC,EACL,KAAKK,EAGH,OAAOiK,IAAI1G,GAASwK,GAEtB,KAAKnO,EACH,OAAO2D,EAAO0O,MAAQlE,EAAMkE,MAAQ1O,EAAO2O,SAAWnE,EAAMmE,QAE9D,KAAK/R,EACL,KAAKE,EAIH,OAAOkD,GAAWwK,EAAQ,GAE5B,KAAKhO,EACH,IAAIoS,EAAUtO,GAEhB,KAAKzD,EACH,IAAIqR,EAAYlB,EAAU/B,EAG1B,GAFA2D,IAAYA,EAAU/N,IAElBb,EAAOO,MAAQiK,EAAMjK,OAAS2N,EAChC,OAAO,EAGT,IAAIpG,EAAUZ,EAAM5B,IAAItF,GACxB,GAAI8H,EACF,OAAOA,GAAW0C,EAEpBwC,GAAW9B,EAGXhE,EAAMlI,IAAIgB,EAAQwK,GAClB,IAAI1K,EAAS4N,GAAYkB,EAAQ5O,GAAS4O,EAAQpE,GAAQwC,EAAS/F,EAAYiG,EAAWhG,GAE1F,OADAA,EAAM,UAAUlH,GACTF,EAET,KAAK/C,EACH,GAAI2G,GACF,OAAOA,GAAc7B,KAAK7B,IAAW0D,GAAc7B,KAAK2I,GAG9D,OAAO,CACT,CAeA,SAASwD,GAAahO,EAAQwK,EAAOwC,EAAS/F,EAAYiG,EAAWhG,GACnE,IAAIgH,EAAYlB,EAAU/B,EACtB4D,EAAW7G,GAAWhI,GACtB8O,EAAYD,EAAS/d,OACrBie,EAAW/G,GAAWwC,GACtB4D,EAAYW,EAASje,OAEzB,GAAIge,GAAaV,IAAcF,EAC7B,OAAO,EAET,IAAI1T,EAAQsU,EACZ,MAAOtU,IAAS,CACd,IAAIyF,EAAM4O,EAASrU,GACnB,KAAM0T,EAAYjO,KAAOuK,EAAQ/I,GAAeI,KAAK2I,EAAOvK,IAC1D,OAAO,CAEX,CAEA,IAAI6H,EAAUZ,EAAM5B,IAAItF,GACxB,GAAI8H,GAAWZ,EAAM5B,IAAIkF,GACvB,OAAO1C,GAAW0C,EAEpB,IAAI1K,GAAS,EACboH,EAAMlI,IAAIgB,EAAQwK,GAClBtD,EAAMlI,IAAIwL,EAAOxK,GAEjB,IAAIgP,EAAWd,EACf,QAAS1T,EAAQsU,EAAW,CAC1B7O,EAAM4O,EAASrU,GACf,IAAIiM,EAAWzG,EAAOC,GAClBsO,EAAW/D,EAAMvK,GAErB,GAAIgH,EACF,IAAIuH,EAAWN,EACXjH,EAAWsH,EAAU9H,EAAUxG,EAAKuK,EAAOxK,EAAQkH,GACnDD,EAAWR,EAAU8H,EAAUtO,EAAKD,EAAQwK,EAAOtD,GAGzD,UAAmBhH,IAAbsO,EACG/H,IAAa8H,GAAYrB,EAAUzG,EAAU8H,EAAUvB,EAAS/F,EAAYC,GAC7EsH,GACD,CACL1O,GAAS,EACT,KACF,CACAkP,IAAaA,EAAkB,eAAP/O,EAC1B,CACA,GAAIH,IAAWkP,EAAU,CACvB,IAAIC,EAAUjP,EAAO+I,YACjBmG,EAAU1E,EAAMzB,YAGhBkG,GAAWC,KACV,gBAAiBlP,MAAU,gBAAiBwK,IACzB,mBAAXyE,GAAyBA,aAAmBA,GACjC,mBAAXC,GAAyBA,aAAmBA,IACvDpP,GAAS,EAEb,CAGA,OAFAoH,EAAM,UAAUlH,GAChBkH,EAAM,UAAUsD,GACT1K,CACT,CASA,SAASkI,GAAWhI,GAClB,OAAOoI,GAAepI,EAAQsB,GAAM2I,GACtC,CAUA,SAAS7E,GAAWtG,EAAKmB,GACvB,IAAIqE,EAAOxF,EAAIoF,SACf,OAAOgG,GAAUjK,GACbqE,EAAmB,iBAAPrE,EAAkB,SAAW,QACzCqE,EAAKxF,GACX,CAUA,SAAS+D,GAAU7C,EAAQC,GACzB,IAAIf,EAAQa,GAASC,EAAQC,GAC7B,OAAOuI,GAAatJ,GAASA,OAAQgB,CACvC,CASA,SAAS2M,GAAU3N,GACjB,IAAIiQ,EAAQ1N,GAAeI,KAAK3C,EAAOmN,IACnC9E,EAAMrI,EAAMmN,IAEhB,IACEnN,EAAMmN,SAAkBnM,EACxB,IAAIkP,GAAW,CACjB,CAAE,MAAO/O,GAAI,CAEb,IAAIP,EAASsM,GAAqBvK,KAAK3C,GAQvC,OAPIkQ,IACED,EACFjQ,EAAMmN,IAAkB9E,SAEjBrI,EAAMmN,KAGVvM,CACT,CAh4BA8D,GAAK7C,UAAUgD,MAAQE,GACvBL,GAAK7C,UAAU,UAAYoD,GAC3BP,GAAK7C,UAAUuE,IAAMjB,GACrBT,GAAK7C,UAAUqD,IAAMG,GACrBX,GAAK7C,UAAU/B,IAAMwF,GA+GrBC,GAAU1D,UAAUgD,MAAQW,GAC5BD,GAAU1D,UAAU,UAAY4D,GAChCF,GAAU1D,UAAUuE,IAAMR,GAC1BL,GAAU1D,UAAUqD,IAAMW,GAC1BN,GAAU1D,UAAU/B,IAAMgG,GAiG1BC,GAASlE,UAAUgD,MAAQmB,GAC3BD,GAASlE,UAAU,UAAYoE,GAC/BF,GAASlE,UAAUuE,IAAMD,GACzBJ,GAASlE,UAAUqD,IAAMmB,GACzBN,GAASlE,UAAU/B,IAAMwG,GAiDzB+G,GAASxL,UAAU5B,IAAMoN,GAASxL,UAAU7P,KAAOsb,GACnDD,GAASxL,UAAUqD,IAAMqI,GAgGzBhH,GAAM1E,UAAUgD,MAAQ2B,GACxBD,GAAM1E,UAAU,UAAY4E,GAC5BF,GAAM1E,UAAUuE,IAAMM,GACtBH,GAAM1E,UAAUqD,IAAMyB,GACtBJ,GAAM1E,UAAU/B,IAAM8G,GAuhBtB,IAAImE,GAAc1H,GAA+B,SAASvC,GACxD,OAAc,MAAVA,EACK,IAETA,EAAS5B,OAAO4B,GACT8L,EAAYvJ,GAAiBvC,IAAS,SAAS6J,GACpD,OAAOvH,GAAqBT,KAAK7B,EAAQ6J,EAC3C,IACF,EARqCM,GAiBjC3C,GAASe,GAkCb,SAAShC,GAAQrH,EAAOpO,GAEtB,OADAA,EAAmB,MAAVA,EAAiBkL,EAAmBlL,IACpCA,IACU,iBAAToO,GAAqBnB,EAAS4K,KAAKzJ,KAC1CA,GAAS,GAAKA,EAAQ,GAAK,GAAKA,EAAQpO,CAC7C,CASA,SAASoZ,GAAUhL,GACjB,IAAIoL,EAAInM,EAAUe,GAClB,MAAgB,UAARoL,GAA4B,UAARA,GAA4B,UAARA,GAA4B,WAARA,EACrD,cAAVpL,EACU,OAAVA,CACP,CASA,SAASuJ,GAAS/H,GAChB,QAASS,IAAeA,MAAcT,CACxC,CASA,SAASmI,GAAY3J,GACnB,IAAImL,EAAOnL,GAASA,EAAM6J,YACtBZ,EAAwB,mBAARkC,GAAsBA,EAAKtJ,WAAcE,GAE7D,OAAO/B,IAAUiJ,CACnB,CASA,SAASzG,GAAexC,GACtB,OAAOkN,GAAqBvK,KAAK3C,EACnC,CASA,SAASkE,GAAS1C,GAChB,GAAY,MAARA,EAAc,CAChB,IACE,OAAOc,GAAaK,KAAKnB,EAC3B,CAAE,MAAOL,GAAI,CACb,IACE,OAAQK,EAAO,EACjB,CAAE,MAAOL,GAAI,CACf,CACA,MAAO,EACT,CAkCA,SAASqG,GAAGxH,EAAOsL,GACjB,OAAOtL,IAAUsL,GAAUtL,IAAUA,GAASsL,IAAUA,CAC1D,EA7IK5H,IAAY4E,GAAO,IAAI5E,GAAS,IAAI8H,YAAY,MAAQxN,GACxD4F,IAAO0E,GAAO,IAAI1E,KAAQtG,GAC1BuG,IAAWyE,GAAOzE,GAAQ4H,YAAchO,GACxCqG,IAAOwE,GAAO,IAAIxE,KAAQnG,GAC1BoG,IAAWuE,GAAO,IAAIvE,KAAYjG,KACrCwK,GAAS,SAAStI,GAChB,IAAIY,EAASyI,GAAWrJ,GACpBmL,EAAOvK,GAAUpD,EAAYwC,EAAM6J,iBAAc7I,EACjD0K,EAAaP,EAAOjH,GAASiH,GAAQ,GAEzC,GAAIO,EACF,OAAQA,GACN,KAAKzH,GAAoB,OAAOjG,EAChC,KAAKmG,GAAe,OAAO7G,EAC3B,KAAK8G,GAAmB,OAAO3G,EAC/B,KAAK4G,GAAe,OAAO1G,EAC3B,KAAK2G,GAAmB,OAAOxG,EAGnC,OAAO8C,CACT,GA6IF,IAAIsG,GAAc0G,GAAgB,WAAa,OAAOuC,SAAW,CAA/B,IAAsCvC,GAAkB,SAAS5N,GACjG,OAAO6L,GAAa7L,IAAUuC,GAAeI,KAAK3C,EAAO,YACtDoD,GAAqBT,KAAK3C,EAAO,SACtC,EAyBIiH,GAAUvT,MAAMuT,QA2BpB,SAAS0E,GAAY3L,GACnB,OAAgB,MAATA,GAAiB4L,GAAS5L,EAAMpO,UAAY4X,GAAWxJ,EAChE,CAmBA,IAAIwD,GAAWD,IAAkBuI,GA8BjC,SAASsE,GAAQpQ,EAAOsL,GACtB,OAAOuC,GAAY7N,EAAOsL,EAC5B,CAmBA,SAAS9B,GAAWxJ,GAClB,IAAKiI,GAASjI,GACZ,OAAO,EAIT,IAAIqI,EAAMgB,GAAWrJ,GACrB,OAAOqI,GAAOjL,GAAWiL,GAAOhL,GAAUgL,GAAO4D,GAAY5D,GAAO8D,CACtE,CA4BA,SAASP,GAAS5L,GAChB,MAAuB,iBAATA,GACZA,GAAS,GAAKA,EAAQ,GAAK,GAAKA,GAASlD,CAC7C,CA2BA,SAASmL,GAASjI,GAChB,IAAIoL,EAAInM,EAAUe,GAClB,OAAgB,MAATA,IAA0B,UAARoL,GAA4B,YAARA,EAC/C,CA0BA,SAASS,GAAa7L,GACpB,OAAgB,MAATA,GAAiC,UAAhBf,EAAOe,EACjC,CAmBA,IAAI2M,GAAeD,EAAmBM,GAAUN,GAAoBqC,GA8BpE,SAAS3M,GAAKtB,GACZ,OAAO6K,GAAY7K,GAAUiG,GAAcjG,GAAU4I,GAAS5I,EAChE,CAoBA,SAASmK,KACP,MAAO,EACT,CAeA,SAASa,KACP,OAAO,CACT,CAEApP,EAAOC,QAAUyT,E,uJCvzDjB,IAOUC,EAPVhF,EAAAiF,EAAA,OACAF,EAAAE,EAAA,QAMA,SAAUD,GACR,SAAgBE,IAGE,IAFhBC,EAAAL,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAkB,GAClBM,EAAAN,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAkB,GAClBO,EAAQP,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,IAAAA,UAAA,GAES,WAAblR,EAAOuR,KACTA,EAAI,IAEW,WAAbvR,EAAOwR,KACTA,EAAI,IAEN,IAAIE,EAAatF,EAAUoF,GAS3B,IAAK,IAAM1P,KARN2P,IACHC,EAAazR,OAAOkD,KAAKuO,GAAYC,QAAqB,SAAC9G,EAAM/I,GAI/D,OAHuB,MAAnB4P,EAAW5P,KACb+I,EAAK/I,GAAO4P,EAAW5P,IAElB+I,CACT,GAAG,KAEa0G,OACDxP,IAAXwP,EAAEzP,SAAiCC,IAAXyP,EAAE1P,KAC5B4P,EAAW5P,GAAOyP,EAAEzP,IAGxB,OAAO7B,OAAOkD,KAAKuO,GAAY/e,OAAS,EAAI+e,OAAa3P,CAC3D,CAEA,SAAgB1E,IAEM,IADpBkU,EAAAL,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAkB,GAClBM,EAAAN,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAkB,GAED,WAAblR,EAAOuR,KACTA,EAAI,IAEW,WAAbvR,EAAOwR,KACTA,EAAI,IAEN,IAAME,EAAazR,OAAOkD,KAAKoO,GAC5Bxd,OAAOkM,OAAOkD,KAAKqO,IACnBG,QAAqB,SAACC,EAAO9P,GAI5B,OAHKqP,EAAQI,EAAEzP,GAAM0P,EAAE1P,MACrB8P,EAAM9P,QAAkBC,IAAXyP,EAAE1P,GAAqB,KAAO0P,EAAE1P,IAExC8P,CACT,GAAG,IACL,OAAO3R,OAAOkD,KAAKuO,GAAY/e,OAAS,EAAI+e,OAAa3P,CAC3D,CAEA,SAAgB8P,IAES,IADvBC,EAAAZ,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAqB,GACrBa,EAAAb,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAqB,GAErBY,EAAOA,GAAQ,GACf,IAAME,EAAe/R,OAAOkD,KAAK4O,GAAMJ,QAAqB,SAACM,EAAMnQ,GAIjE,OAHIiQ,EAAKjQ,KAASgQ,EAAKhQ,SAAsBC,IAAd+P,EAAKhQ,KAClCmQ,EAAKnQ,GAAOiQ,EAAKjQ,IAEZmQ,CACT,GAAG,IACH,OAAOhS,OAAOkD,KAAK2O,GAAMH,QAAqB,SAACM,EAAMnQ,GAInD,OAHIgQ,EAAKhQ,KAASiQ,EAAKjQ,SAAsBC,IAAdgQ,EAAKjQ,KAClCmQ,EAAKnQ,GAAO,MAEPmQ,CACT,GAAGD,EACL,CAEA,SAAgBxP,EACd+O,EACAC,GACgB,IAAhBU,EAAQhB,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,IAAAA,UAAA,GAER,GAAiB,WAAblR,EAAOuR,GACT,OAAOC,EAET,GAAiB,WAAbxR,EAAOwR,GAAX,CAGA,IAAKU,EACH,OAAOV,EAET,IAAME,EAAazR,OAAOkD,KAAKqO,GAAGG,QAAqB,SAACC,EAAO9P,GAI7D,YAHeC,IAAXwP,EAAEzP,KACJ8P,EAAM9P,GAAO0P,EAAE1P,IAEV8P,CACT,GAAG,IACH,OAAO3R,OAAOkD,KAAKuO,GAAY/e,OAAS,EAAI+e,OAAa3P,C,CAC3D,CAzFgBqP,EAAAE,QAAOA,EA4BPF,EAAA/T,KAAIA,EAqBJ+T,EAAAS,OAAMA,EAmBNT,EAAA5O,UAASA,CAsB1B,EA3FD,CAAU4O,IAAAA,EAAY,KA6FtB1T,EAAAA,WAAe0T,C,sZCpGf,IAAA/T,EAAAgU,EAAA,OACAjF,EAAAiF,EAAA,OACAF,EAAAE,EAAA,OACAc,EAAAd,EAAA,OAojByB3T,EAAAA,aApjBlByU,EAAA,WACP,IAAAC,EAAAf,EAAA,OAmjBS3T,EAAAA,GAnjBF0U,EAAA,WACP,IAAAC,EAAAhB,EAAA,OAkjBa3T,EAAAA,WAljBN2U,EAAA,WAEP,IAAMC,EAAiBpK,OAAOqK,aAAa,GAQrCC,EAAsB,SAC1BjB,EACAC,GAEA,GAAiB,WAAbxR,EAAOuR,IAAwB,OAANA,EAC3B,MAAM,IAAIkB,MAAK,mBAAA1e,OAAAiM,EAA2BuR,KAE5C,GAAiB,WAAbvR,EAAOwR,IAAwB,OAANA,EAC3B,MAAM,IAAIiB,MAAK,mBAAA1e,OAAAiM,EAA2BwR,KAE5C,IAAMkB,EAAYzS,OAAOkD,KAAKoO,GAAG,GACjC,IAAKmB,GAAaA,IAAczS,OAAOkD,KAAKqO,GAAG,GAC7C,MAAM,IAAIiB,MAAK,4BAAA1e,OACe2e,EAAS,QAAA3e,OAAOkM,OAAOkD,KAAKqO,GAAG,KAG/D,MAAO,CAACkB,EAAWnB,EAAEmB,GAAYlB,EAAEkB,GACrC,EAEMC,EAAK,WAuBT,SAAAA,EAAYC,GAA0BC,EAAA,KAAAF,GAEhCle,MAAMuT,QAAQ4K,GAChB,KAAKA,IAAMA,EACK,MAAPA,GAAene,MAAMuT,QAAQ4K,EAAIA,KAC1C,KAAKA,IAAMA,EAAIA,IAEf,KAAKA,IAAM,EAEf,CAAC,OAAAE,EAAAH,EAAA,EAAA7Q,IAAA,SAAAf,MAED,SACE0B,EACAiP,GAEA,IAAMqB,EAAY,GAClB,MAAmB,kBAARtQ,GAAmC,IAAfA,EAAI9P,OAC1B,MAETogB,EAAMC,OAASvQ,EAEC,MAAdiP,GACsB,WAAtB1R,EAAO0R,IACPzR,OAAOkD,KAAKuO,GAAY/e,OAAS,IAEjCogB,EAAMrB,WAAaA,GAEd,KAAK3e,KAAKggB,GACnB,GAAC,CAAAjR,IAAA,SAAAf,MAED,SAAOpO,GACL,OAAIA,GAAU,EACL,KAEF,KAAKI,KAAK,CAAE,OAAQJ,GAC7B,GAAC,CAAAmP,IAAA,SAAAf,MAED,SACEpO,EACA+e,GAEA,GAAsB,kBAAX/e,GAAuBA,GAAU,EAC1C,OAAO,KAET,IAAMogB,EAAY,CAAEE,OAAQtgB,GAQ5B,OANgB,MAAd+e,GACsB,WAAtB1R,EAAO0R,IACPzR,OAAOkD,KAAKuO,GAAY/e,OAAS,IAEjCogB,EAAMrB,WAAaA,GAEd,KAAK3e,KAAKggB,EACnB,GAAC,CAAAjR,IAAA,OAAAf,MAED,SAAKgS,GACH,IAAI1W,EAAQ,KAAKuW,IAAIjgB,OACjBugB,EAAS,KAAKN,IAAIvW,EAAQ,GAE9B,GADA0W,EAAQ3G,EAAU2G,GACI,WAAlB/S,EAAOkT,GAAqB,CAC9B,GAC0B,kBAAjBH,EAAK,WACa,kBAAlBG,EAAM,UAGb,OADA,KAAKN,IAAIvW,EAAQ,GAAK,CAAE,OAAQ6W,EAAM,UAAUH,EAAK,WAC9C,KAIT,GAA6B,kBAAlBG,EAAM,WAAwC,MAAhBH,EAAMC,SAC7C3W,GAAS,EACT6W,EAAS,KAAKN,IAAIvW,EAAQ,GACJ,WAAlB2D,EAAOkT,IAET,OADA,KAAKN,IAAI9f,QAAQigB,GACV,KAGX,GAAI5B,EAAQ4B,EAAMrB,WAAYwB,EAAOxB,YAAa,CAChD,GAC0B,kBAAjBqB,EAAMC,QACY,kBAAlBE,EAAOF,OAMd,OAJA,KAAKJ,IAAIvW,EAAQ,GAAK,CAAE2W,OAAQE,EAAOF,OAASD,EAAMC,QACtB,WAA5BhT,EAAO+S,EAAMrB,cACf,KAAKkB,IAAIvW,EAAQ,GAAGqV,WAAaqB,EAAMrB,YAElC,KACF,GACmB,kBAAjBqB,EAAME,QACY,kBAAlBC,EAAOD,OAMd,OAJA,KAAKL,IAAIvW,EAAQ,GAAK,CAAE4W,OAAQC,EAAOD,OAASF,EAAME,QACtB,WAA5BjT,EAAO+S,EAAMrB,cACf,KAAKkB,IAAIvW,EAAQ,GAAGqV,WAAaqB,EAAMrB,YAElC,I,EASb,OALIrV,IAAU,KAAKuW,IAAIjgB,OACrB,KAAKigB,IAAI7f,KAAKggB,GAEd,KAAKH,IAAIna,OAAO4D,EAAO,EAAG0W,GAErB,IACT,GAAC,CAAAjR,IAAA,OAAAf,MAED,WACE,IAAMmS,EAAS,KAAKN,IAAI,KAAKA,IAAIjgB,OAAS,GAI1C,OAHIugB,GAAmC,kBAAlBA,EAAOD,SAAwBC,EAAOxB,YACzD,KAAKkB,IAAIrX,MAEJ,IACT,GAAC,CAAAuG,IAAA,SAAAf,MAED,SAAO6M,GACL,OAAO,KAAKgF,IAAIO,OAAOvF,EACzB,GAAC,CAAA9L,IAAA,UAAAf,MAED,SAAQ6M,GACN,KAAKgF,IAAIvQ,QAAQuL,EACnB,GAAC,CAAA9L,IAAA,MAAAf,MAED,SAAO6M,GACL,OAAO,KAAKgF,IAAIjS,IAAIiN,EACtB,GAAC,CAAA9L,IAAA,YAAAf,MAED,SAAU6M,GACR,IAAMwF,EAAe,GACfC,EAAe,GAKrB,OAJA,KAAKhR,SAAQ,SAACiR,GACZ,IAAMC,EAAS3F,EAAU0F,GAAMF,EAASC,EACxCE,EAAOxgB,KAAKugB,EACd,IACO,CAACF,EAAQC,EAClB,GAAC,CAAAvR,IAAA,SAAAf,MAED,SACE6M,EACA4F,GAEA,OAAO,KAAKZ,IAAIjB,OAAO/D,EAAW4F,EACpC,GAAC,CAAA1R,IAAA,eAAAf,MAED,WACE,OAAO,KAAK4Q,QAAO,SAAChf,EAAQ8gB,GAC1B,OAAIA,EAAKT,OACArgB,EAASyf,EAAA,WAAGzf,OAAO8gB,GACjBA,EAAI,UACN9gB,EAAS8gB,EAAI,UAEf9gB,CACT,GAAG,EACL,GAAC,CAAAmP,IAAA,SAAAf,MAED,WACE,OAAO,KAAK4Q,QAAO,SAAChf,EAAQ8gB,GAC1B,OAAO9gB,EAASyf,EAAA,WAAGzf,OAAO8gB,EAC5B,GAAG,EACL,GAAC,CAAA3R,IAAA,QAAAf,MAED,WAA+B,IAAzB2S,EAAKxC,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAG,EAAGyC,EAAGzC,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAG0C,IACfhB,EAAM,GACNiB,EAAO,IAAIxB,EAAA,WAAW,KAAKO,KAC7BvW,EAAQ,EACZ,MAAOA,EAAQsX,GAAOE,EAAKC,UAAW,CACpC,IAAIC,OAAM,EACN1X,EAAQqX,EACVK,EAASF,EAAKG,KAAKN,EAAQrX,IAE3B0X,EAASF,EAAKG,KAAKL,EAAMtX,GACzBuW,EAAI7f,KAAKghB,IAEX1X,GAAS+V,EAAA,WAAGzf,OAAOohB,E,CAErB,OAAO,IAAIpB,EAAMC,EACnB,GAAC,CAAA9Q,IAAA,UAAAf,MAED,SAAQsL,GACN,IAAM4H,EAAW,IAAI5B,EAAA,WAAW,KAAKO,KAC/BsB,EAAY,IAAI7B,EAAA,WAAWhG,EAAMuG,KACjCA,EAAM,GACNuB,EAAaD,EAAUE,OAC7B,GACgB,MAAdD,GAC6B,kBAAtBA,EAAWlB,QACO,MAAzBkB,EAAWzC,WACX,CACA,IAAI2C,EAAYF,EAAWlB,OAC3B,MAC0B,WAAxBgB,EAASK,YACTL,EAASM,cAAgBF,EAEzBA,GAAaJ,EAASM,aACtB3B,EAAI7f,KAAKkhB,EAASD,QAEhBG,EAAWlB,OAASoB,EAAY,GAClCH,EAAUF,KAAKG,EAAWlB,OAASoB,E,CAGvC,IAAMzf,EAAQ,IAAI+d,EAAMC,GACxB,MAAOqB,EAASH,WAAaI,EAAUJ,UACrC,GAA6B,WAAzBI,EAAUI,WACZ1f,EAAM7B,KAAKmhB,EAAUF,aAChB,GAA4B,WAAxBC,EAASK,WAClB1f,EAAM7B,KAAKkhB,EAASD,YACf,CACL,IAAMrhB,EAASyB,KAAKiC,IAAI4d,EAASM,aAAcL,EAAUK,cACnDC,EAASP,EAASD,KAAKrhB,GACvB8hB,EAAUP,EAAUF,KAAKrhB,GAC/B,GAAI8hB,EAAQxB,OAAQ,CAClB,IAAMF,EAAY,GAClB,GAA6B,kBAAlByB,EAAOvB,OAChBF,EAAME,OACsB,kBAAnBwB,EAAQxB,OAAsBtgB,EAAS8hB,EAAQxB,YAExD,GAA8B,kBAAnBwB,EAAQxB,OACI,MAAjBuB,EAAOvB,OACTF,EAAMC,OAASwB,EAAOxB,OAEtBD,EAAME,OAASuB,EAAOvB,WAEnB,CACL,IAAMyB,EAA0B,MAAjBF,EAAOvB,OAAiB,SAAW,SAClD0B,EAAyCnC,EACvCgC,EAAOE,GACPD,EAAQxB,QACT2B,EAAAC,EAAAF,EAAA,GAHMjC,EAASkC,EAAA,GAAEE,EAAQF,EAAA,GAAEG,EAASH,EAAA,GAI/BI,EAAUrC,EAAMsC,WAAWvC,GACjCK,EAAM2B,GAAOQ,EAAA,GACVxC,EAAYsC,EAAQ1D,QACnBwD,EACAC,EACW,WAAXL,G,CAMR,IAAMhD,EAAaS,EAAA,WAAab,QAC9BkD,EAAO9C,WACP+C,EAAQ/C,WACiB,kBAAlB8C,EAAOvB,QAQhB,GANIvB,IACFqB,EAAMrB,WAAaA,GAErB9c,EAAM7B,KAAKggB,IAIRmB,EAAUJ,WACX3C,EAAQvc,EAAMge,IAAIhe,EAAMge,IAAIjgB,OAAS,GAAIogB,GACzC,CACA,IAAMoC,EAAO,IAAIxC,EAAMsB,EAASkB,QAChC,OAAOvgB,EAAMb,OAAOohB,GAAMC,M,MAMF,kBAAnBX,EAAO,YACY,kBAAlBD,EAAOvB,QACa,WAAzBjT,EAAOwU,EAAOvB,SAAyC,OAAlBuB,EAAOvB,SAE/Cre,EAAM7B,KAAK0hB,E,CAIjB,OAAO7f,EAAMwgB,MACf,GAAC,CAAAtT,IAAA,SAAAf,MAED,SAAOsL,GACL,IAAMzX,EAAQ,IAAI+d,EAAM,KAAKC,IAAI5b,SAKjC,OAJIqV,EAAMuG,IAAIjgB,OAAS,IACrBiC,EAAM7B,KAAKsZ,EAAMuG,IAAI,IACrBhe,EAAMge,IAAMhe,EAAMge,IAAI7e,OAAOsY,EAAMuG,IAAI5b,MAAM,KAExCpC,CACT,GAAC,CAAAkN,IAAA,OAAAf,MAED,SAAKsL,EAAcnP,GACjB,GAAI,KAAK0V,MAAQvG,EAAMuG,IACrB,OAAO,IAAID,EAEb,IAAM0C,EAAU,CAAC,KAAMhJ,GAAO1L,KAAI,SAAC/L,GACjC,OAAOA,EACJ+L,KAAI,SAAC2S,GACJ,GAAiB,MAAbA,EAAGN,OACL,MAA4B,kBAAdM,EAAGN,OAAsBM,EAAGN,OAASV,EAErD,IAAMgD,EAAO1gB,IAAUyX,EAAQ,KAAO,OACtC,MAAM,IAAIoG,MAAM,iBAAmB6C,EAAO,gBAC5C,IACCC,KAAK,GACV,IACMC,EAAW,IAAI7C,EACf8C,EAAapY,EAAKgY,EAAQ,GAAIA,EAAQ,GAAInY,GAAQ,GAClD+W,EAAW,IAAI5B,EAAA,WAAW,KAAKO,KAC/BsB,EAAY,IAAI7B,EAAA,WAAWhG,EAAMuG,KAoCvC,OAnCA6C,EAAWpT,SAAQ,SAACqT,GAClB,IAAI/iB,EAAS+iB,EAAU,GAAG/iB,OAC1B,MAAOA,EAAS,EAAG,CACjB,IAAIgjB,EAAW,EACf,OAAQD,EAAU,IAChB,KAAKrY,EAAKC,OACRqY,EAAWvhB,KAAKiC,IAAI6d,EAAUK,aAAc5hB,GAC5C6iB,EAASziB,KAAKmhB,EAAUF,KAAK2B,IAC7B,MACF,KAAKtY,EAAKE,OACRoY,EAAWvhB,KAAKiC,IAAI1D,EAAQshB,EAASM,cACrCN,EAASD,KAAK2B,GACdH,EAAQ,UAAQG,GAChB,MACF,KAAKtY,EAAKG,MACRmY,EAAWvhB,KAAKiC,IACd4d,EAASM,aACTL,EAAUK,aACV5hB,GAEF,IAAM6hB,EAASP,EAASD,KAAK2B,GACvBlB,EAAUP,EAAUF,KAAK2B,GAC3BxE,EAAQqD,EAAOxB,OAAQyB,EAAQzB,QACjCwC,EAASvC,OACP0C,EACAxD,EAAA,WAAa9U,KAAKmX,EAAO9C,WAAY+C,EAAQ/C,aAG/C8D,EAASziB,KAAK0hB,GAAQ,UAAQkB,GAEhC,MAEJhjB,GAAUgjB,C,CAEd,IACOH,EAASJ,MAClB,GAAC,CAAAtT,IAAA,WAAAf,MAED,SACE6M,GAKc,IAAdgI,EAAO1E,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAG,KAEJ2C,EAAO,IAAIxB,EAAA,WAAW,KAAKO,KAC7BiD,EAAO,IAAIlD,EACXvf,EAAI,EACR,MAAOygB,EAAKC,UAAW,CACrB,GAAwB,WAApBD,EAAKS,WACP,OAEF,IAAME,EAASX,EAAKO,OACdV,EAAQtB,EAAA,WAAGzf,OAAO6hB,GAAUX,EAAKU,aACjClY,EACqB,kBAAlBmY,EAAOxB,OACVwB,EAAOxB,OAAO3f,QAAQuiB,EAASlC,GAASA,GACvC,EACP,GAAIrX,EAAQ,EACVwZ,EAAK9iB,KAAK8gB,EAAKG,aACV,GAAI3X,EAAQ,EACjBwZ,EAAK9iB,KAAK8gB,EAAKG,KAAK3X,QACf,CACL,IAA0D,IAAtDuR,EAAUiI,EAAMhC,EAAKG,KAAK,GAAGtC,YAAc,GAAIte,GACjD,OAEFA,GAAK,EACLyiB,EAAO,IAAIlD,C,EAGXkD,EAAKljB,SAAW,GAClBib,EAAUiI,EAAM,GAAIziB,EAExB,GAAC,CAAA0O,IAAA,SAAAf,MAED,SAAOgR,GACL,IAAM+D,EAAW,IAAInD,EAqCrB,OApCA,KAAKhB,QAAO,SAACoE,EAAWzC,GACtB,GAAIA,EAAGN,OACL8C,EAAQ,UAAQ1D,EAAA,WAAGzf,OAAO2gB,QACrB,IAAyB,kBAAdA,EAAGL,QAAwC,MAAjBK,EAAG5B,WAE7C,OADAoE,EAAS7C,OAAOK,EAAGL,QACZ8C,EAAYzC,EAAGL,OACjB,GAAIK,EAAE,WAAgC,kBAAdA,EAAGL,OAAqB,CACrD,IAAMtgB,EAAU2gB,EAAE,WAAWA,EAAGL,OAC1Bjc,EAAQ+a,EAAK/a,MAAM+e,EAAWA,EAAYpjB,GAWhD,OAVAqE,EAAMqL,SAAQ,SAAC2T,GACT1C,EAAE,UACJwC,EAAS/iB,KAAKijB,GACL1C,EAAGL,QAAUK,EAAG5B,YACzBoE,EAAS7C,OACPb,EAAA,WAAGzf,OAAOqjB,GACV7D,EAAA,WAAaN,OAAOyB,EAAG5B,WAAYsE,EAAOtE,YAGhD,IACOqE,EAAYpjB,C,CACd,GAAyB,WAArBqN,EAAOsT,EAAGL,SAAqC,OAAdK,EAAGL,OAAiB,CAC9D,IAAMjc,EAAQ+a,EAAK/a,MAAM+e,EAAWA,EAAY,GAC1CC,EAAS,IAAI3D,EAAA,WAAWrb,EAAM4b,KAAKoB,OACzCiC,EAAwCzD,EACtCc,EAAGL,OACH+C,EAAOhD,QACRkD,EAAArB,EAAAoB,EAAA,GAHMvD,EAASwD,EAAA,GAAEC,EAAMD,EAAA,GAAEE,EAAUF,EAAA,GAI9BlB,EAAUrC,EAAMsC,WAAWvC,GAKjC,OAJAoD,EAAS7C,OAAMiC,EAAA,GACVxC,EAAYsC,EAAQnD,OAAOsE,EAAQC,IACtCjE,EAAA,WAAaN,OAAOyB,EAAG5B,WAAYsE,EAAOtE,aAErCqE,EAAY,C,EAErB,OAAOA,CACT,GAAG,GACID,EAASV,MAClB,GAAC,CAAAtT,IAAA,YAAAf,MAID,SAAU0B,GAAqC,IAAhByP,EAAQhB,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,IAAAA,UAAA,GAErC,GADAgB,IAAaA,EACM,kBAARzP,EACT,OAAO,KAAK4T,kBAAkB5T,EAAKyP,GAErC,IAAM7F,EAAe5J,EACfwR,EAAW,IAAI5B,EAAA,WAAW,KAAKO,KAC/BsB,EAAY,IAAI7B,EAAA,WAAWhG,EAAMuG,KACjChe,EAAQ,IAAI+d,EAClB,MAAOsB,EAASH,WAAaI,EAAUJ,UACrC,GAC0B,WAAxBG,EAASK,aACRpC,GAAqC,WAAzBgC,EAAUI,WAGlB,GAA6B,WAAzBJ,EAAUI,WACnB1f,EAAM7B,KAAKmhB,EAAUF,YAChB,CACL,IAAMrhB,EAASyB,KAAKiC,IAAI4d,EAASM,aAAcL,EAAUK,cACnDC,EAASP,EAASD,KAAKrhB,GACvB8hB,EAAUP,EAAUF,KAAKrhB,GAC/B,GAAI6hB,EAAM,UAER,SACK,GAAIC,EAAO,UAChB7f,EAAM7B,KAAK0hB,OACN,CACL,IAAMK,EAAWN,EAAOvB,OAClB8B,EAAYN,EAAQxB,OACtBqD,EACmB,WAArBtW,EAAO+U,IAAwC,OAAdA,EAC7BA,EACApiB,EACN,GACsB,WAApBqN,EAAO8U,IACM,OAAbA,GACqB,WAArB9U,EAAO+U,IACO,OAAdA,EACA,CACA,IAAMrC,EAAYzS,OAAOkD,KAAK2R,GAAU,GACxC,GAAIpC,IAAczS,OAAOkD,KAAK4R,GAAW,GAAI,CAC3C,IAAMC,EAAUrC,EAAMsC,WAAWvC,GAC7BsC,IACFsB,EAAepB,EAAA,GACZxC,EAAYsC,EAAQxS,UACnBsS,EAASpC,GACTqC,EAAUrC,GACVR,I,EAQVtd,EAAMqe,OACJqD,EACAnE,EAAA,WAAa3P,UACXgS,EAAO9C,WACP+C,EAAQ/C,WACRQ,G,OA9CNtd,EAAMqe,OAAOb,EAAA,WAAGzf,OAAOshB,EAASD,SAoDpC,OAAOpf,EAAMwgB,MACf,GAAC,CAAAtT,IAAA,oBAAAf,MAED,SAAkB1E,GAA+B,IAAhB6V,EAAQhB,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,IAAAA,UAAA,GACvCgB,IAAaA,EACb,IAAM+B,EAAW,IAAI5B,EAAA,WAAW,KAAKO,KACjCtR,EAAS,EACb,MAAO2S,EAASH,WAAaxS,GAAUjF,EAAO,CAC5C,IAAM1J,EAASshB,EAASM,aAClBgC,EAAWtC,EAASK,WAC1BL,EAASD,OACQ,WAAbuC,GAGoB,WAAbA,IAA0BjV,EAASjF,IAAU6V,KACtD7V,GAAS1J,GAEX2O,GAAU3O,GALR0J,GAASjI,KAAKiC,IAAI1D,EAAQ0J,EAAQiF,E,CAOtC,OAAOjF,CACT,IAAC,EAAAyF,IAAA,gBAAAf,MA1gBD,SAAwB2R,EAAmBsC,GACzC,KAAKwB,SAAS9D,GAAasC,CAC7B,GAAC,CAAAlT,IAAA,kBAAAf,MAED,SAAuB2R,UACd,KAAK8D,SAAS9D,EACvB,GAAC,CAAA5Q,IAAA,aAAAf,MAEO,SAAkB2R,GACxB,IAAMsC,EAAU,KAAKwB,SAAS9D,GAC9B,IAAKsC,EACH,MAAM,IAAIvC,MAAK,+BAAA1e,OAAgC2e,EAAS,MAE1D,OAAOsC,CACT,IAAC,CApBQ,GACFrC,EAAA8D,GAAKrE,EAAA,WACLO,EAAA+D,WAAarE,EAAA,WACbM,EAAAvB,aAAee,EAAA,WACPQ,EAAA6D,SAA2D,GA+gB5E9Y,EAAAA,WAAeiV,EAIO,WAAL3S,EAANvC,KACTA,EAAOC,QAAUiV,EACjBlV,EAAAA,QAAAA,WAAyBkV,E,mCChjBjB8D,E,gFAAV,SAAUA,GACR,SAAgB9jB,EAAO2gB,GACrB,MAAyB,kBAAdA,EAAE,UACJA,EAAE,UACqB,kBAAdA,EAAGL,OACZK,EAAGL,OACoB,WAArBjT,EAAOsT,EAAGL,SAAqC,OAAdK,EAAGL,OACtC,EAEqB,kBAAdK,EAAGN,OAAsBM,EAAGN,OAAOrgB,OAAS,CAE9D,CAVgB8jB,EAAA9jB,OAAMA,CAWvB,CAZD,CAAU8jB,IAAAA,EAAE,KAcZ/Y,EAAAA,WAAe+Y,C,0LCzBf,IAAArE,EAAAf,EAAA,OAEqBsF,EAAQ,WAK3B,SAAAA,EAAY/D,GAASC,EAAA,KAAA8D,GACnB,KAAK/D,IAAMA,EACX,KAAKvW,MAAQ,EACb,KAAKiF,OAAS,CAChB,CAAC,OAAAwR,EAAA6D,EAAA,EAAA7U,IAAA,UAAAf,MAED,WACE,OAAO,KAAKwT,aAAeX,GAC7B,GAAC,CAAA9R,IAAA,OAAAf,MAED,SAAKpO,GACEA,IACHA,EAASihB,KAEX,IAAMG,EAAS,KAAKnB,IAAI,KAAKvW,OAC7B,GAAI0X,EAAQ,CACV,IAAMzS,EAAS,KAAKA,OACdqU,EAAWvD,EAAA,WAAGzf,OAAOohB,GAQ3B,GAPIphB,GAAUgjB,EAAWrU,GACvB3O,EAASgjB,EAAWrU,EACpB,KAAKjF,OAAS,EACd,KAAKiF,OAAS,GAEd,KAAKA,QAAU3O,EAEY,kBAAlBohB,EAAM,UACf,MAAO,CAAE,OAAQphB,GAEjB,IAAMikB,EAAY,GAkBlB,OAjBI7C,EAAOrC,aACTkF,EAAMlF,WAAaqC,EAAOrC,YAEC,kBAAlBqC,EAAOd,OAChB2D,EAAM3D,OAAStgB,EAEU,WAAzBqN,EAAO+T,EAAOd,SACI,OAAlBc,EAAOd,OAGP2D,EAAM3D,OAASc,EAAOd,OACY,kBAAlBc,EAAOf,OACvB4D,EAAM5D,OAASe,EAAOf,OAAO6D,OAAOvV,EAAQ3O,GAG5CikB,EAAM5D,OAASe,EAAOf,OAEjB4D,C,CAGT,MAAO,CAAE3D,OAAQW,IAErB,GAAC,CAAA9R,IAAA,OAAAf,MAED,WACE,OAAO,KAAK6R,IAAI,KAAKvW,MACvB,GAAC,CAAAyF,IAAA,aAAAf,MAED,WACE,OAAI,KAAK6R,IAAI,KAAKvW,OAET+V,EAAA,WAAGzf,OAAO,KAAKigB,IAAI,KAAKvW,QAAU,KAAKiF,OAEvCsS,GAEX,GAAC,CAAA9R,IAAA,WAAAf,MAED,WACE,IAAMuS,EAAK,KAAKV,IAAI,KAAKvW,OACzB,OAAIiX,EACuB,kBAAdA,EAAE,UACJ,SAEc,kBAAdA,EAAGL,QACY,WAArBjT,EAAOsT,EAAGL,SAAqC,OAAdK,EAAGL,OAE9B,SAEA,SAGJ,QACT,GAAC,CAAAnR,IAAA,OAAAf,MAED,WACE,GAAK,KAAK+S,UAEH,IAAoB,IAAhB,KAAKxS,OACd,OAAO,KAAKsR,IAAI5b,MAAM,KAAKqF,OAE3B,IAAMiF,EAAS,KAAKA,OACdjF,EAAQ,KAAKA,MACb2X,EAAO,KAAKA,OACZmB,EAAO,KAAKvC,IAAI5b,MAAM,KAAKqF,OAGjC,OAFA,KAAKiF,OAASA,EACd,KAAKjF,MAAQA,EACN,CAAC2X,GAAMjgB,OAAOohB,E,CAVrB,MAAO,EAYX,IAAC,CAtG0B,GAA7BzX,EAAAA,WAAAiZ,C,+BCFatF,EAAA,OAAAA,EAAA,OAAAA,EAAA,OAAAA,EAAA,OAAAA,EAAA,OAAAA,EAAA,OAAAA,EAAA,OAAAA,EAAA,OAEb,IAAIpL,EAAMhG,OAAO2C,UAAUU,eACvBwT,EAAS,IASb,SAASC,IAAU,CA4BnB,SAASC,EAAGC,EAAIC,EAASC,GACvBxR,KAAKsR,GAAKA,EACVtR,KAAKuR,QAAUA,EACfvR,KAAKwR,KAAOA,IAAQ,CACtB,CAaA,SAASC,EAAYC,EAASC,EAAOL,EAAIC,EAASC,GAChD,GAAkB,oBAAPF,EACT,MAAM,IAAIM,UAAU,mCAGtB,IAAIC,EAAW,IAAIR,EAAGC,EAAIC,GAAWG,EAASF,GAC1CM,EAAMX,EAASA,EAASQ,EAAQA,EAMpC,OAJKD,EAAQK,QAAQD,GACXJ,EAAQK,QAAQD,GAAKR,GAC1BI,EAAQK,QAAQD,GAAO,CAACJ,EAAQK,QAAQD,GAAMD,GADhBH,EAAQK,QAAQD,GAAK1kB,KAAKykB,IADlCH,EAAQK,QAAQD,GAAOD,EAAUH,EAAQM,gBAI7DN,CACT,CASA,SAASO,EAAWP,EAASI,GACI,MAAzBJ,EAAQM,aAAoBN,EAAQK,QAAU,IAAIX,SAC5CM,EAAQK,QAAQD,EAC9B,CASA,SAASI,IACPlS,KAAK+R,QAAU,IAAIX,EACnBpR,KAAKgS,aAAe,CACtB,CAzEI1X,OAAOiE,SACT6S,EAAOnU,UAAY3C,OAAOiE,OAAO,OAM5B,IAAI6S,GAASe,YAAWhB,GAAS,IA2ExCe,EAAajV,UAAUmV,WAAa,WAClC,IACIC,EACAzH,EAFA0H,EAAQ,GAIZ,GAA0B,IAAtBtS,KAAKgS,aAAoB,OAAOM,EAEpC,IAAK1H,KAASyH,EAASrS,KAAK+R,QACtBzR,EAAIvC,KAAKsU,EAAQzH,IAAO0H,EAAMllB,KAAK+jB,EAASvG,EAAKvZ,MAAM,GAAKuZ,GAGlE,OAAItQ,OAAOoE,sBACF4T,EAAMlkB,OAAOkM,OAAOoE,sBAAsB2T,IAG5CC,CACT,EASAJ,EAAajV,UAAUsV,UAAY,SAAmBZ,GACpD,IAAIG,EAAMX,EAASA,EAASQ,EAAQA,EAChCd,EAAW7Q,KAAK+R,QAAQD,GAE5B,IAAKjB,EAAU,MAAO,GACtB,GAAIA,EAASS,GAAI,MAAO,CAACT,EAASS,IAElC,IAAK,IAAI7jB,EAAI,EAAG+kB,EAAI3B,EAAS7jB,OAAQylB,EAAK,IAAI3jB,MAAM0jB,GAAI/kB,EAAI+kB,EAAG/kB,IAC7DglB,EAAGhlB,GAAKojB,EAASpjB,GAAG6jB,GAGtB,OAAOmB,CACT,EASAP,EAAajV,UAAUyV,cAAgB,SAAuBf,GAC5D,IAAIG,EAAMX,EAASA,EAASQ,EAAQA,EAChCY,EAAYvS,KAAK+R,QAAQD,GAE7B,OAAKS,EACDA,EAAUjB,GAAW,EAClBiB,EAAUvlB,OAFM,CAGzB,EASAklB,EAAajV,UAAU0V,KAAO,SAAchB,EAAOiB,EAAIC,EAAIC,EAAIC,EAAIC,GACjE,IAAIlB,EAAMX,EAASA,EAASQ,EAAQA,EAEpC,IAAK3R,KAAK+R,QAAQD,GAAM,OAAO,EAE/B,IAEImB,EACAxlB,EAHA8kB,EAAYvS,KAAK+R,QAAQD,GACzBoB,EAAM3H,UAAUve,OAIpB,GAAIulB,EAAUjB,GAAI,CAGhB,OAFIiB,EAAUf,MAAMxR,KAAKmT,eAAexB,EAAOY,EAAUjB,QAAIlV,GAAW,GAEhE8W,GACN,KAAK,EAAG,OAAOX,EAAUjB,GAAGvT,KAAKwU,EAAUhB,UAAU,EACrD,KAAK,EAAG,OAAOgB,EAAUjB,GAAGvT,KAAKwU,EAAUhB,QAASqB,IAAK,EACzD,KAAK,EAAG,OAAOL,EAAUjB,GAAGvT,KAAKwU,EAAUhB,QAASqB,EAAIC,IAAK,EAC7D,KAAK,EAAG,OAAON,EAAUjB,GAAGvT,KAAKwU,EAAUhB,QAASqB,EAAIC,EAAIC,IAAK,EACjE,KAAK,EAAG,OAAOP,EAAUjB,GAAGvT,KAAKwU,EAAUhB,QAASqB,EAAIC,EAAIC,EAAIC,IAAK,EACrE,KAAK,EAAG,OAAOR,EAAUjB,GAAGvT,KAAKwU,EAAUhB,QAASqB,EAAIC,EAAIC,EAAIC,EAAIC,IAAK,EAG3E,IAAKvlB,EAAI,EAAGwlB,EAAO,IAAInkB,MAAMokB,EAAK,GAAIzlB,EAAIylB,EAAKzlB,IAC7CwlB,EAAKxlB,EAAI,GAAK8d,UAAU9d,GAG1B8kB,EAAUjB,GAAG8B,MAAMb,EAAUhB,QAAS0B,EACxC,KAAO,CACL,IACInhB,EADA9E,EAASulB,EAAUvlB,OAGvB,IAAKS,EAAI,EAAGA,EAAIT,EAAQS,IAGtB,OAFI8kB,EAAU9kB,GAAG+jB,MAAMxR,KAAKmT,eAAexB,EAAOY,EAAU9kB,GAAG6jB,QAAIlV,GAAW,GAEtE8W,GACN,KAAK,EAAGX,EAAU9kB,GAAG6jB,GAAGvT,KAAKwU,EAAU9kB,GAAG8jB,SAAU,MACpD,KAAK,EAAGgB,EAAU9kB,GAAG6jB,GAAGvT,KAAKwU,EAAU9kB,GAAG8jB,QAASqB,GAAK,MACxD,KAAK,EAAGL,EAAU9kB,GAAG6jB,GAAGvT,KAAKwU,EAAU9kB,GAAG8jB,QAASqB,EAAIC,GAAK,MAC5D,KAAK,EAAGN,EAAU9kB,GAAG6jB,GAAGvT,KAAKwU,EAAU9kB,GAAG8jB,QAASqB,EAAIC,EAAIC,GAAK,MAChE,QACE,IAAKG,EAAM,IAAKnhB,EAAI,EAAGmhB,EAAO,IAAInkB,MAAMokB,EAAK,GAAIphB,EAAIohB,EAAKphB,IACxDmhB,EAAKnhB,EAAI,GAAKyZ,UAAUzZ,GAG1BygB,EAAU9kB,GAAG6jB,GAAG8B,MAAMb,EAAU9kB,GAAG8jB,QAAS0B,GAGpD,CAEA,OAAO,CACT,EAWAf,EAAajV,UAAUoW,GAAK,SAAY1B,EAAOL,EAAIC,GACjD,OAAOE,EAAYzR,KAAM2R,EAAOL,EAAIC,GAAS,EAC/C,EAWAW,EAAajV,UAAUuU,KAAO,SAAcG,EAAOL,EAAIC,GACrD,OAAOE,EAAYzR,KAAM2R,EAAOL,EAAIC,GAAS,EAC/C,EAYAW,EAAajV,UAAUkW,eAAiB,SAAwBxB,EAAOL,EAAIC,EAASC,GAClF,IAAIM,EAAMX,EAASA,EAASQ,EAAQA,EAEpC,IAAK3R,KAAK+R,QAAQD,GAAM,OAAO9R,KAC/B,IAAKsR,EAEH,OADAW,EAAWjS,KAAM8R,GACV9R,KAGT,IAAIuS,EAAYvS,KAAK+R,QAAQD,GAE7B,GAAIS,EAAUjB,GAEViB,EAAUjB,KAAOA,GACfE,IAAQe,EAAUf,MAClBD,GAAWgB,EAAUhB,UAAYA,GAEnCU,EAAWjS,KAAM8R,OAEd,CACL,IAAK,IAAIrkB,EAAI,EAAG4kB,EAAS,GAAIrlB,EAASulB,EAAUvlB,OAAQS,EAAIT,EAAQS,KAEhE8kB,EAAU9kB,GAAG6jB,KAAOA,GACnBE,IAASe,EAAU9kB,GAAG+jB,MACtBD,GAAWgB,EAAU9kB,GAAG8jB,UAAYA,IAErCc,EAAOjlB,KAAKmlB,EAAU9kB,IAOtB4kB,EAAOrlB,OAAQgT,KAAK+R,QAAQD,GAAyB,IAAlBO,EAAOrlB,OAAeqlB,EAAO,GAAKA,EACpEJ,EAAWjS,KAAM8R,EACxB,CAEA,OAAO9R,IACT,EASAkS,EAAajV,UAAUqW,mBAAqB,SAA4B3B,GACtE,IAAIG,EAUJ,OARIH,GACFG,EAAMX,EAASA,EAASQ,EAAQA,EAC5B3R,KAAK+R,QAAQD,IAAMG,EAAWjS,KAAM8R,KAExC9R,KAAK+R,QAAU,IAAIX,EACnBpR,KAAKgS,aAAe,GAGfhS,IACT,EAKAkS,EAAajV,UAAUsW,IAAMrB,EAAajV,UAAUkW,eACpDjB,EAAajV,UAAUwU,YAAcS,EAAajV,UAAUoW,GAK5DnB,EAAasB,SAAWrC,EAKxBe,EAAaA,aAAeA,EAM1Bpa,EAAOC,QAAUma,C,+BC7UnB,IAAIuB,EAAI,EAAQ,OAIhBA,EAAE,CAAE7F,OAAQ,SAAU8F,MAAM,GAAQ,CAClCC,MAAO,SAAeC,GAEpB,OAAOA,IAAWA,CACpB,G,6BCRF,IAAIH,EAAI,EAAQ,OACZI,EAAa,EAAQ,OACrBC,EAAY,EAAQ,OACpBC,EAAY,EAAQ,OACpBC,EAA0B,EAAQ,OAClCC,EAAQ,EAAQ,OAChBC,EAAc,EAAQ,OAItBC,EAAcF,GAAM,WAGtB,OAAOC,GAA8F,IAA/E5Z,OAAO8Z,yBAAyBP,EAAY,kBAAkBzY,MAAMpO,MAC5F,IAIAymB,EAAE,CAAErZ,QAAQ,EAAMia,YAAY,EAAMC,gBAAgB,EAAMC,OAAQJ,GAAe,CAC/EK,eAAgB,SAAwBlD,GACtC0C,EAAwBzI,UAAUve,OAAQ,GAC1C8mB,EAAUC,EAAUzC,GACtB,G,oaCvBF,SAASmD,EAA8BC,EAAGnY,GACxC,GAAI,MAAQmY,EAAG,MAAO,CAAC,EACvB,IAAIC,EAAI,CAAC,EACT,IAAK,IAAIhf,KAAK+e,EAAG,GAAI,CAAC,EAAE/W,eAAeI,KAAK2W,EAAG/e,GAAI,CACjD,GAAI4G,EAAE7O,QAAQiI,IAAM,EAAG,SACvBgf,EAAEhf,GAAK+e,EAAE/e,EACX,CACA,OAAOgf,CACT,CCPA,SAASC,EAAyBrY,EAAGoY,GACnC,GAAI,MAAQpY,EAAG,MAAO,CAAC,EACvB,IAAIsY,EACFH,EACAjnB,EAAIqnB,EAA6BvY,EAAGoY,GACtC,GAAIra,OAAOoE,sBAAuB,CAChC,IAAI/I,EAAI2E,OAAOoE,sBAAsBnC,GACrC,IAAKmY,EAAI,EAAGA,EAAI/e,EAAE3I,OAAQ0nB,IAAKG,EAAIlf,EAAE+e,GAAIC,EAAEjnB,QAAQmnB,IAAM,GAAK,CAAC,EAAErW,qBAAqBT,KAAKxB,EAAGsY,KAAOpnB,EAAEonB,GAAKtY,EAAEsY,GAChH,CACA,OAAOpnB,CACT,C,wMCJA,SAASmT,IACPZ,KAAKI,SAAW,GAChBJ,KAAKvD,KAAO,CACd,CAEA,U,SCoBA,SAASmG,EAAGxH,EAAOsL,GACjB,OAAOtL,IAAUsL,GAAUtL,IAAUA,GAASsL,IAAUA,CAC1D,CAEA,UC1BA,SAAS5F,EAAavF,EAAOY,GAC3B,IAAInP,EAASuO,EAAMvO,OACnB,MAAOA,IACL,GAAI4V,EAAGrH,EAAMvO,GAAQ,GAAImP,GACvB,OAAOnP,EAGX,OAAQ,CACV,CAEA,UCjBA,IAAIgQ,EAAalO,MAAMmO,UAGnBnK,EAASkK,EAAWlK,OAWxB,SAAS+N,EAAgB1E,GACvB,IAAIqE,EAAOR,KAAKI,SACZ1J,EAAQoK,EAAaN,EAAMrE,GAE/B,GAAIzF,EAAQ,EACV,OAAO,EAET,IAAIqK,EAAYP,EAAKxT,OAAS,EAO9B,OANI0J,GAASqK,EACXP,EAAK5K,MAEL9C,EAAOiL,KAAKyC,EAAM9J,EAAO,KAEzBsJ,KAAKvD,MACA,CACT,CAEA,UCvBA,SAASuE,EAAa7E,GACpB,IAAIqE,EAAOR,KAAKI,SACZ1J,EAAQoK,EAAaN,EAAMrE,GAE/B,OAAOzF,EAAQ,OAAI0F,EAAYoE,EAAK9J,GAAO,EAC7C,CAEA,UCPA,SAASuK,EAAa9E,GACpB,OAAO2E,EAAad,KAAKI,SAAUjE,IAAQ,CAC7C,CAEA,U,SCHA,SAAS+E,EAAa/E,EAAKf,GACzB,IAAIoF,EAAOR,KAAKI,SACZ1J,EAAQoK,EAAaN,EAAMrE,GAQ/B,OANIzF,EAAQ,KACRsJ,KAAKvD,KACP+D,EAAKpT,KAAK,CAAC+O,EAAKf,KAEhBoF,EAAK9J,GAAO,GAAK0E,EAEZ4E,IACT,CAEA,UCZA,SAASW,EAAUZ,GACjB,IAAIrJ,GAAS,EACT1J,EAAoB,MAAX+S,EAAkB,EAAIA,EAAQ/S,OAE3CgT,KAAKC,QACL,QAASvJ,EAAQ1J,EAAQ,CACvB,IAAIkT,EAAQH,EAAQrJ,GACpBsJ,KAAK9E,IAAIgF,EAAM,GAAIA,EAAM,GAC3B,CACF,CAGAS,EAAU1D,UAAUgD,MAAQW,EAC5BD,EAAU1D,UAAU,UAAY4D,EAChCF,EAAU1D,UAAUuE,IAAMR,EAC1BL,EAAU1D,UAAUqD,IAAMW,EAC1BN,EAAU1D,UAAU/B,IAAMgG,EAE1B,UCtBA,SAASU,IACP5B,KAAKI,SAAW,IAAIO,EACpBX,KAAKvD,KAAO,CACd,CAEA,UCLA,SAASoF,EAAY1F,GACnB,IAAIqE,EAAOR,KAAKI,SACZpE,EAASwE,EAAK,UAAUrE,GAG5B,OADA6D,KAAKvD,KAAO+D,EAAK/D,KACVT,CACT,CAEA,UCRA,SAAS8F,EAAS3F,GAChB,OAAO6D,KAAKI,SAASoB,IAAIrF,EAC3B,CAEA,UCJA,SAAS4F,EAAS5F,GAChB,OAAO6D,KAAKI,SAASE,IAAInE,EAC3B,CAEA,U,qFCZIhC,EAA8B,WAAJ,qBAANC,OAAM,aAAAC,EAAAA,EAAAA,GAAND,UAAsBA,QAAUA,OAAOE,SAAWA,QAAUF,OAEpF,UCAA,IAAIG,EAA0B,WAAJ,qBAAJC,KAAI,aAAAH,EAAAA,EAAAA,GAAJG,QAAoBA,MAAQA,KAAKF,SAAWA,QAAUE,KAGxEC,EAAON,GAAcI,GAAYG,SAAS,cAATA,GAErC,UCLA,IAAIwD,EAASzD,EAAKyD,OAElB,UCFA,IAAIf,EAAc7C,OAAO2C,UAGrBU,EAAiBR,EAAYQ,eAO7B2K,EAAuBnL,EAAYb,SAGnCiM,EAAiBrK,EAASA,EAAOsK,iBAAcpM,EASnD,SAAS2M,EAAU3N,GACjB,IAAIiQ,EAAQ1N,EAAeI,KAAK3C,EAAOmN,GACnC9E,EAAMrI,EAAMmN,GAEhB,IACEnN,EAAMmN,QAAkBnM,EACxB,IAAIkP,GAAW,CACjB,CAAE,MAAO/O,GAAI,CAEb,IAAIP,EAASsM,EAAqBvK,KAAK3C,GAQvC,OAPIkQ,IACED,EACFjQ,EAAMmN,GAAkB9E,SAEjBrI,EAAMmN,IAGVvM,CACT,CAEA,UC5CA,IAAImB,EAAc7C,OAAO2C,UAOrBqL,EAAuBnL,EAAYb,SASvC,SAASsB,EAAexC,GACtB,OAAOkN,EAAqBvK,KAAK3C,EACnC,CAEA,WChBA,IAAIkM,GAAU,gBACVE,GAAe,qBAGfe,GAAiBrK,EAASA,EAAOsK,iBAAcpM,EASnD,SAASqI,GAAWrJ,GAClB,OAAa,MAATA,OACegB,IAAVhB,EAAsBoM,GAAeF,GAEtCiB,IAAkBA,MAAkBjO,OAAOc,GAC/C2N,EAAU3N,GACVwC,GAAexC,EACrB,CAEA,YCFA,SAASiI,GAASjI,GAChB,IAAIoL,GAAInM,EAAAA,EAAAA,GAAUe,GAClB,OAAgB,MAATA,IAA0B,UAARoL,GAA4B,YAARA,EAC/C,CAEA,YC1BA,IAAIa,GAAW,yBACX7O,GAAU,oBACVC,GAAS,6BACT8O,GAAW,iBAmBf,SAAS3C,GAAWxJ,GAClB,IAAKiI,GAASjI,GACZ,OAAO,EAIT,IAAIqI,EAAMgB,GAAWrJ,GACrB,OAAOqI,GAAOjL,IAAWiL,GAAOhL,IAAUgL,GAAO4D,IAAY5D,GAAO8D,EACtE,CAEA,Y,aCjCInK,GAAa3C,EAAK,sBAEtB,YCFA,IAAI4C,GAAc,WAChB,IAAIC,EAAM,SAASC,KAAKH,IAAcA,GAAWI,MAAQJ,GAAWI,KAAKC,UAAY,IACrF,OAAOH,EAAO,iBAAmBA,EAAO,EAC1C,CAHkB,GAYlB,SAASqH,GAAS/H,GAChB,QAASS,IAAeA,MAAcT,CACxC,CAEA,YClBA,IAAIM,GAAYxC,SAASuC,UAGrBS,GAAeR,GAAUZ,SAS7B,SAASgD,GAAS1C,GAChB,GAAY,MAARA,EAAc,CAChB,IACE,OAAOc,GAAaK,KAAKnB,EAC3B,CAAE,MAAOL,GAAI,CACb,IACE,OAAQK,EAAO,EACjB,CAAE,MAAOL,GAAI,CACf,CACA,MAAO,EACT,CAEA,YChBA,IAAIzC,GAAe,sBAGfE,GAAe,8BAGfkD,GAAYxC,SAASuC,UACrBE,GAAc7C,OAAO2C,UAGrBS,GAAeR,GAAUZ,SAGzBqB,GAAiBR,GAAYQ,eAG7BE,GAAaC,OAAO,IACtBJ,GAAaK,KAAKJ,IAAgBK,QAAQlE,GAAc,QACvDkE,QAAQ,yDAA0D,SAAW,KAWhF,SAAS0G,GAAatJ,GACpB,IAAKiI,GAASjI,IAAUuJ,GAASvJ,GAC/B,OAAO,EAET,IAAIjK,EAAUyT,GAAWxJ,GAASyC,GAAa7D,GAC/C,OAAO7I,EAAQ0T,KAAKvF,GAASlE,GAC/B,CAEA,YCtCA,SAASa,GAASC,EAAQC,GACxB,OAAiB,MAAVD,OAAiBE,EAAYF,EAAOC,EAC7C,CAEA,YCDA,SAAS4C,GAAU7C,EAAQC,GACzB,IAAIf,EAAQa,GAASC,EAAQC,GAC7B,OAAOuI,GAAatJ,GAASA,OAAQgB,CACvC,CAEA,YCZA,IAAI4C,GAAMD,GAAUtE,EAAM,OAE1B,YCHA,IAAI2E,GAAeL,GAAUzE,OAAQ,UAErC,YCIA,SAAS6F,KACPH,KAAKI,SAAWhB,GAAeA,GAAa,MAAQ,CAAC,EACrDY,KAAKvD,KAAO,CACd,CAEA,YCJA,SAAS4D,GAAWlE,GAClB,IAAIH,EAASgE,KAAKM,IAAInE,WAAe6D,KAAKI,SAASjE,GAEnD,OADA6D,KAAKvD,MAAQT,EAAS,EAAI,EACnBA,CACT,CAEA,YCbA,IAAI/D,GAAiB,4BAGjBkF,GAAc7C,OAAO2C,UAGrBU,GAAiBR,GAAYQ,eAWjC,SAAS4C,GAAQpE,GACf,IAAIqE,EAAOR,KAAKI,SAChB,GAAIhB,GAAc,CAChB,IAAIpD,EAASwE,EAAKrE,GAClB,OAAOH,IAAW/D,QAAiBmE,EAAYJ,CACjD,CACA,OAAO2B,GAAeI,KAAKyC,EAAMrE,GAAOqE,EAAKrE,QAAOC,CACtD,CAEA,YC1BA,IAAIe,GAAc7C,OAAO2C,UAGrBU,GAAiBR,GAAYQ,eAWjC,SAAS8C,GAAQtE,GACf,IAAIqE,EAAOR,KAAKI,SAChB,OAAOhB,QAA8BhD,IAAdoE,EAAKrE,GAAsBwB,GAAeI,KAAKyC,EAAMrE,EAC9E,CAEA,YCnBA,IAAIlE,GAAiB,4BAYrB,SAASyI,GAAQvE,EAAKf,GACpB,IAAIoF,EAAOR,KAAKI,SAGhB,OAFAJ,KAAKvD,MAAQuD,KAAKM,IAAInE,GAAO,EAAI,EACjCqE,EAAKrE,GAAQiD,SAA0BhD,IAAVhB,EAAuBnD,GAAiBmD,EAC9D4E,IACT,CAEA,YCTA,SAASF,GAAKC,GACZ,IAAIrJ,GAAS,EACT1J,EAAoB,MAAX+S,EAAkB,EAAIA,EAAQ/S,OAE3CgT,KAAKC,QACL,QAASvJ,EAAQ1J,EAAQ,CACvB,IAAIkT,EAAQH,EAAQrJ,GACpBsJ,KAAK9E,IAAIgF,EAAM,GAAIA,EAAM,GAC3B,CACF,CAGAJ,GAAK7C,UAAUgD,MAAQE,GACvBL,GAAK7C,UAAU,UAAYoD,GAC3BP,GAAK7C,UAAUuE,IAAMjB,GACrBT,GAAK7C,UAAUqD,IAAMG,GACrBX,GAAK7C,UAAU/B,IAAMwF,GAErB,YCpBA,SAASU,KACPpB,KAAKvD,KAAO,EACZuD,KAAKI,SAAW,CACd,KAAQ,IAAIN,GACZ,IAAO,IAAKd,IAAO2B,GACnB,OAAU,IAAIb,GAElB,CAEA,YCbA,SAASsG,GAAUhL,GACjB,IAAIoL,GAAInM,EAAAA,EAAAA,GAAUe,GAClB,MAAgB,UAARoL,GAA4B,UAARA,GAA4B,UAARA,GAA4B,WAARA,EACrD,cAAVpL,EACU,OAAVA,CACP,CAEA,YCJA,SAASkG,GAAWtG,EAAKmB,GACvB,IAAIqE,EAAOxF,EAAIoF,SACf,OAAOgG,GAAUjK,GACbqE,EAAmB,iBAAPrE,EAAkB,SAAW,QACzCqE,EAAKxF,GACX,CAEA,YCNA,SAASqG,GAAelF,GACtB,IAAIH,EAASsF,GAAWtB,KAAM7D,GAAK,UAAUA,GAE7C,OADA6D,KAAKvD,MAAQT,EAAS,EAAI,EACnBA,CACT,CAEA,YCNA,SAASuF,GAAYpF,GACnB,OAAOmF,GAAWtB,KAAM7D,GAAKqF,IAAIrF,EACnC,CAEA,YCJA,SAASsF,GAAYtF,GACnB,OAAOmF,GAAWtB,KAAM7D,GAAKmE,IAAInE,EACnC,CAEA,YCHA,SAASuF,GAAYvF,EAAKf,GACxB,IAAIoF,EAAOc,GAAWtB,KAAM7D,GACxBM,EAAO+D,EAAK/D,KAIhB,OAFA+D,EAAKtF,IAAIiB,EAAKf,GACd4E,KAAKvD,MAAQ+D,EAAK/D,MAAQA,EAAO,EAAI,EAC9BuD,IACT,CAEA,YCRA,SAASmB,GAASpB,GAChB,IAAIrJ,GAAS,EACT1J,EAAoB,MAAX+S,EAAkB,EAAIA,EAAQ/S,OAE3CgT,KAAKC,QACL,QAASvJ,EAAQ1J,EAAQ,CACvB,IAAIkT,EAAQH,EAAQrJ,GACpBsJ,KAAK9E,IAAIgF,EAAM,GAAIA,EAAM,GAC3B,CACF,CAGAiB,GAASlE,UAAUgD,MAAQmB,GAC3BD,GAASlE,UAAU,UAAYoE,GAC/BF,GAASlE,UAAUuE,IAAMD,GACzBJ,GAASlE,UAAUqD,IAAMmB,GACzBN,GAASlE,UAAU/B,IAAMwG,GAEzB,YC1BA,IAAI1J,GAAmB,IAYvB,SAASgK,GAAS7F,EAAKf,GACrB,IAAIoF,EAAOR,KAAKI,SAChB,GAAII,aAAgBG,EAAW,CAC7B,IAAIuB,EAAQ1B,EAAKJ,SACjB,IAAKpB,IAAQkD,EAAMlV,OAASgL,GAAmB,EAG7C,OAFAkK,EAAM9U,KAAK,CAAC+O,EAAKf,IACjB4E,KAAKvD,OAAS+D,EAAK/D,KACZuD,KAETQ,EAAOR,KAAKI,SAAW,IAAIe,GAASe,EACtC,CAGA,OAFA1B,EAAKtF,IAAIiB,EAAKf,GACd4E,KAAKvD,KAAO+D,EAAK/D,KACVuD,IACT,CAEA,YCnBA,SAAS2B,GAAM5B,GACb,IAAIS,EAAOR,KAAKI,SAAW,IAAIO,EAAUZ,GACzCC,KAAKvD,KAAO+D,EAAK/D,IACnB,CAGAkF,GAAM1E,UAAUgD,MAAQ2B,EACxBD,GAAM1E,UAAU,UAAY4E,EAC5BF,GAAM1E,UAAUuE,IAAMM,EACtBH,GAAM1E,UAAUqD,IAAMyB,EACtBJ,GAAM1E,UAAU/B,IAAM8G,GAEtB,YCxBA,IAAI+S,GAAkB,WACpB,IACE,IAAInY,EAAOmC,GAAUzE,OAAQ,kBAE7B,OADAsC,EAAK,CAAC,EAAG,GAAI,CAAC,GACPA,CACT,CAAE,MAAOL,GAAI,CACf,CANsB,GAQtB,YCCA,SAASyY,GAAgB9Y,EAAQC,EAAKf,GACzB,aAAPe,GAAsB4Y,GACxBA,GAAe7Y,EAAQC,EAAK,CAC1B,cAAgB,EAChB,YAAc,EACd,MAASf,EACT,UAAY,IAGdc,EAAOC,GAAOf,CAElB,CAEA,YCZA,SAAS6Z,GAAiB/Y,EAAQC,EAAKf,SACtBgB,IAAVhB,IAAwBwH,EAAG1G,EAAOC,GAAMf,SAC9BgB,IAAVhB,KAAyBe,KAAOD,KACnC8Y,GAAgB9Y,EAAQC,EAAKf,EAEjC,CAEA,YCZA,SAAS8Z,GAAcC,GACrB,OAAO,SAASjZ,EAAQV,EAAU+I,GAChC,IAAI7N,GAAS,EACT0e,EAAW9a,OAAO4B,GAClB+H,EAAQM,EAASrI,GACjBlP,EAASiX,EAAMjX,OAEnB,MAAOA,IAAU,CACf,IAAImP,EAAM8H,EAAMkR,EAAYnoB,IAAW0J,GACvC,IAA+C,IAA3C8E,EAAS4Z,EAASjZ,GAAMA,EAAKiZ,GAC/B,KAEJ,CACA,OAAOlZ,CACT,CACF,CAEA,YCXA,IAAImZ,GAAUH,KAEd,Y,aCZIva,GAAgC,WAAJ,qBAAP5C,QAAO,aAAAsC,EAAAA,EAAAA,GAAPtC,WAAuBA,UAAYA,QAAQ6C,UAAY7C,QAG5E8C,GAAaF,IAAgC,WAAJ,qBAAN7C,OAAM,aAAAuC,EAAAA,EAAAA,GAANvC,UAAsBA,SAAWA,OAAO8C,UAAY9C,OAGvFgD,GAAgBD,IAAcA,GAAW9C,UAAY4C,GAGrDsD,GAASnD,GAAgBL,EAAKwD,YAAS7B,EACvCkZ,GAAcrX,GAASA,GAAOqX,iBAAclZ,EAUhD,SAASwH,GAAYoB,EAAQ/B,GAC3B,GAAIA,EACF,OAAO+B,EAAO3T,QAEhB,IAAIrE,EAASgY,EAAOhY,OAChBgP,EAASsZ,GAAcA,GAAYtoB,GAAU,IAAIgY,EAAOC,YAAYjY,GAGxE,OADAgY,EAAOE,KAAKlJ,GACLA,CACT,CAEA,YC/BA,IAAImC,GAAa1D,EAAK0D,WAEtB,YCIA,SAASgH,GAAiBC,GACxB,IAAIpJ,EAAS,IAAIoJ,EAAYH,YAAYG,EAAYC,YAErD,OADA,IAAIlH,GAAWnC,GAAQd,IAAI,IAAIiD,GAAWiH,IACnCpJ,CACT,CAEA,YCLA,SAASgK,GAAgBC,EAAYhD,GACnC,IAAI+B,EAAS/B,EAASkC,GAAiBc,EAAWjB,QAAUiB,EAAWjB,OACvE,OAAO,IAAIiB,EAAWhB,YAAYD,EAAQiB,EAAWT,WAAYS,EAAWjZ,OAC9E,CAEA,YCPA,SAASwW,GAAUV,EAAQvH,GACzB,IAAI7E,GAAS,EACT1J,EAAS8V,EAAO9V,OAEpBuO,IAAUA,EAAQzM,MAAM9B,IACxB,QAAS0J,EAAQ1J,EACfuO,EAAM7E,GAASoM,EAAOpM,GAExB,OAAO6E,CACT,CAEA,Y,aChBI+C,GAAehE,OAAOiE,OAUtB6F,GAAc,WAChB,SAASlI,IAAU,CACnB,OAAO,SAASmI,GACd,IAAKhB,GAASgB,GACZ,MAAO,CAAC,EAEV,GAAI/F,GACF,OAAOA,GAAa+F,GAEtBnI,EAAOe,UAAYoH,EACnB,IAAIrI,EAAS,IAAIE,EAEjB,OADAA,EAAOe,eAAYb,EACZJ,CACT,CACF,CAdkB,GAgBlB,Y,SCrBA,SAASW,GAAQC,EAAMC,GACrB,OAAO,SAASC,GACd,OAAOF,EAAKC,EAAUC,GACxB,CACF,CAEA,YCXA,IAAIsB,GAAezB,GAAQrC,OAAO+D,eAAgB/D,QAElD,YCJA,IAAI6C,GAAc7C,OAAO2C,UASzB,SAAS8H,GAAY3J,GACnB,IAAImL,EAAOnL,GAASA,EAAM6J,YACtBZ,EAAwB,mBAARkC,GAAsBA,EAAKtJ,WAAcE,GAE7D,OAAO/B,IAAUiJ,CACnB,CAEA,YCNA,SAASR,GAAgB3H,GACvB,MAAqC,mBAAtBA,EAAO+I,aAA8BF,GAAY7I,GAE5D,CAAC,EADDkI,GAAWhG,GAAalC,GAE9B,CAEA,YCOA,SAAS+K,GAAa7L,GACpB,OAAgB,MAATA,GAAiC,WAAhBf,EAAAA,EAAAA,GAAOe,EACjC,CAEA,YCxBA,IAAIjD,GAAU,qBASd,SAAS6Q,GAAgB5N,GACvB,OAAO6L,GAAa7L,IAAUqJ,GAAWrJ,IAAUjD,EACrD,CAEA,YCbA,IAAIgF,GAAc7C,OAAO2C,UAGrBU,GAAiBR,GAAYQ,eAG7Ba,GAAuBrB,GAAYqB,qBAoBnC8D,GAAc0G,GAAgB,WAAa,OAAOuC,SAAW,CAA/B,IAAsCvC,GAAkB,SAAS5N,GACjG,OAAO6L,GAAa7L,IAAUuC,GAAeI,KAAK3C,EAAO,YACtDoD,GAAqBT,KAAK3C,EAAO,SACtC,EAEA,Y,aCZIiH,GAAUvT,MAAMuT,QAEpB,YCxBA,IAAInK,GAAmB,iBA4BvB,SAAS8O,GAAS5L,GAChB,MAAuB,iBAATA,GACZA,GAAS,GAAKA,EAAQ,GAAK,GAAKA,GAASlD,EAC7C,CAEA,YCNA,SAAS6O,GAAY3L,GACnB,OAAgB,MAATA,GAAiB4L,GAAS5L,EAAMpO,UAAY4X,GAAWxJ,EAChE,CAEA,YCJA,SAASuL,GAAkBvL,GACzB,OAAO6L,GAAa7L,IAAU2L,GAAY3L,EAC5C,CAEA,YCnBA,SAAS8L,KACP,OAAO,CACT,CAEA,YCbA,IAAIvM,GAAgC,WAAJ,qBAAP5C,QAAO,aAAAsC,EAAAA,EAAAA,GAAPtC,WAAuBA,UAAYA,QAAQ6C,UAAY7C,QAG5E8C,GAAaF,IAAgC,WAAJ,qBAAN7C,OAAM,aAAAuC,EAAAA,EAAAA,GAANvC,UAAsBA,SAAWA,OAAO8C,UAAY9C,OAGvFgD,GAAgBD,IAAcA,GAAW9C,UAAY4C,GAGrDsD,GAASnD,GAAgBL,EAAKwD,YAAS7B,EAGvCuC,GAAiBV,GAASA,GAAOW,cAAWxC,EAmB5CwC,GAAWD,IAAkBuI,GAEjC,YChCA,IAAItO,GAAY,kBAGZsE,GAAYxC,SAASuC,UACrBE,GAAc7C,OAAO2C,UAGrBS,GAAeR,GAAUZ,SAGzBqB,GAAiBR,GAAYQ,eAG7B4X,GAAmB7X,GAAaK,KAAKzD,QA8BzC,SAASkb,GAAcpa,GACrB,IAAK6L,GAAa7L,IAAUqJ,GAAWrJ,IAAUxC,GAC/C,OAAO,EAET,IAAIyL,EAAQjG,GAAahD,GACzB,GAAc,OAAViJ,EACF,OAAO,EAET,IAAIkC,EAAO5I,GAAeI,KAAKsG,EAAO,gBAAkBA,EAAMY,YAC9D,MAAsB,mBAARsB,GAAsBA,aAAgBA,GAClD7I,GAAaK,KAAKwI,IAASgP,EAC/B,CAEA,YCxDA,IAAIpd,GAAU,qBACVC,GAAW,iBACXC,GAAU,mBACVC,GAAU,gBACVC,GAAW,iBACXC,GAAU,oBACVE,GAAS,eACTC,GAAY,kBACZC,GAAY,kBACZE,GAAY,kBACZC,GAAS,eACTC,GAAY,kBACZE,GAAa,mBAEbC,GAAiB,uBACjBC,GAAc,oBACdC,GAAa,wBACbC,GAAa,wBACbC,GAAU,qBACVC,GAAW,sBACXC,GAAW,sBACXC,GAAW,sBACXC,GAAkB,6BAClBC,GAAY,uBACZC,GAAY,uBAGZ4N,GAAiB,CAAC,EAsBtB,SAAS0C,GAAiB/O,GACxB,OAAO6L,GAAa7L,IAClB4L,GAAS5L,EAAMpO,WAAaya,GAAehD,GAAWrJ,GAC1D,CAxBAqM,GAAepO,IAAcoO,GAAenO,IAC5CmO,GAAelO,IAAWkO,GAAejO,IACzCiO,GAAehO,IAAYgO,GAAe/N,IAC1C+N,GAAe9N,IAAmB8N,GAAe7N,IACjD6N,GAAe5N,KAAa,EAC5B4N,GAAetP,IAAWsP,GAAerP,IACzCqP,GAAetO,IAAkBsO,GAAepP,IAChDoP,GAAerO,IAAeqO,GAAenP,IAC7CmP,GAAelP,IAAYkP,GAAejP,IAC1CiP,GAAe/O,IAAU+O,GAAe9O,IACxC8O,GAAe7O,IAAa6O,GAAe3O,IAC3C2O,GAAe1O,IAAU0O,GAAezO,IACxCyO,GAAevO,KAAc,EAc7B,YCpDA,SAASkP,GAAUxL,GACjB,OAAO,SAASxB,GACd,OAAOwB,EAAKxB,EACd,CACF,CAEA,YCVA,IAAIT,GAAgC,WAAJ,qBAAP5C,QAAO,aAAAsC,EAAAA,EAAAA,GAAPtC,WAAuBA,UAAYA,QAAQ6C,UAAY7C,QAG5E8C,GAAaF,IAAgC,WAAJ,qBAAN7C,OAAM,aAAAuC,EAAAA,EAAAA,GAANvC,UAAsBA,SAAWA,OAAO8C,UAAY9C,OAGvFgD,GAAgBD,IAAcA,GAAW9C,UAAY4C,GAGrD+M,GAAc5M,IAAiBX,EAAWwN,QAG1CC,GAAY,WACd,IAEE,IAAI6N,EAAQ5a,IAAcA,GAAW6Q,SAAW7Q,GAAW6Q,QAAQ,QAAQ+J,MAE3E,OAAIA,GAKG/N,IAAeA,GAAYG,SAAWH,GAAYG,QAAQ,OACnE,CAAE,MAAOtL,GAAI,CACf,CAZgB,GAchB,YCxBA,IAAIuL,GAAmBF,IAAYA,GAASG,aAmBxCA,GAAeD,GAAmBM,GAAUN,IAAoBqC,GAEpE,YClBA,SAASuL,GAAQxZ,EAAQC,GACvB,IAAY,gBAARA,GAAgD,oBAAhBD,EAAOC,KAIhC,aAAPA,EAIJ,OAAOD,EAAOC,EAChB,CAEA,YChBA,IAAIgB,GAAc7C,OAAO2C,UAGrBU,GAAiBR,GAAYQ,eAYjC,SAAS+E,GAAYxG,EAAQC,EAAKf,GAChC,IAAIuH,EAAWzG,EAAOC,GAChBwB,GAAeI,KAAK7B,EAAQC,IAAQyG,EAAGD,EAAUvH,UACxCgB,IAAVhB,GAAyBe,KAAOD,IACnC8Y,GAAgB9Y,EAAQC,EAAKf,EAEjC,CAEA,YCdA,SAAS2H,GAAWD,EAAQmB,EAAO/H,EAAQiH,GACzC,IAAIwS,GAASzZ,EACbA,IAAWA,EAAS,CAAC,GAErB,IAAIxF,GAAS,EACT1J,EAASiX,EAAMjX,OAEnB,QAAS0J,EAAQ1J,EAAQ,CACvB,IAAImP,EAAM8H,EAAMvN,GAEZwP,EAAW/C,EACXA,EAAWjH,EAAOC,GAAM2G,EAAO3G,GAAMA,EAAKD,EAAQ4G,QAClD1G,OAEaA,IAAb8J,IACFA,EAAWpD,EAAO3G,IAEhBwZ,EACFX,GAAgB9Y,EAAQC,EAAK+J,GAE7BxD,GAAYxG,EAAQC,EAAK+J,EAE7B,CACA,OAAOhK,CACT,CAEA,YC9BA,SAASH,GAAUpG,EAAG6F,GACpB,IAAI9E,GAAS,EACTsF,EAASlN,MAAM6G,GAEnB,QAASe,EAAQf,EACfqG,EAAOtF,GAAS8E,EAAS9E,GAE3B,OAAOsF,CACT,CAEA,YClBA,IAAI9D,GAAmB,iBAGnB+B,GAAW,mBAUf,SAASwI,GAAQrH,EAAOpO,GACtB,IAAIwZ,GAAInM,EAAAA,EAAAA,GAAUe,GAGlB,OAFApO,EAAmB,MAAVA,EAAiBkL,GAAmBlL,IAEpCA,IACE,UAARwZ,GACU,UAARA,GAAoBvM,GAAS4K,KAAKzJ,KAChCA,GAAS,GAAKA,EAAQ,GAAK,GAAKA,EAAQpO,CACjD,CAEA,YChBA,IAAImQ,GAAc7C,OAAO2C,UAGrBU,GAAiBR,GAAYQ,eAUjC,SAASwE,GAAc/G,EAAOgH,GAC5B,IAAIkB,EAAQjB,GAAQjH,GAChBwN,GAAStF,GAAShB,GAAYlH,GAC9ByN,GAAUvF,IAAUsF,GAAShK,GAASxD,GACtC0N,GAAUxF,IAAUsF,IAAUC,GAAUd,GAAa3M,GACrDoH,EAAcc,GAASsF,GAASC,GAAUC,EAC1C9M,EAASwG,EAAczG,GAAUX,EAAMpO,OAAQuV,QAAU,GACzDvV,EAASgP,EAAOhP,OAEpB,IAAK,IAAImP,KAAOf,GACTgH,IAAazE,GAAeI,KAAK3C,EAAOe,IACvCqG,IAEQ,UAAPrG,GAEC0M,IAAkB,UAAP1M,GAA0B,UAAPA,IAE9B2M,IAAkB,UAAP3M,GAA0B,cAAPA,GAA8B,cAAPA,IAEtDsG,GAAQtG,EAAKnP,KAElBgP,EAAO5O,KAAK+O,GAGhB,OAAOH,CACT,CAEA,YCvCA,SAAS4Z,GAAa1Z,GACpB,IAAIF,EAAS,GACb,GAAc,MAAVE,EACF,IAAK,IAAIC,KAAO7B,OAAO4B,GACrBF,EAAO5O,KAAK+O,GAGhB,OAAOH,CACT,CAEA,YCdA,IAAImB,GAAc7C,OAAO2C,UAGrBU,GAAiBR,GAAYQ,eASjC,SAASkY,GAAW3Z,GAClB,IAAKmH,GAASnH,GACZ,OAAO0Z,GAAa1Z,GAEtB,IAAI4Z,EAAU/Q,GAAY7I,GACtBF,EAAS,GAEb,IAAK,IAAIG,KAAOD,GACD,eAAPC,IAAyB2Z,GAAYnY,GAAeI,KAAK7B,EAAQC,KACrEH,EAAO5O,KAAK+O,GAGhB,OAAOH,CACT,CAEA,YCLA,SAAS+Z,GAAO7Z,GACd,OAAO6K,GAAY7K,GAAUiG,GAAcjG,GAAQ,GAAQ2Z,GAAW3Z,EACxE,CAEA,YCJA,SAAS8Z,GAAc5a,GACrB,OAAO2H,GAAW3H,EAAO2a,GAAO3a,GAClC,CAEA,YCAA,SAAS6a,GAAc/Z,EAAQ4G,EAAQ3G,EAAK+Z,EAAUC,EAAWhT,EAAYC,GAC3E,IAAIT,EAAW+S,GAAQxZ,EAAQC,GAC3Bia,EAAWV,GAAQ5S,EAAQ3G,GAC3B6H,EAAUZ,EAAM5B,IAAI4U,GAExB,GAAIpS,EACFiR,GAAiB/Y,EAAQC,EAAK6H,OADhC,CAIA,IAAIkC,EAAW/C,EACXA,EAAWR,EAAUyT,EAAWja,EAAM,GAAKD,EAAQ4G,EAAQM,QAC3DhH,EAEAia,OAAwBja,IAAb8J,EAEf,GAAImQ,EAAU,CACZ,IAAI/S,EAAQjB,GAAQ+T,GAChBvN,GAAUvF,GAAS1E,GAASwX,GAC5BE,GAAWhT,IAAUuF,GAAUd,GAAaqO,GAEhDlQ,EAAWkQ,EACP9S,GAASuF,GAAUyN,EACjBjU,GAAQM,GACVuD,EAAWvD,EAEJgE,GAAkBhE,GACzBuD,EAAW1C,GAAUb,GAEdkG,GACPwN,GAAW,EACXnQ,EAAWtC,GAAYwS,GAAU,IAE1BE,GACPD,GAAW,EACXnQ,EAAWF,GAAgBoQ,GAAU,IAGrClQ,EAAW,GAGNsP,GAAcY,IAAa9T,GAAY8T,IAC9ClQ,EAAWvD,EACPL,GAAYK,GACduD,EAAW8P,GAAcrT,GAEjBU,GAASV,KAAaiC,GAAWjC,KACzCuD,EAAWrC,GAAgBuS,KAI7BC,GAAW,CAEf,CACIA,IAEFjT,EAAMlI,IAAIkb,EAAUlQ,GACpBiQ,EAAUjQ,EAAUkQ,EAAUF,EAAU/S,EAAYC,GACpDA,EAAM,UAAUgT,IAElBnB,GAAiB/Y,EAAQC,EAAK+J,EAnD9B,CAoDF,CAEA,YC1EA,SAASqQ,GAAUra,EAAQ4G,EAAQoT,EAAU/S,EAAYC,GACnDlH,IAAW4G,GAGfuS,GAAQvS,GAAQ,SAASsT,EAAUja,GAEjC,GADAiH,IAAUA,EAAQ,IAAIzB,IAClB0B,GAAS+S,GACXH,GAAc/Z,EAAQ4G,EAAQ3G,EAAK+Z,EAAUK,GAAWpT,EAAYC,OAEjE,CACH,IAAI8C,EAAW/C,EACXA,EAAWuS,GAAQxZ,EAAQC,GAAMia,EAAWja,EAAM,GAAKD,EAAQ4G,EAAQM,QACvEhH,OAEaA,IAAb8J,IACFA,EAAWkQ,GAEbnB,GAAiB/Y,EAAQC,EAAK+J,EAChC,CACF,GAAG6P,GACL,CAEA,YCzBA,SAASS,GAASpb,GAChB,OAAOA,CACT,CAEA,YCVA,SAASgY,GAAMxW,EAAM6Z,EAASxD,GAC5B,OAAQA,EAAKjmB,QACX,KAAK,EAAG,OAAO4P,EAAKmB,KAAK0Y,GACzB,KAAK,EAAG,OAAO7Z,EAAKmB,KAAK0Y,EAASxD,EAAK,IACvC,KAAK,EAAG,OAAOrW,EAAKmB,KAAK0Y,EAASxD,EAAK,GAAIA,EAAK,IAChD,KAAK,EAAG,OAAOrW,EAAKmB,KAAK0Y,EAASxD,EAAK,GAAIA,EAAK,GAAIA,EAAK,IAE3D,OAAOrW,EAAKwW,MAAMqD,EAASxD,EAC7B,CAEA,YCjBA,IAAIyD,GAAYjoB,KAAKoE,IAWrB,SAAS8jB,GAAS/Z,EAAMmR,EAAOlR,GAE7B,OADAkR,EAAQ2I,QAAoBta,IAAV2R,EAAuBnR,EAAK5P,OAAS,EAAK+gB,EAAO,GAC5D,WACL,IAAIkF,EAAO1H,UACP7U,GAAS,EACT1J,EAAS0pB,GAAUzD,EAAKjmB,OAAS+gB,EAAO,GACxCxS,EAAQzM,MAAM9B,GAElB,QAAS0J,EAAQ1J,EACfuO,EAAM7E,GAASuc,EAAKlF,EAAQrX,GAE9BA,GAAS,EACT,IAAIkgB,EAAY9nB,MAAMif,EAAQ,GAC9B,QAASrX,EAAQqX,EACf6I,EAAUlgB,GAASuc,EAAKvc,GAG1B,OADAkgB,EAAU7I,GAASlR,EAAUtB,GACtB6X,GAAMxW,EAAMoD,KAAM4W,EAC3B,CACF,CAEA,YChBA,SAASC,GAASzb,GAChB,OAAO,WACL,OAAOA,CACT,CACF,CAEA,YCbA,IAAI0b,GAAmB/B,GAA4B,SAASnY,EAAMma,GAChE,OAAOhC,GAAenY,EAAM,WAAY,CACtC,cAAgB,EAChB,YAAc,EACd,MAASia,GAASE,GAClB,UAAY,GAEhB,EAPwCP,GASxC,Y,aCpBIQ,GAAY,IACZC,GAAW,GAGXC,GAAYC,KAAKC,IAWrB,SAASC,GAASza,GAChB,IAAI0a,EAAQ,EACRC,EAAa,EAEjB,OAAO,WACL,IAAIC,EAAQN,KACRO,EAAYR,IAAYO,EAAQD,GAGpC,GADAA,EAAaC,EACTC,EAAY,GACd,KAAMH,GAASN,GACb,OAAOzL,UAAU,QAGnB+L,EAAQ,EAEV,OAAO1a,EAAKwW,WAAMhX,EAAWmP,UAC/B,CACF,CAEA,YCzBA,IAAImM,GAAcL,GAASP,IAE3B,YCDA,SAASa,GAAS/a,EAAMmR,GACtB,OAAO2J,GAAYf,GAAS/Z,EAAMmR,EAAOyI,IAAW5Z,EAAO,GAC7D,CAEA,YCDA,SAASgb,GAAexc,EAAO1E,EAAOwF,GACpC,IAAKmH,GAASnH,GACZ,OAAO,EAET,IAAIsK,GAAInM,EAAAA,EAAAA,GAAU3D,GAClB,SAAY,UAAR8P,EACKO,GAAY7K,IAAWuG,GAAQ/L,EAAOwF,EAAOlP,QACrC,UAARwZ,GAAoB9P,KAASwF,IAE7B0G,EAAG1G,EAAOxF,GAAQ0E,EAG7B,CAEA,YCnBA,SAASyc,GAAeC,GACtB,OAAOH,IAAS,SAASzb,EAAQ6b,GAC/B,IAAIrhB,GAAS,EACT1J,EAAS+qB,EAAQ/qB,OACjBmW,EAAanW,EAAS,EAAI+qB,EAAQ/qB,EAAS,QAAKoP,EAChD4b,EAAQhrB,EAAS,EAAI+qB,EAAQ,QAAK3b,EAEtC+G,EAAc2U,EAAS9qB,OAAS,GAA0B,mBAAdmW,GACvCnW,IAAUmW,QACX/G,EAEA4b,GAASJ,GAAeG,EAAQ,GAAIA,EAAQ,GAAIC,KAClD7U,EAAanW,EAAS,OAAIoP,EAAY+G,EACtCnW,EAAS,GAEXkP,EAAS5B,OAAO4B,GAChB,QAASxF,EAAQ1J,EAAQ,CACvB,IAAI8V,EAASiV,EAAQrhB,GACjBoM,GACFgV,EAAS5b,EAAQ4G,EAAQpM,EAAOyM,EAEpC,CACA,OAAOjH,CACT,GACF,CAEA,YCFA,IAAI+b,GAAQJ,IAAe,SAAS3b,EAAQ4G,EAAQoT,GAClDK,GAAUra,EAAQ4G,EAAQoT,EAC5B,IAEA,Y,4GCtCA,SAASgC,GAAkBvD,GACzB,IACE,OAAQ,IAAMja,SAAS4B,SAASyB,KAAK4W,GAAGjnB,QAAQ,gBAClD,CAAE,MAAOiI,GACP,MAAO,mBAAqBgf,CAC9B,CACF,C,kCCJA,SAASwD,GAAWxD,EAAGpY,EAAGmY,GACxB,IAAI0D,EAAAA,GAAAA,KAA4B,OAAOC,QAAQC,UAAUlF,MAAM,KAAM7H,WACrE,IAAIsJ,EAAI,CAAC,MACTA,EAAEznB,KAAKgmB,MAAMyB,EAAGtY,GAChB,IAAIgc,EAAI,IAAK5D,EAAE6D,KAAKpF,MAAMuB,EAAGE,IAC7B,OAAOH,IAAK+D,EAAAA,GAAAA,GAAeF,EAAG7D,EAAEzX,WAAYsb,CAC9C,CCJA,SAASG,GAAiB/D,GACxB,IAAID,EAAI,mBAAqB1V,IAAM,IAAIA,SAAQ,EAC/C,OAAO0Z,GAAmB,SAA0B/D,GAClD,GAAI,OAASA,IAAMgE,GAAiBhE,GAAI,OAAOA,EAC/C,GAAI,mBAAqBA,EAAG,MAAM,IAAI/C,UAAU,sDAChD,QAAI,IAAW8C,EAAG,CAChB,GAAIA,EAAEpU,IAAIqU,GAAI,OAAOD,EAAElT,IAAImT,GAC3BD,EAAExZ,IAAIyZ,EAAGiE,EACX,CACA,SAASA,IACP,OAAON,GAAU3D,EAAGpJ,WAAWlN,EAAAA,GAAAA,GAAe2B,MAAMiF,YACtD,CACA,OAAO2T,EAAQ3b,UAAY3C,OAAOiE,OAAOoW,EAAE1X,UAAW,CACpDgI,YAAa,CACX7J,MAAOwd,EACPvE,YAAY,EACZwE,UAAU,EACVC,cAAc,MAEdL,EAAAA,GAAAA,GAAeG,EAASjE,EAC9B,EAAG+D,GAAiB/D,EACtB,C,qFCzBKoE,GAAA,SAAAC,GAAA,OACHA,EAAAA,EAAAC,KAAQ,GAAR,OACAD,EAAAA,EAAAE,MAAU,IAAV,QAEAF,EAAAA,EAAAG,UAAa,IAAb,YACAH,EAAAA,EAAAI,KAAQ,IAAR,OACAJ,EAAAA,EAAAK,OAAU,GAAV,SACAL,EAAAA,EAAAM,MAAS,IAAT,QAEAN,EAAAA,EAAAO,WAAa,IAAb,aACAP,EAAAA,EAAAQ,YAAc,GAAd,cACAR,EAAAA,EAAAS,gBAAkB,GAAlB,kBACAT,EAAAA,EAAAU,iBAAmB,GAAnB,mBAEAV,EAAAA,EAAAW,IAAM,IAAN,MAdGX,CAAA,EAAAD,IAAA,ICOgBa,GAAA,WAQnB,SAAAA,EACkBC,EACAC,GAEhB,IADAC,EAAAxO,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAA6B,CAAC,GAAD2B,EAAAA,EAAAA,GAAA,KAAA0M,GAFb,KAAAC,SAAAA,EACA,KAAAC,QAAAA,EAGV,IAAAE,EAAejB,GAAME,KAAOF,GAAMI,UACnC,KAAAc,MACc,MAAjBF,EAAQE,MAEHF,EAAQE,MAAQlB,GAAMG,MAASc,EAChCjB,GAAMI,UACa,MAArBY,EAAQG,YACVla,KAAKka,UAAYH,EAAQG,UAE7B,QAAA/M,EAAAA,EAAAA,GAAAyM,EAAA,EAAAzd,IAAA,MAAAf,MAEO,SAAI+e,EAAmB/e,GAC5B,QAAK4E,KAAKoa,OAAOD,EAAM/e,KAGlB+e,EAAAE,aAAara,KAAK8Z,QAAS1e,IACzB,EACT,IAAAe,IAAA,SAAAf,MAEO,SAAOkf,EAAoBlf,GAC5B,OAAkB,MAAlB4E,KAAKka,YAGY,iBAAV9e,EACF4E,KAAKka,UAAUxsB,QAAQ0N,EAAM4C,QAAQ,QAAS,MAAQ,EAEtDgC,KAAKka,UAAUxsB,QAAQ0N,IAAU,EAE5C,IAAAe,IAAA,SAAAf,MAEO,SAAO+e,GACPA,EAAAI,gBAAgBva,KAAK8Z,QAC5B,IAAA3d,IAAA,QAAAf,MAEO,SAAM+e,GACX,IAAM/e,EAAQ+e,EAAKK,aAAaxa,KAAK8Z,SACrC,OAAI9Z,KAAKoa,OAAOD,EAAM/e,IAAUA,EACvBA,EAEF,EACT,MAAAe,IAAA,OAAAf,MApDA,SAAmB+e,GACV,OAAArrB,MAAM2rB,KAAKN,EAAKpO,YAAY/Q,KAAI,SAAC0f,GAAA,OAAeA,EAAK9P,IAAI,GAClE,KAHmB,GCPA+P,GAAA,SAAAC,GAKnB,SAAAD,EAAY9P,GAAiB,IAAAgQ,EAIE,OAJF3N,EAAAA,EAAAA,GAAA,KAAAyN,GAC3B9P,EAAU,eAAiBA,EAAAgQ,GAAAC,EAAAA,GAAAA,GAAA,KAAAH,EAAA,CACrB9P,IACNgQ,EAAKhQ,QAAUA,EACVgQ,EAAAjQ,KAAOiQ,EAAK5V,YAAY2F,KAAAiQ,CAC/B,QAAAE,EAAAA,GAAAA,GAAAJ,EAAAC,IAAAzN,EAAAA,EAAAA,GAAAwN,EAAA,CAVmB,CAUnBjC,GAV0C5L,QCiBvBkO,GAAA,WAArB,SAAAA,KAAA9N,EAAAA,EAAAA,GAAA,KAAA8N,GA0BE,KAAQjP,WAA4C,CAAC,EACrD,KAAQkP,QAA8C,CAAC,EACvD,KAAQC,KAA2C,CAAC,EACpD,KAAQzF,MAA+C,CAAC,SAAAtI,EAAAA,EAAAA,GAAA6N,EAAA,EAAA7e,IAAA,SAAAf,MAEjD,SAAO+f,EAAc7U,EAA8BlL,GAClD,IAAAggB,EAAQpb,KAAKqb,MAAM/U,GACzB,GAAa,MAAT8U,EACF,MAAM,IAAIT,GAAA,oBAAAvsB,OAAmCkY,EAAK,UAEpD,IAAMgV,EAAYF,EACZjB,EAEJ7T,aAAiBiV,MAAQjV,EAAM1L,WAAa2gB,KAAKC,UAC7ClV,EACAgV,EAAU/c,OAAOnD,GAEjBqgB,EAAO,IAAIH,EAAUH,EAAQhB,EAAc/e,GACjD,OAAA4f,EAASU,MAAMxgB,IAAIugB,EAAKE,QAASF,GAC1BA,CACT,IAAAtf,IAAA,OAAAf,MAEO,SAAK+e,GAAgD,IAA7ByB,EAAArQ,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,IAAAA,UAAA,GACtB,OAAAyP,EAASa,KAAK1B,EAAMyB,EAC7B,IAAAzf,IAAA,QAAAf,MAEO,SACLigB,GAE2B,IACvBD,EADuBU,EAAA,KAD3B7B,EAAA1O,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAewN,GAAMY,IAyBrB,MAtBqB,iBAAV0B,EACTD,EAAQpb,KAAKyV,MAAM4F,IAAUrb,KAAK+L,WAAWsP,GAEpCA,aAAiBU,MAAQV,EAAMzgB,WAAa2gB,KAAKC,UAC1DJ,EAAQpb,KAAKyV,MAAMuG,KACO,iBAAVX,EACZA,EAAQtC,GAAMG,MAAQH,GAAMO,MAC9B8B,EAAQpb,KAAKyV,MAAMwG,MACVZ,EAAQtC,GAAMG,MAAQH,GAAMM,SACrC+B,EAAQpb,KAAKyV,MAAMyG,QAEZb,aAAiBc,WACXd,EAAMb,aAAa,UAAY,IAAI4B,MAAM,OAClDC,MAAK,SAACzR,GAAA,OACFwQ,EAAAU,EAAKb,QAAQrQ,KACjBwQ,CAAA,IAKNA,EAAQA,GAASpb,KAAKkb,KAAKG,EAAMiB,UAEtB,MAATlB,EACK,KAGP,UAAWA,GACXnB,EAAQlB,GAAMG,MAAQkC,EAAMnB,OAC5BA,EAAQlB,GAAME,KAAOmC,EAAMnB,MAEpBmB,EAEF,IACT,IAAAjf,IAAA,WAAAf,MAEO,WAAqE,QAAAmhB,EAAA,KAAAC,EAAAjR,UAAAve,OAAzDyvB,EAAA,IAAA3tB,MAAA0tB,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAAD,EAAAC,GAAAnR,UAAAmR,GACV,OAAAD,EAAYzhB,KAAI,SAAC2hB,GACtB,IAAMC,EAAS,aAAcD,EACvBE,EAAS,aAAcF,EACzB,IAACC,IAAWC,EACR,UAAIlC,GAAe,sBAChB,GAAAiC,GAAkC,aAAxBD,EAAWG,SACxB,UAAInC,GAAe,kCAE3B,IAAMxe,EAAMygB,EACRD,EAAWG,SACXD,EACEF,EAAW9C,cACV,EACF,OAAA0C,EAAA9G,MAAMtZ,GAAOwgB,EAEdE,EACgC,iBAAvBF,EAAW7C,UACfyC,EAAAxQ,WAAW4Q,EAAW7C,SAAW6C,GAE/BC,IACLD,EAAWI,YACRR,EAAAtB,QAAQ0B,EAAWI,WAAaJ,GAEnCA,EAAWL,UACTxtB,MAAMuT,QAAQsa,EAAWL,SAC3BK,EAAWL,QAAUK,EAAWL,QAAQthB,KAAI,SAACshB,GAAA,OACpCA,EAAQU,aAChB,IAEUL,EAAAL,QAAUK,EAAWL,QAAQU,eAEzBluB,MAAMuT,QAAQsa,EAAWL,SACtCK,EAAWL,QACX,CAACK,EAAWL,UACP5f,SAAQ,SAAC+G,IACM,MAAlB8Y,EAAKrB,KAAKzX,IAAwC,MAAxBkZ,EAAWI,aAClCR,EAAArB,KAAKzX,GAAOkZ,EACnB,MAICA,CAAA,GAEX,MAAAxgB,IAAA,OAAAf,MArIA,SAAmB+e,GAAiD,IAA7ByB,EAAArQ,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,IAAAA,UAAA,GACrC,GAAY,MAAR4O,EACK,YAET,GAAIna,KAAK0b,MAAMpb,IAAI6Z,GACjB,OAAOna,KAAK0b,MAAMla,IAAI2Y,IAAS,KAEjC,GAAIyB,EAAQ,CACV,IAAIqB,EAA0B,KAC1B,IACFA,EAAa9C,EAAK8C,UAAA,OAAAC,GAMX,WACT,CACO,OAAAld,KAAK6b,KAAKoB,EAAYrB,EAC/B,CACO,WACT,KAxBmB,GACLZ,GAAAU,MAAA,IAAYvc,QAD5B,IAAqBge,GAArBnC,GCfA,SAASjnB,GAAMomB,EAAmBhJ,GAEhC,OADkBgJ,EAAKK,aAAa,UAAY,IAE7C4B,MAAM,OACN5O,QAAO,SAAC5C,GAAA,OAAwC,IAA/BA,EAAKld,QAAA,GAAAU,OAAW+iB,EAAM,KAAU,GACtD,KAEMiM,GAAA,SAAAC,GAAA,SAAAD,IAAA,OAAAlQ,EAAAA,EAAAA,GAAA,KAAAkQ,IAAAtC,EAAAA,GAAAA,GAAA,KAAAsC,EAAA7R,UAAA,QAAAwP,EAAAA,GAAAA,GAAAqC,EAAAC,IAAAlQ,EAAAA,EAAAA,GAAAiQ,EAAA,EAAAjhB,IAAA,MAAAf,MAOG,SAAI+e,EAAmB/e,GAC5B,QAAK4E,KAAKoa,OAAOD,EAAM/e,KAGvB4E,KAAKsd,OAAOnD,GACZA,EAAKoD,UAAUliB,IAAA,GAAAjN,OAAO4R,KAAK8Z,QAAO,KAAA1rB,OAAIgN,KAC/B,EACT,IAAAe,IAAA,SAAAf,MAEO,SAAO+e,GACIpmB,GAAMomB,EAAMna,KAAK8Z,SACzBpd,SAAQ,SAACkO,GACVuP,EAAAoD,UAAUD,OAAO1S,EAAI,IAEE,IAA1BuP,EAAKoD,UAAUvwB,QACjBmtB,EAAKI,gBAAgB,QAEzB,IAAApe,IAAA,QAAAf,MAEO,SAAM+e,GAEX,IAAM/e,GADSrH,GAAMomB,EAAMna,KAAK8Z,SAAS,IAAM,IAC1BzoB,MAAM2O,KAAK8Z,QAAQ9sB,OAAS,GACjD,OAAOgT,KAAKoa,OAAOD,EAAM/e,GAASA,EAAQ,EAC5C,MAAAe,IAAA,OAAAf,MA7BA,SAAmB+e,GACT,OAAAA,EAAKK,aAAa,UAAY,IACnC4B,MAAM,OACNphB,KAAI,SAAC4P,GAAA,OAASA,EAAKwR,MAAM,KAAK/qB,MAAM,GAAI,GAAGue,KAAK,IAAI,GACzD,KALI,CAAwBgK,IAiC9B4D,GAAeJ,GCxCf,SAASK,GAAS7S,GACV,IAAA8S,EAAQ9S,EAAKwR,MAAM,KACnB5M,EAAOkO,EACVrsB,MAAM,GACN2J,KAAI,SAAC2iB,GAAA,OAAiBA,EAAK,GAAGX,cAAgBW,EAAKtsB,MAAM,EAAE,IAC3Due,KAAK,IACD,OAAA8N,EAAM,GAAKlO,CACpB,KAEMoO,GAAA,SAAAC,GAAA,SAAAD,IAAA,OAAA1Q,EAAAA,EAAAA,GAAA,KAAA0Q,IAAA9C,EAAAA,GAAAA,GAAA,KAAA8C,EAAArS,UAAA,QAAAwP,EAAAA,GAAAA,GAAA6C,EAAAC,IAAA1Q,EAAAA,EAAAA,GAAAyQ,EAAA,EAAAzhB,IAAA,MAAAf,MAQG,SAAI+e,EAAmB/e,GAC5B,QAAK4E,KAAKoa,OAAOD,EAAM/e,KAIvB+e,EAAK2D,MAAML,GAASzd,KAAK8Z,UAAY1e,GAC9B,EACT,IAAAe,IAAA,SAAAf,MAEO,SAAO+e,GAEZA,EAAK2D,MAAML,GAASzd,KAAK8Z,UAAY,GAChCK,EAAKK,aAAa,UACrBL,EAAKI,gBAAgB,QAEzB,IAAApe,IAAA,QAAAf,MAEO,SAAM+e,GAEX,IAAM/e,EAAQ+e,EAAK2D,MAAML,GAASzd,KAAK8Z,UACvC,OAAO9Z,KAAKoa,OAAOD,EAAM/e,GAASA,EAAQ,EAC5C,MAAAe,IAAA,OAAAf,MA5BA,SAAmB+e,GACT,OAAAA,EAAKK,aAAa,UAAY,IAAI4B,MAAM,KAAKphB,KAAI,SAACI,GAAA,OAC5CA,EAAMghB,MAAM,KACb,GAAG2B,MACf,GACH,KANI,CAAwBnE,IAgC9BoE,GAAeJ,GCpCTK,GAAA,WAIJ,SAAAA,EAAYtC,IAAsBzO,EAAAA,EAAAA,GAAA,KAAA+Q,GAHlC,KAAQlS,WAA4C,CAAC,EAInD/L,KAAK2b,QAAUA,EACf3b,KAAKke,OACP,QAAA/Q,EAAAA,EAAAA,GAAA8Q,EAAA,EAAA9hB,IAAA,YAAAf,MAEO,SAAU+iB,EAAuB/iB,GAElCA,EACE+iB,EAAU9iB,IAAI2E,KAAK2b,QAASvgB,KACO,MAAjC+iB,EAAU/iB,MAAM4E,KAAK2b,SAClB,KAAA5P,WAAWoS,EAAUtE,UAAYsE,SAE/Bne,KAAK+L,WAAWoS,EAAUtE,YAI3BsE,EAAAb,OAAOtd,KAAK2b,gBACf3b,KAAK+L,WAAWoS,EAAUtE,UAErC,IAAA1d,IAAA,QAAAf,MAEO,WAAc,IAAAgjB,EAAA,KACnBpe,KAAK+L,WAAa,CAAC,EACnB,IAAM0P,EAAO0B,GAAStB,KAAK7b,KAAK2b,SAChC,GAAY,MAARF,EAAJ,CAGA,IAAM1P,EAAa6N,GAAWpc,KAAKwC,KAAK2b,SAClCV,EAAUuC,GAAgBhgB,KAAKwC,KAAK2b,SACpC0C,EAASL,GAAgBxgB,KAAKwC,KAAK2b,SAEtC5P,EAAA3d,OAAO6sB,GACP7sB,OAAOiwB,GACP3hB,SAAQ,SAACkO,GACR,IAAMuB,EAAOsP,EAAKN,OAAOE,MAAMzQ,EAAMmO,GAAMI,WACvChN,aAAgByN,KACbwE,EAAArS,WAAWI,EAAK0N,UAAY1N,EACnC,GAZI,CAcV,IAAAhQ,IAAA,OAAAf,MAEO,SAAKwS,GAA2B,IAAA0Q,EAAA,KACrChkB,OAAOkD,KAAKwC,KAAK+L,YAAYrP,SAAQ,SAACP,GACpC,IAAMf,EAAQkjB,EAAKvS,WAAW5P,GAAKf,MAAMkjB,EAAK3C,SACvC/N,EAAA2Q,OAAOpiB,EAAKf,EAAK,GAE5B,IAAAe,IAAA,OAAAf,MAEO,SAAKwS,GAA2B,IAAA4Q,EAAA,KACrCxe,KAAKkF,KAAK0I,GACVtT,OAAOkD,KAAKwC,KAAK+L,YAAYrP,SAAQ,SAACP,GACpCqiB,EAAKzS,WAAW5P,GAAKmhB,OAAOkB,EAAK7C,QAAO,IAE1C3b,KAAK+L,WAAa,CAAC,CACrB,IAAA5P,IAAA,SAAAf,MAEO,WAAiC,IAAAqjB,EAAA,KACtC,OAAOnkB,OAAOkD,KAAKwC,KAAK+L,YAAYC,QAClC,SAACD,EAAoCnB,GAAA,OACxBmB,EAAAnB,GAAQ6T,EAAK1S,WAAWnB,GAAMxP,MAAMqjB,EAAK9C,SAC7C5P,CAAA,GAET,CAAC,EAEL,KApEI,GAuEN2S,GAAeT,GCnETU,GAAA,WA+CJ,SAAAA,EACSxD,EACAQ,IACPzO,EAAAA,EAAAA,GAAA,KAAAyR,GAFO,KAAAxD,OAAAA,EACA,KAAAQ,QAAAA,EAEEwB,GAAAzB,MAAMxgB,IAAIygB,EAAS3b,MAC5BA,KAAK4e,KAAO,KACZ5e,KAAKqO,KAAO,IACd,QAAAlB,EAAAA,EAAAA,GAAAwR,EAAA,EAAAxiB,IAAA,UAAAqF,IAVA,WACE,OAAOxB,KAAKiF,WACd,IAAA9I,IAAA,SAAAf,MAUO,WAEP,IAAAe,IAAA,QAAAf,MAEO,WACL,IAAMugB,EAAU3b,KAAK2b,QAAQkD,WAAU,GAChC,OAAA7e,KAAKmb,OAAO5c,OAAOod,EAC5B,IAAAxf,IAAA,SAAAf,MAEO,WACc,MAAf4E,KAAK8e,QACF,KAAAA,OAAOC,YAAY/e,MAEjBmd,GAAAzB,MAAA,UAAa1b,KAAK2b,QAC7B,IAAAxf,IAAA,WAAAf,MAEO,SAAS1E,EAAe1J,GAChBgT,KAAKgf,QAAQtoB,EAAO1J,GAC5BswB,QACP,IAAAnhB,IAAA,WAAAf,MAEO,SACL1E,EACA1J,EACA4d,EACAxP,GAEA,IAAMqgB,EAAOzb,KAAKgf,QAAQtoB,EAAO1J,GAC7B,GAAuC,MAAvCgT,KAAKmb,OAAOE,MAAMzQ,EAAMmO,GAAMK,OAAiBhe,EAC5CqgB,EAAAwD,KAAKrU,EAAMxP,QAAK,GACgC,MAA5C4E,KAAKmb,OAAOE,MAAMzQ,EAAMmO,GAAMI,WAAoB,CAC3D,IAAM2F,EAAS9e,KAAKmb,OAAO5c,OAAOyB,KAAKkf,QAAQjF,OAE/CwB,EAAKwD,KAAKH,GACHA,EAAAP,OAAO3T,EAAMxP,EACtB,CACF,IAAAe,IAAA,WAAAf,MAEO,SAAS1E,EAAe0E,EAAe+jB,GAC5C,IAAM1D,EACG,MAAP0D,EACInf,KAAKmb,OAAO5c,OAAO,OAAQnD,GAC3B4E,KAAKmb,OAAO5c,OAAOnD,EAAO+jB,GAC1BC,EAAMpf,KAAKoc,MAAM1lB,GACvBsJ,KAAK8e,OAAOO,aAAa5D,EAAM2D,QAAO,EACxC,IAAAjjB,IAAA,UAAAf,MAEO,SAAQ1E,EAAe1J,GACtB,IAAA4gB,EAAS5N,KAAKoc,MAAM1lB,GAC1B,GAAc,MAAVkX,EACI,UAAId,MAAM,6BAElB,OAAAc,EAAOwO,MAAMpvB,GACN4gB,CACT,IAAAzR,IAAA,SAAAf,MAEO,WACE,QACT,IAAAe,IAAA,SAAAf,MAEO,WAAyC,IAAlCX,EAAA8Q,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAavL,KAAK8e,OAC9B,OAAmB,MAAf9e,KAAK8e,QAAkB9e,OAASvF,EAC3B,EAEFuF,KAAK8e,OAAOQ,SAAS3jB,OAAOqE,MAAQA,KAAK8e,OAAOnjB,OAAOlB,EAChE,IAAA0B,IAAA,WAAAf,MAEO,SAASmkB,GAEZvf,KAAKkf,QAAQM,qBACXxf,KAAK8e,kBAAkB9e,KAAKkf,QAAQM,oBAEtCxf,KAAKif,KAAKjf,KAAKkf,QAAQM,kBAAkB1C,SAE7C,IAAA3gB,IAAA,SAAAf,MAEO,WAC0B,MAA3B4E,KAAK2b,QAAQsB,YACfjd,KAAK2b,QAAQsB,WAAW8B,YAAY/e,KAAK2b,SAE3C3b,KAAKyf,QACP,IAAAtjB,IAAA,cAAAf,MAEO,SAAYwP,EAAqBxP,GAChC,IAAAskB,EACY,iBAAT9U,EAAoB5K,KAAKmb,OAAO5c,OAAOqM,EAAMxP,GAASwP,EAC3D,OAAe,MAAf5K,KAAK8e,SACP9e,KAAK8e,OAAOO,aAAaK,EAAa1f,KAAKqO,WAAQ,GACnDrO,KAAKsd,UAEAoC,CACT,IAAAvjB,IAAA,QAAAf,MAEO,SAAM1E,EAAeipB,GACnB,OAAU,IAAVjpB,EAAcsJ,KAAOA,KAAKqO,IACnC,IAAAlS,IAAA,SAAAf,MAEO,SACLwkB,EACAL,GAGF,IAAApjB,IAAA,OAAAf,MAEO,SAAKwP,EAAuBxP,GAC3B,IAAAykB,EACY,iBAATjV,EACF5K,KAAKmb,OAAO5c,OAAOqM,EAAMxP,GAC1BwP,EAIF,GAHe,MAAf5K,KAAK8e,QACP9e,KAAK8e,OAAOO,aAAaQ,EAAS7f,KAAKqO,WAAQ,GAEd,mBAAxBwR,EAAQC,YACjB,MAAM,IAAInF,GAAA,eAAAvsB,OAA8Bwc,IAE1C,OAAAiV,EAAQC,YAAY9f,MACb6f,CACT,MAAA1jB,IAAA,SAAAf,MAtKA,SAAqB2kB,GACf,GAAgB,MAAhB/f,KAAKsc,QACD,UAAI3B,GAAe,mCAEvB,IAAAR,EACA/e,EACJ,OAAItM,MAAMuT,QAAQrC,KAAKsc,UACG,iBAAbyD,GACT3kB,EAAQ2kB,EAAS/C,cACbgD,SAAS5kB,EAAO,IAAIkB,aAAelB,IAC7BA,EAAA4kB,SAAS5kB,EAAO,MAEG,iBAAb2kB,IACR3kB,EAAA2kB,GAGR5F,EADmB,iBAAV/e,EACF6kB,SAASC,cAAclgB,KAAKsc,QAAQlhB,EAAQ,IAC1CA,GAAS4E,KAAKsc,QAAQ5uB,QAAQ0N,IAAU,EAC1C6kB,SAASC,cAAc9kB,GAEvB6kB,SAASC,cAAclgB,KAAKsc,QAAQ,KAGtCnC,EAAA8F,SAASC,cAAclgB,KAAKsc,SAEjCtc,KAAK+c,WACF5C,EAAAoD,UAAUliB,IAAI2E,KAAK+c,WAEnB5C,CACT,KApCI,GACJwE,GAAc7B,SAAW,WAD3B,IAAMqD,GAANxB,GCPMyB,GAAA,SAAAC,GAAA,SAAAD,IAAA,OAAAlT,EAAAA,EAAAA,GAAA,KAAAkT,IAAAtF,EAAAA,GAAAA,GAAA,KAAAsF,EAAA7U,UAAA,QAAAwP,EAAAA,GAAAA,GAAAqF,EAAAC,IAAAlT,EAAAA,EAAAA,GAAAiT,EAAA,EAAAjkB,IAAA,QAAAf,MAgBG,SAAM+e,EAAYxe,GAErB,OAAAqE,KAAK2b,UAAYxB,GACjBna,KAAK2b,QAAQ2E,wBAAwBnG,GACnCoB,KAAKgF,+BAEA9xB,KAAKiC,IAAIiL,EAAQ,IAElB,CACV,IAAAQ,IAAA,WAAAf,MAMO,SAAS1E,EAAe8pB,GAE7B,IAAI7kB,EADuB7M,MAAM2rB,KAAKza,KAAK8e,OAAOnD,QAAQ8E,YAClC/yB,QAAQsS,KAAK2b,SACrC,OAAIjlB,EAAQ,IACAiF,GAAA,GAEL,CAACqE,KAAK8e,OAAOnD,QAAShgB,EAC/B,IAAAQ,IAAA,QAAAf,MAOO,WACE,OAAAmU,EAAAA,EAAAA,GAAA,GACJvP,KAAKkf,QAAQpC,SAAW9c,KAAKkf,QAAQ9jB,MAAM4E,KAAK2b,WAAY,EAEjE,MAAAxf,IAAA,QAAAf,MAzCA,SAAoBslB,GACX,QACT,KAVI,CAAiBP,IACrBC,GAAcnG,MAAQlB,GAAMS,YAD9B,IAAMmH,GAANP,GAoDAQ,GAAeD,GCtDTE,GAAA,WAKJ,SAAAA,KAAc3T,EAAAA,EAAAA,GAAA,KAAA2T,GACZ7gB,KAAK8gB,KAAO,KACZ9gB,KAAK+gB,KAAO,KACZ/gB,KAAKhT,OAAS,CAChB,QAAAmgB,EAAAA,EAAAA,GAAA0T,EAAA,EAAA1kB,IAAA,SAAAf,MAEO,WAA4B,QAAA4lB,EAAAzV,UAAAve,OAAlBi0B,EAAA,IAAAnyB,MAAAkyB,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAAD,EAAAC,GAAA3V,UAAA2V,GAEX,GADJlhB,KAAKqf,aAAa4B,EAAM,GAAI,MACxBA,EAAMj0B,OAAS,EAAG,CACd,IAAAwiB,EAAOyR,EAAM5vB,MAAM,GACpB,KAAA8vB,OAAA/N,MAAA,MAAAgO,EAAAA,GAAAA,GAAU5R,GACjB,CACF,IAAArT,IAAA,KAAAf,MAEO,SAAG1E,GAGD,IAFD,IAAA2X,EAAOrO,KAAKqhB,WACdC,EAAMjT,IACHiT,GAAO5qB,EAAQ,GACXA,GAAA,EACT4qB,EAAMjT,IAED,OAAAiT,CACT,IAAAnlB,IAAA,WAAAf,MAEO,SAAS+e,GAGd,IAFM,IAAA9L,EAAOrO,KAAKqhB,WACdC,EAAMjT,IACHiT,GAAK,CACV,GAAIA,IAAQnH,EACH,SAETmH,EAAMjT,GACR,CACO,QACT,IAAAlS,IAAA,UAAAf,MAEO,SAAQ+e,GAIb,IAHM,IAAA9L,EAAOrO,KAAKqhB,WACdC,EAAMjT,IACN3X,EAAQ,EACL4qB,GAAK,CACV,GAAIA,IAAQnH,EACH,OAAAzjB,EAEAA,GAAA,EACT4qB,EAAMjT,GACR,CACO,QACT,IAAAlS,IAAA,eAAAf,MAEO,SAAa+e,EAAgBoH,GACtB,MAARpH,IAGJna,KAAKsd,OAAOnD,GACZA,EAAK9L,KAAOkT,EACG,MAAXA,GACFpH,EAAKyE,KAAO2C,EAAQ3C,KACA,MAAhB2C,EAAQ3C,OACV2C,EAAQ3C,KAAKvQ,KAAO8L,GAEtBoH,EAAQ3C,KAAOzE,EACXoH,IAAYvhB,KAAK8gB,OACnB9gB,KAAK8gB,KAAO3G,IAEQ,MAAbna,KAAK+gB,MACd/gB,KAAK+gB,KAAK1S,KAAO8L,EACjBA,EAAKyE,KAAO5e,KAAK+gB,KACjB/gB,KAAK+gB,KAAO5G,IAEZA,EAAKyE,KAAO,KACP,KAAAkC,KAAO9gB,KAAK+gB,KAAO5G,GAE1Bna,KAAKhT,QAAU,EACjB,IAAAmP,IAAA,SAAAf,MAEO,SAAOwS,GAGZ,IAFA,IAAIlX,EAAQ,EACR4qB,EAAMthB,KAAK8gB,KACD,MAAPQ,GAAa,CAClB,GAAIA,IAAQ1T,EACH,OAAAlX,EAETA,GAAS4qB,EAAIt0B,SACbs0B,EAAMA,EAAIjT,IACZ,CACO,QACT,IAAAlS,IAAA,SAAAf,MAEO,SAAO+e,GACPna,KAAKwhB,SAASrH,KAGF,MAAbA,EAAKyE,OACFzE,EAAAyE,KAAKvQ,KAAO8L,EAAK9L,MAEP,MAAb8L,EAAK9L,OACF8L,EAAA9L,KAAKuQ,KAAOzE,EAAKyE,MAEpBzE,IAASna,KAAK8gB,OAChB9gB,KAAK8gB,KAAO3G,EAAK9L,MAEf8L,IAASna,KAAK+gB,OAChB/gB,KAAK+gB,KAAO5G,EAAKyE,MAEnB5e,KAAKhT,QAAU,EACjB,IAAAmP,IAAA,WAAAf,MAEO,WAAwD,IAA/CqmB,EAAAlW,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAoBvL,KAAK8gB,KAEvC,OAAO,WACL,IAAM7qB,EAAMwrB,EACZ,OAAe,MAAXA,IACFA,EAAUA,EAAQpT,MAEbpY,CAAA,CAEX,IAAAkG,IAAA,OAAAf,MAEO,SAAK1E,GAGV,IAHgE,IAAvCgrB,EAAAnW,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,IAAAA,UAAA,GACnB8C,EAAOrO,KAAKqhB,WACdC,EAAMjT,IACHiT,GAAK,CACJ,IAAAt0B,EAASs0B,EAAIt0B,SACnB,GACE0J,EAAQ1J,GACP00B,GACChrB,IAAU1J,IACG,MAAZs0B,EAAIjT,MAAsC,IAAtBiT,EAAIjT,KAAKrhB,UAEzB,OAACs0B,EAAK5qB,GAENA,GAAA1J,EACTs0B,EAAMjT,GACR,CACO,OAAC,KAAM,EAChB,IAAAlS,IAAA,UAAAf,MAEO,SAAQumB,GAGb,IAFM,IAAAtT,EAAOrO,KAAKqhB,WACdC,EAAMjT,IACHiT,GACLK,EAASL,GACTA,EAAMjT,GAEV,IAAAlS,IAAA,YAAAf,MAEO,SACL1E,EACA1J,EACA20B,GAEA,KAAI30B,GAAU,GAOP,IAJP,IAAA40B,EAA4B5hB,KAAK6b,KAAKnlB,GAAKmrB,GAAA3S,EAAAA,EAAAA,GAAA0S,EAAA,GAApCE,EAAAD,EAAA,GAAWlmB,EAAMkmB,EAAA,GACpBE,EAAWrrB,EAAQiF,EACjB0S,EAAOrO,KAAKqhB,SAASS,GACvBR,EAAMjT,IACHiT,GAAOS,EAAWrrB,EAAQ1J,GAAQ,CACjC,IAAAg1B,EAAYV,EAAIt0B,SAClB0J,EAAQqrB,EACVJ,EACEL,EACA5qB,EAAQqrB,EACRtzB,KAAKiC,IAAI1D,EAAQ+0B,EAAWC,EAAYtrB,IAGjCirB,EAAAL,EAAK,EAAG7yB,KAAKiC,IAAIsxB,EAAWtrB,EAAQ1J,EAAS+0B,IAE5CA,GAAAC,EACZV,EAAMjT,GACR,CACF,IAAAlS,IAAA,MAAAf,MAEO,SAAIumB,GACT,OAAO3hB,KAAKgM,QAAO,SAACM,EAAWgV,GAAA,OACxBhV,EAAAlf,KAAKu0B,EAASL,IACZhV,CAAA,GACN,GACL,IAAAnQ,IAAA,SAAAf,MAEO,SAAUumB,EAAkCrV,GAGjD,IAFM,IAAA+B,EAAOrO,KAAKqhB,WACdC,EAAMjT,IACHiT,GACEhV,EAAAqV,EAASrV,EAAMgV,GACtBA,EAAMjT,IAED,OAAA/B,CACT,KAnMI,GCIN,SAAS2V,GAAiB9H,EAAYgB,GAC9B,IAAA/pB,EAAQ+pB,EAAOU,KAAK1B,GACtB,GAAA/oB,EAAc,OAAAA,EACd,IACK,OAAA+pB,EAAO5c,OAAO4b,EAAI,OAAA+H,GAEzB,IAAMzG,EAAON,EAAO5c,OAAOwa,GAAMM,QACjC,OAAAvqB,MAAM2rB,KAAKN,EAAKsG,YAAY/jB,SAAQ,SAACylB,GAC9B1G,EAAAE,QAAQmE,YAAYqC,EAAK,IAE5BhI,EAAK8C,YACP9C,EAAK8C,WAAWmF,aAAa3G,EAAKE,QAASxB,GAE7CsB,EAAK4G,SACE5G,CACT,CACF,CAEA,IAAM6G,GAAA,SAAAC,GAgBJ,SAAAD,EAAYnH,EAAcQ,GAAe,IAAA6G,EAE5B,OAF4BtV,EAAAA,EAAAA,GAAA,KAAAoV,GACvCE,GAAA1H,EAAAA,GAAAA,GAAA,KAAAwH,EAAA,CAAMnH,EAAQQ,IAHhB6G,EAAOC,OAA6B,KAIlCD,EAAKtE,QAAMsE,CACb,QAAAzH,EAAAA,GAAAA,GAAAuH,EAAAC,IAAApV,EAAAA,EAAAA,GAAAmV,EAAA,EAAAnmB,IAAA,cAAAf,MAEO,SAAYsL,GACjB1G,KAAKqf,aAAa3Y,EACpB,IAAAvK,IAAA,SAAAf,MAEO,YACLsnB,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAL,EAAArlB,WAAA,eAAAc,KAAA,MACK,KAAAuhB,SAAS5iB,SAAQ,SAACylB,GACrBA,EAAME,QAAO,GAEjB,IAAAlmB,IAAA,WAAAf,MAEO,SAAS+e,GACK,MAAfna,KAAKyiB,QACPziB,KAAKyiB,OAAOnF,SAEdtd,KAAKyiB,OAAStI,EACVmI,EAAWM,SACb5iB,KAAKyiB,OAAOlF,UAAUliB,IAAIinB,EAAWM,SAElC,KAAAH,OAAOpI,aAAa,kBAAmB,SAC5Cra,KAAK2b,QAAQ0D,aAAarf,KAAKyiB,OAAQziB,KAAK2b,QAAQkH,WACtD,IAAA1mB,IAAA,QAAAf,MAKO,WAAc,IAAA0nB,EAAA,KACd,KAAAxD,SAAW,IAAIuB,GAEpB/xB,MAAM2rB,KAAKza,KAAK2b,QAAQ8E,YACrBjT,QAAO,SAAC2M,GAAA,OAAeA,IAAS2I,EAAKL,MAAM,IAC3CM,UACArmB,SAAQ,SAACyd,GACJ,IACF,IAAMgI,EAAQF,GAAiB9H,EAAM2I,EAAK3H,QAC1C2H,EAAKzD,aAAa8C,EAAOW,EAAKxD,SAASwB,WAAQ,EAAS,OACjDkC,GACP,GAAIA,aAAerI,GACjB,OAEM,MAAAqI,CAEV,IAEN,IAAA7mB,IAAA,WAAAf,MAEO,SAAS1E,EAAe1J,GAC7B,GAAc,IAAV0J,GAAe1J,IAAWgT,KAAKhT,SACjC,OAAOgT,KAAKsd,SAEdtd,KAAKsf,SAAS2D,UAAUvsB,EAAO1J,GAAQ,SAACm1B,EAAOxmB,EAAQunB,GAC/Cf,EAAAgB,SAASxnB,EAAQunB,EAAW,GAEtC,IAAA/mB,IAAA,aAAAf,MAUO,SAAWgoB,GAAiD,IAAlC1sB,EAAA6U,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAQ,EACvC8X,EAAwBrjB,KAAKsf,SAASzD,KAAKnlB,GAAK4sB,GAAApU,EAAAA,EAAAA,GAAAmU,EAAA,GAAzClB,EAAAmB,EAAA,GAAO3nB,EAAM2nB,EAAA,GAEjB,OAAqB,MAArBF,EAAStG,UAAoBsG,EAASjB,IACjB,MAArBiB,EAAStG,UAAoBqF,aAAiBiB,EAExC,CAACjB,EAAcxmB,GACbwmB,aAAiBG,EACnBH,EAAMoB,WAAWH,EAAUznB,GAE3B,CAAC,MAAO,EAEnB,IAAAQ,IAAA,cAAAf,MAYO,SACLgoB,GAGQ,IAFR1sB,EAAA6U,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAQ,EACRve,EAAAue,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAiBiY,OAAOC,UAEpBC,EAAsB,GACtBC,EAAa32B,EACjB,OAAAgT,KAAKsf,SAAS2D,UACZvsB,EACA1J,GACA,SAACm1B,EAAayB,EAAoBV,IAER,MAArBE,EAAStG,UAAoBsG,EAASjB,IACjB,MAArBiB,EAAStG,UAAoBqF,aAAiBiB,IAE/CM,EAAYt2B,KAAK+0B,GAEfA,aAAiBG,IACnBoB,EAAcA,EAAYt1B,OACxB+zB,EAAMuB,YAAYN,EAAUQ,EAAYD,KAG9BA,GAAAT,CAChB,IAEKQ,CACT,IAAAvnB,IAAA,SAAAf,MAEO,WACA,KAAAkkB,SAAS5iB,SAAQ,SAACylB,GACrBA,EAAM1C,QAAO,KACdiD,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAL,EAAArlB,WAAA,eAAAc,KAAA,KAEH,IAAA5B,IAAA,yBAAAf,MAEO,WAA+B,IAAAyoB,EAAA,KAChCC,GAAO,EACN,KAAAxE,SAAS5iB,SAAQ,SAACylB,GACjB2B,GAGYD,EAAK3E,QAAQ6E,gBAAgB1H,MAC3C,SAAC8C,GAAA,OAAyBgD,aAAiBhD,CAAA,MAKzCgD,EAAMjD,QAAQjF,QAAUlB,GAAMQ,YACd,MAAd4I,EAAM9T,MACRwV,EAAKG,WAAW7B,GAEA,MAAdA,EAAMvD,MACHiF,EAAAG,WAAW7B,EAAMvD,MAExBuD,EAAMrD,OAAOmF,SACNH,GAAA,GACE3B,aAAiBG,EAC1BH,EAAM8B,SAEN9B,EAAM7E,SACR,GAEJ,IAAAnhB,IAAA,WAAAf,MAEO,SACL1E,EACA1J,EACA4d,EACAxP,GAEA4E,KAAKsf,SAAS2D,UAAUvsB,EAAO1J,GAAQ,SAACm1B,EAAOxmB,EAAQunB,GACrDf,EAAM+B,SAASvoB,EAAQunB,EAAatY,EAAMxP,EAAK,GAEnD,IAAAe,IAAA,WAAAf,MAEO,SAAS1E,EAAe0E,EAAe+jB,GAC5C,IAAAgF,EAAwBnkB,KAAKsf,SAASzD,KAAKnlB,GAAK0tB,GAAAlV,EAAAA,EAAAA,GAAAiV,EAAA,GAAzChC,EAAAiC,EAAA,GAAOzoB,EAAMyoB,EAAA,GACpB,GAAIjC,EACIA,EAAAkC,SAAS1oB,EAAQP,EAAO+jB,OACzB,CACL,IAAM1D,EACG,MAAP0D,EACInf,KAAKmb,OAAO5c,OAAO,OAAQnD,GAC3B4E,KAAKmb,OAAO5c,OAAOnD,EAAO+jB,GAChCnf,KAAK8f,YAAYrE,EACnB,CACF,IAAAtf,IAAA,eAAAf,MAEO,SAAakpB,EAAiBC,GACX,MAApBD,EAAUxF,QACFwF,EAAAxF,OAAOQ,SAAShC,OAAOgH,GAEnC,IAAIE,EAA0B,KAC9BxkB,KAAKsf,SAASD,aAAaiF,EAAWC,GAAW,MACjDD,EAAUxF,OAAS9e,KACJ,MAAXukB,IACFC,EAAaD,EAAQ5I,UAGrB3b,KAAK2b,QAAQsB,aAAeqH,EAAU3I,SACtC3b,KAAK2b,QAAQ8I,cAAgBD,IAE7BxkB,KAAK2b,QAAQ0D,aAAaiF,EAAU3I,QAAS6I,GAE/CF,EAAUjC,QACZ,IAAAlmB,IAAA,SAAAf,MAEO,WACL,OAAO4E,KAAKsf,SAAStT,QAAO,SAACM,EAAM6V,GAAA,OAC1B7V,EAAO6V,EAAMn1B,QAAA,GACnB,EACL,IAAAmP,IAAA,eAAAf,MAEO,SAAaspB,EAAsBnD,GACnC,KAAAjC,SAAS5iB,SAAQ,SAACylB,GACRuC,EAAArF,aAAa8C,EAAOZ,EAAO,GAE5C,IAAAplB,IAAA,WAAAf,MAEO,SAASmW,GAMV,IALJmR,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAL,EAAArlB,WAAA,iBAAAc,KAAA,KAAewT,GACfvR,KAAK2kB,yBACc,MAAf3kB,KAAKyiB,QAAkBziB,KAAKyiB,SAAWziB,KAAK2b,QAAQkH,YACtD7iB,KAAK2b,QAAQ0D,aAAarf,KAAKyiB,OAAQziB,KAAK2b,QAAQkH,YAEzB,IAAzB7iB,KAAKsf,SAAStyB,OACZ,GAA6B,MAA7BgT,KAAKkf,QAAQ0F,aAAsB,CACrC,IAAMzC,EAAQniB,KAAKmb,OAAO5c,OAAOyB,KAAKkf,QAAQ0F,aAAa9H,UAC3D9c,KAAK8f,YAAYqC,EAAK,MAItBniB,KAAKsd,QAGX,IAAAnhB,IAAA,OAAAf,MAEO,SAAK1E,GAAoD,IAArCgrB,EAAAnW,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,IAAAA,UAAA,GACnBsZ,EAAkB7kB,KAAKsf,SAASzD,KAAKnlB,EAAOgrB,GAASoD,GAAA5V,EAAAA,EAAAA,GAAA2V,EAAA,GAApD1C,EAAA2C,EAAA,GAAOnpB,EAAMmpB,EAAA,GACdC,EAA6B,CAAC,CAAC/kB,KAAMtJ,IAC3C,OAAIyrB,aAAiBG,EACZyC,EAAS32B,OAAO+zB,EAAM6C,KAAKrpB,EAAQ+lB,KACxB,MAATS,GACT4C,EAAS33B,KAAK,CAAC+0B,EAAOxmB,IAEjBopB,EACT,IAAA5oB,IAAA,cAAAf,MAEO,SAAY+mB,GACZ,KAAA7C,SAAShC,OAAO6E,EACvB,IAAAhmB,IAAA,cAAAf,MAEO,SAAYwP,EAAqBxP,GAChC,IAAAskB,EACY,iBAAT9U,EAAoB5K,KAAKmb,OAAO5c,OAAOqM,EAAMxP,GAASwP,EAC/D,OAAI8U,aAAuB4C,GACzBtiB,KAAKilB,aAAavF,IAAWgD,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAL,EAAArlB,WAAA,oBAAAc,KAAA,KAEN2hB,EAC3B,IAAAvjB,IAAA,QAAAf,MAEO,SAAM1E,GAA2C,IAA5BwuB,EAAA3Z,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,IAAAA,UAAA,GAC1B,IAAK2Z,EAAO,CACV,GAAc,IAAVxuB,EACK,OAAAsJ,KAEL,GAAAtJ,IAAUsJ,KAAKhT,SACjB,OAAOgT,KAAKqO,IAEhB,CACM,IAAA/X,EAAQ0J,KAAKmlB,QACnB,OAAInlB,KAAK8e,QACP9e,KAAK8e,OAAOO,aAAa/oB,EAAO0J,KAAKqO,WAAQ,GAE1C,KAAAiR,SAAS2D,UAAUvsB,EAAOsJ,KAAKhT,UAAU,SAACm1B,EAAOxmB,EAAQypB,GAC5D,IAAMhJ,EAAQ+F,EAAM/F,MAAMzgB,EAAQupB,GACrB,MAAT9I,GACF9lB,EAAMwpB,YAAY1D,EACpB,IAEK9lB,CACT,IAAA6F,IAAA,aAAAf,MAEO,SAAW+mB,GAET,IADD,IAAA7rB,EAAQ0J,KAAKmlB,QACE,MAAdhD,EAAM9T,MACL/X,EAAAwpB,YAAYqC,EAAM9T,MAE1B,OAAIrO,KAAK8e,QACP9e,KAAK8e,OAAOO,aAAa/oB,EAAO0J,KAAKqO,WAAQ,GAExC/X,CACT,IAAA6F,IAAA,SAAAf,MAEO,WACD4E,KAAK8e,QACP9e,KAAKilB,aAAajlB,KAAK8e,OAAQ9e,KAAKqO,WAAQ,GAE9CrO,KAAKsd,QACP,IAAAnhB,IAAA,SAAAf,MAEO,SACLiqB,EACA9F,GACM,IAAA+F,EAAA,KACAC,EAAqB,GACrBC,EAAuB,GACnBH,EAAA3oB,SAAQ,SAAC+oB,GACbA,EAAS7X,SAAW0X,EAAK3J,SAA6B,cAAlB8J,EAASjf,OACpC+e,EAAAn4B,KAAAgmB,MAAAmS,GAAAnE,EAAAA,GAAAA,GAAQqE,EAASF,aACfC,EAAAp4B,KAAAgmB,MAAAoS,GAAApE,EAAAA,GAAAA,GAAQqE,EAASD,eAChC,IAEWA,EAAA9oB,SAAQ,SAACyd,GAIpB,KACqB,MAAnBA,EAAK8C,YAEY,WAAjB9C,EAAKmC,SACL2D,SAASyF,KAAKpF,wBAAwBnG,GACpCoB,KAAKgF,gCALT,CASA,IAAM9E,EAAO6J,EAAKnK,OAAOU,KAAK1B,GAClB,MAARsB,IAIyB,MAA3BA,EAAKE,QAAQsB,YACbxB,EAAKE,QAAQsB,aAAeqI,EAAK3J,UAEjCF,EAAKgE,QAVC,CAWR,IAGC8F,EAAA/X,QAAO,SAAC2M,GAAA,OACAA,EAAK8C,aAAeqI,EAAK3J,SAAWxB,IAASmL,EAAK7C,MAC1D,IACAkD,MAAK,SAAC/Z,EAAGC,GAAA,OACJD,IAAMC,EACD,EAELD,EAAE0U,wBAAwBzU,GAAK0P,KAAKqK,4BAC/B,GAED,CACT,IACAlpB,SAAQ,SAACyd,GACR,IAAIoK,EAAuB,KACH,MAApBpK,EAAKsK,cACPF,EAAUe,EAAKnK,OAAOU,KAAK1B,EAAKsK,cAElC,IAAMhJ,EAAOwG,GAAiB9H,EAAMmL,EAAKnK,SACrCM,EAAKpN,OAASkW,GAAwB,MAAb9I,EAAKpN,QACb,MAAfoN,EAAKqD,QACFrD,EAAAqD,OAAOC,YAAYuG,GAErBA,EAAAjG,aAAa5D,EAAM8I,QAAW,GACrC,IAEJvkB,KAAK2kB,wBACP,KApXI,CAAmBxE,IAUvBmC,GAAcM,QAAU,GAV1B,IAAMiD,GAANvD,GAuXAwD,GAAeD,GCjYf,SAASra,GACPua,EACAC,GAEI,GAAA1rB,OAAOkD,KAAKuoB,GAAM/4B,SAAWsN,OAAOkD,KAAKwoB,GAAMh5B,OAC1C,SAET,IAAK,IAAMi5B,KAAQF,EACjB,GAAIA,EAAKE,KAAUD,EAAKC,GACf,SAGJ,QACT,CAEA,IAAMC,GAAA,SAAAC,GA2BJ,SAAAD,EAAY/K,EAAcQ,GAAe,IAAAyK,EAEW,OAFXlZ,EAAAA,EAAAA,GAAA,KAAAgZ,GACvCE,GAAAtL,EAAAA,GAAAA,GAAA,KAAAoL,EAAA,CAAM/K,EAAQQ,IACdyK,EAAKra,WAAa,IAAI2S,GAAgB0H,EAAKzK,SAAOyK,CACpD,QAAArL,EAAAA,GAAAA,GAAAmL,EAAAC,IAAAhZ,EAAAA,EAAAA,GAAA+Y,EAAA,EAAA/pB,IAAA,SAAAf,MAEO,SAAOwP,EAAcxP,GAAkB,IAAAirB,EAAA,KAC5C,GAAIzb,IAAS5K,KAAKkf,QAAQpC,UAAa1hB,EAQhC,CACL,IAAMmjB,EAASve,KAAKmb,OAAOE,MAAMzQ,EAAMmO,GAAMM,QAC7C,GAAc,MAAVkF,EACF,OAEEA,aAAkB3E,GACf,KAAA7N,WAAWoS,UAAUI,EAAQnjB,GAElCA,IACCwP,IAAS5K,KAAKkf,QAAQpC,UAAY9c,KAAKsmB,UAAU1b,KAAUxP,IAEvD,KAAAmrB,YAAY3b,EAAMxP,EAE3B,MApBO,KAAAkkB,SAAS5iB,SAAQ,SAACylB,GACfA,aAAiB+D,IACrB/D,EAAQA,EAAMlD,KAAKiH,EAAWpJ,UAAU,IAErCuJ,EAAAta,WAAW7G,KAAKid,EAAmB,IAE1CniB,KAAKikB,QAeT,IAAA9nB,IAAA,UAAAf,MAEO,WACC,IAAAkrB,EAAUtmB,KAAK+L,WAAWrQ,SAC1B6iB,EAASve,KAAKkf,QAAQoH,QAAQtmB,KAAK2b,QAAS3b,KAAKmb,QACvD,OAAc,MAAVoD,IACM+H,EAAAtmB,KAAKkf,QAAQpC,UAAYyB,GAE5B+H,CACT,IAAAnqB,IAAA,WAAAf,MAEO,SACL1E,EACA1J,EACA4d,EACAxP,GAG0B,MAAxB4E,KAAKsmB,UAAU1b,IACf5K,KAAKmb,OAAOE,MAAMzQ,EAAMmO,GAAMI,WAEjBnZ,KAAKgf,QAAQtoB,EAAO1J,GAC5BuxB,OAAO3T,EAAMxP,IAAKsnB,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAuD,EAAAjpB,WAAA,iBAAAc,KAAA,KAERrH,EAAO1J,EAAQ4d,EAAMxP,EAExC,IAAAe,IAAA,WAAAf,MAEO,SAASmW,IACdmR,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAuD,EAAAjpB,WAAA,iBAAAc,KAAA,KAAewT,GACT,IAAA+U,EAAUtmB,KAAKsmB,UACrB,GAAoC,IAAhChsB,OAAOkD,KAAK8oB,GAASt5B,OACvB,OAAOgT,KAAKikB,SAEd,IAAM5V,EAAOrO,KAAKqO,KAEhBA,aAAgB6X,GAChB7X,EAAKuQ,OAAS5e,MACdwL,GAAQ8a,EAASjY,EAAKiY,aAEtBjY,EAAK4W,aAAajlB,MAClBqO,EAAKiP,SAET,IAAAnhB,IAAA,cAAAf,MAEO,SAAYwP,EAAqBxP,GACtC,IAAMskB,GAAAgD,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAuD,EAAAjpB,WAAA,oBAAAc,KAAA,KAAgC6M,EAAMxP,GACvC,YAAA2Q,WAAW7G,KAAKwa,GACdA,CACT,IAAAvjB,IAAA,SAAAf,MAEO,SACLiqB,EACA9T,GACM,IAAAiV,EAAA,MACA9D,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAuD,EAAAjpB,WAAA,eAAAc,KAAA,KAAOsnB,EAAW9T,GACC8T,EAAUhJ,MACjC,SAACoJ,GAAA,OACCA,EAAS7X,SAAW4Y,EAAK7K,SAA6B,eAAlB8J,EAASjf,IAAS,KAGxDxG,KAAK+L,WAAWmS,OAEpB,IAAA/hB,IAAA,OAAAf,MAEO,SAAKwP,EAAuBxP,GACjC,IAAMykB,GAAA6C,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAuD,EAAAjpB,WAAA,aAAAc,KAAA,KAAqB6M,EAAMxP,GACjC,OAAIykB,aAAmBqG,GAChB,KAAAna,WAAW0a,KAAK5G,GAEhBA,CACT,MAAA1jB,IAAA,SAAAf,MAxHA,SAAcA,GACL,OAAAsnB,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAuD,GAAA,eAAAnoB,KAAA,KAAa3C,EACtB,IAAAe,IAAA,UAAAf,MAEA,SAAsBugB,EAAsBR,GAC1C,IAAMC,EAAQD,EAAOE,MAAM6K,EAAWpJ,UACtC,GACW,MAAT1B,GACAO,EAAQW,UAAalB,EAA0BkB,QAGtC,IAAwB,iBAAjBtc,KAAKsc,QACd,SACE,GAAAxtB,MAAMuT,QAAQrC,KAAKsc,SACrB,OAAAX,EAAQW,QAAQoK,a,CAG3B,KAvBI,CAAmBZ,IACTI,GAAAnC,gBAAqC,CAACmC,GAAYtF,IAChEsF,GAAcpJ,SAAW,SACzBoJ,GAAcjM,MAAQlB,GAAMS,YAC5B0M,GAAc5J,QAA6B,OAJ7C,IAAMqK,GAANT,GAiIAU,GAAeD,GCjJTE,GAAA,SAAAC,GA8BJ,SAAAD,EAAY1L,EAAcQ,GAAe,IAAAoL,EAEW,OAFX7Z,EAAAA,EAAAA,GAAA,KAAA2Z,GACvCE,GAAAjM,EAAAA,GAAAA,GAAA,KAAA+L,EAAA,CAAM1L,EAAQQ,IACdoL,EAAKhb,WAAa,IAAI2S,GAAgBqI,EAAKpL,SAAOoL,CACpD,QAAAhM,EAAAA,GAAAA,GAAA8L,EAAAC,IAAA3Z,EAAAA,EAAAA,GAAA0Z,EAAA,EAAA1qB,IAAA,SAAAf,MAEO,SAAOwP,EAAcxP,GAC1B,IAAMmjB,EAASve,KAAKmb,OAAOE,MAAMzQ,EAAMmO,GAAMO,OAC/B,MAAViF,IAEOA,aAAkB3E,GACtB,KAAA7N,WAAWoS,UAAUI,EAAQnjB,GACzBwP,IAAS5K,KAAKkf,QAAQpC,UAAa1hB,EAG5CA,IACCwP,IAAS5K,KAAKkf,QAAQpC,UAAY9c,KAAKsmB,UAAU1b,KAAUxP,IAEvD,KAAAmrB,YAAY3b,EAAMxP,GALlB,KAAAmrB,YAAYM,EAAU/J,UAO/B,IAAA3gB,IAAA,UAAAf,MAEO,WACC,IAAAkrB,EAAUtmB,KAAK+L,WAAWrQ,SAC1B6iB,EAASve,KAAKkf,QAAQoH,QAAQtmB,KAAK2b,QAAS3b,KAAKmb,QACvD,OAAc,MAAVoD,IACM+H,EAAAtmB,KAAKkf,QAAQpC,UAAYyB,GAE5B+H,CACT,IAAAnqB,IAAA,WAAAf,MAEO,SACL1E,EACA1J,EACA4d,EACAxP,GAE4C,MAAxC4E,KAAKmb,OAAOE,MAAMzQ,EAAMmO,GAAMO,OAC3B,KAAAiF,OAAO3T,EAAMxP,IAAKsnB,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAkE,EAAA5pB,WAAA,iBAAAc,KAAA,KAERrH,EAAO1J,EAAQ4d,EAAMxP,EAExC,IAAAe,IAAA,WAAAf,MAEO,SAAS1E,EAAe0E,EAAe+jB,GACxC,GAAO,MAAPA,GAAyD,MAA1Cnf,KAAKmb,OAAOE,MAAMjgB,EAAO2d,GAAMM,SAE1CqJ,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAkE,EAAA5pB,WAAA,iBAAAc,KAAA,KAASrH,EAAO0E,EAAO+jB,OACxB,CACC,IAAA7oB,EAAQ0J,KAAKoc,MAAM1lB,GACzB,GAAa,MAATJ,EAII,UAAIwW,MAAM,8CAHhB,IAAM2O,EAAOzb,KAAKmb,OAAO5c,OAAOnD,EAAO+jB,GACjC7oB,EAAAwoB,OAAOO,aAAa5D,EAAMnlB,EAIpC,CACF,IAAA6F,IAAA,cAAAf,MAEO,SAAYwP,EAAqBxP,GACtC,IAAMskB,GAAAgD,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAkE,EAAA5pB,WAAA,oBAAAc,KAAA,KAAgC6M,EAAMxP,GACvC,YAAA2Q,WAAW7G,KAAKwa,GACdA,CACT,IAAAvjB,IAAA,SAAAf,MAEO,SACLiqB,EACA9T,GACM,IAAAyV,EAAA,MACAtE,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAkE,EAAA5pB,WAAA,eAAAc,KAAA,KAAOsnB,EAAW9T,GACC8T,EAAUhJ,MACjC,SAACoJ,GAAA,OACCA,EAAS7X,SAAWoZ,EAAKrL,SAA6B,eAAlB8J,EAASjf,IAAS,KAGxDxG,KAAK+L,WAAWmS,OAEpB,MAAA/hB,IAAA,SAAAf,MAhGA,SAAcA,GACL,OAAAsnB,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAkE,GAAA,eAAA9oB,KAAA,KAAa3C,EACtB,IAAAe,IAAA,UAAAf,MAEA,SAAsBugB,EAAsBR,GAC1C,IAAMC,EAAQD,EAAOE,MAAMwL,EAAU/J,UACrC,GACW,MAAT1B,GACAO,EAAQW,UAAalB,EAA0BkB,QAGtC,IAAwB,iBAAjBtc,KAAKsc,QACd,SACE,GAAAxtB,MAAMuT,QAAQrC,KAAKsc,SACrB,OAAAX,EAAQW,QAAQoK,a,CAE3B,KA1BI,CAAkBZ,IACtBe,GAAc/J,SAAW,QACzB+J,GAAc5M,MAAQlB,GAAMQ,WAC5BsN,GAAcvK,QAA6B,IAC3CuK,GAAc9C,gBAAqC,CACjD6C,GACAC,GACAjG,IAPJ,IAAMqG,GAANJ,GA6GAK,GAAeD,GCtHTE,GAAA,SAAAC,GAAA,SAAAD,IAAA,OAAAja,EAAAA,EAAAA,GAAA,KAAAia,IAAArM,EAAAA,GAAAA,GAAA,KAAAqM,EAAA5b,UAAA,QAAAwP,EAAAA,GAAAA,GAAAoM,EAAAC,IAAAja,EAAAA,EAAAA,GAAAga,EAAA,EAAAhrB,IAAA,aAAAf,MAQG,WAEH,OAAc,OAAd4E,KAAKqO,MAAiBrO,KAAKqO,KAAK6Q,QAAQpC,WAAa9c,KAAKkf,QAAQpC,QAEtE,IAAA3gB,IAAA,WAAAf,MAEO,SAAS1E,EAAe1J,IACvB01B,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAwE,EAAAlqB,WAAA,iBAAAc,KAAA,KAASrH,EAAO1J,GACtBgT,KAAK2kB,wBACP,IAAAxoB,IAAA,WAAAf,MAEO,SACL1E,EACA1J,EACA4d,EACAxP,IAEAsnB,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAwE,EAAAlqB,WAAA,iBAAAc,KAAA,KAAerH,EAAO1J,EAAQ4d,EAAMxP,GACpC4E,KAAK2kB,wBACP,IAAAxoB,IAAA,WAAAf,MAEO,SAAS1E,EAAe0E,EAAe+jB,IACtCuD,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAwE,EAAAlqB,WAAA,iBAAAc,KAAA,KAASrH,EAAO0E,EAAO+jB,GAC7Bnf,KAAK2kB,wBACP,IAAAxoB,IAAA,WAAAf,MAEO,SAASmW,IACdmR,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAwE,EAAAlqB,WAAA,iBAAAc,KAAA,KAAewT,GACXvR,KAAKsf,SAAStyB,OAAS,GAAkB,MAAbgT,KAAKqO,MAAgBrO,KAAKqnB,eACnD,KAAAhZ,KAAK4W,aAAajlB,MACvBA,KAAKqO,KAAKiP,SAEd,KAxCI,CAAsBwI,IAC1BqB,GAAcrK,SAAW,YACzBqK,GAAclN,MAAQlB,GAAMQ,WAF9B,IAAM+N,GAANH,GA2CAI,GAAeD,GC5CTE,GAAA,SAAAC,GAAA,SAAAD,IAAA,OAAAta,EAAAA,EAAAA,GAAA,KAAAsa,IAAA1M,EAAAA,GAAAA,GAAA,KAAA0M,EAAAjc,UAAA,QAAAwP,EAAAA,GAAAA,GAAAyM,EAAAC,IAAAta,EAAAA,EAAAA,GAAAqa,EAAA,EAAArrB,IAAA,SAAAf,MAKG,SAAOwP,EAAcxP,IAI1BsnB,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAA6E,EAAAvqB,WAAA,iBAAAc,KAAA,KAAe,EAAGiC,KAAKhT,SAAU4d,EAAMxP,EACzC,IAAAe,IAAA,WAAAf,MAEO,SACL1E,EACA1J,EACA4d,EACAxP,GAEc,IAAV1E,GAAe1J,IAAWgT,KAAKhT,SAC5B,KAAAuxB,OAAO3T,EAAMxP,IAAKsnB,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAA6E,EAAAvqB,WAAA,iBAAAc,KAAA,KAERrH,EAAO1J,EAAQ4d,EAAMxP,EAExC,IAAAe,IAAA,UAAAf,MAEO,WACL,OAAO4E,KAAKkf,QAAQoH,QAAQtmB,KAAK2b,QAAS3b,KAAKmb,OACjD,MAAAhf,IAAA,UAAAf,MA1BA,SAAsBslB,EAAuBgH,GAE7C,KAHI,CAAkB9G,IA8BxB+G,GAAeH,GC1BTI,GAAkB,CACtB7b,YAAY,EACZ8b,eAAe,EACfC,uBAAuB,EACvBC,WAAW,EACXC,SAAS,GAGLC,GAA0B,IAE1BC,GAAA,SAAAC,GASJ,SAAAD,EACSE,EACPjO,GACA,IAAAkO,EASY,OATZnb,EAAAA,EAAAA,GAAA,KAAAgb,GAEAG,GAAAvN,EAAAA,GAAAA,GAAA,KAAAoN,EAAA,CAAM,KAAM/N,IAJLkO,EAAAD,SAAAA,EAKPC,EAAKlN,QAAAmN,EAAAA,GAAAA,GAAAD,GACLA,EAAKnK,QACLmK,EAAKE,SAAW,IAAIC,kBAAiB,SAACnD,GACpCgD,EAAKI,OAAOpD,EAAS,IAEvBgD,EAAKE,SAASG,QAAQL,EAAK1M,QAASiM,IACpCS,EAAKhG,SAAOgG,CACd,QAAAtN,EAAAA,GAAAA,GAAAmN,EAAAC,IAAAhb,EAAAA,EAAAA,GAAA+a,EAAA,EAAA/rB,IAAA,SAAAf,MAEO,SAAOkL,EAA8BlL,GAC1C,OAAO4E,KAAKooB,SAAS7pB,OAAOyB,KAAMsG,EAAOlL,EAC3C,IAAAe,IAAA,OAAAf,MAEO,SAAK+e,GAAgD,IAA7ByB,EAAArQ,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,IAAAA,UAAA,GACvBkQ,EAAOzb,KAAKooB,SAASvM,KAAK1B,EAAMyB,GACtC,OAAKH,EAGDA,EAAKN,SAAWnb,KACXyb,EAEFG,EAAS5b,KAAK6b,KAAKJ,EAAKN,OAAOQ,QAAQsB,YAAY,GAAQ,KALzD,IAMX,IAAA9gB,IAAA,QAAAf,MAEO,SACLigB,GAE2B,IAD3BpB,EAAA1O,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAewN,GAAMY,IAErB,OAAO3Z,KAAKooB,SAAS/M,MAAMA,EAAOpB,EACpC,IAAA9d,IAAA,WAAAf,MAEO,WAA+C,IAAAutB,EACpD,OAAOA,EAAA3oB,KAAKooB,UAASQ,SAAAxV,MAAAuV,EAAApd,UACvB,IAAApP,IAAA,QAAAf,MAEO,WACc,MAAf4E,KAAKmb,SAAUuH,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAuF,EAAAjrB,WAAA,cAAAc,KAAA,KAIrB,IAAA5B,IAAA,SAAAf,MAEO,YACLsnB,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAuF,EAAAjrB,WAAA,eAAAc,KAAA,MACAiC,KAAKuoB,SAASM,YAChB,IAAA1sB,IAAA,WAAAf,MAEO,SAAS1E,EAAe1J,GAC7BgT,KAAKyoB,SACS,IAAV/xB,GAAe1J,IAAWgT,KAAKhT,SAC5B,KAAAsyB,SAAS5iB,SAAQ,SAACylB,GACrBA,EAAM7E,QAAO,KACdoF,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAuF,EAAAjrB,WAAA,iBAAAc,KAAA,KAEcrH,EAAO1J,EAE1B,IAAAmP,IAAA,WAAAf,MAEO,SACL1E,EACA1J,EACA4d,EACAxP,GAEA4E,KAAKyoB,UAAO/F,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAuF,EAAAjrB,WAAA,iBAAAc,KAAA,KACGrH,EAAO1J,EAAQ4d,EAAMxP,EACtC,IAAAe,IAAA,WAAAf,MAEO,SAAS1E,EAAe0E,EAAe+jB,GAC5Cnf,KAAKyoB,UAAO/F,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAuF,EAAAjrB,WAAA,iBAAAc,KAAA,KACGrH,EAAO0E,EAAO+jB,EAC/B,IAAAhjB,IAAA,WAAAf,MAOO,WAAuD,IAAA0tB,EAAA,KAA9CzD,EAAA9Z,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAiB,GAAIgG,EAAAhG,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAe,CAAC,GACnDmX,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAuF,EAAAjrB,WAAA,iBAAAc,KAAA,KAAewT,GAMR,IALP,IAAMwX,EAAexX,EAAQwX,cAAgB,IAAI5pB,QAE7C6pB,EAAUl6B,MAAM2rB,KAAKza,KAAKuoB,SAASU,eAGhCD,EAAQh8B,OAAS,GACZq4B,EAAAj4B,KAAK47B,EAAQpzB,OA4BzB,IA1BA,IAAMszB,EAAO,SAAPA,EAAQzN,GAA+C,IAA5B0N,IAAA5d,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,KAAAA,UAAA,GACnB,MAARkQ,GAAgBA,IAASqN,GAGE,MAA3BrN,EAAKE,QAAQsB,aAGZ8L,EAAazoB,IAAImb,EAAKE,UACzBoN,EAAa7tB,IAAIugB,EAAKE,QAAS,IAE7BwN,GACFD,EAAKzN,EAAKqD,QACZ,EAEIsK,EAAW,SAAXA,EAAY3N,GAEXsN,EAAazoB,IAAImb,EAAKE,WAGvBF,aAAgBqK,IACbrK,EAAA6D,SAAS5iB,QAAQ0sB,GAEXL,EAAA,UAAOtN,EAAKE,SACzBF,EAAK2N,SAAS7X,GAAO,EAEnBkG,EAAY4N,EACP53B,EAAI,EAAGgqB,EAAUzqB,OAAS,EAAGS,GAAK,EAAG,CAC5C,GAAIA,GAAKw6B,GACD,UAAInb,MAAM,mDA4BX,IA1BG2K,EAAA/a,SAAQ,SAAC+oB,GACjB,IAAMhK,EAAOqN,EAAKjN,KAAK4J,EAAS7X,QAAQ,GAC5B,MAAR6N,IAGAA,EAAKE,UAAY8J,EAAS7X,SACN,cAAlB6X,EAASjf,MACX0iB,EAAKJ,EAAKjN,KAAK4J,EAAS4D,iBAAiB,IACzCv6B,MAAM2rB,KAAKgL,EAASF,YAAY7oB,SAAQ,SAACyd,GACvC,IAAMgI,EAAQ2G,EAAKjN,KAAK1B,GAAM,GAC9B+O,EAAK/G,GAAO,GACRA,aAAiB2D,IACb3D,EAAA7C,SAAS5iB,SAAQ,SAAC4sB,GACtBJ,EAAKI,GAAY,EAAK,GAE1B,KAEyB,eAAlB7D,EAASjf,MAClB0iB,EAAKzN,EAAKmD,OAGdsK,EAAKzN,GAAI,IAEN,KAAA6D,SAAS5iB,QAAQ0sB,GACtB3R,EAAY3oB,MAAM2rB,KAAKza,KAAKuoB,SAASU,eACrCD,EAAUvR,EAAUpmB,QACb23B,EAAQh8B,OAAS,GACZq4B,EAAAj4B,KAAK47B,EAAQpzB,MAE3B,CACF,IAAAuG,IAAA,SAAAf,MAEO,SACLiqB,GAEM,IAAAkE,EAAA,KADNhY,EAAAhG,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAkC,CAAC,EAEvB8Z,EAAAA,GAAarlB,KAAKuoB,SAASU,cACjC,IAAAF,EAAA,IAAmB5pB,QAEtBkmB,EAAArqB,KAAI,SAACyqB,GACJ,IAAMhK,EAAO8N,EAAK1N,KAAK4J,EAAS7X,QAAQ,GACxC,OAAY,MAAR6N,EACK,KAELsN,EAAazoB,IAAImb,EAAKE,UACxBoN,EAAavnB,IAAIia,EAAKE,SAASvuB,KAAKq4B,GAC7B,OAEPsD,EAAa7tB,IAAIugB,EAAKE,QAAS,CAAC8J,IACzBhK,EACT,IAED/e,SAAQ,SAAC+e,GACI,MAARA,GAAgBA,IAAS8N,GAAQR,EAAazoB,IAAImb,EAAKE,UACpDF,EAAAgN,OAAOM,EAAavnB,IAAIia,EAAKE,UAAY,GAAIpK,EACpD,IAEJA,EAAQwX,aAAeA,EACnBA,EAAazoB,IAAIN,KAAK2b,WAAO+G,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAuF,EAAAjrB,WAAA,eAAAc,KAAA,KAClBgrB,EAAavnB,IAAIxB,KAAK2b,SAAUpK,GAE1C,KAAA6X,SAAS/D,EAAW9T,EAC3B,KAnMI,CAAmBuU,IACvBoC,GAAcpL,SAAW,SACzBoL,GAActD,aAAesC,GACfgB,GAAAnE,gBAAqC,CAACmD,GAAWK,IAC/DW,GAAcjO,MAAQlB,GAAMQ,WAC5B2O,GAAc5L,QAAU,MAL1B,IAAMkN,GAANtB,GAsMAuB,GAAeD,GCnNTE,GAAA,SAAAC,GAeJ,SAAAD,EAAYvO,EAAchB,GAAY,IAAAyP,EAEO,OAFP1c,EAAAA,EAAAA,GAAA,KAAAwc,GACpCE,GAAA9O,EAAAA,GAAAA,GAAA,KAAA4O,EAAA,CAAMvO,EAAQhB,IACdyP,EAAK5N,KAAO4N,EAAK1K,QAAQ9jB,MAAMwuB,EAAKjO,SAAOiO,CAC7C,QAAA7O,EAAAA,GAAAA,GAAA2O,EAAAC,IAAAxc,EAAAA,EAAAA,GAAAuc,EAAA,EAAAvtB,IAAA,WAAAf,MAEO,SAAS1E,EAAe1J,GAC7BgT,KAAK2b,QAAQnb,KAAOR,KAAKgc,KACvBhc,KAAKgc,KAAK3qB,MAAM,EAAGqF,GAASsJ,KAAKgc,KAAK3qB,MAAMqF,EAAQ1J,EACxD,IAAAmP,IAAA,QAAAf,MAEO,SAAM+e,EAAYxe,GACnB,OAAAqE,KAAK2b,UAAYxB,EACZxe,GAED,CACV,IAAAQ,IAAA,WAAAf,MAEO,SAAS1E,EAAe0E,EAAe+jB,GACjC,MAAPA,GACG,KAAAnD,KAAOhc,KAAKgc,KAAK3qB,MAAM,EAAGqF,GAAS0E,EAAQ4E,KAAKgc,KAAK3qB,MAAMqF,GAC3D,KAAAilB,QAAQnb,KAAOR,KAAKgc,OAAA0G,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAA+G,EAAAzsB,WAAA,iBAAAc,KAAA,KAEVrH,EAAO0E,EAAO+jB,EAEjC,IAAAhjB,IAAA,SAAAf,MAEO,WACL,OAAO4E,KAAKgc,KAAKhvB,MACnB,IAAAmP,IAAA,WAAAf,MAEO,SAASmW,IACdmR,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAA+G,EAAAzsB,WAAA,iBAAAc,KAAA,KAAewT,GACfvR,KAAKgc,KAAOhc,KAAKkf,QAAQ9jB,MAAM4E,KAAK2b,SACX,IAArB3b,KAAKgc,KAAKhvB,OACZgT,KAAKsd,SACItd,KAAKqO,gBAAgBqb,GAAY1pB,KAAKqO,KAAKuQ,OAAS5e,OAC7DA,KAAKqkB,SAASrkB,KAAKhT,SAAWgT,KAAKqO,KAAkBjT,SACrD4E,KAAKqO,KAAKiP,SAEd,IAAAnhB,IAAA,WAAAf,MAEO,SAAS1E,GACP,OAACsJ,KAAK2b,QAASjlB,EACxB,IAAAyF,IAAA,QAAAf,MAEO,SAAM1E,GAA2C,IAA5BwuB,EAAA3Z,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,IAAAA,UAAA,GAC1B,IAAK2Z,EAAO,CACV,GAAc,IAAVxuB,EACK,OAAAsJ,KAEL,GAAAtJ,IAAUsJ,KAAKhT,SACjB,OAAOgT,KAAKqO,IAEhB,CACM,IAAA/X,EAAQ0J,KAAKmb,OAAO5c,OAAOyB,KAAK2b,QAAQkO,UAAUnzB,IACxD,OAAAsJ,KAAK8e,OAAOO,aAAa/oB,EAAO0J,KAAKqO,WAAQ,GAC7CrO,KAAKgc,KAAOhc,KAAKkf,QAAQ9jB,MAAM4E,KAAK2b,SAC7BrlB,CACT,IAAA6F,IAAA,SAAAf,MAEO,SACLiqB,EACA9F,GACM,IAAAuK,EAAA,KAEJzE,EAAUhJ,MAAK,SAACoJ,GAAA,MAEM,kBAAlBA,EAASjf,MAA4Bif,EAAS7X,SAAWkc,EAAKnO,OAEjE,MAED3b,KAAKgc,KAAOhc,KAAKkf,QAAQ9jB,MAAM4E,KAAK2b,SAExC,IAAAxf,IAAA,QAAAf,MAEO,WACL,OAAO4E,KAAKgc,IACd,MAAA7f,IAAA,SAAAf,MAxFA,SAAqBA,GACZ,OAAA6kB,SAAS8J,eAAe3uB,EACjC,IAAAe,IAAA,QAAAf,MAEA,SAAoBugB,GAClB,OAAOA,EAAQnb,IACjB,KAVI,CAAiBogB,IACrB8I,GAAuB5M,SAAW,OAClC4M,GAAczP,MAAQlB,GAAMS,YAF9B,IAAMwQ,GAANN,GA+FAO,GAAeD,G,0CC1Ff,SAAS1uB,GAAUC,EAAOC,GACxB,IAAI9E,GAAS,EACT1J,EAAkB,MAATuO,EAAgB,EAAIA,EAAMvO,OAEvC,QAAS0J,EAAQ1J,EACf,IAA6C,IAAzCwO,EAASD,EAAM7E,GAAQA,EAAO6E,GAChC,MAGJ,OAAOA,CACT,CAEA,YClBA,IAAIsD,GAAalC,GAAQrC,OAAOkD,KAAMlD,QAEtC,YCDA,IAAI6C,GAAc7C,OAAO2C,UAGrBU,GAAiBR,GAAYQ,eASjC,SAASmH,GAAS5I,GAChB,IAAK6I,GAAY7I,GACf,OAAO2C,GAAW3C,GAEpB,IAAIF,EAAS,GACb,IAAK,IAAIG,KAAO7B,OAAO4B,GACjByB,GAAeI,KAAK7B,EAAQC,IAAe,eAAPA,GACtCH,EAAO5O,KAAK+O,GAGhB,OAAOH,CACT,CAEA,YCGA,SAASwB,GAAKtB,GACZ,OAAO6K,GAAY7K,GAAUiG,GAAcjG,GAAU4I,GAAS5I,EAChE,CAEA,YCxBA,SAAS2G,GAAW3G,EAAQ4G,GAC1B,OAAO5G,GAAU6G,GAAWD,EAAQtF,GAAKsF,GAAS5G,EACpD,CAEA,YCJA,SAASguB,GAAahuB,EAAQ4G,GAC5B,OAAO5G,GAAU6G,GAAWD,EAAQiT,GAAOjT,GAAS5G,EACtD,CAEA,YCPA,SAAS8L,GAAYzM,EAAO0M,GAC1B,IAAIvR,GAAS,EACT1J,EAAkB,MAATuO,EAAgB,EAAIA,EAAMvO,OACnCkb,EAAW,EACXlM,EAAS,GAEb,QAAStF,EAAQ1J,EAAQ,CACvB,IAAIoO,EAAQG,EAAM7E,GACduR,EAAU7M,EAAO1E,EAAO6E,KAC1BS,EAAOkM,KAAc9M,EAEzB,CACA,OAAOY,CACT,CAEA,YCNA,SAASqK,KACP,MAAO,EACT,CAEA,YClBA,IAAIlJ,GAAc7C,OAAO2C,UAGrBuB,GAAuBrB,GAAYqB,qBAGnCC,GAAmBnE,OAAOoE,sBAS1ByH,GAAc1H,GAA+B,SAASvC,GACxD,OAAc,MAAVA,EACK,IAETA,EAAS5B,OAAO4B,GACT8L,GAAYvJ,GAAiBvC,IAAS,SAAS6J,GACpD,OAAOvH,GAAqBT,KAAK7B,EAAQ6J,EAC3C,IACF,EARqCM,GAUrC,YClBA,SAASvC,GAAYhB,EAAQ5G,GAC3B,OAAO6G,GAAWD,EAAQqD,GAAWrD,GAAS5G,EAChD,CAEA,YCPA,SAAST,GAAUF,EAAOG,GACxB,IAAIhF,GAAS,EACT1J,EAAS0O,EAAO1O,OAChB2O,EAASJ,EAAMvO,OAEnB,QAAS0J,EAAQ1J,EACfuO,EAAMI,EAASjF,GAASgF,EAAOhF,GAEjC,OAAO6E,CACT,CAEA,YCbA,IAAIkD,GAAmBnE,OAAOoE,sBAS1ByrB,GAAgB1rB,GAA+B,SAASvC,GAC1D,IAAIF,EAAS,GACb,MAAOE,EACLT,GAAUO,EAAQmK,GAAWjK,IAC7BA,EAASkC,GAAalC,GAExB,OAAOF,CACT,EAPuCqK,GASvC,YCbA,SAAS+jB,GAActnB,EAAQ5G,GAC7B,OAAO6G,GAAWD,EAAQqnB,GAAarnB,GAAS5G,EAClD,CAEA,YCDA,SAASoI,GAAepI,EAAQqI,EAAUC,GACxC,IAAIxI,EAASuI,EAASrI,GACtB,OAAOmG,GAAQnG,GAAUF,EAASP,GAAUO,EAAQwI,EAAYtI,GAClE,CAEA,YCRA,SAASgI,GAAWhI,GAClB,OAAOoI,GAAepI,EAAQsB,GAAM2I,GACtC,CAEA,YCHA,SAASkkB,GAAanuB,GACpB,OAAOoI,GAAepI,EAAQ6Z,GAAQoU,GACxC,CAEA,Y,0DCZIrrB,GAAWC,GAAUtE,EAAM,YAE/B,YCFA,IAAIwE,GAAUF,GAAUtE,EAAM,WAE9B,YCFA,IAAIyE,GAAMH,GAAUtE,EAAM,OAE1B,YCFA,IAAI0E,GAAUJ,GAAUtE,EAAM,WAE9B,YCGA,IAAI/B,GAAS,eACTE,GAAY,kBACZC,GAAa,mBACbE,GAAS,eACTG,GAAa,mBAEbE,GAAc,oBAGdiG,GAAqBC,GAASR,IAC9BS,GAAgBD,GAASN,IACzBQ,GAAoBF,GAASL,IAC7BQ,GAAgBH,GAASJ,IACzBQ,GAAoBJ,GAASH,IAS7BuE,GAASe,IAGR3F,IAAY4E,GAAO,IAAI5E,GAAS,IAAI8H,YAAY,MAAQxN,IACxD4F,IAAO0E,GAAO,IAAI1E,KAAQtG,IAC1BuG,IAAWyE,GAAOzE,GAAQ4H,YAAchO,IACxCqG,IAAOwE,GAAO,IAAIxE,KAAQnG,IAC1BoG,IAAWuE,GAAO,IAAIvE,KAAYjG,MACrCwK,GAAS,SAAStI,GAChB,IAAIY,EAASyI,GAAWrJ,GACpBmL,EAAOvK,GAAUpD,GAAYwC,EAAM6J,iBAAc7I,EACjD0K,EAAaP,EAAOjH,GAASiH,GAAQ,GAEzC,GAAIO,EACF,OAAQA,GACN,KAAKzH,GAAoB,OAAOjG,GAChC,KAAKmG,GAAe,OAAO7G,GAC3B,KAAK8G,GAAmB,OAAO3G,GAC/B,KAAK4G,GAAe,OAAO1G,GAC3B,KAAK2G,GAAmB,OAAOxG,GAGnC,OAAO8C,CACT,GAGF,YCxDA,IAAImB,GAAc7C,OAAO2C,UAGrBU,GAAiBR,GAAYQ,eASjC,SAAS4F,GAAehI,GACtB,IAAIvO,EAASuO,EAAMvO,OACfgP,EAAS,IAAIT,EAAM0J,YAAYjY,GAOnC,OAJIA,GAA6B,iBAAZuO,EAAM,IAAkBoC,GAAeI,KAAKxC,EAAO,WACtES,EAAOtF,MAAQ6E,EAAM7E,MACrBsF,EAAOsK,MAAQ/K,EAAM+K,OAEhBtK,CACT,CAEA,YCfA,SAASsJ,GAAcC,EAAUtC,GAC/B,IAAI+B,EAAS/B,EAASkC,GAAiBI,EAASP,QAAUO,EAASP,OACnE,OAAO,IAAIO,EAASN,YAAYD,EAAQO,EAASC,WAAYD,EAASF,WACxE,CAEA,YCdA,IAAItL,GAAU,OASd,SAAS4L,GAAYC,GACnB,IAAI5J,EAAS,IAAI4J,EAAOX,YAAYW,EAAO9C,OAAQ/I,GAAQwD,KAAKqI,IAEhE,OADA5J,EAAO+E,UAAY6E,EAAO7E,UACnB/E,CACT,CAEA,YCbA,IAAI2D,GAAczB,EAASA,EAAOjB,eAAYb,EAC1CwD,GAAgBD,GAAcA,GAAYE,aAAUzD,EASxD,SAAS0J,GAAYC,GACnB,OAAOnG,GAAgBtF,OAAOsF,GAAc7B,KAAKgI,IAAW,CAAC,CAC/D,CAEA,YCVA,IAAI1N,GAAU,mBACVC,GAAU,gBACVI,GAAS,eACTC,GAAY,kBACZG,GAAY,kBACZC,GAAS,eACTC,GAAY,kBACZC,GAAY,kBAEZE,GAAiB,uBACjBC,GAAc,oBACdC,GAAa,wBACbC,GAAa,wBACbC,GAAU,qBACVC,GAAW,sBACXC,GAAW,sBACXC,GAAW,sBACXC,GAAkB,6BAClBC,GAAY,uBACZC,GAAY,uBAchB,SAASkK,GAAe7H,EAAQuH,EAAKR,GACnC,IAAIsD,EAAOrK,EAAO+I,YAClB,OAAQxB,GACN,KAAKtK,GACH,OAAOgM,GAAiBjJ,GAE1B,KAAK7D,GACL,KAAKC,GACH,OAAO,IAAIiO,GAAMrK,GAEnB,KAAK9C,GACH,OAAOkM,GAAcpJ,EAAQ+G,GAE/B,KAAK5J,GAAY,KAAKC,GACtB,KAAKC,GAAS,KAAKC,GAAU,KAAKC,GAClC,KAAKC,GAAU,KAAKC,GAAiB,KAAKC,GAAW,KAAKC,GACxD,OAAOmM,GAAgB9J,EAAQ+G,GAEjC,KAAKvK,GACH,OAAO,IAAI6N,EAEb,KAAK5N,GACL,KAAKK,GACH,OAAO,IAAIuN,EAAKrK,GAElB,KAAKpD,GACH,OAAO6M,GAAYzJ,GAErB,KAAKnD,GACH,OAAO,IAAIwN,EAEb,KAAKtN,GACH,OAAO6M,GAAY5J,GAEzB,CAEA,YCxEA,IAAIxD,GAAS,eASb,SAAS4xB,GAAUlvB,GACjB,OAAO6L,GAAa7L,IAAUsI,GAAOtI,IAAU1C,EACjD,CAEA,YCZA,IAAI6xB,GAAY3iB,IAAYA,GAAS4iB,MAmBjCA,GAAQD,GAAYniB,GAAUmiB,IAAaD,GAE/C,YCtBA,IAAIvxB,GAAS,eASb,SAAS0xB,GAAUrvB,GACjB,OAAO6L,GAAa7L,IAAUsI,GAAOtI,IAAUrC,EACjD,CAEA,YCZA,IAAI2xB,GAAY9iB,IAAYA,GAAS+iB,MAmBjCA,GAAQD,GAAYtiB,GAAUsiB,IAAaD,GAE/C,YCFA,IAAIG,GAAkB,EAClBC,GAAkB,EAClBC,GAAqB,EAGrB3yB,GAAU,qBACVC,GAAW,iBACXC,GAAU,mBACVC,GAAU,gBACVC,GAAW,iBACXC,GAAU,oBACVC,GAAS,6BACTC,GAAS,eACTC,GAAY,kBACZC,GAAY,kBACZE,GAAY,kBACZC,GAAS,eACTC,GAAY,kBACZC,GAAY,kBACZC,GAAa,mBAEbC,GAAiB,uBACjBC,GAAc,oBACdC,GAAa,wBACbC,GAAa,wBACbC,GAAU,qBACVC,GAAW,sBACXC,GAAW,sBACXC,GAAW,sBACXC,GAAkB,6BAClBC,GAAY,uBACZC,GAAY,uBAGZK,GAAgB,CAAC,EA+BrB,SAAS8I,GAAU5H,EAAO8N,EAAS/F,EAAYhH,EAAKD,EAAQkH,GAC1D,IAAIpH,EACAiH,EAASiG,EAAU0hB,GACnBG,EAAS7hB,EAAU2hB,GACnB3nB,EAASgG,EAAU4hB,GAKvB,GAHI3nB,IACFnH,EAASE,EAASiH,EAAW/H,EAAOe,EAAKD,EAAQkH,GAASD,EAAW/H,SAExDgB,IAAXJ,EACF,OAAOA,EAET,IAAKqH,GAASjI,GACZ,OAAOA,EAET,IAAIkI,EAAQjB,GAAQjH,GACpB,GAAIkI,GAEF,GADAtH,EAASuH,GAAenI,IACnB6H,EACH,OAAOO,GAAUpI,EAAOY,OAErB,CACL,IAAIyH,EAAMC,GAAOtI,GACbuI,EAASF,GAAOjL,IAAWiL,GAAOhL,GAEtC,GAAImG,GAASxD,GACX,OAAOwI,GAAYxI,EAAO6H,GAE5B,GAAIQ,GAAO7K,IAAa6K,GAAOtL,IAAYwL,IAAWzH,GAEpD,GADAF,EAAU+uB,GAAUpnB,EAAU,CAAC,EAAIE,GAAgBzI,IAC9C6H,EACH,OAAO8nB,EACHX,GAAchvB,EAAO8uB,GAAaluB,EAAQZ,IAC1C0I,GAAY1I,EAAOyH,GAAW7G,EAAQZ,QAEvC,CACL,IAAKlB,GAAcuJ,GACjB,OAAOvH,EAASd,EAAQ,CAAC,EAE3BY,EAAS+H,GAAe3I,EAAOqI,EAAKR,EACtC,CACF,CAEAG,IAAUA,EAAQ,IAAIzB,IACtB,IAAIqC,EAAUZ,EAAM5B,IAAIpG,GACxB,GAAI4I,EACF,OAAOA,EAETZ,EAAMlI,IAAIE,EAAOY,GAEb2uB,GAAMvvB,GACRA,EAAMsB,SAAQ,SAASyH,GACrBnI,EAAOX,IAAI2H,GAAUmB,EAAU+E,EAAS/F,EAAYgB,EAAU/I,EAAOgI,GACvE,IACSonB,GAAMpvB,IACfA,EAAMsB,SAAQ,SAASyH,EAAUhI,GAC/BH,EAAOd,IAAIiB,EAAK6G,GAAUmB,EAAU+E,EAAS/F,EAAYhH,EAAKf,EAAOgI,GACvE,IAGF,IAAImB,EAAWrB,EACV6nB,EAASV,GAAenmB,GACxB6mB,EAAShV,GAASvY,GAEnByG,EAAQX,OAAQlH,EAAYmI,EAASnJ,GASzC,OARAE,GAAU2I,GAAS7I,GAAO,SAAS+I,EAAUhI,GACvC8H,IACF9H,EAAMgI,EACNA,EAAW/I,EAAMe,IAGnBuG,GAAY1G,EAAQG,EAAK6G,GAAUmB,EAAU+E,EAAS/F,EAAYhH,EAAKf,EAAOgI,GAChF,IACOpH,CACT,CAxGA9B,GAAc/B,IAAW+B,GAAc9B,IACvC8B,GAAcf,IAAkBe,GAAcd,IAC9Cc,GAAc7B,IAAW6B,GAAc5B,IACvC4B,GAAcb,IAAca,GAAcZ,IAC1CY,GAAcX,IAAWW,GAAcV,IACvCU,GAAcT,IAAYS,GAAcxB,IACxCwB,GAAcvB,IAAauB,GAActB,IACzCsB,GAAcpB,IAAaoB,GAAcnB,IACzCmB,GAAclB,IAAakB,GAAcjB,IACzCiB,GAAcR,IAAYQ,GAAcP,IACxCO,GAAcN,IAAaM,GAAcL,KAAa,EACtDK,GAAc3B,IAAY2B,GAAc1B,IACxC0B,GAAchB,KAAc,EA8F5B,YClKA,IAAI0xB,GAAkB,EAClBE,GAAqB,EAoBzB,SAASrkB,GAAUrL,GACjB,OAAO4H,GAAU5H,EAAOwvB,GAAkBE,GAC5C,CAEA,YC3BA,IAAI7yB,GAAiB,4BAYrB,SAASyQ,GAAYtN,GAEnB,OADA4E,KAAKI,SAASlF,IAAIE,EAAOnD,IAClB+H,IACT,CAEA,YCTA,SAAS2I,GAAYvN,GACnB,OAAO4E,KAAKI,SAASE,IAAIlF,EAC3B,CAEA,YCDA,SAASqN,GAAS/M,GAChB,IAAIhF,GAAS,EACT1J,EAAmB,MAAV0O,EAAiB,EAAIA,EAAO1O,OAEzCgT,KAAKI,SAAW,IAAIe,GACpB,QAASzK,EAAQ1J,EACfgT,KAAK3E,IAAIK,EAAOhF,GAEpB,CAGA+R,GAASxL,UAAU5B,IAAMoN,GAASxL,UAAU7P,KAAOsb,GACnDD,GAASxL,UAAUqD,IAAMqI,GAEzB,YChBA,SAASR,GAAU5M,EAAO0M,GACxB,IAAIvR,GAAS,EACT1J,EAAkB,MAATuO,EAAgB,EAAIA,EAAMvO,OAEvC,QAAS0J,EAAQ1J,EACf,GAAIib,EAAU1M,EAAM7E,GAAQA,EAAO6E,GACjC,OAAO,EAGX,OAAO,CACT,CAEA,YCdA,SAAS8M,GAASpG,EAAO9F,GACvB,OAAO8F,EAAM3B,IAAInE,EACnB,CAEA,YCPA,IAAIgL,GAAuB,EACvBC,GAAyB,EAe7B,SAASwC,GAAYrO,EAAOmL,EAAOwC,EAAS/F,EAAYiG,EAAWhG,GACjE,IAAIgH,EAAYlB,EAAU/B,GACtBkD,EAAY9O,EAAMvO,OAClBsd,EAAY5D,EAAM1Z,OAEtB,GAAIqd,GAAaC,KAAeF,GAAaE,EAAYD,GACvD,OAAO,EAGT,IAAI2gB,EAAa5nB,EAAM5B,IAAIjG,GACvB0vB,EAAa7nB,EAAM5B,IAAIkF,GAC3B,GAAIskB,GAAcC,EAChB,OAAOD,GAActkB,GAASukB,GAAc1vB,EAE9C,IAAI7E,GAAS,EACTsF,GAAS,EACTuO,EAAQrB,EAAU9B,GAA0B,IAAIqB,QAAWrM,EAE/DgH,EAAMlI,IAAIK,EAAOmL,GACjBtD,EAAMlI,IAAIwL,EAAOnL,GAGjB,QAAS7E,EAAQ2T,EAAW,CAC1B,IAAIG,EAAWjP,EAAM7E,GACjB+T,EAAW/D,EAAMhQ,GAErB,GAAIyM,EACF,IAAIuH,EAAWN,EACXjH,EAAWsH,EAAUD,EAAU9T,EAAOgQ,EAAOnL,EAAO6H,GACpDD,EAAWqH,EAAUC,EAAU/T,EAAO6E,EAAOmL,EAAOtD,GAE1D,QAAiBhH,IAAbsO,EAAwB,CAC1B,GAAIA,EACF,SAEF1O,GAAS,EACT,KACF,CAEA,GAAIuO,GACF,IAAKpC,GAAUzB,GAAO,SAAS+D,EAAUE,GACnC,IAAKtC,GAASkC,EAAMI,KACfH,IAAaC,GAAYrB,EAAUoB,EAAUC,EAAUvB,EAAS/F,EAAYC,IAC/E,OAAOmH,EAAKnd,KAAKud,EAErB,IAAI,CACN3O,GAAS,EACT,KACF,OACK,GACDwO,IAAaC,IACXrB,EAAUoB,EAAUC,EAAUvB,EAAS/F,EAAYC,GACpD,CACLpH,GAAS,EACT,KACF,CACF,CAGA,OAFAoH,EAAM,UAAU7H,GAChB6H,EAAM,UAAUsD,GACT1K,CACT,CAEA,YC5EA,SAASQ,GAAWxB,GAClB,IAAItE,GAAS,EACTsF,EAASlN,MAAMkM,EAAIyB,MAKvB,OAHAzB,EAAI0B,SAAQ,SAAStB,EAAOe,GAC1BH,IAAStF,GAAS,CAACyF,EAAKf,EAC1B,IACOY,CACT,CAEA,YCVA,SAASe,GAAW7B,GAClB,IAAIxE,GAAS,EACTsF,EAASlN,MAAMoM,EAAIuB,MAKvB,OAHAvB,EAAIwB,SAAQ,SAAStB,GACnBY,IAAStF,GAAS0E,CACpB,IACOY,CACT,CAEA,YCTA,IAAImL,GAAuB,EACvBC,GAAyB,EAGzB/O,GAAU,mBACVC,GAAU,gBACVC,GAAW,iBACXG,GAAS,eACTC,GAAY,kBACZG,GAAY,kBACZC,GAAS,eACTC,GAAY,kBACZC,GAAY,kBAEZE,GAAiB,uBACjBC,GAAc,oBAGduG,GAAczB,EAASA,EAAOjB,eAAYb,EAC1CwD,GAAgBD,GAAcA,GAAYE,aAAUzD,EAmBxD,SAASyN,GAAW3N,EAAQwK,EAAOjD,EAAKyF,EAAS/F,EAAYiG,EAAWhG,GACtE,OAAQK,GACN,KAAKrK,GACH,GAAK8C,EAAOmJ,YAAcqB,EAAMrB,YAC3BnJ,EAAOsJ,YAAckB,EAAMlB,WAC9B,OAAO,EAETtJ,EAASA,EAAO8I,OAChB0B,EAAQA,EAAM1B,OAEhB,KAAK7L,GACH,QAAK+C,EAAOmJ,YAAcqB,EAAMrB,aAC3B+D,EAAU,IAAIjL,GAAWjC,GAAS,IAAIiC,GAAWuI,KAKxD,KAAKrO,GACL,KAAKC,GACL,KAAKK,GAGH,OAAOiK,GAAI1G,GAASwK,GAEtB,KAAKnO,GACH,OAAO2D,EAAO0O,MAAQlE,EAAMkE,MAAQ1O,EAAO2O,SAAWnE,EAAMmE,QAE9D,KAAK/R,GACL,KAAKE,GAIH,OAAOkD,GAAWwK,EAAQ,GAE5B,KAAKhO,GACH,IAAIoS,EAAUtO,GAEhB,KAAKzD,GACH,IAAIqR,EAAYlB,EAAU/B,GAG1B,GAFA2D,IAAYA,EAAU/N,IAElBb,EAAOO,MAAQiK,EAAMjK,OAAS2N,EAChC,OAAO,EAGT,IAAIpG,EAAUZ,EAAM5B,IAAItF,GACxB,GAAI8H,EACF,OAAOA,GAAW0C,EAEpBwC,GAAW9B,GAGXhE,EAAMlI,IAAIgB,EAAQwK,GAClB,IAAI1K,EAAS4N,GAAYkB,EAAQ5O,GAAS4O,EAAQpE,GAAQwC,EAAS/F,EAAYiG,EAAWhG,GAE1F,OADAA,EAAM,UAAUlH,GACTF,EAET,KAAK/C,GACH,GAAI2G,GACF,OAAOA,GAAc7B,KAAK7B,IAAW0D,GAAc7B,KAAK2I,GAG9D,OAAO,CACT,CAEA,YC5GA,IAAIS,GAAuB,EAGvBhK,GAAc7C,OAAO2C,UAGrBU,GAAiBR,GAAYQ,eAejC,SAASuM,GAAahO,EAAQwK,EAAOwC,EAAS/F,EAAYiG,EAAWhG,GACnE,IAAIgH,EAAYlB,EAAU/B,GACtB4D,EAAW7G,GAAWhI,GACtB8O,EAAYD,EAAS/d,OACrBie,EAAW/G,GAAWwC,GACtB4D,EAAYW,EAASje,OAEzB,GAAIge,GAAaV,IAAcF,EAC7B,OAAO,EAET,IAAI1T,EAAQsU,EACZ,MAAOtU,IAAS,CACd,IAAIyF,EAAM4O,EAASrU,GACnB,KAAM0T,EAAYjO,KAAOuK,EAAQ/I,GAAeI,KAAK2I,EAAOvK,IAC1D,OAAO,CAEX,CAEA,IAAI+uB,EAAa9nB,EAAM5B,IAAItF,GACvB+uB,EAAa7nB,EAAM5B,IAAIkF,GAC3B,GAAIwkB,GAAcD,EAChB,OAAOC,GAAcxkB,GAASukB,GAAc/uB,EAE9C,IAAIF,GAAS,EACboH,EAAMlI,IAAIgB,EAAQwK,GAClBtD,EAAMlI,IAAIwL,EAAOxK,GAEjB,IAAIgP,EAAWd,EACf,QAAS1T,EAAQsU,EAAW,CAC1B7O,EAAM4O,EAASrU,GACf,IAAIiM,EAAWzG,EAAOC,GAClBsO,EAAW/D,EAAMvK,GAErB,GAAIgH,EACF,IAAIuH,EAAWN,EACXjH,EAAWsH,EAAU9H,EAAUxG,EAAKuK,EAAOxK,EAAQkH,GACnDD,EAAWR,EAAU8H,EAAUtO,EAAKD,EAAQwK,EAAOtD,GAGzD,UAAmBhH,IAAbsO,EACG/H,IAAa8H,GAAYrB,EAAUzG,EAAU8H,EAAUvB,EAAS/F,EAAYC,GAC7EsH,GACD,CACL1O,GAAS,EACT,KACF,CACAkP,IAAaA,EAAkB,eAAP/O,EAC1B,CACA,GAAIH,IAAWkP,EAAU,CACvB,IAAIC,EAAUjP,EAAO+I,YACjBmG,EAAU1E,EAAMzB,YAGhBkG,GAAWC,KACV,gBAAiBlP,MAAU,gBAAiBwK,IACzB,mBAAXyE,GAAyBA,aAAmBA,GACjC,mBAAXC,GAAyBA,aAAmBA,IACvDpP,GAAS,EAEb,CAGA,OAFAoH,EAAM,UAAUlH,GAChBkH,EAAM,UAAUsD,GACT1K,CACT,CAEA,YC/EA,IAAImL,GAAuB,EAGvBhP,GAAU,qBACVC,GAAW,iBACXQ,GAAY,kBAGZuE,GAAc7C,OAAO2C,UAGrBU,GAAiBR,GAAYQ,eAgBjC,SAASwL,GAAgBjN,EAAQwK,EAAOwC,EAAS/F,EAAYiG,EAAWhG,GACtE,IAAIiG,EAAWhH,GAAQnG,GACnBoN,EAAWjH,GAAQqE,GACnB6C,EAASF,EAAWjR,GAAWsL,GAAOxH,GACtCsN,EAASF,EAAWlR,GAAWsL,GAAOgD,GAE1C6C,EAASA,GAAUpR,GAAUS,GAAY2Q,EACzCC,EAASA,GAAUrR,GAAUS,GAAY4Q,EAEzC,IAAIC,EAAWF,GAAU3Q,GACrB8Q,EAAWF,GAAU5Q,GACrB+Q,EAAYJ,GAAUC,EAE1B,GAAIG,GAAa/K,GAAS1C,GAAS,CACjC,IAAK0C,GAAS8H,GACZ,OAAO,EAET2C,GAAW,EACXI,GAAW,CACb,CACA,GAAIE,IAAcF,EAEhB,OADArG,IAAUA,EAAQ,IAAIzB,IACd0H,GAAYtB,GAAa7L,GAC7B0N,GAAY1N,EAAQwK,EAAOwC,EAAS/F,EAAYiG,EAAWhG,GAC3DyG,GAAW3N,EAAQwK,EAAO6C,EAAQL,EAAS/F,EAAYiG,EAAWhG,GAExE,KAAM8F,EAAU/B,IAAuB,CACrC,IAAI2C,EAAeL,GAAY9L,GAAeI,KAAK7B,EAAQ,eACvD6N,EAAeL,GAAY/L,GAAeI,KAAK2I,EAAO,eAE1D,GAAIoD,GAAgBC,EAAc,CAChC,IAAIC,EAAeF,EAAe5N,EAAOd,QAAUc,EAC/C+N,EAAeF,EAAerD,EAAMtL,QAAUsL,EAGlD,OADAtD,IAAUA,EAAQ,IAAIzB,IACfyH,EAAUY,EAAcC,EAAcf,EAAS/F,EAAYC,EACpE,CACF,CACA,QAAKuG,IAGLvG,IAAUA,EAAQ,IAAIzB,IACfuI,GAAahO,EAAQwK,EAAOwC,EAAS/F,EAAYiG,EAAWhG,GACrE,CAEA,YCjEA,SAAS6F,GAAY7N,EAAOsL,EAAOwC,EAAS/F,EAAYC,GACtD,OAAIhI,IAAUsL,IAGD,MAATtL,GAA0B,MAATsL,IAAmBO,GAAa7L,KAAW6L,GAAaP,GACpEtL,IAAUA,GAASsL,IAAUA,EAE/ByC,GAAgB/N,EAAOsL,EAAOwC,EAAS/F,EAAY8F,GAAa7F,GACzE,CAEA,YCGA,SAASoI,GAAQpQ,EAAOsL,GACtB,OAAOuC,GAAY7N,EAAOsL,EAC5B,CAEA,YClCqC,IAE/BykB,GAAK,SAAAC,GAAA,SAAAD,IAAA,OAAAje,EAAAA,EAAAA,GAAA,KAAAie,IAAArQ,EAAAA,GAAAA,GAAA,KAAAqQ,EAAA5f,UAAA,QAAAwP,EAAAA,GAAAA,GAAAoQ,EAAAC,IAAAje,EAAAA,EAAAA,GAAAge,EAAA,EAAAhvB,IAAA,WAAAf,MAKT,YACM4E,KAAK4e,MAAQ5e,KAAKqO,OACpBrO,KAAKsd,QAET,IAAAnhB,IAAA,SAAAf,MAEA,WACE,OAAO,CACT,IAAAe,IAAA,QAAAf,MAEA,WACE,MAAO,EACT,MAAAe,IAAA,QAAAf,MAhBA,WAEA,KAHS,CAASosB,IAmBpB2D,GAAMrO,SAAW,QACjBqO,GAAM7O,QAAU,KAEhB,YCxBoC,I,GAE9BP,GAAI,SAAA2N,GAAA,SAAA3N,IAAA,OAAA7O,EAAAA,EAAAA,GAAA,KAAA6O,IAAAjB,EAAAA,GAAAA,GAAA,KAAAiB,EAAAxQ,UAAA,QAAAwP,EAAAA,GAAAA,GAAAgB,EAAA2N,IAAAvc,EAAAA,EAAAA,GAAA4O,EAAA,EAASiO,IAEnB,SAASqB,GAAWrP,GAClB,OAAOA,EAAKhe,QAAQ,YAAa,SAAAstB,GAE/B,IAAMC,EAAoC,CACxC,IAAK,QACL,IAAK,OACL,IAAK,OACL,IAAK,SACL,IAAK,SAEP,OAAOA,EAAUD,EACnB,GACF,CCb4B,IAEtBE,GAAM,SAAAtF,GAAA,SAAAsF,IAAA,OAAAte,EAAAA,EAAAA,GAAA,KAAAse,IAAA1Q,EAAAA,GAAAA,GAAA,KAAA0Q,EAAAjgB,UAAA,QAAAwP,EAAAA,GAAAA,GAAAyQ,EAAAtF,IAAA/Y,EAAAA,EAAAA,GAAAqe,EAAA,EAAArvB,IAAA,WAAAf,MA8BV,SAAS1E,EAAe1J,EAAgB4d,EAAcxP,GACpD,GACEowB,EAAOC,QAAQzrB,KAAKkf,QAAQpC,SAAUlS,GAAQ,GAC9C5K,KAAKmb,OAAOE,MAAMzQ,EAAMmO,GAAMK,MAC9B,CACA,IAAMqC,EAAOzb,KAAKgf,QAAQtoB,EAAO1J,GAC7BoO,GACFqgB,EAAKwD,KAAKrU,EAAMxP,EAEpB,MACEsnB,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAA6I,EAAAvuB,WAAA,iBAAAc,KAAA,KAAerH,EAAO1J,EAAQ4d,EAAMxP,EAExC,IAAAe,IAAA,WAAAf,MAEA,SAASmW,GAEP,IADAmR,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAA6I,EAAAvuB,WAAA,iBAAAc,KAAA,KAAewT,GAEbvR,KAAK8e,kBAAkB0M,GACvBA,EAAOC,QAAQzrB,KAAKkf,QAAQpC,SAAU9c,KAAK8e,OAAOI,QAAQpC,UAAY,EACtE,CACA,IAAMgC,EAAS9e,KAAK8e,OAAOE,QAAQhf,KAAKrE,SAAUqE,KAAKhT,UAEvDgT,KAAKilB,aAAanG,GAClBA,EAAOG,KAAKjf,KACd,CACF,MAAA7D,IAAA,UAAAf,MAxCA,SAAeZ,EAAckM,GAC3B,IAAMglB,EAAYF,EAAOG,MAAMj+B,QAAQ8M,GACjCoxB,EAAaJ,EAAOG,MAAMj+B,QAAQgZ,GACxC,OAAIglB,GAAa,GAAKE,GAAc,EAC3BF,EAAYE,EAEjBpxB,IAASkM,EACJ,EAELlM,EAAOkM,GACD,EAEH,CACT,KA5BU,CAASigB,IAAUkF,GAAzBL,IAAMjc,EAAAA,EAAAA,GAANic,GAAM,kBACkC,CAACA,GAAQL,GAAO3D,GAAWzL,MACvExM,EAAAA,EAAAA,GAFIic,GAAM,QAGK,CACb,SACA,SACA,OACA,YACA,SACA,SACA,OACA,SACA,SA8CJ,YClDA,IAAMM,GAAiB,EAEjBC,GAAK,SAAAlF,GAAA,SAAAkF,IAAA,IAAAlR,GAAA3N,EAAAA,EAAAA,GAAA,KAAA6e,GAAA,QAAAvP,EAAAjR,UAAAve,OAAAimB,EAAA,IAAAnkB,MAAA0tB,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAAzJ,EAAAyJ,GAAAnR,UAAAmR,GAC4C,OAD5C7B,GAAAC,EAAAA,GAAAA,GAAA,KAAAiR,EAAA,GAAA39B,OAAA6kB,KAAA1D,EAAAA,EAAAA,GAAAsL,EAAA,QAC0C,CAAC,GAACA,CAAA,QAAAE,EAAAA,GAAAA,GAAAgR,EAAAlF,IAAA1Z,EAAAA,EAAAA,GAAA4e,EAAA,EAAA5vB,IAAA,QAAAf,MAErD,WAIE,OAHwB,MAApB4E,KAAKiC,MAAMhT,QACb+Q,KAAKiC,MAAMhT,MAAQ+8B,GAAWhsB,OAEzBA,KAAKiC,MAAMhT,KACpB,IAAAkN,IAAA,WAAAf,MAEA,SAAS1E,EAAe1J,IACtB01B,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAoJ,EAAA9uB,WAAA,iBAAAc,KAAA,KAAerH,EAAO1J,GACtBgT,KAAKiC,MAAQ,CAAC,CAChB,IAAA9F,IAAA,WAAAf,MAEA,SAAS1E,EAAe1J,EAAgB4d,EAAcxP,GAChDpO,GAAU,IACVgT,KAAKmb,OAAOE,MAAMzQ,EAAMmO,GAAMO,OAC5B5iB,EAAQ1J,IAAWgT,KAAKhT,UAC1BgT,KAAKue,OAAO3T,EAAMxP,IAGpBsnB,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAoJ,EAAA9uB,WAAA,iBAAAc,KAAA,KACErH,EACAjI,KAAKiC,IAAI1D,EAAQgT,KAAKhT,SAAW0J,EAAQ,GACzCkU,EACAxP,GAGJ4E,KAAKiC,MAAQ,CAAC,EAChB,IAAA9F,IAAA,WAAAf,MAEA,SAAS1E,EAAe0E,EAAe+jB,GACrC,GAAW,MAAPA,EAGF,OAFAuD,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAoJ,EAAA9uB,WAAA,iBAAAc,KAAA,KAAerH,EAAO0E,EAAO+jB,QAC7Bnf,KAAKiC,MAAQ,CAAC,GAGhB,GAAqB,IAAjB7G,EAAMpO,OAAV,CACA,IAAMi/B,EAAQ7wB,EAAMghB,MAAM,MACpBJ,EAAOiQ,EAAMC,QACflQ,EAAKhvB,OAAS,IACZ0J,EAAQsJ,KAAKhT,SAAW,GAA2B,MAAtBgT,KAAKsf,SAASyB,MAC7C2B,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAoJ,EAAA9uB,WAAA,iBAAAc,KAAA,KAAetP,KAAKiC,IAAIgG,EAAOsJ,KAAKhT,SAAW,GAAIgvB,GAEnDhc,KAAKsf,SAASyB,KAAKsD,SAASrkB,KAAKsf,SAASyB,KAAK/zB,SAAUgvB,GAE3Dhc,KAAKiC,MAAQ,CAAC,GAIhB,IAAIga,EAAqBjc,KACzBisB,EAAMjgB,QAAO,SAACmgB,EAAWjc,GAIvB,OAFA+L,EAAQA,EAAMG,MAAM+P,GAAW,GAC/BlQ,EAAMoI,SAAS,EAAGnU,GACXA,EAAKljB,MACd,GAAG0J,EAAQslB,EAAKhvB,OAnBc,CAoBhC,IAAAmP,IAAA,eAAAf,MAEA,SAAaqgB,EAAY2D,GACvB,IAAQ0B,EAAS9gB,KAAKsf,SAAdwB,MACR4B,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAoJ,EAAA9uB,WAAA,qBAAAc,KAAA,KAAmB0d,EAAM2D,GACrB0B,aAAgBqK,IAClBrK,EAAKxD,SAEPtd,KAAKiC,MAAQ,CAAC,CAChB,IAAA9F,IAAA,SAAAf,MAEA,WAIE,OAHyB,MAArB4E,KAAKiC,MAAMjV,SACbgT,KAAKiC,MAAMjV,QAAS01B,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAoJ,EAAA9uB,WAAA,eAAAc,KAAA,MAAiB+tB,IAEhC9rB,KAAKiC,MAAMjV,MACpB,IAAAmP,IAAA,eAAAf,MAEA,SAAawS,EAAgBwR,IAC3BsD,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAoJ,EAAA9uB,WAAA,qBAAAc,KAAA,KAAmB6P,EAAQwR,GAC3Bpf,KAAKiC,MAAQ,CAAC,CAChB,IAAA9F,IAAA,WAAAf,MAEA,SAASmW,IACPmR,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAoJ,EAAA9uB,WAAA,iBAAAc,KAAA,KAAewT,GACfvR,KAAKiC,MAAQ,CAAC,CAChB,IAAA9F,IAAA,OAAAf,MAEA,SAAK1E,GACH,OAAAgsB,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAoJ,EAAA9uB,WAAA,aAAAc,KAAA,KAAkBrH,GAAO,EAC3B,IAAAyF,IAAA,cAAAf,MAEA,SAAY+mB,IACVO,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAoJ,EAAA9uB,WAAA,oBAAAc,KAAA,KAAkBokB,GAClBniB,KAAKiC,MAAQ,CAAC,CAChB,IAAA9F,IAAA,QAAAf,MAEA,SAAM1E,GAAgE,IAAjDwuB,EAA0B3Z,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,IAAAA,UAAA,GAC7C,GAAI2Z,IAAoB,IAAVxuB,GAAeA,GAASsJ,KAAKhT,SAAW8+B,IAAiB,CACrE,IAAM3G,EAAQnlB,KAAKmlB,QACnB,OAAc,IAAVzuB,GACFsJ,KAAK8e,OAAOO,aAAa8F,EAAOnlB,MACzBA,OAETA,KAAK8e,OAAOO,aAAa8F,EAAOnlB,KAAKqO,MAC9B8W,EACT,CACA,IAAM9W,GAAIqU,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAoJ,EAAA9uB,WAAA,cAAAc,KAAA,KAAerH,EAAOwuB,GAEhC,OADAllB,KAAKiC,MAAQ,CAAC,EACPoM,CACT,KA5GS,CAAS4Y,IA8GpB8E,GAAMjP,SAAW,QACjBiP,GAAMzP,QAAU,IAChByP,GAAMnH,aAAeuG,GACrBY,GAAMhI,gBAAkB,CAACoH,GAAOK,GAAQhE,GAAWwC,IAAS,IAEtDoC,GAAU,SAAAhB,GAAA,SAAAgB,IAAA,OAAAlf,EAAAA,EAAAA,GAAA,KAAAkf,IAAAtR,EAAAA,GAAAA,GAAA,KAAAsR,EAAA7gB,UAAA,QAAAwP,EAAAA,GAAAA,GAAAqR,EAAAhB,IAAAje,EAAAA,EAAAA,GAAAif,EAAA,EAAAjwB,IAAA,SAAAf,MAId,YACEsnB,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAyJ,EAAAnvB,WAAA,eAAAc,KAAA,MACAiC,KAAK+L,WAAa,IAAIkS,GAAgBje,KAAK2b,QAC7C,IAAAxf,IAAA,QAAAf,MAEA,WACE,OAAO,IAAI4R,IAAQK,OAAOrN,KAAK5E,SAAOixB,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACjCrsB,KAAKsmB,WACLtmB,KAAK+L,WAAWrQ,UAEvB,IAAAS,IAAA,SAAAf,MAEA,SAAOwP,EAAcxP,GACnB,IAAM+iB,EAAYne,KAAKmb,OAAOE,MAAMzQ,EAAMmO,GAAMU,iBAC/B,MAAb0E,GAEFne,KAAK+L,WAAWoS,UAAUA,EAAW/iB,EAEzC,IAAAe,IAAA,WAAAf,MAEA,SAAS1E,EAAe1J,EAAgB4d,EAAcxP,GACpD4E,KAAKue,OAAO3T,EAAMxP,EACpB,IAAAe,IAAA,WAAAf,MAEA,SAAS1E,EAAe0E,EAAe+jB,GAAe,IAAArD,EAAA,KACpD,GAAW,MAAPqD,EAAJ,CAIA,IAAM8M,EAAQ7wB,EAAMghB,MAAM,MACpBJ,EAAOiQ,EAAMr2B,MACb02B,EAASL,EAAMjxB,KAAK,SAAAkV,GACxB,IAAM+L,EAAQH,EAAKX,OAAO5c,OAAOwtB,GAAMjP,UAEvC,OADAb,EAAMoI,SAAS,EAAGnU,GACX+L,CACT,IACMmD,EAAMpf,KAAKoc,MAAM1lB,GACvB41B,EAAO5vB,SAAS,SAAAuf,GACdH,EAAKgD,OAAOO,aAAapD,EAAOmD,EAClC,IACIpD,GACFhc,KAAK8e,OAAOO,aAAarf,KAAKmb,OAAO5c,OAAO,OAAQyd,GAAOoD,EAb7D,MAFEsD,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAyJ,EAAAnvB,WAAA,iBAAAc,KAAA,KAAerH,EAAO0E,EAAO+jB,EAiBjC,KA/Cc,CAASqI,IAoDzB,SAASwE,GAAWvQ,GAAgC,IAAfjO,IAAMjC,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,KAAAA,UAAA,GACzC,OAAOkQ,EACJiI,YAAY/C,IACZ3U,QAAO,SAAC/c,EAAOs9B,GACd,OAAsB,IAAlBA,EAAKv/B,SACAiC,EAEFA,EAAMoe,OAAOkf,EAAKnxB,QAASoxB,GAAcD,EAAM,CAAC,EAAG/e,GAC5D,GAAG,IAAIR,IACNK,OAAO,KAAMmf,GAAc/Q,GAChC,CAEA,SAAS+Q,GACP/Q,GAGyB,IAFzB6K,EAAgC/a,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAG,CAAC,EACpCiC,IAAMjC,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,KAAAA,UAAA,GAEN,OAAY,MAARkQ,EAAqB6K,GACrB,YAAa7K,GAAgC,oBAAjBA,EAAK6K,UACnCA,GAAO+F,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACF/F,GACA7K,EAAK6K,WAEN9Y,UAEK8Y,EAAQ,eAIF,MAAf7K,EAAKqD,QAC4B,WAAjCrD,EAAKqD,OAAOI,QAAQpC,UACpBrB,EAAKqD,OAAOI,QAAQjF,QAAUwB,EAAKyD,QAAQjF,MAEpCqM,EAEFkG,GAAc/Q,EAAKqD,OAAQwH,EAAS9Y,GAC7C,CAvCA4e,GAAWnS,MAAQlB,GAAMQ,WChLO,IAG1BkT,GAAM,SAAArB,GAcV,SAAAqB,EAAYtR,EAAoBQ,EAAsB+Q,GAAsB,IAAA7R,EAKtD,OALsD3N,EAAAA,EAAAA,GAAA,KAAAuf,GAC1E5R,GAAAC,EAAAA,GAAAA,GAAA,KAAA2R,EAAA,CAAMtR,EAAQQ,IACdd,EAAK6R,UAAYA,EACjB7R,EAAK8R,SAAW1M,SAAS8J,eAAe0C,EAAOG,UAC/C/R,EAAKc,QAAQmE,YAAYjF,EAAK8R,UAC9B9R,EAAKgS,YAAc,EAAChS,CACtB,QAAAE,EAAAA,GAAAA,GAAA0R,EAAArB,IAAAje,EAAAA,EAAAA,GAAAsf,EAAA,EAAAtwB,IAAA,SAAAf,MAEA,WAEqB,MAAf4E,KAAK8e,QAAgB9e,KAAK8e,OAAOC,YAAY/e,KACnD,IAAA7D,IAAA,SAAAf,MAEA,SAAOwP,EAAcxP,GACnB,GAAyB,IAArB4E,KAAK6sB,YAAT,CAMA,IAAIjf,EAAwB5N,KACxBtJ,EAAQ,EACZ,MAAiB,MAAVkX,GAAkBA,EAAOsR,QAAQjF,QAAUlB,GAAMQ,WACtD7iB,GAASkX,EAAOjS,OAAOiS,EAAOkR,QAC9BlR,EAASA,EAAOkR,OAEJ,MAAVlR,IACF5N,KAAK6sB,YAAcJ,EAAOG,SAAS5/B,OAEnC4gB,EAAOwb,WACPxb,EAAOsW,SAASxtB,EAAO+1B,EAAOG,SAAS5/B,OAAQ4d,EAAMxP,GACrD4E,KAAK6sB,YAAc,EAdrB,MAFEnK,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAA8J,EAAAxvB,WAAA,eAAAc,KAAA,KAAa6M,EAAMxP,EAkBvB,IAAAe,IAAA,QAAAf,MAEA,SAAM+e,EAAYxe,GAChB,OAAIwe,IAASna,KAAK2sB,SAAiB,GACnCjK,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAA8J,EAAAxvB,WAAA,cAAAc,KAAA,KAAmBoc,EAAMxe,EAC3B,IAAAQ,IAAA,SAAAf,MAEA,WACE,OAAO4E,KAAK6sB,WACd,IAAA1wB,IAAA,WAAAf,MAEA,WACE,MAAO,CAAC4E,KAAK2sB,SAAU3sB,KAAK2sB,SAASnsB,KAAKxT,OAC5C,IAAAmP,IAAA,SAAAf,MAEA,YACEsnB,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAA8J,EAAAxvB,WAAA,eAAAc,KAAA,MAEAiC,KAAK8e,OAAS,IAChB,IAAA3iB,IAAA,UAAAf,MAEA,WACE,GAAI4E,KAAK0sB,UAAUI,WAA4B,MAAf9sB,KAAK8e,OAAgB,OAAO,KAC5D,IAAMiO,EAAQ/sB,KAAK0sB,UAAUM,iBAG7B,MAC4B,MAA1BhtB,KAAK2b,QAAQsR,WACbjtB,KAAK2b,QAAQsR,YAAcjtB,KAAK2sB,SAGhC3sB,KAAK2b,QAAQsB,WAAWoC,aACtBrf,KAAK2b,QAAQsR,UACbjtB,KAAK2b,SAIT,IAcIuR,EAdEC,EAAentB,KAAK4e,gBAAgBoL,GAAWhqB,KAAK4e,KAAO,KAC3DwO,EAAiBD,EAAeA,EAAangC,SAAW,EACxDqgC,EAAertB,KAAKqO,gBAAgB2b,GAAWhqB,KAAKqO,KAAO,KAE3Dif,EAAWD,EAAeA,EAAarR,KAAO,GAC5C2Q,EAAa3sB,KAAb2sB,SAEFn2B,EAAUm2B,EAASnsB,KAAK4b,MAAMqQ,EAAOG,UAAUhd,KAAK,IAQ1D,GAPA+c,EAASnsB,KAAOisB,EAAOG,SAOnBO,EACFD,EAAiBC,GACb32B,GAAW62B,KACbF,EAAa9I,SAAS8I,EAAangC,SAAUwJ,EAAU82B,GACnDD,GACFA,EAAa/P,eAGZ,GAAI+P,EACTH,EAAiBG,EACjBA,EAAahJ,SAAS,EAAG7tB,OACpB,CACL,IAAM+2B,EAActN,SAAS8J,eAAevzB,GAC5C02B,EAAiBltB,KAAKmb,OAAO5c,OAAOgvB,GACpCvtB,KAAK8e,OAAOO,aAAa6N,EAAgBltB,KAC3C,CAGA,GADAA,KAAKsd,SACDyP,EAAO,CAET,IAAMS,EAAc,SAACrT,EAAYxe,GAC/B,OAAIwxB,GAAgBhT,IAASgT,EAAaxR,QACjChgB,EAELwe,IAASwS,EACJS,EAAiBzxB,EAAS,EAE/B0xB,GAAgBlT,IAASkT,EAAa1R,QACjCyR,EAAiB52B,EAAQxJ,OAAS2O,EAEpC,IACT,EAEMoS,EAAQyf,EAAYT,EAAMhf,MAAMoM,KAAM4S,EAAMhf,MAAMpS,QAClDqS,EAAMwf,EAAYT,EAAM/e,IAAImM,KAAM4S,EAAM/e,IAAIrS,QAClD,GAAc,OAAVoS,GAA0B,OAARC,EACpB,MAAO,CACL8T,UAAWoL,EAAevR,QAC1B8R,YAAa1f,EACb2f,QAASR,EAAevR,QACxBgS,UAAW3f,EAGjB,CACA,OAAO,IACT,IAAA7R,IAAA,SAAAf,MAEA,SAAOiqB,EAA6B9T,GAAkC,IAAAuK,EAAA,KACpE,GACEuJ,EAAUhJ,MAAM,SAAAoJ,GACd,MACoB,kBAAlBA,EAASjf,MAA4Bif,EAAS7X,SAAWkO,EAAK6Q,QAElE,IACA,CACA,IAAMI,EAAQ/sB,KAAK4tB,UACfb,IAAOxb,EAAQwb,MAAQA,EAC7B,CACF,GAWA,CAAA5wB,IAAA,WAAAf,MACA,SAASmW,IAEPmR,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAA8J,EAAAxvB,WAAA,iBAAAc,KAAA,KAAewT,GAEf,IAAMuN,EAAW9e,KAAX8e,OACN,MAAOA,EAAQ,CACb,GAA+B,MAA3BA,EAAOnD,QAAQW,QAAiB,CAClCtc,KAAK6sB,YAAcJ,EAAOG,SAAS5/B,OAEnC8xB,EAAOE,QAAQhf,KAAKrE,OAAOmjB,GAAS9e,KAAKhT,UAAUi3B,SACnDjkB,KAAK6sB,YAAc,EACnB,KACF,CACA/N,EAASA,EAAOA,MAClB,CACF,IAAA3iB,IAAA,QAAAf,MAEA,WACE,MAAO,EACT,MAAAe,IAAA,QAAAf,MAtLA,WAEA,KARU,CAASosB,KAASjY,EAAAA,EAAAA,GAAxBkd,GAAM,WACQ,WAAQld,EAAAA,EAAAA,GADtBkd,GAAM,YAES,cAAWld,EAAAA,EAAAA,GAF1Bkd,GAAM,UAGO,SAAMld,EAAAA,EAAAA,GAHnBkd,GAAM,WAIQ,UA2LpB,Y,yBClMA,MCDA,OAAmBttB,QCFnB,IAAM0uB,GAAS,CAAC,QAAS,OAAQ,MAAO,QAEpCC,GAA4B,OAEhC,SAASC,GAAMC,GACb,GAAIF,IACED,GAAOngC,QAAQsgC,IAAWH,GAAOngC,QAAQogC,IAAQ,SAAAG,EAAAzR,EAAAjR,UAAAve,OAFnBimB,EAAI,IAAAnkB,MAAA0tB,EAAA,EAAAA,EAAA,KAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAJzJ,EAAIyJ,EAAA,GAAAnR,UAAAmR,IAGpCuR,EAAAC,SAAQF,GAAO5a,MAAA6a,EAAIhb,EACrB,CAEJ,CAEA,SAASkb,GACPC,GAEA,OAAOP,GAAO7hB,QACZ,SAACqiB,EAAQL,GAEP,OADAK,EAAOL,GAAUD,GAAMvV,KAAK0V,QAASF,EAAQI,GACtCC,CACT,GACA,CAAC,EAEL,CAEAF,GAAUL,MAAS,SAAAQ,GACjBR,GAAQQ,CACV,EACAP,GAAMD,MAAQK,GAAUL,MAExB,YCzBA,IAAMC,GAAQM,GAAO,gBACfE,GAAS,CAAC,kBAAmB,YAAa,UAAW,SAE3DA,GAAO7xB,SAAS,SAAA8xB,GACdvO,SAASwO,iBAAiBD,GAAW,WAAa,QAAAhS,EAAAjR,UAAAve,OAATimB,EAAI,IAAAnkB,MAAA0tB,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAJzJ,EAAIyJ,GAAAnR,UAAAmR,GAC3C5tB,MAAM2rB,KAAKwF,SAASyO,iBAAiB,kBAAkBhyB,SAAS,SAAAyd,GAC9D,IAC4BwU,EADtBC,EAAQC,GAAUrtB,IAAI2Y,GACxByU,GAASA,EAAMld,UACjBid,EAAAC,EAAMld,SAAQod,UAAS1b,MAAAub,EAAI1b,EAE/B,GACF,GACF,IAAE,IAEI8b,GAAO,SAAAC,GAyBX,SAAAD,IAAc,IAAAlU,EAGiB,OAHjB3N,EAAAA,EAAAA,GAAA,KAAA6hB,GACZlU,GAAAC,EAAAA,GAAAA,GAAA,KAAAiU,GACAlU,EAAKoU,aAAe,CAAC,EACrBpU,EAAKxH,GAAG,QAAS0a,GAAMmB,OAAMrU,CAC/B,QAAAE,EAAAA,GAAAA,GAAAgU,EAAAC,IAAA7hB,EAAAA,EAAAA,GAAA4hB,EAAA,EAAA5yB,IAAA,OAAAf,MAEA,WAAkC,QAAA+zB,EAAAC,EAAApO,EAAAzV,UAAAve,OAA1BimB,EAAI,IAAAnkB,MAAAkyB,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAJjO,EAAIiO,GAAA3V,UAAA2V,GAGV,OAFAiO,EAAApB,GAAMsB,KAAItxB,KAAIqV,MAAA+b,EAAA,CAACpB,IAAK3/B,OAAK6kB,KAEzBmc,GAAA1M,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAoM,EAAA9xB,WAAA,cAAAc,KAAAqV,MAAAgc,EAAA,OAAAhhC,OAAqB6kB,GACvB,IAAA9W,IAAA,YAAAf,MAEA,SAAUuW,GAAkC,QAAA2d,EAAA/jB,UAAAve,OAAjBimB,EAAI,IAAAnkB,MAAAwgC,EAAA,EAAAA,EAAA,KAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAJtc,EAAIsc,EAAA,GAAAhkB,UAAAgkB,IAC5BvvB,KAAKivB,aAAatd,EAAMnL,OAAS,IAAI9J,SAAQ,SAAA8yB,GAAuB,IAApBrV,EAAeqV,EAAfrV,KAAM9K,EAASmgB,EAATngB,SACjDsC,EAAM/D,SAAWuM,GAAQA,EAAKqH,SAAS7P,EAAM/D,UAC/CyB,EAAO+D,WAAC,EAAD,CAACzB,GAAKvjB,OAAK6kB,GAEtB,GACF,IAAA9W,IAAA,YAAAf,MAEA,SAAUozB,EAAmBrU,EAAY9K,GAClCrP,KAAKivB,aAAaT,KACrBxuB,KAAKivB,aAAaT,GAAa,IAEjCxuB,KAAKivB,aAAaT,GAAWphC,KAAK,CAAE+sB,KAAAA,EAAM9K,QAAAA,GAC5C,KAlDW,CAAS6C,KAAY3C,EAAAA,EAAAA,GAA5Bwf,GAAO,SACK,CACdU,cAAe,gBACfC,qBAAsB,uBACtBC,kBAAmB,oBACnBC,oBAAqB,sBACrBC,gBAAiB,kBACjBC,cAAe,gBACfC,oBAAqB,sBACrBC,iBAAkB,mBAClBC,YAAa,cACbC,yBAA0B,2BAC1BC,kBAAmB,oBACnBC,uBAAwB,yBACxBC,gBAAiB,qBAClB9gB,EAAAA,EAAAA,GAfGwf,GAAO,UAiBM,CACfuB,IAAK,MACLC,OAAQ,SACRC,KAAM,SAoCV,YClEA,IAAMzC,GAAQM,GAAO,mBAsBRoC,IAAKtjB,EAAAA,EAAAA,IAChB,SAAAsjB,EACS/5B,IAEPwW,EAAAA,EAAAA,GAAA,KAAAujB,GAAA,IADOzjC,EAAMue,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAG,EAAC,KADV7U,MAAAA,EAAa,KACb1J,OAAAA,CACN,IAGC0jC,GAAS,WAYb,SAAAA,EAAYvV,EAAgBzJ,GAAkB,IAAAmJ,EAAA,MAAA3N,EAAAA,EAAAA,GAAA,KAAAwjB,GAC5C1wB,KAAK0R,QAAUA,EACf1R,KAAKmb,OAASA,EACdnb,KAAK8sB,WAAY,EACjB9sB,KAAK2wB,WAAY,EACjB3wB,KAAKvF,KAAOuF,KAAKmb,OAAOQ,QAExB3b,KAAKzI,OAASyI,KAAKmb,OAAO5c,OAAO,SAAUyB,MAE3CA,KAAK4wB,WAAa,IAAIH,GAAM,EAAG,GAC/BzwB,KAAK6wB,UAAY7wB,KAAK4wB,WACtB5wB,KAAK8wB,WAAa,KAClB9wB,KAAK+wB,oBACL/wB,KAAKgxB,iBACLhxB,KAAK0R,QAAQuf,UAAU,kBAAmBhR,UAAU,WAC7CpF,EAAK8V,WAAc9V,EAAKiS,WAC3BoE,WAAWrW,EAAK4N,OAAOjQ,KAAKqC,EAAMkU,GAAQhX,QAAQyY,MAAO,EAE7D,IACAxwB,KAAK0R,QAAQ2B,GAAG0b,GAAQ1c,OAAOqd,sBAAsB,WACnD,GAAK7U,EAAKsW,WAAV,CACA,IAAMC,EAASvW,EAAKmS,iBACN,MAAVoE,GACAA,EAAOrjB,MAAMoM,OAASU,EAAKtjB,OAAOo1B,UACtC9R,EAAKnJ,QAAQF,KACXud,GAAQ1c,OAAOyd,eACf,SAAChtB,EAAQuiB,GACP,IAEIxK,EAAKpgB,KAAK+mB,SAAS4P,EAAOrjB,MAAMoM,OAChCU,EAAKpgB,KAAK+mB,SAAS4P,EAAOpjB,IAAImM,OAE9BU,EAAKwW,eACHD,EAAOrjB,MAAMoM,KACbiX,EAAOrjB,MAAMpS,OACby1B,EAAOpjB,IAAImM,KACXiX,EAAOpjB,IAAIrS,QAGf,IAAM21B,EAAoBjM,EAAUhJ,MACjC,SAAAoJ,GAAQ,MACW,kBAAlBA,EAASjf,MACS,cAAlBif,EAASjf,MACU,eAAlBif,EAASjf,MACRif,EAAS7X,SAAWiN,EAAKpgB,IAC/B,IACAogB,EAAK4N,OAAO6I,EAAoBvC,GAAQhX,QAAQwY,OAASztB,EAC3D,CAAE,MAAOyuB,GACP,CAEJ,GA9B0B,CAgC9B,IACAvxB,KAAK0R,QAAQ2B,GAAG0b,GAAQ1c,OAAOwd,iBAAiB,SAACxK,EAAW9T,GAC1D,GAAIA,EAAQwb,MAAO,CACjB,IAAAyE,EAAuDjgB,EAAQwb,MAAvDjL,EAAS0P,EAAT1P,UAAW2L,EAAW+D,EAAX/D,YAAaC,EAAO8D,EAAP9D,QAASC,EAAA6D,EAAA7D,UACzC9S,EAAKwW,eAAevP,EAAW2L,EAAaC,EAASC,GACrD9S,EAAK4N,OAAOsG,GAAQhX,QAAQwY,OAC9B,CACF,IACAvwB,KAAKyoB,OAAOsG,GAAQhX,QAAQwY,OAC9B,QAAApjB,EAAAA,EAAAA,GAAAujB,EAAA,EAAAv0B,IAAA,oBAAAf,MAEA,WAAoB,IAAA0gB,EAAA,KAClB9b,KAAK0R,QAAQ2B,GAAG0b,GAAQ1c,OAAO6d,0BAA0B,WACvDpU,EAAKgR,WAAY,CACnB,IACA9sB,KAAK0R,QAAQ2B,GAAG0b,GAAQ1c,OAAOge,iBAAiB,WAE9C,GADAvU,EAAKgR,WAAY,EACbhR,EAAKvkB,OAAOunB,OAAQ,CACtB,IAAMiO,EAAQjR,EAAKvkB,OAAOq2B,UAC1B,IAAKb,EAAO,OACZmE,YAAW,WACTpV,EAAKuV,eACHtE,EAAMjL,UACNiL,EAAMU,YACNV,EAAMW,QACNX,EAAMY,UAEV,GAAG,EACL,CACF,GACF,IAAAxxB,IAAA,iBAAAf,MAEA,WAAiB,IAAAmhB,EAAA,KACfvc,KAAK0R,QAAQuf,UAAU,YAAahR,SAASyF,MAAM,WACjDnJ,EAAKoU,WAAY,CACnB,IACA3wB,KAAK0R,QAAQuf,UAAU,UAAWhR,SAASyF,MAAM,WAC/CnJ,EAAKoU,WAAY,EACjBpU,EAAKkM,OAAOsG,GAAQhX,QAAQyY,KAC9B,GACF,IAAAr0B,IAAA,QAAAf,MAEA,WACM4E,KAAKmxB,aACTnxB,KAAKvF,KAAKg3B,MAAM,CAAEC,eAAe,IACjC1xB,KAAK2xB,SAAS3xB,KAAK4wB,YACrB,IAAAz0B,IAAA,SAAAf,MAEA,SAAOmjB,EAAgBnjB,GACrB4E,KAAKmb,OAAOsN,SACZ,IAAMmJ,EAAc5xB,KAAKgtB,iBACzB,GACiB,MAAf4E,GACCA,EAAW,UAAQC,YACpB7xB,KAAKmb,OAAOE,MAAMkD,EAAQxF,GAAMO,OAHlC,CAMA,GAAIsY,EAAY7jB,MAAMoM,OAASna,KAAKzI,OAAOo1B,SAAU,CACnD,IAAMlR,EAAOzb,KAAKmb,OAAOU,KAAK+V,EAAY7jB,MAAMoM,MAAM,GACtD,GAAY,MAARsB,EAAc,OAElB,GAAIA,aAAgBkF,GAAU,CAC5B,IAAMrqB,EAAQmlB,EAAKW,MAAMwV,EAAY7jB,MAAMpS,QAC3C8f,EAAKqD,OAAOO,aAAarf,KAAKzI,OAAQjB,EACxC,MAEEmlB,EAAK4D,aAAarf,KAAKzI,OAAQq6B,EAAY7jB,MAAMoM,MAEnDna,KAAKzI,OAAO8qB,QACd,CACAriB,KAAKzI,OAAOgnB,OAAOA,EAAQnjB,GAC3B4E,KAAKmb,OAAOiO,WACZppB,KAAKqxB,eAAerxB,KAAKzI,OAAOo1B,SAAU3sB,KAAKzI,OAAOo1B,SAASnsB,KAAKxT,QACpEgT,KAAKyoB,QAjBG,CAkBV,IAAAtsB,IAAA,YAAAf,MAEA,SAAU1E,GAA2B,IAI/ByjB,EAJmBntB,EAAMue,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAG,EAC1BumB,EAAe9xB,KAAKmb,OAAOnuB,SACjC0J,EAAQjI,KAAKiC,IAAIgG,EAAOo7B,EAAe,GACvC9kC,EAASyB,KAAKiC,IAAIgG,EAAQ1J,EAAQ8kC,EAAe,GAAKp7B,EAEtD,IAAAq7B,EAAqB/xB,KAAKmb,OAAOoR,KAAK71B,GAAMs7B,GAAA9iB,EAAAA,EAAAA,GAAA6iB,EAAA,GAAvCxF,EAAIyF,EAAA,GAAEr2B,EAAMq2B,EAAA,GACjB,GAAY,MAARzF,EAAc,OAAO,KACzB,GAAIv/B,EAAS,GAAK2O,IAAW4wB,EAAKv/B,SAAU,CAC1C,IAAAilC,EAAejyB,KAAKmb,OAAOoR,KAAK71B,EAAQ,GAAEw7B,GAAAhjB,EAAAA,EAAAA,GAAA+iB,EAAA,GAAnC5jB,EAAI6jB,EAAA,GACX,GAAI7jB,EAAM,CACR,IAAA8jB,EAAenyB,KAAKmb,OAAOjL,KAAKxZ,GAAM07B,GAAAljB,EAAAA,EAAAA,GAAAijB,EAAA,GAA/BjiB,EAAIkiB,EAAA,GACXC,EAAmBryB,KAAKmb,OAAOjL,KAAKxZ,EAAQ,GAAE47B,GAAApjB,EAAAA,EAAAA,GAAAmjB,EAAA,GAAvCE,EAAQD,EAAA,GACXpiB,IAASqiB,IACXhG,EAAOle,EACP1S,EAAS,EAEb,CACF,KAAA62B,EACiBjG,EAAKxH,SAASppB,GAAQ,GAAK82B,GAAAvjB,EAAAA,EAAAA,GAAAsjB,EAAA,GAA3CrY,EAAIsY,EAAA,GAAE92B,EAAM82B,EAAA,GACb,IAAM1F,EAAQ9M,SAASyS,cACvB,GAAI1lC,EAAS,EAAG,CACd+/B,EAAM4F,SAASxY,EAAMxe,GAAO,IAAAi3B,EACX5yB,KAAKmb,OAAOoR,KAAK71B,EAAQ1J,GAAO6lC,GAAA3jB,EAAAA,EAAAA,GAAA0jB,EAAA,GACjD,GADCrG,EAAIsG,EAAA,GAAEl3B,EAAMk3B,EAAA,GACD,MAARtG,EAAc,OAAO,KAAI,IAAAuG,EACZvG,EAAKxH,SAASppB,GAAQ,GAAKo3B,GAAA7jB,EAAAA,EAAAA,GAAA4jB,EAAA,GAE5C,OAFC3Y,EAAI4Y,EAAA,GAAEp3B,EAAMo3B,EAAA,GACbhG,EAAMiG,OAAO7Y,EAAMxe,GACZoxB,EAAMkG,uBACf,CACA,IACIC,EADAC,EAAyB,OAE7B,GAAIhZ,aAAgB4B,KAAM,CAMxB,IAAK5B,EAAK3Z,KAAKxT,OACb,OAAO,KAEL2O,EAASwe,EAAK3Z,KAAKxT,QACrB+/B,EAAM4F,SAASxY,EAAMxe,GACrBoxB,EAAMiG,OAAO7Y,EAAMxe,EAAS,KAE5BoxB,EAAM4F,SAASxY,EAAMxe,EAAS,GAC9BoxB,EAAMiG,OAAO7Y,EAAMxe,GACnBw3B,EAAO,SAETD,EAAOnG,EAAMkG,uBACf,KAAO,CACL,KAAM1G,EAAK5Q,mBAAmBQ,SAAU,OAAO,KAC/C+W,EAAO3G,EAAK5Q,QAAQsX,wBAChBt3B,EAAS,IAAGw3B,EAAO,QACzB,CACA,MAAO,CACLC,OAAQF,EAAKG,IAAMH,EAAKI,OACxBA,OAAQJ,EAAKI,OACbC,KAAML,EAAKC,GACXK,MAAON,EAAKC,GACZE,IAAKH,EAAKG,IACVI,MAAO,EAEX,IAAAt3B,IAAA,iBAAAf,MAEA,WACE,IAAMsxB,EAAYzM,SAASyT,eAC3B,GAAiB,MAAbhH,GAAqBA,EAAUiH,YAAc,EAAG,OAAO,KAC3D,IAAM/B,EAAclF,EAAUkH,WAAW,GACzC,GAAmB,MAAfhC,EAAqB,OAAO,KAChC,IAAM7E,EAAQ/sB,KAAK6zB,gBAAgBjC,GAEnC,OADA7D,GAAM+F,KAAK,iBAAkB/G,GACtBA,CACT,IAAA5wB,IAAA,WAAAf,MAEA,WACE,IAAMX,EAAOuF,KAAKmb,OAAOQ,QACzB,GAAI,gBAAiBlhB,IAASA,EAAKs5B,YAGjC,MAAO,CAAC,KAAM,MAEhB,IAAMC,EAAah0B,KAAKgtB,iBACxB,GAAkB,MAAdgH,EAAoB,MAAO,CAAC,KAAM,MACtC,IAAMjH,EAAQ/sB,KAAKi0B,kBAAkBD,GACrC,MAAO,CAACjH,EAAOiH,EACjB,IAAA73B,IAAA,WAAAf,MAEA,WACE,OACE6kB,SAASiU,gBAAkBl0B,KAAKvF,MACL,MAA1BwlB,SAASiU,eACR1S,GAASxhB,KAAKvF,KAAMwlB,SAASiU,cAEnC,IAAA/3B,IAAA,oBAAAf,MAEA,SAAkB2xB,GAAwB,IAAA3O,EAAA,KAClC+V,EAA8B,CAClC,CAACpH,EAAMhf,MAAMoM,KAAM4S,EAAMhf,MAAMpS,SAE5BoxB,EAAK,UAAQ8E,WAChBsC,EAAU/mC,KAAK,CAAC2/B,EAAM/e,IAAImM,KAAM4S,EAAM/e,IAAIrS,SAE5C,IAAMy4B,EAAUD,EAAUn5B,KAAK,SAAA+pB,GAC7B,IAAAsP,GAAAnlB,EAAAA,EAAAA,GAAuB6V,EAAQ,GAAxB5K,EAAIka,EAAA,GAAE14B,EAAM04B,EAAA,GACb5Y,EAAO2C,EAAKjD,OAAOU,KAAK1B,GAAM,GAE9BzjB,EAAQ+kB,EAAK9f,OAAOyiB,EAAKjD,QAC/B,OAAe,IAAXxf,EACKjF,EAEL+kB,aAAgBkF,GACXjqB,EAAQ+kB,EAAK/kB,MAAMyjB,EAAMxe,GAG3BjF,EAAQ+kB,EAAKzuB,QACtB,IACMghB,EAAMvf,KAAKiC,IAAIjC,KAAKoE,IAAGugB,MAAR3kB,MAAI2yB,EAAAA,GAAAA,GAAQgT,IAAUp0B,KAAKmb,OAAOnuB,SAAW,GAC5D+gB,EAAQtf,KAAKiC,IAAG0iB,MAAR3kB,KAAI,CAAKuf,GAAG5f,QAAAgzB,EAAAA,GAAAA,GAAKgT,KAC/B,OAAO,IAAI3D,GAAM1iB,EAAOC,EAAMD,EAChC,IAAA5R,IAAA,kBAAAf,MAEA,SAAgBw2B,GACd,IACGpQ,GAASxhB,KAAKvF,KAAMm3B,EAAY0C,kBAC/B1C,EAAYC,YAAcrQ,GAASxhB,KAAKvF,KAAMm3B,EAAY2C,cAE5D,OAAO,KAET,IAAMxH,EAAQ,CACZhf,MAAO,CACLoM,KAAMyX,EAAY0C,eAClB34B,OAAQi2B,EAAYnE,aAEtBzf,IAAK,CAAEmM,KAAMyX,EAAY2C,aAAc54B,OAAQi2B,EAAYjE,WAC3DyD,OAAQQ,GA2BV,MAzBA,CAAC7E,EAAMhf,MAAOgf,EAAM/e,KAAKtR,SAAS,SAAAqoB,GAChC,IAAM5K,EAAiB4K,EAAjB5K,KAAMxe,EAAWopB,EAAXppB,OACZ,QAASwe,aAAgB4B,OAAS5B,EAAKsG,WAAWzzB,OAAS,EACzD,GAAImtB,EAAKsG,WAAWzzB,OAAS2O,EAC3Bwe,EAAOA,EAAKsG,WAAW9kB,GACvBA,EAAS,MACJ,IAAIwe,EAAKsG,WAAWzzB,SAAW2O,EAapC,MAXAwe,EAAOA,EAAK8S,UAEVtxB,EADEwe,aAAgB4B,KACT5B,EAAK3Z,KAAKxT,OACVmtB,EAAKsG,WAAWzzB,OAAS,EAEzBmtB,EAAKsG,WAAWzzB,OAGhBmtB,EAAKsG,WAAWzzB,OAAS,CAItC,CAEF+3B,EAAS5K,KAAOA,EAChB4K,EAASppB,OAASA,CACpB,IACOoxB,CACT,IAAA5wB,IAAA,gBAAAf,MAEA,SAAc2xB,GAA0D,IAAAzO,EAAA,KAChEwT,EAAe9xB,KAAKmb,OAAOnuB,SAE3BwnC,EAAc,SAClB99B,EACAgrB,GAEAhrB,EAAQjI,KAAKiC,IAAIohC,EAAe,EAAGp7B,GACnC,IAAA+9B,EAA2BnW,EAAKnD,OAAOoR,KAAK71B,GAAMg+B,GAAAxlB,EAAAA,EAAAA,GAAAulB,EAAA,GAA3ClI,EAAImI,EAAA,GAAEC,EAAUD,EAAA,GACvB,OAAOnI,EAAOA,EAAKxH,SAAS4P,EAAYjT,GAAa,CAAC,MAAO,EAC/D,EACA,MAAO,GAAPtzB,QAAAgzB,EAAAA,GAAAA,GACKoT,EAAYzH,EAAMr2B,OAAO,KAAM0qB,EAAAA,GAAAA,GAC/BoT,EAAYzH,EAAMr2B,MAAQq2B,EAAM//B,QAAQ,IAE/C,IAAAmP,IAAA,iBAAAf,MAEA,SACE0mB,EACA2L,GAIA,IAHAC,EAAOniB,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAGuW,EACV6L,EAASpiB,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAGkiB,EACZvI,EAAK3Z,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,IAAAA,UAAA,GAGL,GADAwiB,GAAM+F,KAAK,iBAAkBhS,EAAW2L,EAAaC,EAASC,GAE/C,MAAb7L,GACyB,MAAxB9hB,KAAKvF,KAAKwiB,YACe,MAAxB6E,EAAU7E,YAEY,MAAtByQ,EAAQzQ,WALZ,CASA,IAAMyP,EAAYzM,SAASyT,eAC3B,GAAiB,MAAbhH,EACJ,GAAiB,MAAb5K,EAAmB,CAChB9hB,KAAKmxB,YAAYnxB,KAAKvF,KAAKg3B,MAAM,CAAEC,eAAe,IACvD,IAAAlC,EAAmBxvB,KAAKgtB,kBAAoB,CAAC,EAArCoE,EAAA5B,EAAA,UACR,GACY,MAAV4B,GACAlM,GACApD,IAAcsP,EAAOkD,gBACrB7G,IAAgB2D,EAAO3D,aACvBC,IAAY0D,EAAOmD,cACnB5G,IAAcyD,EAAOzD,UACrB,CACI7L,aAAqB3F,SAAiC,OAAtB2F,EAAUxF,UAE5CmR,EAAc3+B,MAAM2rB,KAAKqH,EAAU7E,WAAWwD,YAAY/yB,QACxDo0B,GAEFA,EAAYA,EAAU7E,YAEpByQ,aAAmBvR,SAA+B,OAApBuR,EAAQpR,UAExCqR,EAAY7+B,MAAM2rB,KAAKiT,EAAQzQ,WAAWwD,YAAY/yB,QACpDggC,GAEFA,EAAUA,EAAQzQ,YAEpB,IAAM8P,EAAQ9M,SAASyS,cAEvB3F,EAAM4F,SAAS7Q,EAAW2L,GAE1BV,EAAMiG,OAAOtF,EAASC,GACtBjB,EAAUkI,kBACVlI,EAAUmI,SAAS9H,EACrB,CACF,MACEL,EAAUkI,kBACV50B,KAAKvF,KAAKq6B,MAtCZ,CAwCF,IAAA34B,IAAA,WAAAf,MAIA,SACE2xB,GAGM,IAFN7H,EAA8B3Z,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,IAAAA,UAAA,GAC9BzI,EAAqByI,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAGwjB,GAAQhX,QAAQuY,IAOxC,GALqB,kBAAVpL,IACTpiB,EAASoiB,EACTA,GAAQ,GAEV6I,GAAM+F,KAAK,WAAY/G,GACV,MAATA,EAAe,CACjB,IAAM9Z,EAAOjT,KAAK+0B,cAAchI,GAChC/sB,KAAKqxB,eAAcje,MAAnBpT,MAAIohB,EAAAA,GAAAA,GAAmBnO,GAAI7kB,OAAA,CAAE82B,IAC/B,MACEllB,KAAKqxB,eAAe,MAEtBrxB,KAAKyoB,OAAO3lB,EACd,IAAA3G,IAAA,SAAAf,MAEA,WAAqD,IAA9C0H,EAAqByI,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAGwjB,GAAQhX,QAAQyY,KACvC/5B,EAAWuJ,KAAK6wB,UACtBmE,EAAiCh1B,KAAKi1B,WAAUC,GAAAhmB,EAAAA,EAAAA,GAAA8lB,EAAA,GAAzCnE,EAASqE,EAAA,GAAEtD,EAAWsD,EAAA,GAM7B,GALAl1B,KAAK6wB,UAAYA,EACjB7wB,KAAK8wB,WAAac,EACI,MAAlB5xB,KAAK6wB,YACP7wB,KAAK4wB,WAAa5wB,KAAK6wB,YAEpBrlB,GAAQ/U,EAAUuJ,KAAK6wB,WAAY,KAAAsE,EACtC,IACGn1B,KAAK8sB,WACS,MAAf8E,GACAA,EAAW,UAAQC,WACnBD,EAAY7jB,MAAMoM,OAASna,KAAKzI,OAAOo1B,SACvC,CACA,IAAMI,EAAQ/sB,KAAKzI,OAAOq2B,UACtBb,GACF/sB,KAAKqxB,eACHtE,EAAMjL,UACNiL,EAAMU,YACNV,EAAMW,QACNX,EAAMY,UAGZ,CACA,IAOuCyH,EAPjCniB,EAAO,CACX8b,GAAQ1c,OAAO2d,iBACfvpB,GAAUzG,KAAK6wB,WACfpqB,GAAUhQ,GACVqM,GAGF,IADAqyB,EAAAn1B,KAAK0R,SAAQiB,KAAIS,MAAA+hB,EAAA,CAACpG,GAAQ1c,OAAOod,eAAarhC,OAAK6kB,IAC/CnQ,IAAWisB,GAAQhX,QAAQwY,QAC7B6E,EAAAp1B,KAAK0R,SAAQiB,KAAIS,MAAAgiB,EAAIniB,EAEzB,CACF,KAnba,GAsbf,SAASuO,GAAS1C,EAAcyE,GAC9B,IAEEA,EAAWtG,UACb,CAAE,MAAO1gB,GACP,OAAO,CACT,CACA,OAAOuiB,EAAO0C,SAAS+B,EACzB,CAEA,YC1dA,IAAM8R,GAAQ,WAORC,GAAM,WAIV,SAAAA,EAAYna,IAAgBjO,EAAAA,EAAAA,GAAA,KAAAooB,GAC1Bt1B,KAAKmb,OAASA,EACdnb,KAAK/Q,MAAQ+Q,KAAKu1B,UACpB,QAAApoB,EAAAA,EAAAA,GAAAmoB,EAAA,EAAAn5B,IAAA,aAAAf,MAEA,SAAWnM,GAAqB,IAAA4rB,EAAA,KAC9B7a,KAAKmb,OAAOsN,SACZ,IAAIqJ,EAAe9xB,KAAKmb,OAAOnuB,SAC/BgT,KAAKmb,OAAOqa,aACZ,IAAMC,EAAkBC,GAAezmC,GACjC0mC,EAAc,IAAI3oB,GAClB4oB,EAAgBC,GAAaJ,EAAgBxoB,IAAI5b,SAwFvD,OAvFAukC,EAAc5pB,QAAO,SAACtV,EAAOiX,GAC3B,IAAM3gB,EAAS8jB,GAAAA,GAAG9jB,OAAO2gB,GACrB5B,EAAa4B,EAAG5B,YAAc,CAAC,EAC/B+pB,GAA6B,EAC7BC,GAA4B,EAChC,GAAiB,MAAbpoB,EAAGN,OAAgB,CAErB,GADAsoB,EAAYroB,OAAOtgB,GACM,kBAAd2gB,EAAGN,OAAqB,CACjC,IAAM2O,EAAOrO,EAAGN,OAChB0oB,GACG/Z,EAAKga,SAAS,QACdlE,GAAgBp7B,KACbmkB,EAAKM,OAAOoI,WAAW6I,GAAY11B,GAAO,IAChDmkB,EAAKM,OAAOkJ,SAAS3tB,EAAOslB,GAC5B,IAAAmW,EAAuBtX,EAAKM,OAAOjL,KAAKxZ,GAAM07B,GAAAljB,EAAAA,EAAAA,GAAAijB,EAAA,GAAvCjiB,EAAIkiB,EAAA,GAAEz2B,EAAMy2B,EAAA,GACf9L,EAAUrO,GAAM,CAAC,EAAGuU,GAActc,IACtC,GAAIA,aAAgB6b,GAAO,CACzB,IAAAkK,EAAe/lB,EAAKqT,WAAW5C,GAAUhlB,GAAOu6B,GAAAhnB,EAAAA,EAAAA,GAAA+mB,EAAA,GAAzC1J,EAAI2J,EAAA,GACP3J,IACFjG,EAAUrO,GAAMqO,EAASkG,GAAcD,IAE3C,CACAxgB,EAAaN,GAAAA,aAAa/T,KAAK4uB,EAASva,IAAe,CAAC,CAC1D,MAAO,GAAyB,YAArB1R,EAAAA,EAAAA,GAAOsT,EAAGN,QAAqB,CACxC,IAAMlR,EAAM7B,OAAOkD,KAAKmQ,EAAGN,QAAQ,GACnC,GAAW,MAAPlR,EAAa,OAAOzF,EACxB,IAAMy/B,EAAwD,MAAxCtb,EAAKM,OAAOE,MAAMlf,EAAK4c,GAAMM,QACnD,GAAI8c,GAEArE,GAAgBp7B,GACdmkB,EAAKM,OAAOoI,WAAW6I,GAAY11B,GAAO,MAE5Cq/B,GAA4B,QAEzB,GAAIr/B,EAAQ,EAAG,CACpB,IAAA0/B,EAAuBvb,EAAKM,OAAOoI,WAAW5C,GAAUjqB,EAAQ,GAAE2/B,GAAAnnB,EAAAA,EAAAA,GAAAknB,EAAA,GAA3D7J,EAAI8J,EAAA,GAAE16B,EAAM06B,EAAA,GACnB,GAAI9J,aAAgBvC,GAAU,CAC5B,IAAMhO,EAAOuQ,EAAKnxB,QACG,OAAjB4gB,EAAKrgB,KACPm6B,GAA6B,EAEjC,MACEvJ,aAAgB/E,IAChB+E,EAAKrN,QAAQjF,QAAUlB,GAAMS,cAE7Bsc,GAA6B,EAEjC,CAGA,GAFAjb,EAAKM,OAAOkJ,SAAS3tB,EAAOyF,EAAKwR,EAAGN,OAAOlR,IAEvCg6B,EAAe,CACjB,IAAAG,EAAezb,EAAKM,OAAOoI,WAAW5C,GAAUjqB,GAAM6/B,GAAArnB,EAAAA,EAAAA,GAAAonB,EAAA,GAA/C/J,EAAIgK,EAAA,GACX,GAAIhK,EAAM,CACR,IAAMjG,EAAUrO,GAAM,CAAC,EAAGuU,GAAcD,IACxCxgB,EAAaN,GAAAA,aAAa/T,KAAK4uB,EAASva,IAAe,CAAC,CAC1D,CACF,CACF,CACA+lB,GAAgB9kC,CAClB,MAGE,GAFA2oC,EAAYvoC,KAAKugB,GAEC,OAAdA,EAAGL,QAAwC,YAArBjT,EAAAA,EAAAA,GAAOsT,EAAGL,QAAqB,CACvD,IAAMnR,EAAM7B,OAAOkD,KAAKmQ,EAAGL,QAAQ,GACnC,GAAW,MAAPnR,EAAa,OAAOzF,EACxBmkB,EAAKM,OAAOqb,cAAc9/B,EAAOyF,EAAKwR,EAAGL,OAAOnR,GAClD,CAEF7B,OAAOkD,KAAKuO,GAAYrP,SAAS,SAAAkO,GAC/BiQ,EAAKM,OAAO+I,SAASxtB,EAAO1J,EAAQ4d,EAAMmB,EAAWnB,GACvD,IACA,IAAM6rB,EAAkBX,EAA6B,EAAI,EACnDY,EAAcX,EAA4B,EAAI,EAIpD,OAHAjE,GAAgB2E,EAAkBC,EAClCf,EAAYroB,OAAOmpB,GACnBd,EAAW,UAAQe,GACZhgC,EAAQ1J,EAASypC,EAAkBC,CAC5C,GAAG,GACHf,EAAY3pB,QAAO,SAACtV,EAAOiX,GACzB,MAAyB,kBAAdA,EAAE,WACXkN,EAAKM,OAAOgI,SAASzsB,EAAOiX,EAAE,WACvBjX,GAEFA,EAAQoa,GAAAA,GAAG9jB,OAAO2gB,EAC3B,GAAG,GACH3N,KAAKmb,OAAOwb,WACZ32B,KAAKmb,OAAOiO,WACLppB,KAAKyoB,OAAOgN,EACrB,IAAAt5B,IAAA,aAAAf,MAEA,SAAW1E,EAAe1J,GAExB,OADAgT,KAAKmb,OAAOgI,SAASzsB,EAAO1J,GACrBgT,KAAKyoB,QAAO,IAAIzb,IAAQM,OAAO5W,GAAM,UAAQ1J,GACtD,IAAAmP,IAAA,aAAAf,MAEA,SACE1E,EACA1J,GAEO,IAAA8uB,EAAA,KADPwK,EAAgC/a,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAG,CAAC,EAEpCvL,KAAKmb,OAAOsN,SACZnuB,OAAOkD,KAAK8oB,GAAS5pB,SAAS,SAAA6hB,GAC5BzC,EAAKX,OAAO8Q,MAAMv1B,EAAOjI,KAAKoE,IAAI7F,EAAQ,IAAI0P,SAAS,SAAAwT,GACrDA,EAAKqO,OAAOA,EAAQ+H,EAAQ/H,GAC9B,GACF,IACAve,KAAKmb,OAAOiO,WACZ,IAAMn6B,GAAQ,IAAI+d,IAAQM,OAAO5W,GAAO4W,OAAOtgB,EAAQyZ,GAAU6f,IACjE,OAAOtmB,KAAKyoB,OAAOx5B,EACrB,IAAAkN,IAAA,aAAAf,MAEA,SACE1E,EACA1J,GAEO,IAAAuvB,EAAA,KADP+J,EAAgC/a,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAG,CAAC,EAEpCjR,OAAOkD,KAAK8oB,GAAS5pB,SAAS,SAAA6hB,GAC5BhC,EAAKpB,OAAO+I,SAASxtB,EAAO1J,EAAQuxB,EAAQ+H,EAAQ/H,GACtD,IACA,IAAMtvB,GAAQ,IAAI+d,IAAQM,OAAO5W,GAAO4W,OAAOtgB,EAAQyZ,GAAU6f,IACjE,OAAOtmB,KAAKyoB,OAAOx5B,EACrB,IAAAkN,IAAA,cAAAf,MAEA,SAAY1E,EAAe1J,GACzB,OAAOgT,KAAK/Q,MAAMoC,MAAMqF,EAAOA,EAAQ1J,EACzC,IAAAmP,IAAA,WAAAf,MAEA,WACE,OAAO4E,KAAKmb,OAAO8Q,QAAQjgB,QAAO,SAAC/c,EAAOihB,GACxC,OAAOjhB,EAAMb,OAAO8hB,EAAKjhB,QAC3B,GAAG,IAAI+d,GACT,IAAA7Q,IAAA,YAAAf,MAEA,SAAU1E,GAAoD,IAArC1J,EAAMue,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAG,EAC5B0gB,EAAgC,GAChC2K,EAAqB,GACV,IAAX5pC,EACFgT,KAAKmb,OAAO6J,KAAKtuB,GAAOgG,SAAS,SAAAsoB,GAC/B,IAAA6R,GAAA3nB,EAAAA,EAAAA,GAAe8V,EAAI,GAAZvJ,EAAIob,EAAA,GACPpb,aAAgBsQ,GAClBE,EAAM7+B,KAAKquB,GACFA,aAAgBkF,IACzBiW,EAAOxpC,KAAKquB,EAEhB,KAEAwQ,EAAQjsB,KAAKmb,OAAO8Q,MAAMv1B,EAAO1J,GACjC4pC,EAAS52B,KAAKmb,OAAOuI,YAAY/C,GAAUjqB,EAAO1J,IAEpD,IAAA8pC,EAAmC,CAAC7K,EAAO2K,GAAQ57B,KAAK,SAAA0gB,GACtD,IAAMD,EAAOC,EAAMwQ,QACnB,GAAY,MAARzQ,EAAc,MAAO,CAAC,EAC1B,IAAI6K,EAAUkG,GAAc/Q,GAC5B,MAAOnhB,OAAOkD,KAAK8oB,GAASt5B,OAAS,EAAG,CACtC,IAAMyuB,EAAOC,EAAMwQ,QACnB,GAAY,MAARzQ,EAAc,OAAO6K,EACzBA,EAAUyQ,GAAevK,GAAc/Q,GAAO6K,EAChD,CACA,OAAOA,CACT,IAAE0Q,GAAA9nB,EAAAA,EAAAA,GAAA4nB,EAAA,GAVKG,EAAWD,EAAA,GAAEE,EAAWF,EAAA,GAW/B,OAAA3K,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAY4K,GAAgBC,EAC9B,IAAA/6B,IAAA,UAAAf,MAEA,SAAQ1E,EAAe1J,GACrB,IAAAqlC,EAA2BryB,KAAKmb,OAAOjL,KAAKxZ,GAAM47B,GAAApjB,EAAAA,EAAAA,GAAAmjB,EAAA,GAA3CniB,EAAIoiB,EAAA,GAAE6E,EAAU7E,EAAA,GACvB,GAAIpiB,EAAM,CACR,IAAMknB,EAAalnB,EAAKljB,SAClBqqC,EAAennB,EAAKljB,UAAYmqC,EAAanqC,EACnD,OAAIqqC,GAAiC,IAAfF,GAAoBnqC,IAAWoqC,EAG9CE,GAAYt3B,KAAKmb,OAAQzkB,EAAO1J,GAAQ,GAFtCsqC,GAAYpnB,EAAMinB,EAAYnqC,GAAQ,EAGjD,CACA,MAAO,EACT,IAAAmP,IAAA,UAAAf,MAEA,SAAQ1E,EAAe1J,GACrB,OAAOgT,KAAKu3B,YAAY7gC,EAAO1J,GAC5BwgB,QAAQ,SAAAG,GAAE,MAA0B,kBAAdA,EAAGN,MAAmB,IAC5CrS,KAAK,SAAA2S,GAAE,OAAKA,EAAGN,MAAM,IACrBuC,KAAK,GACV,IAAAzT,IAAA,iBAAAf,MAEA,SAAe1E,EAAe8gC,GAC5B,IAAM/B,EAAkBC,GAAe8B,GACjCC,GAAS,IAAIzqB,IAAQM,OAAO5W,GAAOtI,OAAOqnC,GAEhD,OADAz1B,KAAKmb,OAAOuc,eAAehhC,EAAO++B,GAC3Bz1B,KAAKyoB,OAAOgP,EACrB,IAAAt7B,IAAA,cAAAf,MAEA,SAAY1E,EAAeihC,EAAev8B,GAExC,OADA4E,KAAKmb,OAAOkJ,SAAS3tB,EAAOihC,EAAOv8B,GAC5B4E,KAAKyoB,QAAO,IAAIzb,IAAQM,OAAO5W,GAAO2W,QAAMkC,EAAAA,EAAAA,GAAC,CAAC,EAAEooB,EAAQv8B,IACjE,IAAAe,IAAA,aAAAf,MAEA,SACE1E,EACAslB,GAEO,IAAAoC,EAAA,KADPkI,EAAgC/a,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAG,CAAC,EAOpC,OALAyQ,EAAOA,EAAKhe,QAAQ,QAAS,MAAMA,QAAQ,MAAO,MAClDgC,KAAKmb,OAAOkJ,SAAS3tB,EAAOslB,GAC5B1hB,OAAOkD,KAAK8oB,GAAS5pB,SAAS,SAAA6hB,GAC5BH,EAAKjD,OAAO+I,SAASxtB,EAAOslB,EAAKhvB,OAAQuxB,EAAQ+H,EAAQ/H,GAC3D,IACOve,KAAKyoB,QACV,IAAIzb,IAAQM,OAAO5W,GAAO2W,OAAO2O,EAAMvV,GAAU6f,IAErD,IAAAnqB,IAAA,UAAAf,MAEA,WACE,GAAoC,IAAhC4E,KAAKmb,OAAOmE,SAAStyB,OAAc,OAAO,EAC9C,GAAIgT,KAAKmb,OAAOmE,SAAStyB,OAAS,EAAG,OAAO,EAC5C,IAAMyuB,EAAOzb,KAAKmb,OAAOmE,SAASwB,KAClC,IAAQ,OAAJrF,QAAI,IAAJA,OAAI,EAAJA,EAAMyD,QAAQpC,YAAaiP,GAAMjP,SAAU,OAAO,EACtD,IAAMb,EAAQR,EACd,QAAIQ,EAAMqD,SAAStyB,OAAS,IACrBivB,EAAMqD,SAASwB,gBAAgBqK,EACxC,IAAAhvB,IAAA,eAAAf,MAEA,SAAa1E,EAAe1J,GAC1B,IAAMgvB,EAAOhc,KAAK43B,QAAQlhC,EAAO1J,GACjC6qC,EAAuB73B,KAAKmb,OAAOjL,KAAKxZ,EAAQ1J,GAAO8qC,GAAA5oB,EAAAA,EAAAA,GAAA2oB,EAAA,GAAhD3nB,EAAI4nB,EAAA,GAAEn8B,EAAMm8B,EAAA,GACf7lC,EAAe,EACf8lC,EAAS,IAAI/qB,GACL,MAARkD,IACFje,EAAeie,EAAKljB,SAAW2O,EAC/Bo8B,EAAS7nB,EACNjhB,QACAoC,MAAMsK,EAAQA,EAAS1J,EAAe,GACtCob,OAAO,OAEZ,IAAMmqB,EAAWx3B,KAAKu3B,YAAY7gC,EAAO1J,EAASiF,GAC5CyF,EAAO8/B,EAAS9/B,MAAK,IAAIsV,IAAQK,OAAO2O,GAAM5tB,OAAO2pC,IACrD9oC,GAAQ,IAAI+d,IAAQM,OAAO5W,GAAOtI,OAAOsJ,GAC/C,OAAOsI,KAAKg4B,WAAW/oC,EACzB,IAAAkN,IAAA,SAAAf,MAEA,SACEq8B,GAGO,IAFPpS,EAA2B9Z,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAG,GAC9B0sB,EAAwC1sB,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,QAAGnP,EAErC87B,EAAWl4B,KAAK/Q,MACtB,GACuB,IAArBo2B,EAAUr4B,QACY,kBAAtBq4B,EAAU,GAAG7e,MAEb6e,EAAU,GAAGzX,OAAOpN,KAAKzM,MAAMshC,KAC/Br1B,KAAKmb,OAAOU,KAAKwJ,EAAU,GAAGzX,QAC9B,CAEA,IAAMuqB,EAAWn4B,KAAKmb,OAAOU,KAAKwJ,EAAU,GAAGzX,QACzC0Y,EAAUkG,GAAc2L,GACxBzhC,EAAQyhC,EAASx8B,OAAOqE,KAAKmb,QAE7Bid,EAAW/S,EAAU,GAAG+S,SAASp6B,QAAQq6B,GAAWzL,SAAU,IAC9Dr2B,GAAU,IAAIyW,IAAQK,OAAO+qB,GAE7B5hC,GAAU,IAAIwW,IAAQK,OAAO8qB,EAAS/8B,SACtCk9B,EAAwBL,GAAiB,CAC7CxhC,SAAU8hC,GAAWN,EAAcxhC,UAAWC,GAC9CC,SAAU4hC,GAAWN,EAActhC,UAAWD,IAE1C8hC,GAAY,IAAIxrB,IACnBM,OAAO5W,GACPtI,OAAOmI,EAAQmB,KAAKlB,EAAS8hC,IAChCb,EAASe,EAAUxsB,QAAO,SAAC/c,EAAO0e,GAChC,OAAIA,EAAGN,OACEpe,EAAMoe,OAAOM,EAAGN,OAAQiZ,GAE1Br3B,EAAM7B,KAAKugB,EACpB,GAAG,IAAIX,IACPhN,KAAK/Q,MAAQipC,EAASvsB,QAAQ8rB,EAChC,MACEz3B,KAAK/Q,MAAQ+Q,KAAKu1B,WACbkC,GAAWjsB,GAAQ0sB,EAASvsB,QAAQ8rB,GAASz3B,KAAK/Q,SACrDwoC,EAASS,EAASxgC,KAAKsI,KAAK/Q,MAAOgpC,IAGvC,OAAOR,CACT,KAzSU,GAmTZ,SAASgB,GACPC,EACAC,EACAljB,GAEA,GAAqB,IAAjBijB,EAAM1rC,OAAc,CACtB,IAAA4rC,EAAiBC,GAAYpjB,EAAM7f,OAAMkjC,GAAA5pB,EAAAA,EAAAA,GAAA0pB,EAAA,GAAlCG,EAAMD,EAAA,GACb,OAAIH,GAAc,EACT,UAAPvqC,OAAiB2qC,EAAO,KAEnB,UAAP3qC,OAAiB2qC,EAAO,KAAA3qC,OAAGqqC,GAAgB,GAAIE,EAAa,EAAGljB,GACjE,CACA,IAAAujB,GAAAC,EAAAA,GAAAA,GAA2DP,GAAKQ,EAAAF,EAAA,GAAvD7W,EAAK+W,EAAL/W,MAAOxmB,EAAMu9B,EAANv9B,OAAQ3O,EAAMksC,EAANlsC,OAAQmsC,EAAMD,EAANC,OAAQ3yB,EAAA0yB,EAAA1yB,KAAWgJ,EAAIwpB,EAAA3nC,MAAA,GACvD+nC,EAAyBP,GAAYryB,GAAK6yB,GAAAnqB,EAAAA,EAAAA,GAAAkqB,EAAA,GAAnC31B,EAAG41B,EAAA,GAAElb,EAASkb,EAAA,GACrB,GAAIF,EAASR,EAEX,OADAljB,EAAMroB,KAAKoZ,GACP2yB,IAAWR,EAAa,EACnB,IAAPvqC,OAAWqV,EAAI,QAAArV,OAAM+vB,EAAU,KAAA/vB,OAAGkpC,GAChCnV,EACAxmB,EACA3O,IACAoB,OAAEqqC,GAAgBjpB,EAAM2pB,EAAQ1jB,IAE7B,IAAPrnB,OAAWqV,EAAI,SAAArV,OAAOqqC,GAAgBC,EAAOC,EAAa,EAAGljB,IAE/D,IAAM6jB,EAAe7jB,EAAMA,EAAMzoB,OAAS,GAC1C,GAAImsC,IAAWR,GAAcnyB,IAAS8yB,EACpC,MAAO,WAAPlrC,OAAkB+vB,EAAU,KAAA/vB,OAAGkpC,GAC7BnV,EACAxmB,EACA3O,IACAoB,OAAEqqC,GAAgBjpB,EAAM2pB,EAAQ1jB,IAEpC,IAAA8jB,EAAiBV,GAAYpjB,EAAM7f,OAAM4jC,GAAAtqB,EAAAA,EAAAA,GAAAqqB,EAAA,GAAlCR,EAAMS,EAAA,GACb,MAAO,UAAPprC,OAAiB2qC,EAAO,KAAA3qC,OAAGqqC,GAAgBC,EAAOC,EAAa,EAAGljB,GACpE,CAEA,SAAS6hB,GACP7b,EACA/kB,EACA1J,GAEQ,IADRysC,EAAMluB,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,IAAAA,UAAA,GAEN,GAAI,SAAUkQ,GAA6B,oBAAdA,EAAKie,KAChC,OAAOje,EAAKie,KAAKhjC,EAAO1J,GAE1B,GAAIyuB,aAAgBuO,GAClB,OAAOqB,GAAW5P,EAAKrgB,QAAQ/J,MAAMqF,EAAOA,EAAQ1J,IAEtD,GAAIyuB,aAAgBoK,GAAY,CAE9B,GAA8B,mBAA1BpK,EAAKyD,QAAQpC,SAA+B,CAC9C,IAAM4b,EAAe,GAcrB,OAbAjd,EAAK6D,SAAS2D,UAAUvsB,EAAO1J,GAAQ,SAACm1B,EAAOxmB,EAAQunB,GACrD,IAAMoD,EACJ,YAAanE,GAAkC,oBAAlBA,EAAMmE,QAC/BnE,EAAMmE,UACN,CAAC,EACPoS,EAAMtrC,KAAK,CACT+0B,MAAAA,EACAxmB,OAAAA,EACA3O,OAAQk2B,EACRiW,OAAQ7S,EAAQ6S,QAAU,EAC1B3yB,KAAM8f,EAAQqT,MAElB,IACOlB,GAAgBC,GAAQ,EAAG,GACpC,CACA,IAAMhb,EAAkB,GAIxB,GAHAjC,EAAK6D,SAAS2D,UAAUvsB,EAAO1J,GAAQ,SAACm1B,EAAOxmB,EAAQunB,GACrDxF,EAAMtwB,KAAKkqC,GAAYnV,EAAOxmB,EAAQunB,GACxC,IACIuW,GAAoC,SAA1Bhe,EAAKyD,QAAQpC,SACzB,OAAOY,EAAM9N,KAAK,IAEpB,IAAAgqB,EAAiCne,EAAKE,QAA9Bke,EAASD,EAATC,UAAWC,EAAAF,EAAAE,UACnBC,EAAqBF,EAAUzd,MAAM,IAADhuB,OAAK0rC,EAAU,MAAGE,GAAA9qB,EAAAA,EAAAA,GAAA6qB,EAAA,GAA/ChsB,EAAKisB,EAAA,GAAEhsB,EAAGgsB,EAAA,GAEjB,MAAc,WAAVjsB,EACK,0CAAP3f,OAAiDsvB,EAAM9N,KAAK,IAAI,KAAAxhB,OAAG4f,GAE9D,GAAP5f,OAAU2f,EAAM,KAAA3f,OAAGsvB,EAAM9N,KAAK,IAAI,KAAAxhB,OAAG4f,EACvC,CACA,OAAOyN,EAAKE,mBAAmBQ,QAAUV,EAAKE,QAAQke,UAAY,EACpE,CAEA,SAAS9C,GACPzQ,EACA2T,GAEA,OAAO3/B,OAAOkD,KAAKy8B,GAAUjuB,QAC3B,SAACkuB,EAAQtvB,GACP,GAAqB,MAAjB0b,EAAQ1b,GAAe,OAAOsvB,EAClC,IAAMC,EAAgBF,EAASrvB,GAa/B,OAZIuvB,IAAkB7T,EAAQ1b,GAC5BsvB,EAAOtvB,GAAQuvB,EACNrrC,MAAMuT,QAAQ83B,GACnBA,EAAczsC,QAAQ44B,EAAQ1b,IAAS,EACzCsvB,EAAOtvB,GAAQuvB,EAAc/rC,OAAO,CAACk4B,EAAQ1b,KAG7CsvB,EAAOtvB,GAAQuvB,EAGjBD,EAAOtvB,GAAQ,CAACuvB,EAAe7T,EAAQ1b,IAElCsvB,CACT,GACA,CAAC,EAEL,CAEA,SAASrB,GAAYryB,GACnB,IAAM/C,EAAe,YAAT+C,EAAqB,KAAO,KACxC,OAAQA,GACN,IAAK,UACH,MAAO,CAAC/C,EAAK,wBACf,IAAK,YACH,MAAO,CAACA,EAAK,0BACf,QACE,MAAO,CAACA,EAAK,IAEnB,CAEA,SAASiyB,GAAezmC,GACtB,OAAOA,EAAM+c,QAAO,SAACypB,EAAiB9nB,GACpC,GAAyB,kBAAdA,EAAGN,OAAqB,CACjC,IAAM2O,EAAOrO,EAAGN,OAAOrP,QAAQ,QAAS,MAAMA,QAAQ,MAAO,MAC7D,OAAOy3B,EAAgBpoB,OAAO2O,EAAMrO,EAAG5B,WACzC,CACA,OAAO0pB,EAAgBroC,KAAKugB,EAC9B,GAAG,IAAIX,GACT,CAEA,SAASurB,GAAU/I,EAA2B4K,GAAgB,IAAxC1jC,EAAsB84B,EAAtB94B,MAAO1J,EAAewiC,EAAfxiC,OAC3B,OAAO,IAAIyjC,GAAM/5B,EAAQ0jC,EAAQptC,EACnC,CAEA,SAAS6oC,GAAa5oB,GACpB,IAAMmP,EAAc,GAapB,OAZAnP,EAAIvQ,SAAS,SAAAiR,GACX,GAAyB,kBAAdA,EAAGN,OAAqB,CACjC,IAAM4e,EAAQte,EAAGN,OAAO+O,MAAM,MAC9B6P,EAAMvvB,SAAQ,SAACwT,EAAMxZ,GACfA,GAAO0lB,EAAMhvB,KAAK,CAAEigB,OAAQ,KAAMtB,WAAY4B,EAAG5B,aACjDmE,GAAMkM,EAAMhvB,KAAK,CAAEigB,OAAQ6C,EAAMnE,WAAY4B,EAAG5B,YACtD,GACF,MACEqQ,EAAMhvB,KAAKugB,EAEf,IAEOyO,CACT,CAEA,Y,IC9deie,IAAMltB,EAAAA,EAAAA,IAGnB,SAAAktB,EACSzL,IAEP1hB,EAAAA,EAAAA,GAAA,KAAAmtB,GAAA,IADUtgB,EAAmBxO,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAG,CAAC,EAAC,KAD3BqjB,MAAAA,EAAY,KACT7U,QAAAA,CACT,KAAAxK,EAAAA,EAAAA,GANU8qB,GAAM,WACD,CAAC,GAQrB,Y,WCPMC,GAAa,SASbC,GAAK,SAAAnP,GAKT,SAAAmP,EAAYpf,EAAoBhB,GAAY,IAAAU,EAWD,OAXC3N,EAAAA,EAAAA,GAAA,KAAAqtB,GAC1C1f,GAAAC,EAAAA,GAAAA,GAAA,KAAAyf,EAAA,CAAMpf,EAAQhB,IACdU,EAAK2f,YAAcva,SAASC,cAAc,QAC1CrF,EAAK2f,YAAYngB,aAAa,kBAAmB,SACjDvrB,MAAM2rB,KAAKI,EAAKc,QAAQ8E,YAAY/jB,SAAS,SAAA+9B,GAC3C5f,EAAK2f,YAAY1a,YAAY2a,EAC/B,IACA5f,EAAK6f,UAAYza,SAAS8J,eAAeuQ,IACzCzf,EAAK8f,WAAa1a,SAAS8J,eAAeuQ,IAC1Czf,EAAKc,QAAQmE,YAAYjF,EAAK6f,WAC9B7f,EAAKc,QAAQmE,YAAYjF,EAAK2f,aAC9B3f,EAAKc,QAAQmE,YAAYjF,EAAK8f,YAAW9f,CAC3C,QAAAE,EAAAA,GAAAA,GAAAwf,EAAAnP,IAAAje,EAAAA,EAAAA,GAAAotB,EAAA,EAAAp+B,IAAA,QAAAf,MAEA,SAAM+e,EAAYxe,GAChB,OAAIwe,IAASna,KAAK06B,UAAkB,EAChCvgB,IAASna,KAAK26B,WAAmB,GACrCjY,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAA4X,EAAAt9B,WAAA,cAAAc,KAAA,KAAmBoc,EAAMxe,EAC3B,IAAAQ,IAAA,UAAAf,MAEA,SAAQ+e,GACN,IACIwS,EADAI,EAAkC,KAEhC/Q,EAAO7B,EAAK3Z,KAAK4b,MAAMke,IAAY1qB,KAAK,IAC9C,GAAIuK,IAASna,KAAK06B,UAChB,GAAI16B,KAAK4e,gBAAgBoL,GAAU,CACjC,IAAM4Q,EAAa56B,KAAK4e,KAAK5xB,SAC7BgT,KAAK4e,KAAKyF,SAASuW,EAAY5e,GAC/B+Q,EAAQ,CACNjL,UAAW9hB,KAAK4e,KAAKjD,QACrB8R,YAAamN,EAAa5e,EAAKhvB,OAEnC,MACE2/B,EAAW1M,SAAS8J,eAAe/N,GACnChc,KAAK8e,OAAOO,aAAarf,KAAKmb,OAAO5c,OAAOouB,GAAW3sB,MACvD+sB,EAAQ,CACNjL,UAAW6K,EACXc,YAAazR,EAAKhvB,aAGbmtB,IAASna,KAAK26B,aACnB36B,KAAKqO,gBAAgB2b,IACvBhqB,KAAKqO,KAAKgW,SAAS,EAAGrI,GACtB+Q,EAAQ,CACNjL,UAAW9hB,KAAKqO,KAAKsN,QACrB8R,YAAazR,EAAKhvB,UAGpB2/B,EAAW1M,SAAS8J,eAAe/N,GACnChc,KAAK8e,OAAOO,aAAarf,KAAKmb,OAAO5c,OAAOouB,GAAW3sB,KAAKqO,MAC5D0e,EAAQ,CACNjL,UAAW6K,EACXc,YAAazR,EAAKhvB,UAKxB,OADAmtB,EAAK3Z,KAAO85B,GACLvN,CACT,IAAA5wB,IAAA,SAAAf,MAEA,SAAOiqB,EAA6B9T,GAAkC,IAAAuK,EAAA,KACpEuJ,EAAU3oB,SAAS,SAAA+oB,GACjB,GACoB,kBAAlBA,EAASjf,OACRif,EAAS7X,SAAWkO,EAAK4e,WACxBjV,EAAS7X,SAAWkO,EAAK6e,YAC3B,CACA,IAAM5N,EAAQjR,EAAK8R,QAAQnI,EAAS7X,QAChCmf,IAAOxb,EAAQwb,MAAQA,EAC7B,CACF,GACF,KA5ES,CAASvF,IA+EpB,YC1FkC,IAE5BqT,GAAW,WAGf,SAAAA,EACU1f,EACAzJ,IACRxE,EAAAA,EAAAA,GAAA,KAAA2tB,IAAAtrB,EAAAA,EAAAA,GAAA,oBALY,GAKZ,KAFQ4L,OAAAA,EAAc,KACdzJ,QAAAA,EAER1R,KAAK86B,gBACP,QAAA3tB,EAAAA,EAAAA,GAAA0tB,EAAA,EAAA1+B,IAAA,iBAAAf,MAEQ,WAAiB,IAAAyf,EAAA,KACvB7a,KAAKmb,OAAOQ,QAAQ8S,iBAAiB,oBAAqB,SAAA9c,GACnDkJ,EAAKkgB,aACRlgB,EAAKmgB,uBAAuBrpB,EAEhC,IAEA3R,KAAKmb,OAAOQ,QAAQ8S,iBAAiB,kBAAmB,SAAA9c,GAClDkJ,EAAKkgB,aAIPvmB,gBAAe,WACbqG,EAAKogB,qBAAqBtpB,EAC5B,GAEJ,GACF,IAAAxV,IAAA,yBAAAf,MAEQ,SAAuBuW,GAC7B,IAAM8J,EACJ9J,EAAM/D,kBAAkB2N,KACpBvb,KAAKmb,OAAOU,KAAKlK,EAAM/D,QAAQ,GAC/B,MAEF6N,GAAUA,aAAgB8e,KAC5Bv6B,KAAK0R,QAAQiB,KAAKoc,GAAQ1c,OAAO6d,yBAA0Bve,GAC3D3R,KAAKmb,OAAOqa,aACZx1B,KAAK0R,QAAQiB,KAAKoc,GAAQ1c,OAAO8d,kBAAmBxe,GACpD3R,KAAK+6B,aAAc,EAEvB,IAAA5+B,IAAA,uBAAAf,MAEQ,SAAqBuW,GAC3B3R,KAAK0R,QAAQiB,KAAKoc,GAAQ1c,OAAO+d,uBAAwBze,GACzD3R,KAAKmb,OAAOwb,WACZ32B,KAAK0R,QAAQiB,KAAKoc,GAAQ1c,OAAOge,gBAAiB1e,GAClD3R,KAAK+6B,aAAc,CACrB,KAhDe,GAmDjB,Y,OC1CMG,GAAK,WAWT,SAAAA,EACYtM,EACA7U,IACV7M,EAAAA,EAAAA,GAAA,KAAAguB,IAAA3rB,EAAAA,EAAAA,GAAA,eALiC,CAAC,GAKlC,KAFUqf,MAAAA,EAAY,KACZ7U,QAAAA,CACT,QAAA5M,EAAAA,EAAAA,GAAA+tB,EAAA,EAAA/+B,IAAA,OAAAf,MAEH,WAAO,IAAAyf,EAAA,KACLvgB,OAAOkD,KAAKwC,KAAK+Z,QAAQohB,SAASz+B,SAAS,SAAAkO,GACf,MAAtBiQ,EAAKsgB,QAAQvwB,IACfiQ,EAAKugB,UAAUxwB,EAEnB,GACF,IAAAzO,IAAA,YAAAf,MAOA,SAAUwP,GAER,IAAMywB,EAAcr7B,KAAK4uB,MAAM3pB,YAAW,UAAQ,WAAD7W,OAAYwc,IAK7D,OAJA5K,KAAKm7B,QAAQvwB,GAAQ,IAAIywB,EACvBr7B,KAAK4uB,MACL5uB,KAAK+Z,QAAQohB,QAAQvwB,IAAS,CAAC,GAE1B5K,KAAKm7B,QAAQvwB,EACtB,KArCS,GAqCT0wB,GArCIJ,IAAK3rB,EAAAA,EAAAA,GAAL2rB,GAAK,WACuB,CAC9BC,QAAS,CAAC,KACX5rB,EAAAA,EAAAA,GAHG2rB,GAAK,SAKO,CACdK,QAASL,KAuCb,Y,aCnDMM,GAAoB,SAAAC,GAAa,OACrCA,EAAQC,eAAkBD,EAAQE,cAA6BC,MAAQ,IAAI,EAEvEC,GAAkB,SAAAJ,GACtB,IAAMvI,EAAOuI,EAAQxI,wBACf6I,EACH,gBAAiBL,GAChBhtC,KAAKstC,IAAI7I,EAAKO,OAAUgI,EAAwBO,aAClD,EACIC,EACH,iBAAkBR,GACjBhtC,KAAKstC,IAAI7I,EAAKI,QAAWmI,EAAwBS,cACnD,EACF,MAAO,CACL7I,IAAKH,EAAKG,IACVG,MAAON,EAAKK,KAAOkI,EAAQU,YAAcL,EACzC1I,OAAQF,EAAKG,IAAMoI,EAAQW,aAAeH,EAC1C1I,KAAML,EAAKK,KAEf,EAEM8I,GAAqB,SAAAjhC,GACzB,IAAMwY,EAASoM,SAAS5kB,EAAO,IAC/B,OAAOooB,OAAO7P,MAAMC,GAAU,EAAIA,CACpC,EAIM0oB,GAAoB,SACxBC,EACAC,EACAC,EACAC,EACAC,EACAC,GAEA,OAAIL,EAAcE,GAAeD,EAAYE,EACpC,EAGLH,EAAcE,IACPA,EAAcF,EAAcI,GAGnCH,EAAYE,EACPF,EAAYD,EAAcG,EAAYD,EACzCF,EAAcI,EAAqBF,EACnCD,EAAYE,EAAYE,EAEvB,CACT,EAEMC,GAAqB,SAACpiC,EAAmBqiC,GAC7C,IAAM7c,EAAWxlB,EAAKsiC,cAElB7J,EAAO4J,EAEPE,EAA0BviC,EAC9B,MAAOuiC,EAAS,KAAAC,EAAAC,EAAAC,EAAAC,EACRC,EAA0BL,IAAY/c,EAASyF,KAC/C4X,EAAWD,EACb,CACEhK,IAAK,EACLG,MAC8B,QADzByJ,EACkB,QADlBC,EACHK,OAAOC,sBAAc,IAAAN,OAAA,EAArBA,EAAuBzJ,aAAK,IAAAwJ,EAAAA,EAC5Bhd,EAASwd,gBAAgBtB,YAC3B/I,OAC+B,QADzB+J,EACiB,QADjBC,EACJG,OAAOC,sBAAc,IAAAJ,OAAA,EAArBA,EAAuB9J,cAAM,IAAA6J,EAAAA,EAC7Bld,EAASwd,gBAAgBrB,aAC3B7I,KAAM,GAERsI,GAAemB,GAEblf,EAAQ4f,iBAAiBV,GACzBW,EAAkBrB,GACtBpJ,EAAKK,KACLL,EAAKM,MACL8J,EAAS/J,KACT+J,EAAS9J,MACT6I,GAAkBve,EAAM8f,mBACxBvB,GAAkBve,EAAM+f,qBAEpBC,EAAkBxB,GACtBpJ,EAAKG,IACLH,EAAKE,OACLkK,EAASjK,IACTiK,EAASlK,OACTiJ,GAAkBve,EAAMigB,kBACxB1B,GAAkBve,EAAMkgB,sBAE1B,GAAIL,GAAmBG,EACrB,GAAIT,EAAgB,KAAAY,EACE,QAApBA,EAAAhe,EAASie,mBAAW,IAAAD,GAApBA,EAAsBE,SAASR,EAAiBG,EAClD,KAAO,CACL,IAAAM,EAAkCpB,EAA1BqB,EAAUD,EAAVC,WAAYC,EAAAF,EAAAE,UAChBR,IACFd,EAAQsB,WAAaR,GAEnBH,IACFX,EAAQqB,YAAcV,GAExB,IAAMY,EAAevB,EAAQqB,WAAaA,EACpCG,EAAcxB,EAAQsB,UAAYA,EACxCpL,EAAO,CACLK,KAAML,EAAKK,KAAOgL,EAClBlL,IAAKH,EAAKG,IAAMmL,EAChBhL,MAAON,EAAKM,MAAQ+K,EACpBnL,OAAQF,EAAKE,OAASoL,EAE1B,CAGFxB,EACEK,GAAqC,UAAnBvf,EAAMiH,SACpB,KACAyW,GAAiBwB,EACzB,CACF,EAEA,YC5HA,IAAMyB,GAA0B,IAC1BC,GAAe,CAAC,QAAS,QAAS,SAAU,SAAU,SAAU,QAEhEC,GAA4B,SAChCrY,EACAsY,EACA7Q,GAEA,IAAM3F,EAAW,IAAIjL,GA4BrB,OA3BAuhB,GAAahiC,SAAS,SAAAkO,GACpB,IAAMi0B,EAAWD,EAAevjB,MAAMzQ,GAClCi0B,GAAUzW,EAASQ,SAASiW,EAClC,IAEAvY,EAAQ5pB,SAAS,SAAAkO,GACf,IAAI2T,EAASqgB,EAAevjB,MAAMzQ,GAC7B2T,GACHwP,EAAMmB,MAAM,oBAAD9gC,OACWwc,EAAK,qEAG7B,IAAIk0B,EAAa,EACjB,MAAOvgB,EAAQ,KAAAwgB,EAKb,GAJA3W,EAASQ,SAASrK,GAClBA,EAAS,aAAcA,GAAiC,QAA3BwgB,EAAGxgB,EAAOiB,yBAAiB,IAAAuf,EAAAA,EAAW,KAEnED,GAAc,EACVA,EAAaL,GAAyB,CACxC1Q,EAAMmB,MAAM,0DAAD9gC,OACiDwc,EAAK,MAEjE,KACF,CACF,CACF,IAEOwd,CACT,EAEA,Y,kCCdM2F,GAAQM,GAAO,SAEf2Q,GAAiB,IAAIC,GAC3BA,GAAqBrc,QAAU,QA+B/B,IAcMsc,GAAK,WAuHT,SAAAA,EAAYC,GAA6D,IAAAtkB,EAAA,MAAA3N,EAAAA,EAAAA,GAAA,KAAAgyB,GAAA,IAA5BnlB,EAAqBxO,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAG,CAAC,EAGpE,GAFAvL,KAAK+Z,QAAUqlB,GAAaD,EAAWplB,GACvC/Z,KAAKm/B,UAAYn/B,KAAK+Z,QAAQolB,UACR,MAAlBn/B,KAAKm/B,UAAT,CAIIn/B,KAAK+Z,QAAQgU,OACfmR,EAAMnR,MAAM/tB,KAAK+Z,QAAQgU,OAE3B,IAAM2L,EAAO15B,KAAKm/B,UAAUrF,UAAU/b,OACtC/d,KAAKm/B,UAAU5hB,UAAUliB,IAAI,gBAC7B2E,KAAKm/B,UAAUrF,UAAY,GAC3BjL,GAAU3zB,IAAI8E,KAAKm/B,UAAWn/B,MAC9BA,KAAKvF,KAAOuF,KAAKq/B,aAAa,aAC9Br/B,KAAKvF,KAAK8iB,UAAUliB,IAAI,YACxB2E,KAAK0R,QAAU,IAAIqd,GACnB,IAAMuQ,EAAiBL,GAAqBniB,SACtC0M,EAAaxpB,KAAK+Z,QAAQqO,SAAS/M,MAAMikB,GAC/C,IAAK9V,KAAgB,aAAcA,GACjC,MAAM,IAAI1c,MAAM,oCAAD1e,OACuBkxC,EAAe,WAiDvD,GA9CAt/B,KAAKmb,OAAS,IAAIqO,EAAWxpB,KAAK+Z,QAAQqO,SAAUpoB,KAAKvF,KAAM,CAC7DiX,QAAS1R,KAAK0R,UAEhB1R,KAAKu/B,OAAS,IAAIjK,GAAOt1B,KAAKmb,QAC9Bnb,KAAK0sB,UAAY,IAAIgE,GAAU1wB,KAAKmb,OAAQnb,KAAK0R,SACjD1R,KAAKw/B,YAAc,IAAI3E,GAAY76B,KAAKmb,OAAQnb,KAAK0R,SACrD1R,KAAKy/B,MAAQ,IAAIz/B,KAAK+Z,QAAQ0lB,MAAMz/B,KAAMA,KAAK+Z,SAC/C/Z,KAAK0/B,SAAW1/B,KAAKy/B,MAAMrE,UAAU,YACrCp7B,KAAK2/B,UAAY3/B,KAAKy/B,MAAMrE,UAAU,aACtCp7B,KAAK4/B,QAAU5/B,KAAKy/B,MAAMrE,UAAU,WACpCp7B,KAAK6/B,SAAW7/B,KAAKy/B,MAAMrE,UAAU,YACrCp7B,KAAKy/B,MAAMrE,UAAU,SACrBp7B,KAAKy/B,MAAMrE,UAAU,UACrBp7B,KAAKy/B,MAAMK,OACX9/B,KAAK0R,QAAQ2B,GAAG0b,GAAQ1c,OAAOod,eAAgB,SAAAjpB,GACzCA,IAASuoB,GAAQ1c,OAAO4d,aAC1BpV,EAAKpgB,KAAK8iB,UAAUwiB,OAAO,WAAYllB,EAAK0kB,OAAOS,UAEvD,IACAhgC,KAAK0R,QAAQ2B,GAAG0b,GAAQ1c,OAAOyd,eAAe,SAAChtB,EAAQuiB,GACrD,IAAM5uB,EAAWokB,EAAK6R,UAAUmE,UAChCoP,EAAmBplB,EAAK6R,UAAUuI,WAAUiL,GAAAhxB,EAAAA,EAAAA,GAAA+wB,EAAA,GAArCtpC,EAAQupC,EAAA,GACTjI,EACJxhC,GAAYE,EAAW,CAAEF,SAAAA,EAAUE,SAAAA,QAAayF,EAClD+jC,GAAOpiC,KACL8c,GACA,kBAAMA,EAAK0kB,OAAO9W,OAAO,KAAMpD,EAAW4S,EAAc,GACxDn1B,EAEJ,IACA9C,KAAK0R,QAAQ2B,GAAG0b,GAAQ1c,OAAO0d,qBAAqB,SAACtU,EAAMxsB,GACzD,IAAMwH,EAAWokB,EAAK6R,UAAUmE,UAChCuP,EAAmBvlB,EAAK6R,UAAUuI,WAAUoL,GAAAnxB,EAAAA,EAAAA,GAAAkxB,EAAA,GAArCzpC,EAAQ0pC,EAAA,GACTpI,EACJxhC,GAAYE,EAAW,CAAEF,SAAAA,EAAUE,SAAAA,QAAayF,EAClD+jC,GAAOpiC,KACL8c,GACA,WACE,IAAM4c,GAAS,IAAIzqB,IAChBM,OAAOmO,EAAK9f,OAAOkf,IACnBvN,QAAMiC,EAAAA,EAAAA,GAAC,CAAC,EAAEkM,EAAKyD,QAAQpC,SAAW7tB,IACrC,OAAO4rB,EAAK0kB,OAAO9W,OAAOgP,EAAQ,GAAIQ,EACxC,GACAiH,EAAMnnB,QAAQyY,KAElB,IACIkJ,EAAM,CACR,IAAMlC,EAAWx3B,KAAK2/B,UAAU70B,QAAQ,CACtC4uB,KAAM,GAAFtrC,OAAKsrC,EAAK,eACd1d,KAAM,OAERhc,KAAKsgC,YAAY9I,EACnB,CACAx3B,KAAK4/B,QAAQ3/B,QACTD,KAAK+Z,QAAQwmB,aACfvgC,KAAKvF,KAAK4f,aAAa,mBAAoBra,KAAK+Z,QAAQwmB,aAEtDvgC,KAAK+Z,QAAQymB,UACfxgC,KAAKygC,UAEPzgC,KAAK0gC,oBAAqB,CA9E1B,MAFE3S,GAAMmB,MAAM,0BAA2BiQ,EAiF3C,QAAAhyB,EAAAA,EAAAA,GAAA+xB,EAAA,EAAA/iC,IAAA,eAAAf,MAIA,SACE+jC,GAE8B,IAD9B5d,EAAoBhW,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAG,KAEvB,GAAyB,kBAAd4zB,EAAwB,CACjC,IAAMpiB,EAAYoiB,EAClBA,EAAYlf,SAASC,cAAc,OACnCif,EAAU5hB,UAAUliB,IAAI0hB,EAC1B,CAEA,OADA/c,KAAKm/B,UAAU9f,aAAa8f,EAAW5d,GAChC4d,CACT,IAAAhjC,IAAA,OAAAf,MAEA,WACE4E,KAAK0sB,UAAUiF,SAAS,KAC1B,IAAAx1B,IAAA,aAAAf,MAIA,SACE1E,EACA1J,EACA8V,GACO,IAAAgZ,EAAA,KACP6kB,EAC4BC,GAASlqC,EAAO1J,EAAQ8V,GAAO+9B,GAAA3xB,EAAAA,EAAAA,GAAAyxB,EAAA,GAC3D,OADCjqC,EAAKmqC,EAAA,GAAE7zC,EAAM6zC,EAAA,GAAI/9B,EAAM+9B,EAAA,GACjBV,GAAOpiC,KACZiC,MACA,WACE,OAAO8b,EAAKyjB,OAAOuB,WAAWpqC,EAAO1J,EACvC,GACA8V,EACApM,GACC,EAAI1J,EAET,IAAAmP,IAAA,UAAAf,MAEA,WACE4E,KAAK+gC,QAAO,EACd,IAAA5kC,IAAA,eAAAf,MAEA,SAAgB4lC,GACdhhC,KAAK0gC,oBAAqB,EAC1B,IAAMtlC,EAAQ4lC,IAEd,OADAhhC,KAAK0gC,oBAAqB,EACnBtlC,CACT,IAAAe,IAAA,SAAAf,MAEA,WAAuB,IAAhB6lC,IAAO11B,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,KAAAA,UAAA,GACZvL,KAAKmb,OAAO4lB,OAAOE,GACnBjhC,KAAKm/B,UAAU5hB,UAAUwiB,OAAO,eAAgBkB,EAClD,IAAA9kC,IAAA,QAAAf,MAEA,WAAiD,IAA3C2e,EAAoCxO,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAG,CAAC,EAC5CvL,KAAK0sB,UAAU+E,QACV1X,EAAQ2X,eACX1xB,KAAKkhC,yBAET,IAAA/kC,IAAA,SAAAf,MAEA,SACEwP,EACAxP,GAEO,IAAAmhB,EAAA,KADPzZ,EAAqByI,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAGwjB,GAAQhX,QAAQuY,IAExC,OAAO6P,GAAOpiC,KACZiC,MACA,WACE,IAAM+sB,EAAQxQ,EAAKmX,cAAa,GAC5B+D,EAAS,IAAIzqB,GACjB,GAAa,MAAT+f,EAAe,OAAO0K,EAC1B,GAAIlb,EAAKpB,OAAOE,MAAMzQ,EAAMq0B,GAAgB3lB,OAC1Cme,EAASlb,EAAKgjB,OAAO4B,WAAWpU,EAAMr2B,MAAOq2B,EAAM//B,QAAMuiB,EAAAA,EAAAA,GAAA,GACtD3E,EAAOxP,QAEL,IAAqB,IAAjB2xB,EAAM//B,OAEf,OADAuvB,EAAKmQ,UAAUnO,OAAO3T,EAAMxP,GACrBq8B,EAEPA,EAASlb,EAAKgjB,OAAO6B,WAAWrU,EAAMr2B,MAAOq2B,EAAM//B,QAAMuiB,EAAAA,EAAAA,GAAA,GACtD3E,EAAOxP,GAEZ,CAEA,OADAmhB,EAAK8kB,aAAatU,EAAOgC,GAAQhX,QAAQwY,QAClCkH,CACT,GACA30B,EAEJ,IAAA3G,IAAA,aAAAf,MAeA,SACE1E,EACA1J,EACA4d,EACAxP,EACA0H,GACO,IACHwjB,EADGlI,EAAA,KAEPkjB,EACmCV,GACjClqC,EACA1J,EAEA4d,EACAxP,EACA0H,GACDy+B,GAAAryB,EAAAA,EAAAA,GAAAoyB,EAAA,GACD,OARC5qC,EAAK6qC,EAAA,GAAEv0C,EAAMu0C,EAAA,GAAEjb,EAAOib,EAAA,GAAEz+B,EAAMy+B,EAAA,GAQxBpB,GAAOpiC,KACZiC,MACA,WACE,OAAOoe,EAAKmhB,OAAO4B,WAAWzqC,EAAO1J,EAAQs5B,EAC/C,GACAxjB,EACApM,EACA,EAEJ,IAAAyF,IAAA,aAAAf,MAqBA,SACE1E,EACA1J,EACA4d,EACAxP,EACA0H,GACO,IACHwjB,EADGhI,EAAA,KAEPkjB,EACmCZ,GAEjClqC,EACA1J,EACA4d,EACAxP,EACA0H,GACD2+B,GAAAvyB,EAAAA,EAAAA,GAAAsyB,EAAA,GACD,OARC9qC,EAAK+qC,EAAA,GAAEz0C,EAAMy0C,EAAA,GAAEnb,EAAOmb,EAAA,GAAE3+B,EAAM2+B,EAAA,GAQxBtB,GAAOpiC,KACZiC,MACA,WACE,OAAOse,EAAKihB,OAAO6B,WAAW1qC,EAAO1J,EAAQs5B,EAC/C,GACAxjB,EACApM,EACA,EAEJ,IAAAyF,IAAA,YAAAf,MAEA,SAAU1E,GAAkD,IAA3B1J,EAAMue,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAG,EACpCm2B,EAAwB,KAM5B,GAJEA,EADmB,kBAAVhrC,EACAsJ,KAAK0sB,UAAUiV,UAAUjrC,EAAO1J,GAEhCgT,KAAK0sB,UAAUiV,UAAUjrC,EAAMA,MAAOA,EAAM1J,SAElD00C,EAAQ,OAAO,KACpB,IAAME,EAAkB5hC,KAAKm/B,UAAUlM,wBACvC,MAAO,CACLG,OAAQsO,EAAOtO,OAASwO,EAAgBvO,IACxCC,OAAQoO,EAAOpO,OACfC,KAAMmO,EAAOnO,KAAOqO,EAAgBrO,KACpCC,MAAOkO,EAAOlO,MAAQoO,EAAgBrO,KACtCF,IAAKqO,EAAOrO,IAAMuO,EAAgBvO,IAClCI,MAAOiO,EAAOjO,MAElB,IAAAt3B,IAAA,cAAAf,MAEA,WAA0D,IAA9C1E,EAAK6U,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAG,EAAGve,EAAMue,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAGvL,KAAK6hC,YAAcnrC,EAAKorC,EACpClB,GAASlqC,EAAO1J,GAAO+0C,GAAA7yB,EAAAA,EAAAA,GAAA4yB,EAAA,GACzC,OADCprC,EAAKqrC,EAAA,GAAE/0C,EAAM+0C,EAAA,GACP/hC,KAAKu/B,OAAOhI,YAAY7gC,EAAO1J,EACxC,IAAAmP,IAAA,YAAAf,MAMA,WAGiC,IAF/B1E,EAAqB6U,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAGvL,KAAK0zB,cAAa,GAC1C1mC,EAAMue,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAG,EAET,MAAqB,kBAAV7U,EACFsJ,KAAKu/B,OAAOyC,UAAUtrC,EAAO1J,GAE/BgT,KAAKu/B,OAAOyC,UAAUtrC,EAAMA,MAAOA,EAAM1J,OAClD,IAAAmP,IAAA,WAAAf,MAEA,SAASqgB,GACP,OAAOA,EAAK9f,OAAOqE,KAAKmb,OAC1B,IAAAhf,IAAA,YAAAf,MAEA,WACE,OAAO4E,KAAKmb,OAAOnuB,QACrB,IAAAmP,IAAA,UAAAf,MAEA,SAAQ1E,GACN,OAAOsJ,KAAKmb,OAAOoR,KAAK71B,EAC1B,IAAAyF,IAAA,UAAAf,MAEA,SAAQ1E,GACN,OAAOsJ,KAAKmb,OAAOjL,KAAKxZ,EAC1B,IAAAyF,IAAA,WAAAf,MAIA,WAG0B,IAFxB1E,EAAqB6U,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAG,EACxBve,EAAMue,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAGiY,OAAOC,UAEhB,MAAqB,kBAAV/sB,EACFsJ,KAAKmb,OAAO8Q,MAAMv1B,EAAMA,MAAOA,EAAM1J,QAEvCgT,KAAKmb,OAAO8Q,MAAMv1B,EAAO1J,EAClC,IAAAmP,IAAA,YAAAf,MAEA,SAAUwP,GACR,OAAO5K,KAAKy/B,MAAMtE,QAAQvwB,EAC5B,IAAAzO,IAAA,eAAAf,MAIA,WAA0C,IAA7Bq2B,EAAKlmB,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,IAAAA,UAAA,GAGhB,OAFIkmB,GAAOzxB,KAAKyxB,QAChBzxB,KAAKyoB,SACEzoB,KAAK0sB,UAAUuI,WAAW,EACnC,IAAA94B,IAAA,kBAAAf,MAIA,WAA4D,IAC3BgqB,EADjB1uB,EAAqB6U,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAG,EAAGve,EAAeue,UAAAve,OAAA,EAAAue,UAAA,QAAAnP,EACnC,kBAAV1F,IACT1J,EAAe,QAATo4B,EAAGp4B,SAAM,IAAAo4B,EAAAA,EAAIplB,KAAK6hC,YAAcnrC,GAExC,IAAAurC,EACkBrB,GAASlqC,EAAO1J,GAAOk1C,GAAAhzB,EAAAA,EAAAA,GAAA+yB,EAAA,GACzC,OADCvrC,EAAKwrC,EAAA,GAAEl1C,EAAMk1C,EAAA,GACPliC,KAAKu/B,OAAO4C,QAAQzrC,EAAO1J,EACpC,IAAAmP,IAAA,UAAAf,MAIA,WAA4D,IAC3BgnC,EADzB1rC,EAAqB6U,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAG,EAAGve,EAAeue,UAAAve,OAAA,EAAAue,UAAA,QAAAnP,EAC3B,kBAAV1F,IACT1J,EAAe,QAATo1C,EAAGp1C,SAAM,IAAAo1C,EAAAA,EAAIpiC,KAAK6hC,YAAcnrC,GAExC,IAAA2rC,EACkBzB,GAASlqC,EAAO1J,GAAOs1C,GAAApzB,EAAAA,EAAAA,GAAAmzB,EAAA,GACzC,OADC3rC,EAAK4rC,EAAA,GAAEt1C,EAAMs1C,EAAA,GACPtiC,KAAKu/B,OAAO3H,QAAQlhC,EAAO1J,EACpC,IAAAmP,IAAA,WAAAf,MAEA,WACE,OAAO4E,KAAK0sB,UAAUyE,UACxB,IAAAh1B,IAAA,cAAAf,MAEA,SACE1E,EACAihC,EACAv8B,GAEO,IAAAojB,EAAA,KADP1b,EAAqByI,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAG2zB,EAAMnnB,QAAQuY,IAEtC,OAAO6P,GAAOpiC,KACZiC,MACA,WACE,OAAOwe,EAAK+gB,OAAOgD,YAAY7rC,EAAOihC,EAAOv8B,EAC/C,GACA0H,EACApM,EAEJ,IAAAyF,IAAA,aAAAf,MAgBA,SACE1E,EACAslB,EACApR,EACAxP,EACA0H,GACO,IACHwjB,EADG7H,EAAA,KAGP+jB,EAC6B5B,GAASlqC,EAAO,EAAGkU,EAAMxP,EAAO0H,GAAO2/B,GAAAvzB,EAAAA,EAAAA,GAAAszB,EAAA,GACpE,OADC9rC,EAAK+rC,EAAA,GAAInc,EAAOmc,EAAA,GAAE3/B,EAAM2/B,EAAA,GAClBtC,GAAOpiC,KACZiC,MACA,WACE,OAAOye,EAAK8gB,OAAOmD,WAAWhsC,EAAOslB,EAAMsK,EAC7C,GACAxjB,EACApM,EACAslB,EAAKhvB,OAET,IAAAmP,IAAA,YAAAf,MAEA,WACE,OAAO4E,KAAKmb,OAAOwnB,WACrB,IAAAxmC,IAAA,MAAAf,MAEA,WAA+D,IAAA+5B,EAC7D,OAAOA,EAAAn1B,KAAK0R,SAAQ6B,IAAGH,MAAA+hB,EAAC5pB,UAC1B,IAAApP,IAAA,KAAAf,MA6BA,WAAsE,IAAAg6B,EACpE,OAAOA,EAAAp1B,KAAK0R,SAAQ2B,GAAED,MAAAgiB,EAAC7pB,UACzB,IAAApP,IAAA,OAAAf,MAEA,WAAiE,IAAAwnC,EAC/D,OAAOA,EAAA5iC,KAAK0R,SAAQF,KAAI4B,MAAAwvB,EAACr3B,UAC3B,IAAApP,IAAA,eAAAf,MAEA,SAAa1E,EAAe1J,EAAgB8V,GAA+B,IAAA0f,EAAA,KAAAqgB,EAC7CjC,GAASlqC,EAAO1J,EAAQ8V,GAAOggC,GAAA5zB,EAAAA,EAAAA,GAAA2zB,EAAA,GAC3D,OADCnsC,EAAKosC,EAAA,GAAE91C,EAAM81C,EAAA,GAAIhgC,EAAMggC,EAAA,GACjB3C,GAAOpiC,KACZiC,MACA,WACE,OAAOwiB,EAAK+c,OAAOwD,aAAarsC,EAAO1J,EACzC,GACA8V,EACApM,EAEJ,IAAAyF,IAAA,qBAAAf,MAEA,SAAmB83B,GACjB2J,GAAmB78B,KAAKvF,KAAMy4B,EAChC,GAEA,CAAA/2B,IAAA,iBAAAf,MAGA,WACE8yB,QAAQ8U,KACN,0IAEFhjC,KAAKkhC,yBACP,GAEA,CAAA/kC,IAAA,0BAAAf,MAIA,WACE,IAAM2xB,EAAQ/sB,KAAK0sB,UAAUmE,UACvB6Q,EAAS3U,GAAS/sB,KAAK0sB,UAAUiV,UAAU5U,EAAMr2B,MAAOq2B,EAAM//B,QAChE00C,GACF1hC,KAAK68B,mBAAmB6E,EAE5B,IAAAvlC,IAAA,cAAAf,MAEA,SACEnM,GAEO,IAAA6zB,EAAA,KADPhgB,EAAqByI,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAGwjB,GAAQhX,QAAQuY,IAExC,OAAO6P,GAAOpiC,KACZiC,MACA,WACE/Q,EAAQ,IAAI+d,GAAM/d,GAClB,IAAMjC,EAAS81B,EAAK+e,YAEdoB,EAAUngB,EAAKyc,OAAOuB,WAAW,EAAG9zC,GACpCk2C,EAAUpgB,EAAKyc,OAAO7H,eAAe,EAAGzoC,GAExCk0C,EAAUrgB,EAAKyc,OAAOuB,WAAWhe,EAAK+e,YAAc,EAAG,GAC7D,OAAOoB,EAAQt3B,QAAQu3B,GAASv3B,QAAQw3B,EAC1C,GACArgC,EAEJ,IAAA3G,IAAA,eAAAf,MAKA,SACE1E,EACA1J,EACA8V,GAEA,GAAa,MAATpM,EAEFsJ,KAAK0sB,UAAUiF,SAAS,KAAM3kC,GAAUkyC,EAAMnnB,QAAQuY,SACjD,CACL,IAAA8S,EAC4BxC,GAASlqC,EAAO1J,EAAQ8V,GAAOugC,GAAAn0B,EAAAA,EAAAA,GAAAk0B,EAAA,GAA1D1sC,EAAK2sC,EAAA,GAAEr2C,EAAMq2C,EAAA,GAAIvgC,EAAMugC,EAAA,GACxBrjC,KAAK0sB,UAAUiF,SAAS,IAAIlB,GAAMhiC,KAAKoE,IAAI,EAAG6D,GAAQ1J,GAAS8V,GAC3DA,IAAWisB,GAAQhX,QAAQwY,QAC7BvwB,KAAKkhC,yBAET,CACF,IAAA/kC,IAAA,UAAAf,MAEA,SAAQ4gB,GAA2D,IAA7ClZ,EAAqByI,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAGwjB,GAAQhX,QAAQuY,IACtDrhC,GAAQ,IAAI+d,IAAQK,OAAO2O,GACjC,OAAOhc,KAAKsgC,YAAYrxC,EAAO6T,EACjC,IAAA3G,IAAA,SAAAf,MAEA,WAAqD,IAA9C0H,EAAqByI,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAGwjB,GAAQhX,QAAQyY,KACvCiH,EAASz3B,KAAKmb,OAAOsN,OAAO3lB,GAGlC,OAFA9C,KAAK0sB,UAAUjE,OAAO3lB,GAEf20B,CACT,IAAAt7B,IAAA,iBAAAf,MAEA,SACEnM,GAEO,IAAA40B,EAAA,KADP/gB,EAAqByI,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAGwjB,GAAQhX,QAAQuY,IAExC,OAAO6P,GAAOpiC,KACZiC,MACA,WAEE,OADA/Q,EAAQ,IAAI+d,GAAM/d,GACX40B,EAAK0b,OAAOvH,WAAW/oC,EAChC,GACA6T,GACA,EAEJ,MAAA3G,IAAA,QAAAf,MAxpBA,SAAakoC,IACG,IAAVA,IACFA,EAAQ,OAEVjV,GAAOP,MAAMwV,EACf,IAAAnnC,IAAA,OAAAf,MAEA,SAAY+e,GAA4B,IAAhByB,EAAMrQ,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,IAAAA,UAAA,GAC5B,OAAOsjB,GAAUrtB,IAAI2Y,IAAS6kB,GAAenjB,KAAK1B,EAAMyB,EAC1D,IAAAzf,IAAA,SAAAf,MAOA,SAAcwP,GAIZ,OAH0B,MAAtB5K,KAAKujC,QAAQ34B,IACfmjB,GAAMmB,MAAM,iBAAD9gC,OAAkBwc,EAAK,sCAE7B5K,KAAKujC,QAAQ34B,EACtB,IAAAzO,IAAA,WAAAf,MAkBA,WAAsC,IAAAkqB,EAAA,KACpC,GAAuB,kBAAnB/Z,UAAAve,QAAA,OAAAoP,EAAAmP,UAAA,IAA6B,CAC/B,IAAMqC,EAAMrC,UAAAve,QAAA,OAAAoP,EAAAmP,UAAA,GACNi4B,KAAaj4B,UAAAve,QAAA,OAAAoP,EAAAmP,UAAA,IAEbX,EAAO,aAAcgD,EAASA,EAAOiM,SAAWjM,EAAOkP,SACzC,kBAATlS,EAGT5K,KAAK4oB,SAAS,WAADx6B,OAAYwc,GAAQgD,EAAQ41B,GAEzClpC,OAAOkD,KAAKoQ,GAAQlR,SAAS,SAAAP,GAC3BmpB,EAAKsD,SAASzsB,EAAKyR,EAAOzR,GAAMqnC,EAClC,GAEJ,KAAO,CACL,IAAMxe,EAAIzZ,UAAAve,QAAA,OAAAoP,EAAAmP,UAAA,GACJqC,EAAMrC,UAAAve,QAAA,OAAAoP,EAAAmP,UAAA,GACNi4B,KAAaj4B,UAAAve,QAAA,OAAAoP,EAAAmP,UAAA,IAEO,MAAtBvL,KAAKujC,QAAQve,IAAkBwe,GACjCzV,GAAMiV,KAAK,eAAD50C,OAAgB42B,EAAK,SAAQpX,GAEzC5N,KAAKujC,QAAQve,GAAQpX,GAElBoX,EAAKye,WAAW,WAAaze,EAAKye,WAAW,cAC9C71B,GACkB,mBAAXA,GACa,aAApBA,EAAOkP,UAEPkiB,GAAepW,SAAShb,GAEK,oBAApBA,EAAOgb,UAChBhb,EAAOgb,SAASoW,GAEpB,CACF,KApGS,GAorBX,SAAS0E,GAAgBC,GACvB,MAA2B,kBAAbA,EACV1jB,SAAS2jB,cAA2BD,GACpCA,CACN,CAEA,SAASE,GAAmBC,GAC1B,OAAOxpC,OAAOyF,QAAc,OAAN+jC,QAAM,IAANA,EAAAA,EAAU,CAAC,GAAG93B,QAClC,SAAC+3B,EAAQvU,GAAA,IAAAwU,GAAA90B,EAAAA,EAAAA,GAAcsgB,EAAA,GAAXrzB,EAAG6nC,EAAA,GAAE5oC,EAAK4oC,EAAA,GAAC,OAAA3X,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAClB0X,GAAQ,IAAAx0B,EAAAA,EAAAA,GAAA,GACVpT,GAAgB,IAAVf,EAAiB,CAAC,EAAIA,GAC9B,GACD,CAAC,EAEL,CAEA,SAAS6oC,GAA+BC,GACtC,OAAO5pC,OAAO6pC,YACZ7pC,OAAOyF,QAAQmkC,GAAK12B,QAAQ,SAAAtN,GAAK,YAAkB9D,IAAb8D,EAAM,EAAgB,IAEhE,CAEA,SAASk/B,GACPgF,EACArqB,GAEA,IAAMolB,EAAYuE,GAAgBU,GAClC,IAAKjF,EACH,MAAM,IAAIryB,MAAM,2BAGlB,IAAMu3B,GACHtqB,EAAQ0lB,OAAS1lB,EAAQ0lB,QAAUP,GAAMoF,SAAS7E,MAC/CA,EAAQ4E,EACVnJ,GACAgE,GAAK,UAAQ,UAAD9wC,OAAW2rB,EAAQ0lB,QACnC,IAAKA,EACH,MAAM,IAAI3yB,MAAM,iBAAD1e,OAAkB2rB,EAAQ0lB,MAAM,2BAGjD,IAAA8E,EAA2DrF,GAAMoF,SAAhDE,EAAmBD,EAA5BpJ,QAAiCsJ,EAAA7vB,EAAA2vB,EAAAG,IACzCC,EAA2DlF,EAAM6E,SAAhDM,EAAmBD,EAA5BxJ,QAAiC0J,EAAAjwB,EAAA+vB,EAAAG,IAErCC,EAAoBlB,GAAmB9pB,EAAQohB,SAG5B,MAArB4J,GACAA,EAAkBC,SAClBD,EAAkBC,QAAQ//B,cAAgB3K,SAE1CyqC,GAAiB1Y,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACZ0Y,GAAiB,IACpBC,QAAS,CAAE7F,UAAW4F,EAAkBC,YAI5C,IAAM7J,EAA2CljB,GAC/C,CAAC,EACD4rB,GAAmBW,GACnBX,GAAmBe,GACnBG,GAGIjB,GAAMzX,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACPoY,GACAR,GAA+BY,IAC/BZ,GAA+BlqB,IAGhCqO,EAAWrO,EAAQqO,SAWvB,OAVIA,EACErO,EAAQuM,SACVyH,GAAMiV,KAAK,6DAGb5a,EAAWrO,EAAQuM,QACfqY,GAA0B5kB,EAAQuM,QAASwd,EAAO1b,SAAU2F,IAC5D+V,EAAO1b,UAGbiE,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACKyX,GAAM,IACT1b,SAAAA,EACA+W,UAAAA,EACAM,MAAAA,EACAtE,QAAS7gC,OAAOyF,QAAQo7B,GAASnvB,QAC/B,SAACi5B,EAAmBC,GAAoB,IAAAC,GAAAj2B,EAAAA,EAAAA,GAALg2B,EAAA,GAAZt6B,EAAIu6B,EAAA,GAAE/pC,EAAK+pC,EAAA,GAChC,IAAK/pC,EAAO,OAAO6pC,EAEnB,IAAMG,EAAclG,GAAK,UAAQ,WAAD9wC,OAAYwc,IAC5C,OAAmB,MAAfw6B,GACFrX,GAAMmB,MAAM,eAAD9gC,OACMwc,EAAK,6CAEfq6B,IAET5Y,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACK4Y,GAAmB,IAAA11B,EAAAA,EAAAA,GAAA,GAErB3E,EAAOqN,GAAM,CAAC,EAAGmtB,EAAYd,UAAY,CAAC,EAAGlpC,IAElD,GACA,CAAC,GAEHsmC,OAAQgC,GAAgBI,EAAOpC,SAEnC,CAIA,SAASvB,GACPa,EACAl+B,EACApM,EACAw1B,GAEA,IACGlsB,KAAK2iC,aACN7/B,IAAWisB,GAAQhX,QAAQyY,OAC1BxwB,KAAK0gC,mBAEN,OAAO,IAAI1zB,GAEb,IAAI+f,EAAiB,MAATr2B,EAAgB,KAAOsJ,KAAK0zB,eAClCwE,EAAWl4B,KAAKu/B,OAAOtwC,MACvBwoC,EAASuJ,IAaf,GAZa,MAATjU,KACY,IAAVr2B,IACFA,EAAQq2B,EAAMr2B,OAEH,MAATw1B,EACFa,EAAQwL,GAAWxL,EAAO0K,EAAQ30B,GACf,IAAVopB,IAETa,EAAQwL,GAAWxL,EAAOr2B,EAAOw1B,EAAOppB,IAE1C9C,KAAKqhC,aAAatU,EAAOgC,GAAQhX,QAAQwY,SAEvCkH,EAAOzqC,SAAW,EAAG,KAAAq4C,EAGgBC,EAFjCryB,EAAO,CAAC8b,GAAQ1c,OAAO4d,YAAawH,EAAQS,EAAUp1B,GAE5D,IADAuiC,EAAArlC,KAAK0R,SAAQiB,KAAIS,MAAAiyB,EAAA,CAACtW,GAAQ1c,OAAOod,eAAarhC,OAAK6kB,IAC/CnQ,IAAWisB,GAAQhX,QAAQwY,QAC7B+U,EAAAtlC,KAAK0R,SAAQiB,KAAIS,MAAAkyB,EAAIryB,EAEzB,CACA,OAAOwkB,CACT,CAuCA,SAASmJ,GACPlqC,EACA1J,EACA4d,EACAxP,EACA0H,GAEA,IAAIwjB,EAAmC,CAAC,EA2CxC,MAzC2B,kBAAhB5vB,EAAMA,OAA8C,kBAAjBA,EAAM1J,OAE5B,kBAAXA,GAET8V,EAAS1H,EACTA,EAAQwP,EACRA,EAAO5d,EAEPA,EAAS0J,EAAM1J,OAEf0J,EAAQA,EAAMA,QAGd1J,EAAS0J,EAAM1J,OAEf0J,EAAQA,EAAMA,OAEW,kBAAX1J,IAEhB8V,EAAS1H,EACTA,EAAQwP,EACRA,EAAO5d,EACPA,EAAS,GAGS,YAAhBqN,EAAAA,EAAAA,GAAOuQ,IAET0b,EAAU1b,EAEV9H,EAAS1H,GACgB,kBAATwP,IACH,MAATxP,EACFkrB,EAAQ1b,GAAQxP,EAGhB0H,EAAS8H,GAIb9H,EAASA,GAAUisB,GAAQhX,QAAQuY,IAE5B,CAAC55B,EAAO1J,EAAQs5B,EAASxjB,EAClC,CASA,SAASy1B,GACPxL,EACAr2B,EACA6uC,EACAziC,GAEA,IAEIiL,EACAC,EAHEhhB,EAAmC,kBAAnBu4C,EAA8BA,EAAiB,EACrE,GAAa,MAATxY,EAAe,OAAO,KAI1B,GAAIr2B,GAA4C,oBAA5BA,EAAMga,kBAAkC,KAAAomB,EAC3C,CAAC/J,EAAMr2B,MAAOq2B,EAAMr2B,MAAQq2B,EAAM//B,QAAQgO,KAAK,SAAAwqC,GAAG,OAE/D9uC,EAAMga,kBAAkB80B,EAAK1iC,IAAWisB,GAAQhX,QAAQyY,KAC1D,IAACwG,GAAA9nB,EAAAA,EAAAA,GAAA4nB,EAAA,GAHA/oB,EAAKipB,EAAA,GAAEhpB,EAAGgpB,EAAA,EAIb,KAAO,KAAAyO,EACU,CAAC1Y,EAAMr2B,MAAOq2B,EAAMr2B,MAAQq2B,EAAM//B,QAAQgO,KAAK,SAAAwqC,GAE5D,OAAIA,EAAM9uC,GAAU8uC,IAAQ9uC,GAASoM,IAAWisB,GAAQhX,QAAQyY,KACvDgV,EACLx4C,GAAU,EACLw4C,EAAMx4C,EAGRyB,KAAKoE,IAAI6D,EAAO8uC,EAAMx4C,EAC/B,IAAE04C,GAAAx2B,EAAAA,EAAAA,GAAAu2B,EAAA,GATD13B,EAAK23B,EAAA,GAAE13B,EAAG03B,EAAA,EAUb,CACA,OAAO,IAAIjV,GAAM1iB,EAAOC,EAAMD,EAChC,EAl2BEwB,EAAAA,EAAAA,GApGI2vB,GAAK,WACS,CAChBwC,OAAQ,KACRvG,QAAS,CACPwE,WAAW,EACXD,UAAU,EACVE,SAAS,EACTC,UAAU,GAEZU,YAAa,GACbC,UAAU,EACVpY,SAAU4W,GACVS,MAAO,aACRlwB,EAAAA,EAAAA,GAbG2vB,GAAK,SAcOnQ,GAAQ1c,SAAM9C,EAAAA,EAAAA,GAd1B2vB,GAAK,UAeQnQ,GAAQhX,UAAOxI,EAAAA,EAAAA,GAf5B2vB,GAAK,UAgBuD,UAAa3vB,EAAAA,EAAAA,GAhBzE2vB,GAAK,UAkBiC,CACxCjwC,MAAO+d,GACP24B,UAAW1G,EACX,cAAe5E,GACf,aAAca,KCjGuB,IAEnC0K,GAAS,SAAAze,GAAA,SAAAye,IAAA,OAAA14B,EAAAA,EAAAA,GAAA,KAAA04B,IAAA9qB,EAAAA,GAAAA,GAAA,KAAA8qB,EAAAr6B,UAAA,QAAAwP,EAAAA,GAAAA,GAAA6qB,EAAAze,IAAAha,EAAAA,EAAAA,GAAAy4B,EAAA,EAASte,IAExB,YCcA,SAASue,GAAOpqB,GACd,OAAOA,aAAgBsQ,IAAStQ,aAAgB2Q,EAClD,CAMA,SAAS0Z,GAAYrqB,GACnB,MAAyD,oBAA1CA,EAAwBsqB,aACzC,KAEMC,GAAM,SAAA9d,GAUV,SAAA8d,EACE5d,EACAzM,EAAuB6T,GAEvB,IAAA3U,GAAA3N,EAAAA,EAAAA,GAAA,KAAA84B,GAAA,IADEt0B,EAA+B8d,EAA/B9d,QAOwE,OAL1EmJ,GAAAC,EAAAA,GAAAA,GAAA,KAAAkrB,EAAA,CAAM5d,EAAUzM,IAChBd,EAAKnJ,QAAUA,EACfmJ,EAAKorB,OAAQ,EACbprB,EAAKuO,WACLvO,EAAKkmB,SACLlmB,EAAKc,QAAQ8S,iBAAiB,aAAc,SAAAlyB,GAAC,OAAKse,EAAKqrB,gBAAgB3pC,EAAE,IAACse,CAC5E,QAAAE,EAAAA,GAAAA,GAAAirB,EAAA9d,IAAA/a,EAAAA,EAAAA,GAAA64B,EAAA,EAAA7pC,IAAA,aAAAf,MAEA,WACOtM,MAAMuT,QAAQrC,KAAKimC,SACtBjmC,KAAKimC,MAAQ,GAEjB,IAAA9pC,IAAA,WAAAf,MAEA,WACE,GAAK4E,KAAKimC,MAAV,CACA,IAAM5gB,EAAYrlB,KAAKimC,MACvBjmC,KAAKimC,OAAQ,EACbjmC,KAAKyoB,OAAOpD,EAHW,CAIzB,IAAAlpB,IAAA,YAAAf,MAEA,SAAUqgB,GACRzb,KAAK0R,QAAQiB,KAAKoc,GAAQ1c,OAAOsd,kBAAmBlU,EACtD,IAAAtf,IAAA,cAAAf,MAEA,SAAYqgB,GACVzb,KAAK0R,QAAQiB,KAAKoc,GAAQ1c,OAAOud,oBAAqBnU,EACxD,IAAAtf,IAAA,kBAAAf,MAEA,SAAgBqgB,EAAYgc,GAC1Bz3B,KAAK0R,QAAQiB,KAAKoc,GAAQ1c,OAAO0d,oBAAqBtU,EAAMgc,EAC9D,IAAAt7B,IAAA,WAAAf,MAEA,SAAS1E,EAAe1J,GACtB,IAAAm5C,EAAwBnmC,KAAKkQ,KAAKxZ,GAAM0vC,GAAAl3B,EAAAA,EAAAA,GAAAi3B,EAAA,GAAjCE,EAAKD,EAAA,GAAEzqC,EAAMyqC,EAAA,GACpBE,EAAetmC,KAAKkQ,KAAKxZ,EAAQ1J,GAAOu5C,GAAAr3B,EAAAA,EAAAA,GAAAo3B,EAAA,GAAjCE,EAAID,EAAA,GAEX,IADA7jB,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAqjB,EAAA/oC,WAAA,iBAAAc,KAAA,KAAerH,EAAO1J,GACV,MAARw5C,GAAgBH,IAAUG,GAAQ7qC,EAAS,EAAG,CAChD,GAAI0qC,aAAiBja,IAAcoa,aAAgBpa,GAEjD,YADApsB,KAAKopB,WAGP,IAAMhK,EACJonB,EAAKlnB,SAASwB,gBAAgBqK,GAAQ,KAAOqb,EAAKlnB,SAASwB,KAE7DulB,EAAMphB,aAAauhB,EAAMpnB,GAEzBinB,EAAM/oB,QACR,CACAtd,KAAKopB,UACP,IAAAjtB,IAAA,SAAAf,MAEA,WAAuB,IAAhB6lC,IAAO11B,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,KAAAA,UAAA,GACZvL,KAAK2b,QAAQtB,aAAa,kBAAmB4mB,EAAU,OAAS,QAClE,IAAA9kC,IAAA,WAAAf,MAEA,SAAS1E,EAAe1J,EAAgBuxB,EAAgBnjB,IACtDsnB,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAqjB,EAAA/oC,WAAA,iBAAAc,KAAA,KAAerH,EAAO1J,EAAQuxB,EAAQnjB,GACtC4E,KAAKopB,UACP,IAAAjtB,IAAA,WAAAf,MAEA,SAAS1E,EAAe0E,EAAe+jB,GACrC,GAAIzoB,GAASsJ,KAAKhT,SAChB,GAAW,MAAPmyB,GAAwD,MAAzCnf,KAAKmb,OAAOE,MAAMjgB,EAAO2d,GAAMO,OAAgB,CAChE,IAAMmC,EAAOzb,KAAKmb,OAAO5c,OAAOyB,KAAKkf,QAAQ0F,aAAa9H,UAC1D9c,KAAK8f,YAAYrE,GACN,MAAP0D,GAAe/jB,EAAM46B,SAAS,MAChCva,EAAK4I,SAAS,EAAGjpB,EAAM/J,MAAM,GAAI,GAAI8tB,GAErC1D,EAAK4I,SAAS,EAAGjpB,EAAO+jB,EAE5B,KAAO,CACL,IAAMwY,EAAQ33B,KAAKmb,OAAO5c,OAAOnD,EAAO+jB,GACxCnf,KAAK8f,YAAY6X,EACnB,MAEAjV,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAqjB,EAAA/oC,WAAA,iBAAAc,KAAA,KAAerH,EAAO0E,EAAO+jB,GAE/Bnf,KAAKopB,UACP,IAAAjtB,IAAA,eAAAf,MAEA,SAAaqgB,EAAY2D,GACvB,GAAI3D,EAAKyD,QAAQjF,QAAUlB,GAAMS,YAAa,CAC5C,IAAMqG,EAAU7f,KAAKmb,OAAO5c,OAC1ByB,KAAKkf,QAAQ0F,aAAa9H,UAE5B+C,EAAQC,YAAYrE,IACpBiH,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAqjB,EAAA/oC,WAAA,qBAAAc,KAAA,KAAmB8hB,EAAST,EAC9B,MACEsD,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAqjB,EAAA/oC,WAAA,qBAAAc,KAAA,KAAmB0d,EAAM2D,EAE7B,IAAAjjB,IAAA,iBAAAf,MAEA,SAAe1E,EAAezH,GAAc,IAAA6sB,EAAA,KACpC2qB,EAAezmC,KAAK0mC,oBACxBz3C,EAAMb,QAAO,IAAI4e,IAAQK,OAAO,QAE5Bm5B,EAAOC,EAAa7wC,MAC1B,GAAY,MAAR4wC,EAAJ,CAEAxmC,KAAKw1B,aAEL,IAAM6Q,EAAQI,EAAava,QAC3B,GAAIma,EAAO,CACT,IAAMM,EACW,UAAfN,EAAM7/B,OACoB,IAAzB6/B,EAAMp3C,MAAMjC,WACTgT,KAAKujB,WAAW6I,GAAY11B,GAAO,IAAMA,EAAQsJ,KAAKhT,UACtDiC,EACW,UAAfo3C,EAAM7/B,KACF6/B,EAAMp3C,OACN,IAAI+d,IAAQK,QAAMkC,EAAAA,EAAAA,GAAC,CAAC,EAAE82B,EAAMlqC,IAAMkqC,EAAMjrC,QAC9CwrC,GAAqB5mC,KAAMtJ,EAAOzH,GAClC,IAAM43C,EAAmC,UAAfR,EAAM7/B,KAAmB,EAAI,EACjDsgC,EAAepwC,EAAQzH,EAAMjC,SAAW65C,EAC1CF,GACF3mC,KAAKqkB,SAASyiB,EAAe,EAAG,MAGlC,IAAMxgB,EAAUkG,GAAcxsB,KAAKkQ,KAAKxZ,GAAO,IACzCqV,EAAaN,GAAAA,aAAa/T,KAAK4uB,EAAS+f,EAAMt6B,aAAe,CAAC,EACpEzR,OAAOkD,KAAKuO,GAAYrP,SAAS,SAAAkO,GAC/BkR,EAAKoI,SAAS4iB,EAAe,EAAG,EAAGl8B,EAAMmB,EAAWnB,GACtD,IAEAlU,EAAQowC,CACV,CAEA,IAAAzjB,EAA+BrjB,KAAKsf,SAASzD,KAAKnlB,GAAM4sB,GAAApU,EAAAA,EAAAA,GAAAmU,EAAA,GAAnDkB,EAAOjB,EAAA,GAAEyjB,EAAazjB,EAAA,GA2B3B,GA1BImjB,EAAaz5C,SACXu3B,IACFA,EAAUA,EAAQnI,MAAM2qB,GACxBA,EAAgB,GAGlBN,EAAa/pC,SAAS,SAAAsqC,GACpB,GAAyB,UAArBA,EAAYxgC,KAAkB,CAChC,IAAMyV,EAAQH,EAAKmrB,YACjBD,EAAYj7B,WACZwY,QAAWnoB,GAEbwqC,GAAqB3qB,EAAO,EAAG+qB,EAAY/3C,MAC7C,KAAO,CACL,IAAMi4C,EAAaprB,EAAKvd,OACtByoC,EAAY7qC,IACZ6qC,EAAY5rC,OAEd0gB,EAAKuD,aAAa6nB,EAAY3iB,QAAWnoB,GACzC9B,OAAOkD,KAAKwpC,EAAYj7B,YAAYrP,SAAS,SAAAkO,GAC3Cs8B,EAAW3oB,OAAO3T,EAAMo8B,EAAYj7B,WAAWnB,GACjD,GACF,CACF,KAGgB,UAAd47B,EAAKhgC,MAAoBggC,EAAKv3C,MAAMjC,SAAU,CAChD,IAAM2O,EAAS4oB,EACXA,EAAQ5oB,OAAO4oB,EAAQpJ,QAAU4rB,EACjC/mC,KAAKhT,SACT45C,GAAqB5mC,KAAMrE,EAAQ6qC,EAAKv3C,MAC1C,CAEA+Q,KAAK22B,WACL32B,KAAKopB,UAjEmB,CAkE1B,IAAAjtB,IAAA,YAAAf,MAEA,WACE,MAAwD,SAAjD4E,KAAK2b,QAAQnB,aAAa,kBACnC,IAAAre,IAAA,OAAAf,MAEA,SAAK1E,GACH,IAAM8vC,EAAOxmC,KAAKglB,KAAKtuB,GAAOd,MAC9B,IAAK4wC,EACH,MAAO,CAAC,MAAO,GAGjB,IAAAW,GAAAj4B,EAAAA,EAAAA,GAAuBs3B,EAAI,GAApB/qB,EAAI0rB,EAAA,GAAExrC,EAAMwrC,EAAA,GACnB,OAAO1rB,aAAgBkF,GAAW,CAAClF,EAAM9f,GAAU,CAAC,MAAO,EAC7D,IAAAQ,IAAA,OAAAf,MAEA,SAAK1E,GACH,OAAIA,IAAUsJ,KAAKhT,SACVgT,KAAKkQ,KAAKxZ,EAAQ,GAGpBsJ,KAAKujB,WAAWsiB,GAAQnvC,EACjC,IAAAyF,IAAA,QAAAf,MAEA,WAAoE,IAA9D1E,EAAK6U,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAG,EAAGve,EAAMue,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAGiY,OAAOC,UACzB2jB,EAAW,SAAXA,EACJ3rB,EACA4rB,EACAC,GAEA,IAAIrb,EAAgC,GAChCtI,EAAa2jB,EAajB,OAZA7rB,EAAK6D,SAAS2D,UACZokB,EACAC,GACA,SAACnlB,EAAOyB,EAAYV,GACd2iB,GAAO1jB,GACT8J,EAAM7+B,KAAK+0B,GACFA,aAAiBmF,KAC1B2E,EAAQA,EAAM79B,OAAOg5C,EAASjlB,EAAOyB,EAAYD,KAEnDA,GAAcT,CAChB,IAEK+I,CACT,EACA,OAAOmb,EAASpnC,KAAMtJ,EAAO1J,EAC/B,IAAAmP,IAAA,WAAAf,MAOA,WAAuC,IAA9BiqB,EAAS9Z,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAG,GAAIgG,EAAOhG,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAG,CAAC,EAC9BvL,KAAKimC,SACTvjB,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAqjB,EAAA/oC,WAAA,iBAAAc,KAAA,KAAesnB,EAAW9T,GACtB8T,EAAUr4B,OAAS,GACrBgT,KAAK0R,QAAQiB,KAAKoc,GAAQ1c,OAAOwd,gBAAiBxK,EAAW9T,GAEjE,IAAApV,IAAA,OAAAf,MAEA,SAAK1E,GACH,OAAOgsB,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAqjB,EAAA/oC,WAAA,aAAAc,KAAA,KAAWrH,GAAOrF,MAAM,EACjC,IAAA8K,IAAA,SAAAf,MAEA,WACE,IAAAe,IAAA,SAAAf,MAKF,SAAOiqB,GAAoD,IAAA9I,EAAA,KACzD,GAAIvc,KAAKimC,MACHn3C,MAAMuT,QAAQgjB,KAChBrlB,KAAKimC,MAAQjmC,KAAKimC,MAAM73C,OAAOi3B,QAFnC,CAMA,IAAIviB,EAAwBisB,GAAQhX,QAAQyY,KACnB,kBAAdnL,IACTviB,EAASuiB,GAENv2B,MAAMuT,QAAQgjB,KACjBA,EAAYrlB,KAAKuoB,SAASU,eAE5B5D,EAAYA,EAAU7X,QAAO,SAAA03B,GAAgB,IAAbt3B,EAAQs3B,EAARt3B,OACxB6N,EAAOc,EAAKV,KAAKjO,GAAQ,GAC/B,OAAO6N,IAASqqB,GAAYrqB,EAC9B,IACI4J,EAAUr4B,OAAS,GACrBgT,KAAK0R,QAAQiB,KAAKoc,GAAQ1c,OAAOqd,qBAAsB5sB,EAAQuiB,IAEjE3C,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAqjB,EAAA/oC,WAAA,eAAAc,KAAA,KAAasnB,EAAUj3B,OAAO,KAC1Bi3B,EAAUr4B,OAAS,GACrBgT,KAAK0R,QAAQiB,KAAKoc,GAAQ1c,OAAOyd,cAAehtB,EAAQuiB,EAjB1D,CAmBF,IAAAlpB,IAAA,gBAAAf,MAEA,SAAc1E,EAAeyF,EAAas7B,GAGxC,IAAA8P,EAAevnC,KAAKujB,YAAY,SAAA1X,GAAO,OAAKA,aAAaugB,EAAU,GAAE11B,GAAM8wC,GAAAt4B,EAAAA,EAAAA,GAAAq4B,EAAA,GAApE9rB,EAAI+rB,EAAA,GACP/rB,GAAQA,EAAKyD,QAAQpC,WAAa3gB,GAAO2pC,GAAYrqB,IACvDA,EAAKsqB,cAActO,EAEvB,IAAAt7B,IAAA,kBAAAf,MAEU,SAAgBuW,GACxBA,EAAM81B,gBACR,IAAAtrC,IAAA,sBAAAf,MAEQ,SAAoBnM,GAAc,IAAAmvB,EAAA,KAClCqoB,EAA8B,GAEhCiB,EAAoB,IAAI16B,GAmD5B,OAlDA/d,EAAMyN,SAAS,SAAAiR,GACb,IAAMN,EAAW,OAAFM,QAAE,IAAFA,OAAE,EAAFA,EAAIN,OACnB,GAAKA,EACL,GAAsB,kBAAXA,EAAqB,CAC9B,IAAMs6B,EAAWt6B,EAAO+O,MAAM,MAC9BurB,EAASt2C,MAAM,GAAI,GAAGqL,SAAS,SAAAsf,GAAS,IAAA4rB,EACtCF,EAAkBr6B,OAAO2O,EAAMrO,EAAG5B,YAClC06B,EAAar5C,KAAK,CAChBoZ,KAAM,QACNvX,MAAOy4C,EACP37B,WAAyB,QAAf67B,EAAEj6B,EAAG5B,kBAAU,IAAA67B,EAAAA,EAAI,CAAC,IAEhCF,EAAoB,IAAI16B,EAC1B,IACA,IAAMw5B,EAAOmB,EAASA,EAAS36C,OAAS,GACpCw5C,GACFkB,EAAkBr6B,OAAOm5B,EAAM74B,EAAG5B,WAEtC,KAAO,CACL,IAIO87B,EAJD1rC,EAAM7B,OAAOkD,KAAK6P,GAAQ,GAChC,IAAKlR,EAAK,OACV,GAAIiiB,EAAK/C,MAAMlf,EAAK4c,GAAMM,QACxBquB,EAAkBt6C,KAAKugB,QAEnB+5B,EAAkB16C,UACpBy5C,EAAar5C,KAAK,CAChBoZ,KAAM,QACNvX,MAAOy4C,EACP37B,WAAY,CAAC,IAGjB27B,EAAoB,IAAI16B,GACxBy5B,EAAar5C,KAAK,CAChBoZ,KAAM,aACNrK,IAAAA,EACAf,MAAOiS,EAAOlR,GACd4P,WAAyB,QAAf87B,EAAEl6B,EAAG5B,kBAAU,IAAA87B,EAAAA,EAAI,CAAC,GAGpC,CACF,IAEIH,EAAkB16C,UACpBy5C,EAAar5C,KAAK,CAChBoZ,KAAM,QACNvX,MAAOy4C,EACP37B,WAAY,CAAC,IAIV06B,CACT,IAAAtqC,IAAA,cAAAf,MAEQ,SAAY2Q,EAA0BwY,GAAgB,IACxDzH,EADwDwB,EAAA,KAEtDgI,EAAwB,CAAC,EAE/BhsB,OAAOyF,QAAQgM,GAAYrP,SAAQ,SAAAsnC,GAAkB,IAAA8D,GAAA54B,EAAAA,EAAAA,GAAL80B,EAAA,GAAX7nC,EAAG2rC,EAAA,GAAE1sC,EAAK0sC,EAAA,GACvCC,EAA2D,MAA7CzpB,EAAKjD,MAAMlf,EAAK4c,GAAMO,MAAQP,GAAMK,MACpD2uB,EACFjrB,EAAW3gB,EAEXmqB,EAAQnqB,GAAOf,CAEnB,IAEA,IAAM6gB,EAAQjc,KAAKzB,OACjBue,GAAY9c,KAAKkf,QAAQ0F,aAAa9H,SACtCA,EAAW/Q,EAAW+Q,QAAY1gB,GAGpC4D,KAAKqf,aAAapD,EAAOsI,QAAWnoB,GAEpC,IAAMpP,EAASivB,EAAMjvB,SAKrB,OAJAsN,OAAOyF,QAAQumB,GAAS5pB,SAAQ,SAAAyoC,GAAkB,IAAA6C,GAAA94B,EAAAA,EAAAA,GAALi2B,EAAA,GAAXhpC,EAAG6rC,EAAA,GAAE5sC,EAAK4sC,EAAA,GAC1C/rB,EAAMiI,SAAS,EAAGl3B,EAAQmP,EAAKf,EACjC,IAEO6gB,CACT,KAtXU,CAASuN,IAyXrB,SAASod,GACP9nB,EACApoB,EACAuxC,GAEAA,EAAej8B,QAAO,SAACtV,EAAOiX,GAC5B,IAAM3gB,EAAS8jB,GAAAA,GAAG9jB,OAAO2gB,GACrB5B,EAAa4B,EAAG5B,YAAc,CAAC,EACnC,GAAiB,MAAb4B,EAAGN,OACL,GAAyB,kBAAdM,EAAGN,OAAqB,CACjC,IAAM2O,EAAOrO,EAAGN,OAChByR,EAAOuF,SAAS3tB,EAAOslB,GACvB,IAAAksB,EAAeppB,EAAOyE,WAAW5C,GAAUjqB,GAAMyxC,GAAAj5B,EAAAA,EAAAA,GAAAg5B,EAAA,GAA1C3b,EAAI4b,EAAA,GACL7hB,EAAUkG,GAAcD,GAC9BxgB,EAAaN,GAAAA,aAAa/T,KAAK4uB,EAASva,IAAe,CAAC,CAC1D,MAAO,GAAyB,YAArB1R,EAAAA,EAAAA,GAAOsT,EAAGN,QAAqB,CACxC,IAAMlR,EAAM7B,OAAOkD,KAAKmQ,EAAGN,QAAQ,GACnC,GAAW,MAAPlR,EAAa,OAAOzF,EACxBooB,EAAOuF,SAAS3tB,EAAOyF,EAAKwR,EAAGN,OAAOlR,IACtC,IAAMg6B,EAA0D,MAA1CrX,EAAO3D,OAAOE,MAAMlf,EAAK4c,GAAMM,QACrD,GAAI8c,EAAe,CACjB,IAAAiS,EAAetpB,EAAOyE,WAAW5C,GAAUjqB,GAAM2xC,GAAAn5B,EAAAA,EAAAA,GAAAk5B,EAAA,GAA1C7b,EAAI8b,EAAA,GACL/hB,EAAUkG,GAAcD,GAC9BxgB,EAAaN,GAAAA,aAAa/T,KAAK4uB,EAASva,IAAe,CAAC,CAC1D,CACF,CAKF,OAHAzR,OAAOkD,KAAKuO,GAAYrP,SAAS,SAAAP,GAC/B2iB,EAAOoF,SAASxtB,EAAO1J,EAAQmP,EAAK4P,EAAW5P,GACjD,IACOzF,EAAQ1J,CACjB,GAAG0J,EACL,EAzZ+B6Y,EAAAA,EAAAA,GAAzBy2B,GAAM,WACQ,WAAQz2B,EAAAA,EAAAA,GADtBy2B,GAAM,YAES,cAAWz2B,EAAAA,EAAAA,GAF1By2B,GAAM,UAGO,QAAKz2B,EAAAA,EAAAA,GAHlBy2B,GAAM,eAIYja,KAAKxc,EAAAA,EAAAA,GAJvBy2B,GAAM,kBAKe,CAACja,GAAOK,GAAYwZ,KAsZ/C,Y,+BCvbM9B,GAAS,CACb7pB,MAAOlB,GAAMO,MACbY,UAAW,CAAC,QAAS,SAAU,YAG3BouB,GAAiB,IAAI1uB,GAAW,QAAS,QAASkqB,IAClDyE,GAAa,IAAInrB,GAAgB,QAAS,WAAY0mB,IACtD0E,GAAa,IAAI5qB,GAAgB,QAAS,aAAckmB,ICPxD2E,GAAe,SAAAC,GAAA,SAAAD,IAAA,OAAAv7B,EAAAA,EAAAA,GAAA,KAAAu7B,IAAA3tB,EAAAA,GAAAA,GAAA,KAAA2tB,EAAAl9B,UAAA,QAAAwP,EAAAA,GAAAA,GAAA0tB,EAAAC,IAAAv7B,EAAAA,EAAAA,GAAAs7B,EAAA,EAAAtsC,IAAA,QAAAf,MACnB,SAAMugB,GACJ,IAAIvgB,GAAKsnB,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAA8lB,EAAAxrC,WAAA,cAAAc,KAAA,KAAe4d,GACxB,IAAKvgB,EAAMqoC,WAAW,QAAS,OAAOroC,EACtCA,EAAQA,EAAM4C,QAAQ,UAAW,IAAIA,QAAQ,UAAW,IACxD,IAAM2qC,EAAMvtC,EACTghB,MAAM,KACNphB,KAAK,SAAA+U,GAAS,MAAM,KAAA3hB,OAAI4xB,SAASjQ,EAAW,IAAIzT,SAAS,KAAMjL,OAAO,EAAE,IACxEue,KAAK,IACR,MAAO,IAAPxhB,OAAWu6C,EACb,KAVmB,CAAS/qB,IAaxBgrB,GAAa,IAAIxrB,GAAgB,QAAS,WAAY,CAC1DnD,MAAOlB,GAAMM,SAETwvB,GAAa,IAAIJ,GAAgB,QAAS,QAAS,CACvDxuB,MAAOlB,GAAMM,SChBTyvB,GAAkB,IAAI1rB,GAAgB,aAAc,QAAS,CACjEnD,MAAOlB,GAAMM,SAET0vB,GAAkB,IAAIN,GAAgB,aAAc,mBAAoB,CAC5ExuB,MAAOlB,GAAMM,SCCT2vB,GAAkB,SAAAC,GAAA,SAAAD,IAAA,OAAA97B,EAAAA,EAAAA,GAAA,KAAA87B,IAAAluB,EAAAA,GAAAA,GAAA,KAAAkuB,EAAAz9B,UAAA,QAAAwP,EAAAA,GAAAA,GAAAiuB,EAAAC,IAAA97B,EAAAA,EAAAA,GAAA67B,EAAA,EAAA7sC,IAAA,OAAAf,MAOtB,SAAK1E,EAAe1J,GAClB,OACEgT,KAAKsf,SAEFtkB,KAAK,SAAAmnB,GAAK,OAAMA,EAAMn1B,UAAY,EAAI,GAAKm1B,EAAMxG,QAAQutB,SAAU,IACnEt5B,KAAK,MACLve,MAAMqF,EAAOA,EAAQ1J,EAE5B,IAAAmP,IAAA,OAAAf,MAEA,SAAK1E,EAAe1J,GAGlB,MAAO,UAAPoB,OAAiBi9B,GAAWrrB,KAAKmpC,KAAKzyC,EAAO1J,IAAS,WACxD,MAAAmP,IAAA,SAAAf,MApBA,SAAcA,GACZ,IAAMugB,GAAO+G,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAqmB,GAAA,eAAAjrC,KAAA,KAAgB3C,GAE7B,OADAugB,EAAQtB,aAAa,aAAc,SAC5BsB,CACT,KALsB,CAASiqB,IAwB3BwD,GAAS,SAAAC,GAAA,SAAAD,IAAA,OAAAl8B,EAAAA,EAAAA,GAAA,KAAAk8B,IAAAtuB,EAAAA,GAAAA,GAAA,KAAAsuB,EAAA79B,UAAA,QAAAwP,EAAAA,GAAAA,GAAAquB,EAAAC,IAAAl8B,EAAAA,EAAAA,GAAAi8B,EAAA,OAAAjtC,IAAA,WAAAf,MAGb,WACE8jC,GAAMtW,SAASogB,GACjB,KALa,CAASjd,KAAKxc,EAAAA,EAAAA,GAAvB65B,GAAS,MACA,MAAI,IAObE,GAAI,SAAAzd,GAAA,SAAAyd,IAAA,OAAAp8B,EAAAA,EAAAA,GAAA,KAAAo8B,IAAAxuB,EAAAA,GAAAA,GAAA,KAAAwuB,EAAA/9B,UAAA,QAAAwP,EAAAA,GAAAA,GAAAuuB,EAAAzd,IAAA1e,EAAAA,EAAAA,GAAAm8B,EAAA,EAAS9d,IACnB8d,GAAKxsB,SAAW,OAChBwsB,GAAKhtB,QAAU,OAEf8sB,GAAUtsB,SAAW,aACrBssB,GAAUrsB,UAAY,gBACtBqsB,GAAU9sB,QAAU,MACpB0sB,GAAmBlsB,SAAW,uBAC9BksB,GAAmBjsB,UAAY,0BAC/BisB,GAAmB1sB,QAAU,MAE7B0sB,GAAmBjlB,gBAAkB,CAACqlB,IAEtCA,GAAUrlB,gBAAkB,CAACiG,GAAUmB,GAAOsB,IAC9C2c,GAAU5pB,kBAAoBwpB,GCpD9B,IAAMlF,GAAS,CACb7pB,MAAOlB,GAAMO,MACbY,UAAW,CAAC,QAGRqvB,GAAqB,IAAI3vB,GAAW,YAAa,MAAOkqB,IACxD0F,GAAiB,IAAIpsB,GAAgB,YAAa,eAAgB0mB,IAClE2F,GAAiB,IAAI7rB,GAAgB,YAAa,YAAakmB,ICP/DA,GAAS,CACb7pB,MAAOlB,GAAMM,OACba,UAAW,CAAC,QAAS,cAGjBwvB,GAAY,IAAItsB,GAAgB,OAAQ,UAAW0mB,IAEnD6F,GAAmB,SAAAjB,GAAA,SAAAiB,IAAA,OAAAz8B,EAAAA,EAAAA,GAAA,KAAAy8B,IAAA7uB,EAAAA,GAAAA,GAAA,KAAA6uB,EAAAp+B,UAAA,QAAAwP,EAAAA,GAAAA,GAAA4uB,EAAAjB,IAAAv7B,EAAAA,EAAAA,GAAAw8B,EAAA,EAAAxtC,IAAA,QAAAf,MACvB,SAAM+e,GACJ,OAAOuI,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAgnB,EAAA1sC,WAAA,cAAAc,KAAA,KAAYoc,GAAMnc,QAAQ,QAAS,GAC5C,KAHuB,CAAS4f,IAM5BgsB,GAAY,IAAID,GAAoB,OAAQ,cAAe7F,ICb3D+F,GAAY,IAAIzsB,GAAgB,OAAQ,UAAW,CACvDnD,MAAOlB,GAAMM,OACba,UAAW,CAAC,QAAS,QAAS,UAE1B4vB,GAAY,IAAIlsB,GAAgB,OAAQ,YAAa,CACzD3D,MAAOlB,GAAMM,OACba,UAAW,CAAC,OAAQ,OAAQ,UCExB6T,I,SAAQM,GAAO,mBAEf0b,GAAW,OAAOllC,KAAKmlC,UAAUC,UAAY,UAAY,UA+CzDC,GAAQ,SAAAC,GAgBZ,SAAAD,EAAYtb,EAAc7U,GAAmC,IAAAc,EA6D9C,OA7D8C3N,EAAAA,EAAAA,GAAA,KAAAg9B,GAC3DrvB,GAAAC,EAAAA,GAAAA,GAAA,KAAAovB,EAAA,CAAMtb,EAAO7U,IACbc,EAAKuvB,SAAW,CAAC,EAEjB9vC,OAAOkD,KAAKqd,EAAKd,QAAQqwB,UAAU1tC,SAAS,SAAAkO,GAEtCiQ,EAAKd,QAAQqwB,SAASx/B,IAExBiQ,EAAKwvB,WAAWxvB,EAAKd,QAAQqwB,SAASx/B,GAE1C,IACAiQ,EAAKwvB,WAAW,CAAEluC,IAAK,QAASmuC,SAAU,MAAQzvB,EAAK0vB,aACvD1vB,EAAKwvB,WACH,CAAEluC,IAAK,QAASquC,QAAS,KAAMC,QAAS,KAAMC,OAAQ,OACtD,WAAO,IAEL,WAAW7lC,KAAKmlC,UAAUW,YAE5B9vB,EAAKwvB,WACH,CAAEluC,IAAK,aACP,CAAE01B,WAAW,GACbhX,EAAK+vB,iBAEP/vB,EAAKwvB,WACH,CAAEluC,IAAK,UACP,CAAE01B,WAAW,GACbhX,EAAKgwB,gBAGPhwB,EAAKwvB,WACH,CAAEluC,IAAK,aACP,CAAE01B,WAAW,EAAM1gB,OAAQ,QAC3B0J,EAAK+vB,iBAEP/vB,EAAKwvB,WACH,CAAEluC,IAAK,UACP,CAAE01B,WAAW,EAAMkG,OAAQ,QAC3Bld,EAAKgwB,eAGThwB,EAAKwvB,WACH,CAAEluC,IAAK,aACP,CAAE01B,WAAW,GACbhX,EAAKiwB,mBAEPjwB,EAAKwvB,WACH,CAAEluC,IAAK,UACP,CAAE01B,WAAW,GACbhX,EAAKiwB,mBAEPjwB,EAAKwvB,WACH,CACEluC,IAAK,YACLuuC,OAAQ,KACRD,QAAS,KACTD,QAAS,KACTF,SAAU,MAEZ,CAAEzY,WAAW,EAAMl2B,OAAQ,GAC3Bkf,EAAK+vB,iBAEP/vB,EAAKkwB,SAAQlwB,CACf,QAAAE,EAAAA,GAAAA,GAAAmvB,EAAAC,IAAAh9B,EAAAA,EAAAA,GAAA+8B,EAAA,EAAA/tC,IAAA,aAAAf,MAEA,SACE4vC,GAOA,IAAAlvB,EAAA,KANAvK,EAEmDhG,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAG,CAAC,EACvD8D,EAEmD9D,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAG,CAAC,EAEjD1D,EAAUojC,GAAUD,GAC1B,GAAe,MAAXnjC,EAAJ,CAIuB,oBAAZ0J,IACTA,EAAU,CAAElC,QAASkC,IAEA,oBAAZlC,IACTA,EAAU,CAAEA,QAAAA,IAEd,IAAM7R,EAAO1O,MAAMuT,QAAQwF,EAAQ1L,KAAO0L,EAAQ1L,IAAM,CAAC0L,EAAQ1L,KACjEqB,EAAKd,SAAS,SAAAP,GACZ,IAAM+uC,GAAa7e,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACdxkB,GAAO,IACV1L,IAAAA,GACGoV,GACAlC,GAELyM,EAAKsuB,SAASc,EAAc/uC,KAAO2f,EAAKsuB,SAASc,EAAc/uC,MAAQ,GACvE2f,EAAKsuB,SAASc,EAAc/uC,KAAK/O,KAAK89C,EACxC,GAjBA,MAFEnd,GAAMiV,KAAK,4CAA6Cn7B,EAoB5D,IAAA1L,IAAA,SAAAf,MAEA,WAAS,IAAAmhB,EAAA,KACPvc,KAAK4uB,MAAMn0B,KAAKg0B,iBAAiB,WAAY,SAAA3c,GAC3C,IAAIA,EAAIq5B,mBAAoBr5B,EAAIipB,YAAhC,CAIA,IAAMA,EACY,MAAhBjpB,EAAIs5B,UAAgC,UAAZt5B,EAAI3V,KAA+B,cAAZ2V,EAAI3V,KACrD,IAAI4+B,EAAJ,CAEA,IAAMqP,GAAY7tB,EAAK6tB,SAASt4B,EAAI3V,MAAQ,IAAI/N,OAC9CmuB,EAAK6tB,SAASt4B,EAAIu5B,QAAU,IAExBC,EAAUlB,EAAS58B,QAAQ,SAAA3F,GAAO,OACtCqiC,EAASn2C,MAAM+d,EAAKjK,EACtB,IACA,GAAuB,IAAnByjC,EAAQt+C,OAAZ,CAEA,IAAMyuB,EAAOyjB,GAAMrjB,KAAK/J,EAAIlE,QAAQ,GACpC,IAAI6N,GAAQA,EAAKN,SAAWoB,EAAKqS,MAAMzT,OAAvC,CACA,IAAM4R,EAAQxQ,EAAKqS,MAAM8E,eACzB,GAAa,MAAT3G,GAAkBxQ,EAAKqS,MAAMuC,WAAjC,CACA,IAAAoa,EAAuBhvB,EAAKqS,MAAM4c,QAAQze,EAAMr2B,OAAM+0C,GAAAv8B,EAAAA,EAAAA,GAAAq8B,EAAA,GAA/Cr7B,EAAIu7B,EAAA,GAAE9vC,EAAM8vC,EAAA,GACnBC,EAAiCnvB,EAAKqS,MAAM+c,QAAQ5e,EAAMr2B,OAAMk1C,GAAA18B,EAAAA,EAAAA,GAAAw8B,EAAA,GAAzDG,EAASD,EAAA,GAAEE,EAAWF,EAAA,GAC7B5H,EACmB,IAAjBjX,EAAM//B,OACF,CAAC6+C,EAAWC,GACZvvB,EAAKqS,MAAM+c,QAAQ5e,EAAMr2B,MAAQq2B,EAAM//B,QAAOm4C,GAAAj2B,EAAAA,EAAAA,GAAA80B,EAAA,GAH7C+H,EAAO5G,EAAA,GAAE6G,EAAS7G,EAAA,GAInB8G,EACJJ,aAAqB7hB,GACjB6hB,EAAUzwC,QAAQ/J,MAAM,EAAGy6C,GAC3B,GACAI,EACJH,aAAmB/hB,GAAW+hB,EAAQ3wC,QAAQ/J,MAAM26C,GAAa,GAC7DG,EAAa,CACjBta,UAA4B,IAAjB9E,EAAM//B,OAEjBo/C,MAAwB,IAAjBrf,EAAM//B,QAAgBkjB,EAAKljB,UAAY,EAC9CuxB,OAAQhC,EAAKqS,MAAMoT,UAAUjV,GAC7B7c,KAAAA,EACAvU,OAAAA,EACAwV,OAAQ86B,EACRlU,OAAQmU,EACRv6B,MAAOG,GAEHu6B,EAAYf,EAAQjvB,MAAM,SAAAxU,GAC9B,GACuB,MAArBA,EAAQgqB,WACRhqB,EAAQgqB,YAAcsa,EAAWta,UAEjC,OAAO,EAET,GAAqB,MAAjBhqB,EAAQukC,OAAiBvkC,EAAQukC,QAAUD,EAAWC,MACxD,OAAO,EAET,GAAsB,MAAlBvkC,EAAQlM,QAAkBkM,EAAQlM,SAAWwwC,EAAWxwC,OAC1D,OAAO,EAET,GAAI7M,MAAMuT,QAAQwF,EAAQ0W,SAExB,GAAI1W,EAAQ0W,OAAO+tB,OAAO,SAAA1hC,GAAI,OAAgC,MAA3BuhC,EAAW5tB,OAAO3T,EAAa,IAChE,OAAO,OAEJ,GAA8B,YAA1BvQ,EAAAA,EAAAA,GAAOwN,EAAQ0W,UAGrBjkB,OAAOkD,KAAKqK,EAAQ0W,QAAQ+tB,OAAO,SAAA1hC,GAElC,OAA6B,IAAzB/C,EAAQ0W,OAAO3T,GACiB,MAA3BuhC,EAAW5tB,OAAO3T,IAEE,IAAzB/C,EAAQ0W,OAAO3T,GACiB,MAA3BuhC,EAAW5tB,OAAO3T,GAEpBY,GAAQ3D,EAAQ0W,OAAO3T,GAAOuhC,EAAW5tB,OAAO3T,GACzD,IAEA,OAAO,EAGX,QAAsB,MAAlB/C,EAAQsJ,SAAmBtJ,EAAQsJ,OAAOtM,KAAKsnC,EAAWh7B,aAGxC,MAAlBtJ,EAAQkwB,SAAmBlwB,EAAQkwB,OAAOlzB,KAAKsnC,EAAWpU,WAII,IAA3DlwB,EAAQwH,QAAQtR,KAAKwe,EAAMwQ,EAAOof,EAAYtkC,GACvD,IACIwkC,GACFv6B,EAAI21B,gBArE6C,CAFE,CAHrB,CART,CAN4B,CA0FrD,GACF,IAAAtrC,IAAA,kBAAAf,MAEA,SAAgB2xB,EAAcxb,GAE5B,IAAMvkB,EAAS,kCAAkC6X,KAAK0M,EAAQJ,QAC1D,EACA,EACJ,KAAoB,IAAhB4b,EAAMr2B,OAAesJ,KAAK4uB,MAAMiT,aAAe,GAAnD,CACA,IAAIvb,EAAU,CAAC,EACfimB,EAAevsC,KAAK4uB,MAAM4c,QAAQze,EAAMr2B,OAAM81C,GAAAt9B,EAAAA,EAAAA,GAAAq9B,EAAA,GAAvCr8B,EAAIs8B,EAAA,GACPv9C,GAAQ,IAAI+d,IAAQM,OAAOyf,EAAMr2B,MAAQ1J,GAAO,UAAQA,GAC5D,GAAuB,IAAnBukB,EAAQ5V,OAAc,CAExB,IAAA8wC,EAAezsC,KAAK4uB,MAAM4c,QAAQze,EAAMr2B,MAAQ,GAAEg2C,GAAAx9B,EAAAA,EAAAA,GAAAu9B,EAAA,GAA3C7tB,EAAI8tB,EAAA,GACX,GAAI9tB,EAAM,CACR,IAAM+tB,EACsB,UAA1B/tB,EAAKM,QAAQpC,UAAwB8B,EAAK5xB,UAAY,EACxD,IAAK2/C,EAAiB,CAEpB,IAAMC,EAAa18B,EAAKoW,UAClBumB,EAAc7sC,KAAK4uB,MAAMoT,UAAUjV,EAAMr2B,MAAQ,EAAG,GAE1D,GADA4vB,EAAU7a,GAAAA,aAAa/T,KAAKk1C,EAAYC,IAAgB,CAAC,EACrDvyC,OAAOkD,KAAK8oB,GAASt5B,OAAS,EAAG,CAEnC,IAAM8/C,GAAc,IAAI9/B,IAErBM,OAAOyf,EAAMr2B,MAAQwZ,EAAKljB,SAAW,GACrCsgB,OAAO,EAAGgZ,GACbr3B,EAAQA,EAAM0c,QAAQmhC,EACxB,CACF,CACF,CACF,CACA9sC,KAAK4uB,MAAMme,eAAe99C,EAAOiwC,GAAMnnB,QAAQyY,MAC/CxwB,KAAK4uB,MAAM6C,OA3BiD,CA4B9D,IAAAt1B,IAAA,eAAAf,MAEA,SAAa2xB,EAAcxb,GAEzB,IAAMvkB,EAAS,kCAAkC6X,KAAK0M,EAAQwmB,QAC1D,EACA,EACJ,KAAIhL,EAAMr2B,OAASsJ,KAAK4uB,MAAMiT,YAAc70C,GAA5C,CACA,IAAIs5B,EAAU,CAAC,EACf0mB,EAAehtC,KAAK4uB,MAAM4c,QAAQze,EAAMr2B,OAAMu2C,GAAA/9B,EAAAA,EAAAA,GAAA89B,EAAA,GAAvC98B,EAAI+8B,EAAA,GACPh+C,GAAQ,IAAI+d,IAAQM,OAAOyf,EAAMr2B,OAAM,UAAQ1J,GAEnD,GAAIukB,EAAQ5V,QAAUuU,EAAKljB,SAAW,EAAG,CACvC,IAAAkgD,EAAeltC,KAAK4uB,MAAM4c,QAAQze,EAAMr2B,MAAQ,GAAEy2C,GAAAj+B,EAAAA,EAAAA,GAAAg+B,EAAA,GAA3C7+B,EAAI8+B,EAAA,GACX,GAAI9+B,EAAM,CAER,IAAMu+B,EAAa18B,EAAKoW,UAClB8mB,EAAcptC,KAAK4uB,MAAMoT,UAAUjV,EAAMr2B,MAAO,GACtD4vB,EAAU7a,GAAAA,aAAa/T,KAAKk1C,EAAYQ,IAAgB,CAAC,EACrD9yC,OAAOkD,KAAK8oB,GAASt5B,OAAS,IAChCiC,EAAQA,EAAMqe,OAAOe,EAAKrhB,SAAW,GAAGsgB,OAAO,EAAGgZ,GAEtD,CACF,CACAtmB,KAAK4uB,MAAMme,eAAe99C,EAAOiwC,GAAMnnB,QAAQyY,MAC/CxwB,KAAK4uB,MAAM6C,OAlB+C,CAmB5D,IAAAt1B,IAAA,oBAAAf,MAEA,SAAkB2xB,GAChBsgB,GAAY,CAAEtgB,MAAAA,EAAO6B,MAAO5uB,KAAK4uB,QACjC5uB,KAAK4uB,MAAM6C,OACb,IAAAt1B,IAAA,cAAAf,MAEA,SAAY2xB,EAAcxb,GAAkB,IAAA6M,EAAA,KACpC6Y,EAAc38B,OAAOkD,KAAK+T,EAAQgN,QAAQvS,QAC9C,SAACsa,EAAkC/H,GAOjC,OALEH,EAAKwQ,MAAMzT,OAAOE,MAAMkD,EAAQxF,GAAMO,SACrCxqB,MAAMuT,QAAQkP,EAAQgN,OAAOA,MAE9B+H,EAAQ/H,GAAUhN,EAAQgN,OAAOA,IAE5B+H,CACT,GACA,CAAC,GAEGr3B,GAAQ,IAAI+d,IACfM,OAAOyf,EAAMr2B,OAAM,UACZq2B,EAAM//B,QACbqgB,OAAO,KAAM4pB,GAChBj3B,KAAK4uB,MAAMme,eAAe99C,EAAOiwC,GAAMnnB,QAAQyY,MAC/CxwB,KAAK4uB,MAAMyS,aAAatU,EAAMr2B,MAAQ,EAAGwoC,GAAMnnB,QAAQwY,QACvDvwB,KAAK4uB,MAAM6C,OACb,MAAAt1B,IAAA,QAAAf,MAnSA,SAAa0W,EAAoBjK,GAC/B,OACG,CAAC,SAAU,UAAW,UAAW,YAAsBwU,MAAM,SAAAlgB,GAC5D,QAAS0L,EAAQ1L,KAAS2V,EAAI3V,IAAyB,OAAjB0L,EAAQ1L,EAChD,MAIK0L,EAAQ1L,MAAQ2V,EAAI3V,KAAO0L,EAAQ1L,MAAQ2V,EAAIu5B,MACxD,KAZY,CAAShR,IAySjBiT,GAAkC,CACtClD,SAAU,CACRmD,KAAMC,GAAkB,QACxBC,OAAQD,GAAkB,UAC1BE,UAAWF,GAAkB,aAC7BrU,OAAQ,CAENh9B,IAAK,MACLoiB,OAAQ,CAAC,aAAc,SAAU,QACjClP,QAAO,SAAC0d,EAAOxb,GACb,SAAIA,EAAQsgB,WAAgC,IAAnBtgB,EAAQ5V,UACjCqE,KAAK4uB,MAAMrQ,OAAO,SAAU,KAAM2gB,GAAMnnB,QAAQyY,OACzC,EACT,GAEFmd,QAAS,CACPxxC,IAAK,MACLmuC,UAAU,EACV/rB,OAAQ,CAAC,aAAc,SAAU,QAEjClP,QAAO,SAAC0d,EAAOxb,GACb,SAAIA,EAAQsgB,WAAgC,IAAnBtgB,EAAQ5V,UACjCqE,KAAK4uB,MAAMrQ,OAAO,SAAU,KAAM2gB,GAAMnnB,QAAQyY,OACzC,EACT,GAEF,oBAAqB,CACnBr0B,IAAK,YACL01B,WAAW,EACXyY,SAAU,KACVE,QAAS,KACTC,QAAS,KACTC,OAAQ,KACRnsB,OAAQ,CAAC,SAAU,QACnB5iB,OAAQ,EACR0T,QAAO,SAAC0d,EAAOxb,GACgB,MAAzBA,EAAQgN,OAAO4a,OACjBn5B,KAAK4uB,MAAMrQ,OAAO,SAAU,KAAM2gB,GAAMnnB,QAAQyY,MAChB,MAAvBjf,EAAQgN,OAAOob,MACxB35B,KAAK4uB,MAAMrQ,OAAO,QAAQ,EAAO2gB,GAAMnnB,QAAQyY,KAEnD,GAEF,oBAAqBod,IAAqB,GAC1C,qBAAsBA,IAAqB,GAC3C,aAAc,CACZzxC,IAAK,MACLmuC,UAAU,EACVzY,WAAW,EACX1gB,OAAQ,MACR9B,QAAO,SAAC0d,GACN/sB,KAAK4uB,MAAMkS,WAAW/T,EAAMr2B,MAAQ,EAAG,EAAGwoC,GAAMnnB,QAAQyY,KAC1D,GAEFqd,IAAK,CACH1xC,IAAK,MACLkT,QAAO,SAAC0d,EAAOxb,GACb,GAAIA,EAAQgN,OAAOuvB,MAAO,OAAO,EACjC9tC,KAAK4uB,MAAMgR,QAAQmO,SACnB,IAAM9+C,GAAQ,IAAI+d,IACfM,OAAOyf,EAAMr2B,OAAM,UACZq2B,EAAM//B,QACbqgB,OAAO,MAIV,OAHArN,KAAK4uB,MAAMme,eAAe99C,EAAOiwC,GAAMnnB,QAAQyY,MAC/CxwB,KAAK4uB,MAAMgR,QAAQmO,SACnB/tC,KAAK4uB,MAAMyS,aAAatU,EAAMr2B,MAAQ,EAAGwoC,GAAMnnB,QAAQwY,SAChD,CACT,GAEF,yBAA0B,CACxBp0B,IAAK,QACL01B,WAAW,EACXtT,OAAQ,CAAC,cACT6tB,OAAO,EACP/8B,QAAO,WACLrP,KAAK4uB,MAAMrQ,OAAO,cAAc,EAAO2gB,GAAMnnB,QAAQyY,KACvD,GAEF,mBAAoB,CAClBr0B,IAAK,QACL01B,WAAW,EACXtT,OAAQ,CAAC,QACT6tB,OAAO,EACP/8B,QAAO,SAAC0d,EAAOxb,GACb,IAAM+U,EAAmC,CAAEqT,MAAM,GAC7CpoB,EAAQgN,OAAO4a,SACjB7S,EAAQ6S,QAAS,GAEnBn5B,KAAK4uB,MAAMuS,WACTpU,EAAMr2B,MACNq2B,EAAM//B,OACNs5B,EACA4Y,GAAMnnB,QAAQyY,KAElB,GAEF,kBAAmB,CACjBr0B,IAAK,QACL01B,WAAW,EACXtT,OAAQ,CAAEob,KAAM,WAChBtqB,QAAO,SAAC0d,GACN,IAAAihB,EAAuBhuC,KAAK4uB,MAAM4c,QAAQze,EAAMr2B,OAAMu3C,GAAA/+B,EAAAA,EAAAA,GAAA8+B,EAAA,GAA/C99B,EAAI+9B,EAAA,GAAEtyC,EAAMsyC,EAAA,GACb3nB,GAAO+F,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAERnc,EAAKoW,WAAS,IACjBqT,KAAM,YAEF1qC,GAAQ,IAAI+d,IACfM,OAAOyf,EAAMr2B,OACb2W,OAAO,KAAMiZ,GAEbhZ,OAAO4C,EAAKljB,SAAW2O,EAAS,GAChC2R,OAAO,EAAG,CAAEqsB,KAAM,cACrB35B,KAAK4uB,MAAMme,eAAe99C,EAAOiwC,GAAMnnB,QAAQyY,MAC/CxwB,KAAK4uB,MAAMyS,aAAatU,EAAMr2B,MAAQ,EAAGwoC,GAAMnnB,QAAQwY,QACvDvwB,KAAK4uB,MAAMsS,yBACb,GAEF,eAAgB,CACd/kC,IAAK,QACL01B,WAAW,EACXtT,OAAQ,CAAC,UACTwZ,OAAQ,KACR1oB,QAAO,SAAC0d,EAAOxb,GACb,IAAA28B,EAAuBluC,KAAK4uB,MAAM4c,QAAQze,EAAMr2B,OAAMy3C,GAAAj/B,EAAAA,EAAAA,GAAAg/B,EAAA,GAA/Ch+B,EAAIi+B,EAAA,GAAExyC,EAAMwyC,EAAA,GACbl/C,GAAQ,IAAI+d,IACfM,OAAOyf,EAAMr2B,OACb2W,OAAO,KAAMkE,EAAQgN,QAErBjR,OAAO4C,EAAKljB,SAAW2O,EAAS,GAChC2R,OAAO,EAAG,CAAE8gC,OAAQ,OACvBpuC,KAAK4uB,MAAMme,eAAe99C,EAAOiwC,GAAMnnB,QAAQyY,MAC/CxwB,KAAK4uB,MAAMyS,aAAatU,EAAMr2B,MAAQ,EAAGwoC,GAAMnnB,QAAQwY,QACvDvwB,KAAK4uB,MAAMsS,yBACb,GAEF,kBAAmB,CACjB/kC,IAAK,YACLoiB,OAAQ,CAAC,SACTsT,WAAW,EACXl2B,OAAQ,EACR0T,QAAO,WAAI,GAEb,eAAgB,CACdlT,IAAK,SACLoiB,OAAQ,CAAC,SACTsT,WAAW,EACXkG,OAAQ,KACR1oB,QAAO,WAAI,GAEb,cAAe,CACblT,IAAK,QACLmuC,SAAU,KACV/rB,OAAQ,CAAC,SACTlP,QAAO,SAAC0d,GACN,IAAMj1B,EAASkI,KAAK4uB,MAAMyf,UAAU,SACpC,GAAIv2C,EAAQ,CAEV,IAAAw2C,EAAmCx2C,EAAOy2C,SAASxhB,GAAMyhB,GAAAt/B,EAAAA,EAAAA,GAAAo/B,EAAA,GAAlDR,EAAKU,EAAA,GAAEC,EAAGD,EAAA,GAAEE,EAAIF,EAAA,GAAE7yC,EAAM6yC,EAAA,GACzBtiB,EAAQyiB,GAAUb,EAAOW,EAAKC,EAAM/yC,GAC1C,GAAa,MAATuwB,EAAe,OACnB,IAAIx1B,EAAQo3C,EAAMnyC,SAClB,GAAIuwB,EAAQ,EAAG,CACb,IAAMj9B,GAAQ,IAAI+d,IAAQM,OAAO5W,GAAO2W,OAAO,MAC/CrN,KAAK4uB,MAAMme,eAAe99C,EAAOiwC,GAAMnnB,QAAQyY,MAC/CxwB,KAAK4uB,MAAMyS,aACTtU,EAAMr2B,MAAQ,EACdq2B,EAAM//B,OACNkyC,GAAMnnB,QAAQwY,OAElB,MAAO,GAAIrE,EAAQ,EAAG,CACpBx1B,GAASo3C,EAAM9gD,SACf,IAAMiC,GAAQ,IAAI+d,IAAQM,OAAO5W,GAAO2W,OAAO,MAC/CrN,KAAK4uB,MAAMme,eAAe99C,EAAOiwC,GAAMnnB,QAAQyY,MAC/CxwB,KAAK4uB,MAAMyS,aAAa3qC,EAAOwoC,GAAMnnB,QAAQyY,KAC/C,CACF,CACF,GAEF,YAAa,CACXr0B,IAAK,MACLmuC,SAAU,KACV/rB,OAAQ,CAAC,SACTlP,QAAO,SAAC0d,EAAOxb,GACb,IAAQI,EAAsBJ,EAAtBI,MAAa+8B,EAASn9B,EAAfrB,KACTvU,EAAS+yC,EAAK/yC,OAAOqE,KAAK4uB,MAAMzT,QAClCxJ,EAAM24B,SACRtqC,KAAK4uB,MAAMyS,aAAa1lC,EAAS,EAAGujC,GAAMnnB,QAAQyY,MAElDxwB,KAAK4uB,MAAMyS,aAAa1lC,EAAS+yC,EAAK1hD,SAAUkyC,GAAMnnB,QAAQyY,KAElE,GAEF,gBAAiB,CACfr0B,IAAK,IACLmuC,SAAU,KACVzY,WAAW,EACXtT,OAAQ,CACN,cAAc,EACdqwB,YAAY,EACZd,OAAO,GAET38B,OAAQ,kCACR9B,QAAO,SAAC0d,EAAOxb,GACb,GAAuC,MAAnCvR,KAAK4uB,MAAMzT,OAAOE,MAAM,QAAiB,OAAO,EACpD,IAGIjgB,EAHIpO,EAAWukB,EAAQJ,OAAnBnkB,OACR6hD,EAAuB7uC,KAAK4uB,MAAM4c,QAAQze,EAAMr2B,OAAMo4C,GAAA5/B,EAAAA,EAAAA,GAAA2/B,EAAA,GAA/C3+B,EAAI4+B,EAAA,GAAEnzC,EAAMmzC,EAAA,GACnB,GAAInzC,EAAS3O,EAAQ,OAAO,EAE5B,OAAQukB,EAAQJ,OAAO4M,QACrB,IAAK,KACL,IAAK,MACH3iB,EAAQ,YACR,MACF,IAAK,MACHA,EAAQ,UACR,MACF,IAAK,IACL,IAAK,IACHA,EAAQ,SACR,MACF,QACEA,EAAQ,UAEZ4E,KAAK4uB,MAAM8T,WAAW3V,EAAMr2B,MAAO,IAAKwoC,GAAMnnB,QAAQyY,MACtDxwB,KAAK4uB,MAAMgR,QAAQmO,SACnB,IAAM9+C,GAAQ,IAAI+d,IACfM,OAAOyf,EAAMr2B,MAAQiF,GAAO,UACrB3O,EAAS,GAEhBsgB,OAAO4C,EAAKljB,SAAW,EAAI2O,GAC3B2R,OAAO,EAAG,CAAEqsB,KAAMv+B,IAIrB,OAHA4E,KAAK4uB,MAAMme,eAAe99C,EAAOiwC,GAAMnnB,QAAQyY,MAC/CxwB,KAAK4uB,MAAMgR,QAAQmO,SACnB/tC,KAAK4uB,MAAMyS,aAAatU,EAAMr2B,MAAQ1J,EAAQkyC,GAAMnnB,QAAQwY,SACrD,CACT,GAEF,YAAa,CACXp0B,IAAK,QACL01B,WAAW,EACXtT,OAAQ,CAAC,cACTpN,OAAQ,KACR4mB,OAAQ,QACR1oB,QAAO,SAAC0d,GACN,IAAAgiB,EAAuB/uC,KAAK4uB,MAAM4c,QAAQze,EAAMr2B,OAAMs4C,GAAA9/B,EAAAA,EAAAA,GAAA6/B,EAAA,GAA/C7+B,EAAI8+B,EAAA,GAAErzC,EAAMqzC,EAAA,GACfC,EAAW,EACX3tB,EAAMpR,EACV,MACS,MAAPoR,GACAA,EAAIt0B,UAAY,GAChBs0B,EAAIgF,UAAU,cAMd,GAHAhF,EAAMA,EAAI1C,KACVqwB,GAAY,EAERA,GAAY,EAAG,CACjB,IAAMhgD,GAAQ,IAAI+d,IAEfM,OAAOyf,EAAMr2B,MAAQwZ,EAAKljB,SAAW2O,EAAS,GAC9C2R,OAAO,EAAG,CAAE,aAAc,OAAO,UAC1B,GAGV,OAFAtN,KAAK4uB,MAAMme,eAAe99C,EAAOiwC,GAAMnnB,QAAQyY,MAC/CxwB,KAAK4uB,MAAMyS,aAAatU,EAAMr2B,MAAQ,EAAGwoC,GAAMnnB,QAAQwY,SAChD,CACT,CAEF,OAAO,CACT,GAEF,aAAc2e,GAAsB,aAAa,GACjD,mBAAoBA,GAAsB,aAAa,GACvD,cAAeA,GAAsB,cAAc,GACnD,oBAAqBA,GAAsB,cAAc,GACzD,aAAcC,IAAsB,GACpC,WAAYA,IAAsB,KAMtC,SAASvB,GAAqBzU,GAC5B,MAAO,CACLh9B,IAAK,MACLmuC,UAAWnR,EACX5a,OAAQ,CAAE,cAAc,GACxBlP,QAAO,SAAC0d,EAAKyC,GAAa,IAAT7d,EAAO6d,EAAP7d,MACTy3B,EAAYppC,KAAK4uB,MAAMzT,OAAOE,MAAM,cAElC+zB,EAAQhG,EAARgG,IACR,GAAqB,IAAjBriB,EAAM//B,SAAiB2kB,EAAM24B,SAG/B,OAFAtqC,KAAK4uB,MAAM8T,WAAW3V,EAAMr2B,MAAO04C,EAAKlQ,GAAMnnB,QAAQyY,WACtDxwB,KAAK4uB,MAAMyS,aAAatU,EAAMr2B,MAAQ04C,EAAIpiD,OAAQkyC,GAAMnnB,QAAQwY,QAIlE,IAAMtE,EACa,IAAjBc,EAAM//B,OACFgT,KAAK4uB,MAAMwY,SAASra,EAAMr2B,MAAO,GACjCsJ,KAAK4uB,MAAMwY,SAASra,GACpBr2B,EAAkBq2B,EAAlBr2B,MAAO1J,EAAW+/B,EAAX//B,OACbi/B,EAAMvvB,SAAQ,SAACwT,EAAMziB,GACf0rC,GACFjpB,EAAKmU,SAAS,EAAG+qB,GACP,IAAN3hD,EACFiJ,GAAS04C,EAAIpiD,OAEbA,GAAUoiD,EAAIpiD,QAGPkjB,EAAKyL,QAAQ0zB,YAAY5L,WAAW2L,KAC7Cl/B,EAAKiT,SAAS,EAAGisB,EAAIpiD,QACX,IAANS,EACFiJ,GAAS04C,EAAIpiD,OAEbA,GAAUoiD,EAAIpiD,OAGpB,IACAgT,KAAK4uB,MAAMnG,OAAOyW,GAAMnnB,QAAQyY,MAChCxwB,KAAK4uB,MAAMyS,aAAa3qC,EAAO1J,EAAQkyC,GAAMnnB,QAAQwY,OACvD,EAEJ,CAEA,SAAS2e,GACP/yC,EACAmuC,GAEA,IAAMgF,EAAgB,cAARnzC,EAAsB,SAAW,SAC/C,OAAAoT,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,CACEpT,IAAAA,EACAmuC,SAAAA,EACAI,OAAQ,MACP4E,EAAQ,MAAI,oBACLviB,GACN,IAAMr2B,EAAUq2B,EAAVr2B,MACM,eAARyF,IACFzF,GAASq2B,EAAM//B,OAAS,GAE1B,IAAAuiD,EAAevvC,KAAK4uB,MAAM+c,QAAQj1C,GAAM84C,GAAAtgC,EAAAA,EAAAA,GAAAqgC,EAAA,GAAjChjB,EAAIijB,EAAA,GACX,QAAMjjB,aAAgB/E,MACV,cAARrrB,EACEmuC,EACFtqC,KAAK4uB,MAAMyS,aACTtU,EAAMr2B,MAAQ,EACdq2B,EAAM//B,OAAS,EACfkyC,GAAMnnB,QAAQyY,MAGhBxwB,KAAK4uB,MAAMyS,aAAatU,EAAMr2B,MAAQ,EAAGwoC,GAAMnnB,QAAQyY,MAEhD8Z,EACTtqC,KAAK4uB,MAAMyS,aACTtU,EAAMr2B,MACNq2B,EAAM//B,OAAS,EACfkyC,GAAMnnB,QAAQyY,MAGhBxwB,KAAK4uB,MAAMyS,aACTtU,EAAMr2B,MAAQq2B,EAAM//B,OAAS,EAC7BkyC,GAAMnnB,QAAQyY,OAGX,EACT,GAEJ,CAEA,SAASgd,GAAkBjvB,GACzB,MAAO,CACLpiB,IAAKoiB,EAAO,GACZkxB,UAAU,EACVpgC,QAAO,SAAC0d,EAAOxb,GACbvR,KAAK4uB,MAAMrQ,OAAOA,GAAShN,EAAQgN,OAAOA,GAAS2gB,GAAMnnB,QAAQyY,KACnE,EAEJ,CAEA,SAAS2e,GAAsBO,GAC7B,MAAO,CACLvzC,IAAKuzC,EAAK,UAAY,YACtB7d,WAAW,EACXtT,OAAQ,CAAC,SACTlP,QAAO,SAAC0d,EAAOxb,GAEb,IAAMpV,EAAMuzC,EAAK,OAAS,OACpBhB,EAAOn9B,EAAQrB,KACfy/B,EAAYjB,EAAK5vB,OAAO3iB,GAC9B,GAAiB,MAAbwzC,GACF,GAAmC,cAA/BA,EAAUzwB,QAAQpC,SAA0B,CAE9C,IAAI8yB,EAAaD,EAAUrwB,SAASwB,KAChCQ,EAAMotB,EACV,MAAmB,MAAZptB,EAAI1C,KAET0C,EAAMA,EAAI1C,KACVgxB,EAAaA,EAAWvhC,KAE1B,IAAM3X,EACJk5C,EAAWj0C,OAAOqE,KAAK4uB,MAAMzT,QAC7B1sB,KAAKiC,IAAI6gB,EAAQ5V,OAAQi0C,EAAW5iD,SAAW,GACjDgT,KAAK4uB,MAAMyS,aAAa3qC,EAAO,EAAGwoC,GAAMnnB,QAAQyY,KAClD,MACK,CAEL,IAAMqf,EAAanB,EAAKZ,QAAQ3xC,GACd,MAAd0zC,IACEH,EACF1vC,KAAK4uB,MAAMyS,aACTwO,EAAWl0C,OAAOqE,KAAK4uB,MAAMzT,QAAU00B,EAAW7iD,SAAW,EAC7D,EACAkyC,GAAMnnB,QAAQyY,MAGhBxwB,KAAK4uB,MAAMyS,aACTwO,EAAWl0C,OAAOqE,KAAK4uB,MAAMzT,QAC7B,EACA+jB,GAAMnnB,QAAQyY,MAItB,CACA,OAAO,CACT,EAEJ,CAEA,SAASya,GAAUpjC,GACjB,GAAuB,kBAAZA,GAA2C,kBAAZA,EACxCA,EAAU,CAAE1L,IAAK0L,OACZ,IAAuB,YAAnBxN,EAAAA,EAAAA,GAAOwN,GAGhB,OAAO,KAFPA,EAAUpB,GAAUoB,EAGtB,CAKA,OAJIA,EAAQ4nC,WACV5nC,EAAQkiC,IAAYliC,EAAQ4nC,gBACrB5nC,EAAQ4nC,UAEV5nC,CACT,CAGA,SAASwlC,GAAWnI,GAAmD,IAAhDtW,EAA8CsW,EAA9CtW,MAAO7B,EAAuCmY,EAAvCnY,MACtBd,EAAQ2C,EAAMwY,SAASra,GACzBzG,EAAU,CAAC,EACf,GAAI2F,EAAMj/B,OAAS,EAAG,CACpB,IAAM8iD,EAAe7jB,EAAM,GAAG3F,UACxBypB,EAAc9jB,EAAMA,EAAMj/B,OAAS,GAAGs5B,UAC5CA,EAAU7a,GAAAA,aAAa/T,KAAKq4C,EAAaD,IAAiB,CAAC,CAC7D,CACAlhB,EAAMkS,WAAW/T,EAAOmS,GAAMnnB,QAAQyY,MAClCl2B,OAAOkD,KAAK8oB,GAASt5B,OAAS,GAChC4hC,EAAMuS,WAAWpU,EAAMr2B,MAAO,EAAG4vB,EAAS4Y,GAAMnnB,QAAQyY,MAE1D5B,EAAMyS,aAAatU,EAAMr2B,MAAOwoC,GAAMnnB,QAAQwY,OAChD,CAEA,SAASoe,GAAUqB,EAAiBvB,EAAWC,EAAY/yC,GACzD,OAAgB,MAAZ8yC,EAAI7vB,MAA4B,MAAZ6vB,EAAIpgC,KACT,MAAbqgC,EAAK9vB,MAA6B,MAAb8vB,EAAKrgC,KACV,IAAX1S,GAAgB,EAAI,EAET,MAAb+yC,EAAK9vB,MAAgB,EAAI,EAElB,MAAZ6vB,EAAI7vB,MACE,EAEM,MAAZ6vB,EAAIpgC,KACC,EAEF,IACT,CAlMA67B,GAAS5F,SAAWgJ,GC5nBpB,IAAM2C,GAAqB,wBACrBC,GAAgB,CAAC,IAAK,KAAM,MAE5BC,GAAkB,SAAA1U,GACtB,OAAOA,GAAWyU,GAAcE,SAAS3U,EAAQnf,QACnD,EAEM+zB,GAAuB,SAAAC,GAC3BxhD,MAAM2rB,KAAK61B,EAAI5hB,iBAAiB,OAC7BlhB,QACE,SAAA+iC,GAAE,OACDJ,GAAeI,EAAGC,yBAClBL,GAAeI,EAAGE,mBACtB,IACC/zC,SAAS,SAAA6zC,GAAO,IAAAG,EACF,QAAbA,EAAAH,EAAGtzB,kBAAU,IAAAyzB,GAAbA,EAAe3xB,YAAYwxB,EAC7B,GACJ,EAEMI,GAAuB,SAAAL,GAC3BxhD,MAAM2rB,KAAK61B,EAAI5hB,iBAAiB,4BAC7BlhB,QAAQ,SAAA2M,GAAI,IAAAy2B,EAAA,OAA+B,QAA/BA,EAAKz2B,EAAKK,aAAa,gBAAQ,IAAAo2B,OAAA,EAA1BA,EAA4B78C,MAAMk8C,GAAmB,IACtEvzC,SAAS,SAAAyd,GAAS,IAAA02B,EACXC,EAAWR,EAAIS,yBACrBD,EAAS3vB,OAAM/N,MAAf09B,GAAQ1vB,EAAAA,GAAAA,GAAWjH,EAAKsG,aACT,QAAfowB,EAAA12B,EAAK8C,kBAAU,IAAA4zB,GAAfA,EAAiBzuB,aAAa0uB,EAAU32B,EAC1C,GACJ,EAEe,SAAS8wB,GAAUqF,GAC5BA,EAAI1M,cAAc,iCACpB+M,GAAoBL,GACpBD,GAAoBC,GAExB,CClCA,IAAMU,GAAe,0BACfC,GAAW,4BACXC,GAAe,gCAEfC,GAAgB,SAAC1V,EAAkB/B,GACvC,IAAM5b,EAAQ2d,EAAQjhB,aAAa,SAC7B42B,EAAe,OAALtzB,QAAK,IAALA,OAAK,EAALA,EAAO/pB,MAAMk9C,IAC7B,IAAKG,EACH,OAAO,KAET,IAAMC,EAAK7tB,OAAO4tB,EAAQ,IAEpBE,EAAmB,OAALxzB,QAAK,IAALA,OAAK,EAALA,EAAO/pB,MAAMm9C,IAC3B/X,EAASmY,EAAc9tB,OAAO8tB,EAAY,IAAM,EAEhDC,EAAa,IAAIzzC,OAAO,UAAD1P,OACjBijD,EAAG,UAAAjjD,OAAQ+qC,EAAO,uDAC5B,KAEIqY,EAAY9X,EAAK3lC,MAAMw9C,GACvB/qC,EAAOgrC,GAA8B,WAAjBA,EAAU,GAAkB,SAAW,UAEjE,MAAO,CAAEH,GAAAA,EAAIlY,OAAAA,EAAQ3yB,KAAAA,EAAMi1B,QAAAA,EAC7B,EAKMgW,GAAqB,SAAAnB,GACzB,IAAMoB,EAAU5iD,MAAM2rB,KAAK61B,EAAI5hB,iBAAiB,sBAC1C6C,EAAqB,GACrBogB,EAAoB,GAC1BD,EAAQh1C,SAAS,SAAAyd,GACf,IAAMy3B,GAAgBz3B,EAAKK,aAAa,UAAY,IAAIzmB,MAAMi9C,IAC1DY,EACFrgB,EAAQnkC,KAAK+sB,GAEbw3B,EAAOvkD,KAAK+sB,EAEhB,IAGAoX,EAAQ70B,SAAS,SAAAyd,GAAI,IAAA02B,EAAA,OAAoB,QAApBA,EAAK12B,EAAK8C,kBAAU,IAAA4zB,OAAA,EAAfA,EAAiB9xB,YAAY5E,EAAK,IAI5D,IAAMuf,EAAO4W,EAAI7S,gBAAgB3D,UAC3B+X,EAAYF,EACf32C,KAAK,SAAAygC,GAAO,OAAK0V,GAAc1V,EAAS/B,EAAK,IAC7ClsB,QAAQ,SAAAskC,GAAM,OAAKA,CAAM,IAACC,EAAA,WAEJ,IAAAC,EACjBC,EAAiB,GAEnBjV,EAAU6U,EAAU3lB,QAExB,MAAO8Q,EAAS,KAAAkV,EACdD,EAAe7kD,KAAK4vC,GACpBA,EACE6U,EAAU7kD,SACE,QAAZklD,EAAAL,EAAU,UAAE,IAAAK,OAAA,EAAZA,EAAczW,WAAYuB,EAAQvB,QAAQgV,oBAE1CoB,EAAU,GAAGR,KAAOrU,EAAQqU,GACxBQ,EAAU3lB,QACV,IACR,CAEA,IAAMimB,EAAKlyB,SAASC,cAAc,MAClC+xB,EAAev1C,SAAS,SAAA01C,GACtB,IAAMC,EAAKpyB,SAASC,cAAc,MAClCmyB,EAAGh4B,aAAa,YAAa+3B,EAAS5rC,MAClC4rC,EAASjZ,OAAS,GACpBkZ,EAAGh4B,aAAa,QAAS,aAAFjsB,OAAegkD,EAASjZ,OAAS,IAE1DkZ,EAAGvY,UAAYsY,EAAS3W,QAAQ3B,UAChCqY,EAAGryB,YAAYuyB,EACjB,IAEA,IAAM5W,EAA2B,QAApBuW,EAAGC,EAAe,UAAE,IAAAD,OAAA,EAAjBA,EAAmBvW,QACnCyJ,EAA8B,OAAPzJ,QAAO,IAAPA,EAAAA,EAAW,CAAC,EAA3Bxe,EAAAioB,EAAAjoB,WACJwe,IACQ,OAAVxe,QAAU,IAAVA,GAAAA,EAAYmF,aAAa+vB,EAAI1W,IAE/BwW,EAAe5gD,MAAM,GAAGqL,SAAQ,SAAA8yB,GAAoB,IAARjzB,EAAGizB,EAAZiM,QACvB,OAAVxe,QAAU,IAAVA,GAAAA,EAAY8B,YAAYxiB,EAC1B,GACF,EAnCA,MAAOs1C,EAAU7kD,OAAM+kD,GAoCzB,EAEe,SAAS9G,GAAUqF,GAG9B,0CADAA,EAAI7S,gBAAgBjjB,aAAa,YAGjCi3B,GAAkBnB,EAEtB,CC7FA,IAAMgC,GAAc,CAACC,GAAQC,IAEvBC,GAAyB,SAAAnC,GACzBA,EAAI7S,iBACN6U,GAAY51C,SAAS,SAAAuuC,GACnBA,EAAUqF,EACZ,GAEJ,EAEA,YCaA,IAAMviB,GAAQM,GAAO,mBAKfqkB,GAA0C,CAC9C,CAACn3B,KAAKC,UAAWm3B,IACjB,CAACp3B,KAAKC,UAAWo3B,IACjB,CAAC,KAAMC,IACP,CAACt3B,KAAKu3B,aAAcF,IACpB,CAACr3B,KAAKu3B,aAAcC,IACpB,CAACx3B,KAAKu3B,aAAcE,IACpB,CAACz3B,KAAKu3B,aAAcG,IACpB,CAAC,KAAMC,IACP,CAAC,SAAUC,IACX,CAAC,MAAOC,IACR,CAAC,KAAMC,IACP,CAAC,IAAKC,GAAiB,SACvB,CAAC,IAAKA,GAAiB,WACvB,CAAC,SAAUA,GAAiB,WAC5B,CAAC,QAASC,KAGNC,GAAwB,CAAClL,GAAgBiB,IAAoBv9B,QACjE,SAACM,EAAkCH,GAEjC,OADAG,EAAKH,EAAK2N,SAAW3N,EACdG,CACT,GACA,CAAC,GAGGmnC,GAAoB,CACxBjL,GACAO,GACAF,GACAY,GACAG,GACAE,IACA99B,QAAO,SAACM,EAAkCH,GAE1C,OADAG,EAAKH,EAAK2N,SAAW3N,EACdG,CACT,GAAG,CAAC,GAMEonC,GAAS,SAAAvJ,GAOb,SAAAuJ,EAAY9kB,EAAc7U,GAAoC,IAAA45B,EAAA94B,EAY3D,OAZ2D3N,EAAAA,EAAAA,GAAA,KAAAwmC,GAC5D74B,GAAAC,EAAAA,GAAAA,GAAA,KAAA44B,EAAA,CAAM9kB,EAAO7U,IACbc,EAAK+T,MAAMn0B,KAAKg0B,iBAAiB,QAAS,SAAAlyB,GAAC,OACzCse,EAAK+4B,cAAcr3C,GAAG,EACxB,IACAse,EAAK+T,MAAMn0B,KAAKg0B,iBAAiB,OAAQ,SAAAlyB,GAAC,OAAKse,EAAK+4B,cAAcr3C,GAAG,EAAK,IAC1Ese,EAAK+T,MAAMn0B,KAAKg0B,iBAAiB,QAAS5T,EAAKg5B,eAAer7B,KAAIqC,IAClEA,EAAKi5B,SAAW,GAChBpB,GAAiBtkD,OAA4B,QAAtBulD,EAAC94B,EAAKd,QAAQ+5B,gBAAQ,IAAAH,EAAAA,EAAI,IAAIj3C,SACnD,SAAA8yB,GAAyB,IAAAwY,GAAA94B,EAAAA,EAAAA,GAALsgB,EAAA,GAAlBmU,EAAQqE,EAAA,GAAE+L,EAAO/L,EAAA,GACjBntB,EAAKm5B,WAAWrQ,EAAUoQ,EAC5B,IACDl5B,CACH,QAAAE,EAAAA,GAAAA,GAAA24B,EAAAvJ,IAAAh9B,EAAAA,EAAAA,GAAAumC,EAAA,EAAAv3C,IAAA,aAAAf,MAEA,SAAWuoC,EAAoBoQ,GAC7B/zC,KAAK8zC,SAAS1mD,KAAK,CAACu2C,EAAUoQ,GAChC,IAAA53C,IAAA,UAAAf,MAEA,SAAO8pC,GAGL,IAFExL,EAA8CwL,EAA9CxL,KAAM1d,EAAwCkpB,EAAxClpB,KACRsK,EAAgC/a,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAG,CAAC,EAEpC,GAAI+a,EAAQ8iB,GAAUtsB,UACpB,OAAO,IAAI9P,IAAQK,OAAO2O,GAAQ,IAAEzM,EAAAA,EAAAA,GAAA,GACjC65B,GAAUtsB,SAAWwJ,EAAQ8iB,GAAUtsB,YAG5C,IAAK4c,EACH,OAAO,IAAI1sB,IAAQK,OAAO2O,GAAQ,GAAIsK,GAExC,IAAMr3B,EAAQ+Q,KAAKs3B,YAAYoC,GAE/B,OACEua,GAAchlD,EAAO,QAC0B,MAA9CA,EAAMge,IAAIhe,EAAMge,IAAIjgB,OAAS,GAAG+e,YAAsBua,EAAQwnB,OAExD7+C,EAAM0c,SAAQ,IAAIqB,IAAQM,OAAOre,EAAMjC,SAAW,GAAE,UAAQ,IAE9DiC,CACT,IAAAkN,IAAA,gBAAAf,MAEU,SAAck1C,GACtBmC,GAAsBnC,EACxB,IAAAn0C,IAAA,cAAAf,MAEU,SAAYs+B,GACpB,IAAM4W,GAAM,IAAI4D,WAAYC,gBAAgBza,EAAM,aAClD15B,KAAKo0C,cAAc9D,GACnB,IAAMnR,EAAYmR,EAAI5qB,KAChB2uB,EAAc,IAAIl1C,QACxBm1C,EAAwCt0C,KAAKu0C,gBAC3CpV,EACAkV,GACDG,GAAAtlC,EAAAA,EAAAA,GAAAolC,EAAA,GAHMG,EAAeD,EAAA,GAAEE,EAAYF,EAAA,GAIpC,OAAOG,GACL30C,KAAK4uB,MAAMzT,OACXgkB,EACAsV,EACAC,EACAL,EAEJ,IAAAl4C,IAAA,uBAAAf,MAQA,SACE1E,EACAgjC,GAEA,IADA52B,EAAqByI,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAG2zB,GAAMnnB,QAAQuY,IAEtC,GAAqB,kBAAV55B,EAAoB,CAC7B,IAAMzH,EAAQ+Q,KAAK8K,QAAQ,CAAE4uB,KAAMhjC,EAAOslB,KAAM,KAEhDhc,KAAK4uB,MAAM0R,YAAYrxC,EAAOyqC,GAC9B15B,KAAK4uB,MAAMyS,aAAa,EAAGnC,GAAMnnB,QAAQwY,OAC3C,KAAO,CACL,IAAMqkB,EAAQ50C,KAAK8K,QAAQ,CAAE4uB,KAAAA,EAAM1d,KAAM,KACzChc,KAAK4uB,MAAMme,gBACT,IAAI//B,IAAQM,OAAO5W,GAAOtI,OAAOwmD,GACjC9xC,GAEF9C,KAAK4uB,MAAMyS,aAAa3qC,EAAQk+C,EAAM5nD,SAAUkyC,GAAMnnB,QAAQwY,OAChE,CACF,IAAAp0B,IAAA,gBAAAf,MAEA,SAAcmB,GAAkC,IAAAs4C,EAAAC,EAAfC,EAAKxpC,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,IAAAA,UAAA,GACpC,IAAIhP,EAAE4uC,iBAAN,CACA5uC,EAAEkrC,iBACF,IAAAuN,EAAgBh1C,KAAK4uB,MAAMlC,UAAUuI,WAAUggB,GAAA/lC,EAAAA,EAAAA,GAAA8lC,EAAA,GAAxCjoB,EAAKkoB,EAAA,GACZ,GAAa,MAATloB,EAAJ,CACA,IAAAmoB,EAAuBl1C,KAAKm1C,OAAOpoB,EAAOgoB,GAAlCrb,EAAIwb,EAAJxb,KAAM1d,EAAAk5B,EAAAl5B,KACC,QAAf64B,EAAAt4C,EAAE64C,qBAAa,IAAAP,GAAfA,EAAiBQ,QAAQ,aAAcr5B,GACxB,QAAf84B,EAAAv4C,EAAE64C,qBAAa,IAAAN,GAAfA,EAAiBO,QAAQ,YAAa3b,GAClCqb,GACF1H,GAAY,CAAEtgB,MAAAA,EAAO6B,MAAO5uB,KAAK4uB,OALV,CAHK,CAUhC,GAEA,CAAAzyB,IAAA,mBAAAf,MAGQ,SAAiBk6C,GACvB,OACEA,EACGl5B,MAAM,SAEN5O,QAAQ,SAAA+nC,GAAG,MAAgB,MAAXA,EAAI,EAAU,IAC9B3lC,KAAK,KAEZ,IAAAzT,IAAA,iBAAAf,MAEA,SAAemB,GAAmB,IAAAi5C,EAAAC,EAAAC,EAChC,IAAIn5C,EAAE4uC,kBAAqBnrC,KAAK4uB,MAAM+T,YAAtC,CACApmC,EAAEkrC,iBACF,IAAM1a,EAAQ/sB,KAAK4uB,MAAM8E,cAAa,GACtC,GAAa,MAAT3G,EAAJ,CACA,IAAM2M,EAAsB,QAAlB8b,EAAGj5C,EAAE64C,qBAAa,IAAAI,OAAA,EAAfA,EAAiBG,QAAQ,aAClC35B,EAAsB,QAAlBy5B,EAAGl5C,EAAE64C,qBAAa,IAAAK,OAAA,EAAfA,EAAiBE,QAAQ,cACpC,IAAKjc,IAAS1d,EAAM,KAAA45B,EACZN,EAAyB,QAAlBM,EAAGr5C,EAAE64C,qBAAa,IAAAQ,OAAA,EAAfA,EAAiBD,QAAQ,iBACrCL,IACFt5B,EAAOhc,KAAK61C,iBAAiBP,GAEjC,CACA,IAAMQ,EAAQhnD,MAAM2rB,MAAoB,QAAfi7B,EAAAn5C,EAAE64C,qBAAa,IAAAM,OAAA,EAAfA,EAAiBI,QAAS,IACnD,IAAKpc,GAAQoc,EAAM9oD,OAAS,EAC1BgT,KAAK4uB,MAAMiR,SAASkW,OAAOhpB,EAAO+oB,OADpC,CAIA,GAAIpc,GAAQoc,EAAM9oD,OAAS,EAAG,KAAAgpD,EACtB1F,GAAM,IAAI4D,WAAYC,gBAAgBza,EAAM,aAClD,GACiC,IAA/B4W,EAAI5qB,KAAKuwB,mBAC+B,SAAd,QAA1BD,EAAA1F,EAAI5qB,KAAKwwB,yBAAiB,IAAAF,OAAA,EAA1BA,EAA4B15B,SAG5B,YADAtc,KAAK4uB,MAAMiR,SAASkW,OAAOhpB,EAAO+oB,EAGtC,CACA91C,KAAKm2C,QAAQppB,EAAO,CAAE2M,KAAAA,EAAM1d,KAAAA,GAX5B,CAbyB,CAHgC,CA4B3D,IAAA7f,IAAA,SAAAf,MAGA,SAAO2xB,GACL,IAAM/Q,EAAOhc,KAAK4uB,MAAMgJ,QAAQ7K,GAC1B2M,EAAO15B,KAAK4uB,MAAMwnB,gBAAgBrpB,GACxC,MAAO,CAAE2M,KAAAA,EAAM1d,KAAAA,EACjB,IAAA7f,IAAA,UAAAf,MAEA,SAAQ2xB,EAAYiX,GAAoD,IAAhDhoB,EAA8CgoB,EAA9ChoB,KAAM0d,EAAwCsK,EAAxCtK,KACtBpT,EAAUtmB,KAAK4uB,MAAMoT,UAAUjV,EAAMr2B,OACrC2/C,EAAcr2C,KAAK8K,QAAQ,CAAEkR,KAAAA,EAAM0d,KAAAA,GAAQpT,GACjDyH,GAAMsB,IAAI,UAAWgnB,EAAa,CAAEr6B,KAAAA,EAAM0d,KAAAA,IAC1C,IAAMzqC,GAAQ,IAAI+d,IACfM,OAAOyf,EAAMr2B,OAAM,UACZq2B,EAAM//B,QACboB,OAAOioD,GACVr2C,KAAK4uB,MAAMme,eAAe99C,EAAOiwC,GAAMnnB,QAAQyY,MAE/CxwB,KAAK4uB,MAAMyS,aACTpyC,EAAMjC,SAAW+/B,EAAM//B,OACvBkyC,GAAMnnB,QAAQwY,QAEhBvwB,KAAK4uB,MAAMsS,yBACb,IAAA/kC,IAAA,kBAAAf,MAEA,SAAgB+jC,EAAoBkV,GAClC,IAAMI,EAA6B,GAC7BC,EAA0B,GAsBhC,OArBA10C,KAAK8zC,SAASp3C,SAAS,SAAAzB,GACrB,IAAAq7C,GAAApnC,EAAAA,EAAAA,GAA4BjU,EAAI,GAAzB0oC,EAAQ2S,EAAA,GAAEvC,EAAOuC,EAAA,GACxB,OAAQ3S,GACN,KAAKpoB,KAAKC,UACRk5B,EAAatnD,KAAK2mD,GAClB,MACF,KAAKx4B,KAAKu3B,aACR2B,EAAgBrnD,KAAK2mD,GACrB,MACF,QACEjlD,MAAM2rB,KAAK0kB,EAAUzQ,iBAAiBiV,IAAWjnC,SAAS,SAAAyd,GACxD,GAAIk6B,EAAY/zC,IAAI6Z,GAAO,CACzB,IAAMmxB,EAAU+I,EAAY7yC,IAAI2Y,GACzB,OAAPmxB,QAAO,IAAPA,GAAAA,EAASl+C,KAAK2mD,EAChB,MACEM,EAAYn5C,IAAIif,EAAM,CAAC45B,GAE3B,IACA,MAEN,IACO,CAACU,EAAiBC,EAC3B,KA3Ma,CAASra,IA8MxB,SAASkc,GACPtnD,EACAsvB,EACAnjB,EACA+f,GAEA,OAAKA,EAAOE,MAAMkD,GAIXtvB,EAAM+c,QAAO,SAACwqC,EAAU7oC,GAC7B,IAAKA,EAAGN,OAAQ,OAAOmpC,EACvB,GAAI7oC,EAAG5B,YAAc4B,EAAG5B,WAAWwS,GACjC,OAAOi4B,EAASppD,KAAKugB,GAEvB,IAAM2Y,EAAUlrB,GAAKmU,EAAAA,EAAAA,GAAA,GAAMgP,EAASnjB,GAAU,CAAC,EAC/C,OAAOo7C,EAASnpC,OAAOM,EAAGN,QAAMgf,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAO/F,GAAY3Y,EAAG5B,YACxD,GAAG,IAAIiB,IAVE/d,CAWX,CAEA,SAASglD,GAAchlD,EAAc+sB,GAEnC,IADA,IAAIy6B,EAAU,GAERhpD,EAAIwB,EAAMge,IAAIjgB,OAAS,EAC3BS,GAAK,GAAKgpD,EAAQzpD,OAASgvB,EAAKhvB,SAC9BS,EACF,CACA,IAAMkgB,EAAK1e,EAAMge,IAAIxf,GACrB,GAAyB,kBAAdkgB,EAAGN,OAAqB,MACnCopC,EAAU9oC,EAAGN,OAASopC,CACxB,CACA,OAAOA,EAAQplD,OAAO,EAAI2qB,EAAKhvB,UAAYgvB,CAC7C,CAEA,SAAS6pB,GAAO1rB,EAAYgB,GAC1B,KAAMhB,aAAgBgC,SAAU,OAAO,EACvC,IAAMpoB,EAAQonB,EAAOE,MAAMlB,GAE3B,QAAIpmB,GAASA,EAAMkJ,qBAAqBuqB,KAEjC,CACL,UACA,UACA,aACA,SACA,KACA,MACA,KACA,KACA,WACA,aACA,SACA,SACA,OACA,KACA,KACA,KACA,KACA,KACA,KACA,SACA,SACA,KACA,OACA,MACA,KACA,SACA,IACA,MACA,UACA,QACA,KACA,KACA,KACA,SACA4oB,SAASj2B,EAAKmC,QAAQoK,cAC1B,CAEA,SAASgwB,GAAwBv8B,EAAmBgB,GAClD,OACEhB,EAAKq2B,wBACLr2B,EAAKs2B,qBACJ5K,GAAO1rB,EAAKq2B,uBAAwBr1B,KACpC0qB,GAAO1rB,EAAKs2B,mBAAoBt1B,EAErC,EAnS8B5L,EAAAA,EAAAA,GAAxBmkC,GAAS,WACuB,CAClCI,SAAU,KAmSd,IAAM6C,GAAW,IAAIx3C,QACrB,SAASy3C,GAAMz8B,GACb,OAAY,MAARA,IACCw8B,GAASr2C,IAAI6Z,KAEK,QAAjBA,EAAKmC,QACPq6B,GAASz7C,IAAIif,GAAM,GAEnBw8B,GAASz7C,IAAIif,EAAMy8B,GAAMz8B,EAAK8C,cAG3B05B,GAASn1C,IAAI2Y,GACtB,CAEA,SAASw6B,GACPx5B,EACAhB,EACAs6B,EACAC,EACAL,GAGA,OAAIl6B,EAAKvf,WAAauf,EAAKqB,UAClBk5B,EAAa1oC,QAAO,SAAC/c,EAAc8kD,GACxC,OAAOA,EAAQ55B,EAAMlrB,EAAOksB,EAC9B,GAAG,IAAInO,IAELmN,EAAKvf,WAAauf,EAAK24B,aAClBhkD,MAAM2rB,KAAKN,EAAKsG,YAAc,IAAIzU,QAAO,SAAC/c,EAAOwrC,GACtD,IAAIoc,EAAgBlC,GAClBx5B,EACAsf,EACAga,EACAC,EACAL,GAaF,OAXI5Z,EAAU7/B,WAAauf,EAAK24B,eAC9B+D,EAAgBpC,EAAgBzoC,QAAO,SAAC8qC,EAAc/C,GACpD,OAAOA,EAAQtZ,EAA0Bqc,EAAc37B,EACzD,GAAG07B,GACHA,GAAiBxC,EAAY7yC,IAAIi5B,IAAc,IAAIzuB,QACjD,SAAC8qC,EAAc/C,GACb,OAAOA,EAAQtZ,EAAWqc,EAAc37B,EAC1C,GACA07B,IAGG5nD,EAAMb,OAAOyoD,EACtB,GAAG,IAAI7pC,IAEF,IAAIA,EACb,CAEA,SAASsmC,GAAiB/0B,GACxB,OAAO,SAACjE,EAAgBrrB,EAAcksB,GACpC,OAAOo7B,GAAYtnD,EAAOsvB,GAAQ,EAAMpD,EAC1C,CACF,CAEA,SAAS63B,GAAgB74B,EAAmBlrB,EAAcksB,GACxD,IAAMpP,EAAa6N,GAAWpc,KAAK2c,GAC7Bc,EAAUmC,GAAgB5f,KAAK2c,GAC/BkE,EAAST,GAAgBpgB,KAAK2c,GAC9BmM,EAA8C,CAAC,EAqBrD,OApBAva,EACG3d,OAAO6sB,GACP7sB,OAAOiwB,GACP3hB,SAAS,SAAAkO,GACR,IAAIuB,EAAOgP,EAAOE,MAAMzQ,EAAMmO,GAAMI,WACxB,MAARhN,IACFma,EAAQna,EAAK0N,UAAY1N,EAAK/Q,MAAM+e,GAChCmM,EAAQna,EAAK0N,aAEnB1N,EAAOqnC,GAAsB5oC,GACjB,MAARuB,GAAiBA,EAAK0N,WAAajP,GAAQuB,EAAK2N,UAAYlP,IAC9D0b,EAAQna,EAAK0N,UAAY1N,EAAK/Q,MAAM+e,SAAS/d,GAE/C+P,EAAOsnC,GAAkB7oC,GACb,MAARuB,GAAiBA,EAAK0N,WAAajP,GAAQuB,EAAK2N,UAAYlP,IAC9DuB,EAAOsnC,GAAkB7oC,GACzB0b,EAAQna,EAAK0N,UAAY1N,EAAK/Q,MAAM+e,SAAS/d,GAEjD,IAEK9B,OAAOyF,QAAQumB,GAASta,QAC7B,SAACwqC,EAAQrR,GAAA,IAAA4R,GAAA7nC,EAAAA,EAAAA,GAAei2B,EAAA,GAAZv6B,EAAImsC,EAAA,GAAE37C,EAAK27C,EAAA,GAAC,OAAKR,GAAYC,EAAU5rC,EAAMxP,EAAO+f,EAAO,GACvElsB,EAEJ,CAEA,SAAS8jD,GAAU54B,EAAYlrB,EAAcksB,GAC3C,IAAMpnB,EAAQonB,EAAOE,MAAMlB,GAC3B,GAAa,MAATpmB,EAAe,OAAO9E,EAE1B,GAAI8E,EAAMkJ,qBAAqBuqB,GAAW,CACxC,IAAMmQ,EAAQ,CAAC,EAETv8B,EAAQrH,EAAMqH,MAAM+e,GAC1B,GAAa,MAAT/e,EAIF,OAFAu8B,EAAM5jC,EAAM+oB,UAAY1hB,GAEjB,IAAI4R,IAAQK,OAAOsqB,EAAO5jC,EAAMuyB,QAAQnM,EAAMgB,GAEzD,MAKE,GAHIpnB,EAAMkJ,qBAAqBgqB,KAAcgtB,GAAchlD,EAAO,OAChEA,EAAMoe,OAAO,MAGb,aAActZ,GACd,YAAaA,GACY,oBAAlBA,EAAMuyB,QAEb,OAAOiwB,GACLtnD,EACA8E,EAAM+oB,SACN/oB,EAAMuyB,QAAQnM,EAAMgB,GACpBA,GAIN,OAAOlsB,CACT,CAEA,SAAS4jD,GAAW14B,EAAYlrB,GAI9B,OAHKglD,GAAchlD,EAAO,OACxBA,EAAMoe,OAAO,MAERpe,CACT,CAEA,SAASmkD,GAAej5B,EAAYlrB,EAAcksB,GAChD,IAAMpnB,EAAQonB,EAAOE,MAAM,cACrB27B,GACJjjD,KAAS,YAAaA,IAAkC,oBAAlBA,EAAMuyB,SACxCvyB,EAAMuyB,QAAQnM,EAAMgB,GAE1B,OAAOo7B,GAAYtnD,EAAO,aAAc+nD,EAAU77B,EACpD,CAEA,SAASo4B,KACP,OAAO,IAAIvmC,EACb,CAEA,SAASkmC,GAAY/4B,EAAYlrB,EAAcksB,GAC7C,IAAMpnB,EAAQonB,EAAOE,MAAMlB,GAC3B,GACW,MAATpmB,GAEmB,SAAnBA,EAAM+oB,WACLm3B,GAAchlD,EAAO,MAEtB,OAAOA,EAET,IAAIkqC,GAAU,EACVra,EAAS3E,EAAK8C,WAClB,MAAiB,MAAV6B,EAED,CAAC,KAAM,MAAMsxB,SAAStxB,EAAOxC,WAC/B6c,GAAU,GAEZra,EAASA,EAAO7B,WAElB,OAAIkc,GAAU,EAAUlqC,EACjBA,EAAM+c,QAAO,SAACirC,EAAUtpC,GAC7B,OAAKA,EAAGN,OACJM,EAAG5B,YAA8C,kBAAzB4B,EAAG5B,WAAWotB,OACjC8d,EAAS7pD,KAAKugB,GAEhBspC,EAAS5pC,OAAOM,EAAGN,QAAMgf,EAAAA,EAAAA,GAAA,CAAI8M,OAAAA,GAAYxrB,EAAG5B,YAAc,CAAC,IAJ3CkrC,CAKzB,GAAG,IAAIjqC,GACT,CAEA,SAASmmC,GAAUh5B,EAAYlrB,EAAcksB,GAC3C,IAAMsgB,EAAUthB,EACZwf,EAA2B,OAApB8B,EAAQnf,QAAmB,UAAY,SAE5C46B,EAAczb,EAAQjhB,aAAa,gBAKzC,OAJI08B,IACFvd,EAAuB,SAAhBud,EAAyB,UAAY,aAGvCX,GAAYtnD,EAAO,OAAQ0qC,EAAMxe,EAC1C,CAEA,SAASy3B,GAAaz4B,EAAYlrB,EAAcksB,GAC9C,IAAK84B,GAAchlD,EAAO,MAAO,CAC/B,GACE42C,GAAO1rB,EAAMgB,KACZhB,EAAKsG,WAAWzzB,OAAS,GAAKmtB,aAAgBg9B,sBAE/C,OAAOloD,EAAMoe,OAAO,MAEtB,GAAIpe,EAAMjC,SAAW,GAAKmtB,EAAKsK,YAAa,CAC1C,IAAIA,EAA2BtK,EAAKsK,YACpC,MAAsB,MAAfA,EAAqB,CAC1B,GAAIohB,GAAOphB,EAAatJ,GACtB,OAAOlsB,EAAMoe,OAAO,MAEtB,IAAMtZ,EAAQonB,EAAOE,MAAMoJ,GAE3B,GAAI1wB,GAASA,EAAMkJ,qBAAqBmvB,GACtC,OAAOn9B,EAAMoe,OAAO,MAEtBoX,EAAcA,EAAY5B,UAC5B,CACF,CACF,CACA,OAAO5zB,CACT,CAEA,SAASgkD,GAAY94B,EAAmBlrB,EAAcksB,GAAoB,IAAAi8B,EAClE9wB,EAAmC,CAAC,EACpCxI,EAAsC3D,EAAK2D,OAAS,CAAC,EAsB3D,MArBwB,WAApBA,EAAMu5B,YACR/wB,EAAQmnB,QAAS,GAEU,cAAzB3vB,EAAMw5B,iBACRhxB,EAAQonB,WAAY,GAEO,iBAAzB5vB,EAAMw5B,iBACRhxB,EAAQixB,QAAS,IAGD,QAAhBH,EAAAt5B,EAAM05B,kBAAU,IAAAJ,GAAhBA,EAAkB3T,WAAW,SAE7BzjB,SAASlC,EAAM05B,WAAY,KAAO,OAElClxB,EAAQinB,MAAO,GAEjBt+C,EAAQqL,OAAOyF,QAAQumB,GAASta,QAC9B,SAACwqC,EAAQ1O,GAAA,IAAA2P,GAAAvoC,EAAAA,EAAAA,GAAe44B,EAAA,GAAZl9B,EAAI6sC,EAAA,GAAEr8C,EAAKq8C,EAAA,GAAC,OAAKlB,GAAYC,EAAU5rC,EAAMxP,EAAO+f,EAAO,GACvElsB,GAGEyoD,WAAW55B,EAAM65B,YAAc,GAAK,GAE/B,IAAI3qC,IAAQK,OAAO,MAAMjf,OAAOa,GAElCA,CACT,CAEA,SAASokD,GACPl5B,EACAlrB,EACAksB,GACA,IAAAy8B,EAAAC,EACM/J,EAC4B,WAAd,QAAlB8J,EAAAz9B,EAAKuhB,qBAAa,IAAAkc,OAAA,EAAlBA,EAAoBt7B,SAChBnC,EAAKuhB,cACa,QADAmc,EAClB19B,EAAKuhB,qBAAa,IAAAmc,OAAA,EAAlBA,EAAoBnc,cAC1B,GAAa,MAAToS,EAAe,CACjB,IAAMgK,EAAOhpD,MAAM2rB,KAAKqzB,EAAMpf,iBAAiB,OACzC+f,EAAMqJ,EAAKpqD,QAAQysB,GAAQ,EACjC,OAAOo8B,GAAYtnD,EAAO,QAASw/C,EAAKtzB,EAC1C,CACA,OAAOlsB,CACT,CAEA,SAAS0jD,GAAUx4B,EAAmBlrB,EAAcksB,GAAoB,IAAA48B,EAElE/7B,EAAO7B,EAAK3Z,KAEhB,GAAoC,SAAd,QAAlBu3C,EAAA59B,EAAKuhB,qBAAa,IAAAqc,OAAA,EAAlBA,EAAoBz7B,SACtB,OAAOrtB,EAAMoe,OAAO2O,EAAK+B,QAE3B,IAAK64B,GAAMz8B,GAAO,CAChB,GACyB,IAAvB6B,EAAK+B,OAAO/wB,QACZgvB,EAAKo0B,SAAS,QACbsG,GAAwBv8B,EAAMgB,GAE/B,OAAOlsB,EAET,IAAM+oD,EAAW,SAACC,EAAmBlkD,GACnC,IAAMmkD,EAAWnkD,EAAMiK,QAAQ,aAAc,IAC7C,OAAOk6C,EAASlrD,OAAS,GAAKirD,EAAW,IAAMC,CACjD,EACAl8B,EAAOA,EAAKhe,QAAQ,QAAS,KAAKA,QAAQ,MAAO,KACjDge,EAAOA,EAAKhe,QAAQ,SAAUg6C,EAASx/B,KAAKw/B,GAAU,KAE3B,MAAxB79B,EAAKkP,iBACkB,MAAtBlP,EAAKuhB,eACLmK,GAAO1rB,EAAKuhB,cAAevgB,IAC5BhB,EAAKkP,2BAA2BlN,SAC/B0pB,GAAO1rB,EAAKkP,gBAAiBlO,MAE/Ba,EAAOA,EAAKhe,QAAQ,OAAQg6C,EAASx/B,KAAKw/B,GAAU,MAG/B,MAApB79B,EAAKsK,aACkB,MAAtBtK,EAAKuhB,eACLmK,GAAO1rB,EAAKuhB,cAAevgB,IAC5BhB,EAAKsK,uBAAuBtI,SAAW0pB,GAAO1rB,EAAKsK,YAAatJ,MAEjEa,EAAOA,EAAKhe,QAAQ,OAAQg6C,EAASx/B,KAAKw/B,GAAU,IAExD,CACA,OAAO/oD,EAAMoe,OAAO2O,EACtB,CCvpBoC,IAoB9Bm8B,GAAO,SAAAhO,GAYX,SAAAgO,EAAYvpB,EAAc7U,GAAkC,IAAAc,EA8CxD,OA9CwD3N,EAAAA,EAAAA,GAAA,KAAAirC,GAC1Dt9B,GAAAC,EAAAA,GAAAA,GAAA,KAAAq9B,EAAA,CAAMvpB,EAAO7U,KAAQxK,EAAAA,EAAAA,GAAAsL,EAAA,eANR,IAACtL,EAAAA,EAAAA,GAAAsL,EAAA,gBACD,IAAKtL,EAAAA,EAAAA,GAAAsL,EAAA,QACL,CAAEu9B,KAAM,GAAIC,KAAM,MAAI9oC,EAAAA,EAAAA,GAAAsL,EAAA,eACR,MAI3BA,EAAK+T,MAAMvb,GACT6rB,GAAM7sB,OAAOod,eACb,SAACjB,EAAWpzB,EAAOg9B,EAAUt1B,GACvB0rB,IAAc0Q,GAAM7sB,OAAO2d,iBACzB50B,GAAS0H,IAAWo8B,GAAMnnB,QAAQwY,SACpC1V,EAAKy9B,aAAel9C,GAEbozB,IAAc0Q,GAAM7sB,OAAO4d,cAC/BpV,EAAK09B,eACH19B,EAAKd,QAAQy+B,UAAY11C,IAAWo8B,GAAMnnB,QAAQyY,KAGrD3V,EAAKhe,UAAUzB,GAFfyf,EAAK49B,OAAOr9C,EAAOg9B,IAMvBvd,EAAKy9B,aAAeI,GAAe79B,EAAKy9B,aAAcl9C,GAE1D,IAGFyf,EAAK+T,MAAM8Q,SAAS2K,WAClB,CAAEluC,IAAK,IAAKszC,UAAU,GACtB50B,EAAKu9B,KAAK5/B,KAAIqC,IAEhBA,EAAK+T,MAAM8Q,SAAS2K,WAClB,CAAEluC,IAAK,CAAC,IAAK,KAAMszC,UAAU,EAAMnF,UAAU,GAC7CzvB,EAAKw9B,KAAK7/B,KAAIqC,IAEZ,OAAOhW,KAAKmlC,UAAUC,WACxBpvB,EAAK+T,MAAM8Q,SAAS2K,WAClB,CAAEluC,IAAK,IAAKszC,UAAU,GACtB50B,EAAKw9B,KAAK7/B,KAAIqC,IAIlBA,EAAK+T,MAAMn0B,KAAKg0B,iBAAiB,eAAgB,SAAA9c,GACvB,gBAApBA,EAAMgnC,WACR99B,EAAKu9B,OACLzmC,EAAM81B,kBACuB,gBAApB91B,EAAMgnC,YACf99B,EAAKw9B,OACL1mC,EAAM81B,iBAEV,IAAE5sB,CACJ,QAAAE,EAAAA,GAAAA,GAAAo9B,EAAAhO,IAAAh9B,EAAAA,EAAAA,GAAAgrC,EAAA,EAAAh8C,IAAA,SAAAf,MAEA,SAAO0H,EAAyB81C,GAC9B,GAAkC,IAA9B54C,KAAKoD,MAAMN,GAAQ9V,OAAvB,CACA,IAAM0tB,EAAO1a,KAAKoD,MAAMN,GAAQlN,MAChC,GAAK8kB,EAAL,CACA,IAAMtO,EAAOpM,KAAK4uB,MAAM2I,cAClBshB,EAAen+B,EAAKzrB,MAAMid,OAAOE,GACvCpM,KAAKoD,MAAMw1C,GAAMxrD,KAAK,CACpB6B,MAAO4pD,EACP9rB,MAAO2rB,GAAeh+B,EAAKqS,MAAO8rB,KAEpC74C,KAAK84C,aAAe,EACpB94C,KAAKu4C,cAAe,EACpBv4C,KAAK4uB,MAAMme,eAAeryB,EAAKzrB,MAAOiwC,GAAMnnB,QAAQyY,MACpDxwB,KAAKu4C,cAAe,EAEpBv4C,KAAK+4C,iBAAiBr+B,EAZL,CAF0B,CAe7C,IAAAve,IAAA,QAAAf,MAEA,WACE4E,KAAKoD,MAAQ,CAAEg1C,KAAM,GAAIC,KAAM,GACjC,IAAAl8C,IAAA,SAAAf,MAEA,WACE4E,KAAK84C,aAAe,CACtB,IAAA38C,IAAA,SAAAf,MAEA,SAAO49C,EAAoB9gB,GACzB,GAA+B,IAA3B8gB,EAAY/rC,IAAIjgB,OAApB,CACAgT,KAAKoD,MAAMi1C,KAAO,GAClB,IAAIY,EAAYD,EAAY9sC,OAAOgsB,GAC/BghB,EAAYl5C,KAAKs4C,aACfa,EAAYhiC,KAAKC,MACvB,GAEEpX,KAAK84C,aAAe94C,KAAK+Z,QAAQq/B,MAAQD,GACzCn5C,KAAKoD,MAAMg1C,KAAKprD,OAAS,EACzB,CACA,IAAM0tB,EAAO1a,KAAKoD,MAAMg1C,KAAKxiD,MACzB8kB,IACFu+B,EAAYA,EAAUttC,QAAQ+O,EAAKzrB,OACnCiqD,EAAYx+B,EAAKqS,MAErB,MACE/sB,KAAK84C,aAAeK,EAEK,IAAvBF,EAAUjsD,WACdgT,KAAKoD,MAAMg1C,KAAKhrD,KAAK,CAAE6B,MAAOgqD,EAAWlsB,MAAOmsB,IAE5Cl5C,KAAKoD,MAAMg1C,KAAKprD,OAASgT,KAAK+Z,QAAQs/B,UACxCr5C,KAAKoD,MAAMg1C,KAAKlsB,QAtBsB,CAwB1C,IAAA/vB,IAAA,OAAAf,MAEA,WACE4E,KAAKy3B,OAAO,OAAQ,OACtB,IAAAt7B,IAAA,YAAAf,MAEA,SAAUnM,GACRqqD,GAAet5C,KAAKoD,MAAMg1C,KAAMnpD,GAChCqqD,GAAet5C,KAAKoD,MAAMi1C,KAAMppD,EAClC,IAAAkN,IAAA,OAAAf,MAEA,WACE4E,KAAKy3B,OAAO,OAAQ,OACtB,IAAAt7B,IAAA,mBAAAf,MAEU,SAAiBm+C,GACzB,GAAIA,EAAUxsB,MACZ/sB,KAAK4uB,MAAMyS,aAAakY,EAAUxsB,MAAOmS,GAAMnnB,QAAQyY,UAClD,CACL,IAAM95B,EAAQ8iD,GAAmBx5C,KAAK4uB,MAAMzT,OAAQo+B,EAAUtqD,OAC9D+Q,KAAK4uB,MAAMyS,aAAa3qC,EAAOwoC,GAAMnnB,QAAQyY,KAC/C,CACF,KAtIW,CAAS6J,IAyItB,SAASif,GAAel2C,EAAoBnU,GAE1C,IADA,IAAIwqD,EAAcxqD,EACTxB,EAAI2V,EAAMpW,OAAS,EAAGS,GAAK,EAAGA,GAAK,EAAG,CAC7C,IAAMisD,EAAUt2C,EAAM3V,GACtB2V,EAAM3V,GAAK,CACTwB,MAAOwqD,EAAY58C,UAAU68C,EAAQzqD,OAAO,GAC5C89B,MAAO2sB,EAAQ3sB,OAAS2rB,GAAegB,EAAQ3sB,MAAO0sB,IAExDA,EAAcC,EAAQzqD,MAAM4N,UAAU48C,GACN,IAA5Br2C,EAAM3V,GAAGwB,MAAMjC,UACjBoW,EAAMtQ,OAAOrF,EAAG,EAEpB,CACF,CAEA,SAASksD,GAAsBx+B,EAAgBlsB,GAC7C,IAAMse,EAASte,EAAMge,IAAIhe,EAAMge,IAAIjgB,OAAS,GAC5C,OAAc,MAAVugB,IACiB,MAAjBA,EAAOF,OACuB,kBAAlBE,EAAOF,QAAuBE,EAAOF,OAAO2oB,SAAS,MAE5C,MAArBzoB,EAAOxB,YACFzR,OAAOkD,KAAK+P,EAAOxB,YAAYsQ,MAAM,SAAAlQ,GAC1C,OAA0C,MAAnCgP,EAAOE,MAAMlP,EAAM4M,GAAMO,MAClC,IAGJ,CAEA,SAASkgC,GAAmBr+B,EAAgBlsB,GAC1C,IAAM2qD,EAAe3qD,EAAM+c,QAAO,SAAChf,EAAQ2gB,GACzC,OAAO3gB,GAAU2gB,EAAE,WAAW,EAChC,GAAG,GACCksC,EAAc5qD,EAAMjC,SAAW4sD,EAInC,OAHID,GAAsBx+B,EAAQlsB,KAChC4qD,GAAe,GAEVA,CACT,CAEA,SAASnB,GAAe3rB,EAAqB99B,GAC3C,IAAK89B,EAAO,OAAOA,EACnB,IAAMhf,EAAQ9e,EAAMyhB,kBAAkBqc,EAAMr2B,OACtCsX,EAAM/e,EAAMyhB,kBAAkBqc,EAAMr2B,MAAQq2B,EAAM//B,QACxD,MAAO,CAAE0J,MAAOqX,EAAO/gB,OAAQghB,EAAMD,EACvC,EAtL4BwB,EAAAA,EAAAA,GAAtB4oC,GAAO,WACuB,CAChCiB,MAAO,IACPC,SAAU,IACVb,UAAU,ICxBwB,IAQhCsB,GAAQ,SAAA3P,GAGZ,SAAA2P,EAAYlrB,EAAc7U,GAAmC,IAAAc,EAuBzD,OAvByD3N,EAAAA,EAAAA,GAAA,KAAA4sC,GAC3Dj/B,GAAAC,EAAAA,GAAAA,GAAA,KAAAg/B,EAAA,CAAMlrB,EAAO7U,IACb6U,EAAMn0B,KAAKg0B,iBAAiB,QAAS,SAAAlyB,GACnCA,EAAEkrC,iBACF,IAAIrW,EAAyD,KAC7D,GAAInR,SAAS85B,oBACX3oB,EAASnR,SAAS85B,oBAAoBx9C,EAAEy9C,QAASz9C,EAAE09C,cAE9C,GAAIh6B,SAASi6B,uBAAwB,CAE1C,IAAMn1B,EAAW9E,SAASi6B,uBAAuB39C,EAAEy9C,QAASz9C,EAAE09C,SAC9D7oB,EAASnR,SAASyS,cAClBtB,EAAOuB,SAAS5N,EAASo1B,WAAYp1B,EAASppB,QAC9Cy1B,EAAO4B,OAAOjO,EAASo1B,WAAYp1B,EAASppB,OAC9C,CAEA,IAAMq4B,EAAa5C,GAAUxC,EAAMlC,UAAUmH,gBAAgBzC,GAC7D,GAAI4C,EAAY,KAAAomB,EACRrtB,EAAQ6B,EAAMlC,UAAUuH,kBAAkBD,GAC9B,QAAlBomB,EAAI79C,EAAE89C,oBAAY,IAAAD,GAAdA,EAAgBtE,OAClBj7B,EAAKk7B,OAAOhpB,EAAOxwB,EAAE89C,aAAavE,MAEtC,CACF,IAAEj7B,CACJ,QAAAE,EAAAA,GAAAA,GAAA++B,EAAA3P,IAAAh9B,EAAAA,EAAAA,GAAA2sC,EAAA,EAAA39C,IAAA,SAAAf,MAEA,SAAO2xB,EAAc+oB,GAA0B,IAAAh6B,EAAA,KACvCw+B,EAAkB,GACxBxrD,MAAM2rB,KAAKq7B,GAAOp5C,SAAS,SAAA69C,GAAS,IAAAC,EAC9BD,GAA8B,QAA1BC,EAAI1+B,EAAK/B,QAAQ0gC,iBAAS,IAAAD,GAAtBA,EAAwBpK,SAASmK,EAAK/zC,OAChD8zC,EAAQltD,KAAKmtD,EAEjB,IACID,EAAQttD,OAAS,GAEnBgT,KAAK+Z,QAAQ1K,QAAQtR,KAAKiC,KAAM+sB,EAAOutB,EAE3C,KAxCY,CAASjgB,IA2CvByf,GAASxV,SAAW,CAClBmW,UAAW,CAAC,YAAa,cACzBprC,QAAO,SAAC0d,EAAc+oB,GAAe,IAAAv5B,EAAA,KACnC,GAAKvc,KAAK4uB,MAAMzT,OAAOE,MAAM,SAA7B,CAGA,IAAMq/B,EAAW5E,EAAM96C,KAAsB,SAAAu/C,GAC3C,OAAO,IAAIt7C,SAAS,SAAA4H,GAClB,IAAM8zC,EAAS,IAAIC,WACnBD,EAAOE,OAAS,WACdh0C,EAAQ8zC,EAAO3+C,OACjB,EACA2+C,EAAOG,cAAcP,EACvB,GACF,IACAt7C,QAAQ87C,IAAIL,GAAUM,MAAM,SAAAC,GAC1B,IAAMxyB,EAASwyB,EAAOjvC,QAAO,SAAC/c,EAAcisD,GAC1C,OAAOjsD,EAAMoe,OAAO,CAAE6tC,MAAAA,GACxB,IAAG,IAAIluC,IAAQM,OAAOyf,EAAMr2B,OAAM,UAAQq2B,EAAM//B,SAChDuvB,EAAKqS,MAAMme,eAAetkB,EAAQsG,GAAQhX,QAAQyY,MAClDjU,EAAKqS,MAAMyS,aACTtU,EAAMr2B,MAAQukD,EAAOjuD,OACrB+hC,GAAQhX,QAAQwY,OAEpB,GAnBA,CAoBF,GAGF,YC5EA,IAAM4qB,GAAe,CAAC,aAAc,yBAE9BC,GAAK,SAAAjR,GACT,SAAAiR,EAAYxsB,EAAc7U,GAAgC,IAAAc,EAaxD,OAbwD3N,EAAAA,EAAAA,GAAA,KAAAkuC,GACxDvgC,GAAAC,EAAAA,GAAAA,GAAA,KAAAsgC,EAAA,CAAMxsB,EAAO7U,IAEb6U,EAAMn0B,KAAKg0B,iBAAiB,eAAgB,SAAA9c,GAC1CkJ,EAAKwgC,kBAAkB1pC,EACzB,IAIK,WAAW9M,KAAKmlC,UAAUW,YAC7B/b,EAAMvb,GAAG6rB,GAAM7sB,OAAO6d,0BAA0B,WAC9CrV,EAAKmgB,wBACP,IACFngB,CACF,QAAAE,EAAAA,GAAAA,GAAAqgC,EAAAjR,IAAAh9B,EAAAA,EAAAA,GAAAiuC,EAAA,EAAAj/C,IAAA,cAAAf,MAEQ,SAAY2xB,GAClBsgB,GAAY,CAAEtgB,MAAAA,EAAO6B,MAAO5uB,KAAK4uB,OACnC,IAAAzyB,IAAA,cAAAf,MAEQ,SAAY2xB,GAAyB,IAAX/Q,EAAIzQ,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAG,GACvC,GAAqB,IAAjBwhB,EAAM//B,OAAc,OAAO,EAE/B,GAAIgvB,EAAM,CAER,IAAMsK,EAAUtmB,KAAK4uB,MAAMoT,UAAUjV,EAAMr2B,MAAO,GAClDsJ,KAAKqtC,YAAYtgB,GACjB/sB,KAAK4uB,MAAMme,gBACT,IAAI//B,IAAQM,OAAOyf,EAAMr2B,OAAO2W,OAAO2O,EAAMsK,GAC7C4Y,GAAMnnB,QAAQyY,KAElB,MACExwB,KAAKqtC,YAAYtgB,GAInB,OADA/sB,KAAK4uB,MAAMyS,aAAatU,EAAMr2B,MAAQslB,EAAKhvB,OAAQ,EAAGkyC,GAAMnnB,QAAQwY,SAC7D,CACT,IAAAp0B,IAAA,oBAAAf,MAEQ,SAAkBuW,GACxB,IACE3R,KAAK4uB,MAAM4Q,YAAYzE,cACvBppB,EAAMw5B,kBACLgQ,GAAa/K,SAASz+B,EAAMgnC,WAH/B,CAQA,IAAM2C,EAAc3pC,EAAM4pC,gBACtB5pC,EAAM4pC,kBAAkB,GACxB,KACJ,GAAKD,IAAyC,IAA1BA,EAAYzpB,UAAhC,CAIA,IAAM7V,EAAOw/B,GAA2B7pC,GACxC,GAAY,MAARqK,EAAJ,CAGA,IAAMgY,EAAah0B,KAAK4uB,MAAMlC,UAAUmH,gBAAgBynB,GAClDvuB,EAAQiH,EACVh0B,KAAK4uB,MAAMlC,UAAUuH,kBAAkBD,GACvC,KACAjH,GAAS/sB,KAAKy7C,YAAY1uB,EAAO/Q,IACnCrK,EAAM81B,gBANR,CALA,CAPA,CAoBF,IAAAtrC,IAAA,yBAAAf,MAEQ,WACN,IAAM2xB,EAAQ/sB,KAAK4uB,MAAM8E,eACrB3G,GACF/sB,KAAKy7C,YAAY1uB,EAErB,KA1ES,CAASsN,IA6EpB,SAASmhB,GAA2B7pC,GAAmB,IAAA+pC,EAQrD,MAA0B,kBAAf/pC,EAAMnR,KACRmR,EAAMnR,KAEO,QAAtBk7C,EAAI/pC,EAAM0oC,oBAAY,IAAAqB,GAAlBA,EAAoBjmC,MAAM26B,SAAS,cAC9Bz+B,EAAM0oC,aAAa1E,QAAQ,cAE7B,IACT,CAEA,YClGA,IAAMgG,GAAQ,OAAO92C,KAAKmlC,UAAUC,UAGvB2R,GAAiC,IAIxCC,GAA4B,SAAAlqC,GAChC,MACgB,cAAdA,EAAMxV,KACQ,eAAdwV,EAAMxV,KACQ,YAAdwV,EAAMxV,KACQ,cAAdwV,EAAMxV,KACQ,SAAdwV,EAAMxV,QAKJw/C,IAAuB,MAAdhqC,EAAMxV,MAAiC,IAAlBwV,EAAM84B,QAK1C,EAEMqR,GAAM,SAAA3R,GAIV,SAAA2R,EAAYltB,EAAc7U,GAAgC,IAAAc,EAIxB,OAJwB3N,EAAAA,EAAAA,GAAA,KAAA4uC,GACxDjhC,GAAAC,EAAAA,GAAAA,GAAA,KAAAghC,EAAA,CAAMltB,EAAO7U,KAAQxK,EAAAA,EAAAA,GAAAsL,EAAA,eAJT,IAAKtL,EAAAA,EAAAA,GAAAsL,EAAA,0BACO,GAKxBA,EAAKkhC,kBACLlhC,EAAKmhC,4BAA2BnhC,CAClC,QAAAE,EAAAA,GAAAA,GAAA+gC,EAAA3R,IAAAh9B,EAAAA,EAAAA,GAAA2uC,EAAA,EAAA3/C,IAAA,kBAAAf,MAEQ,WACN4E,KAAK4uB,MAAM8Q,SAAS2K,WAAW,CAC7BluC,IAAK,CAAC,YAAa,cACnBR,OAAQ,EACR2uC,SAAU,KACVj7B,QAAO,SAAC0d,EAAKyC,GAAmB,IAAftf,EAAasf,EAAbtf,KAAMyB,EAAO6d,EAAP7d,MACrB,KAAMzB,aAAgB2V,MAAgB3V,EAAKuS,OACzC,OAAO,EAGT,IAAMw5B,EAAwD,QAAhDve,iBAAiBxtB,EAAKyL,SAAS,aAC7C,SACGsgC,GAAuB,eAAdtqC,EAAMxV,MACd8/C,GAAuB,cAAdtqC,EAAMxV,OAKnB6D,KAAK4uB,MAAMyS,aACTtU,EAAMr2B,MAAQ,EACdq2B,EAAM//B,QAAU2kB,EAAM24B,SAAW,EAAI,GACrCpL,GAAMnnB,QAAQyY,OAET,EACT,GAEJ,IAAAr0B,IAAA,4BAAAf,MAEQ,WAA4B,IAAA0gB,EAAA,KAClC9b,KAAK4uB,MAAMn0B,KAAKg0B,iBAAiB,WAAY,SAAA9c,IACtCA,EAAMw5B,kBAAoB0Q,GAAyBlqC,IACtDmK,EAAKogC,kCAET,GACF,GAEA,CAAA//C,IAAA,mCAAAf,MAMQ,WAAmC,IAAAmhB,EAAA,KAGzC,GAFAvc,KAAKm8C,wBAA0BhlC,KAAKC,MAAQwkC,IAExC57C,KAAKo8C,YAAT,CACAp8C,KAAKo8C,aAAc,EAEnB,IAAMvqC,EAAW,WACf0K,EAAK6/B,aAAc,EAEfjlC,KAAKC,OAASmF,EAAK4/B,yBACrB5/B,EAAK8/B,uBAET,EAEAp8B,SAASwO,iBAAiB,kBAAmB5c,EAAU,CACrDL,MAAM,GAZoB,CAc9B,IAAArV,IAAA,wBAAAf,MAEQ,WACN,IAAMsxB,EAAYzM,SAASyT,eAC3B,GAAKhH,EAAL,CACA,IAAMK,EAAQL,EAAUkH,WAAW,GACnC,IAAwB,IAApB7G,EAAM8E,WAA4C,IAAtB9E,EAAMU,YAAtC,CAEA,IAAMvd,EAAOlQ,KAAK4uB,MAAMzT,OAAOU,KAAKkR,EAAMuH,gBAC1C,GAAMpkB,aAAgB2V,IAAgB3V,EAAKuS,OAA3C,CAEA,IAAM9rB,EAAWspB,SAASyS,cAC1B/7B,EAAS2lD,cAAcpsC,EAAKuS,QAC5B9rB,EAAS4lD,YAAYrsC,EAAKuS,QAC1BiK,EAAUkI,kBACVlI,EAAUmI,SAASl+B,EANsC,CAHM,CAFzC,CAYxB,KAtFU,CAAS0jC,IAyFrB,YClFA6E,GAAMtW,SAAS,CACb,cAAemD,GACf,oBAAqBK,GACrB,cAAejB,GACf,kBAAmBya,GACnB,eAAgBnZ,GAChB,cAAe8N,GACf,eAAgB/O,GAChB,eAAgBwa,GAChB,aAAchc,GAEd,oBAAqB0pB,GACrB,kBAAmByE,GACnB,mBAAoBjO,GACpB,mBAAoB4P,GACpB,gBAAiBsB,GACjB,iBAAkBU,KAGpB,YCvDkD,IAE5CU,GAAgB,SAAAC,GAAA,SAAAD,IAAA,OAAAtvC,EAAAA,EAAAA,GAAA,KAAAsvC,IAAA1hC,EAAAA,GAAAA,GAAA,KAAA0hC,EAAAjxC,UAAA,QAAAwP,EAAAA,GAAAA,GAAAyhC,EAAAC,IAAAtvC,EAAAA,EAAAA,GAAAqvC,EAAA,EAAArgD,IAAA,MAAAf,MACpB,SAAI+e,EAAmB/e,GACrB,IAAIshD,EAAkB,EACtB,GAAc,OAAVthD,GAA4B,OAAVA,EAAgB,CACpC,IAAM+9B,EAASn5B,KAAK5E,MAAM+e,IAAS,EACnCuiC,EAA4B,OAAVthD,EAAiB+9B,EAAS,EAAIA,EAAS,CAC3D,KAA4B,kBAAV/9B,IAChBshD,EAAkBthD,GAEpB,OAAwB,IAApBshD,GACF18C,KAAKsd,OAAOnD,IACL,IAETuI,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAA65B,EAAAv/C,WAAA,YAAAc,KAAA,KAAiBoc,EAAMuiC,EAAgBpgD,WACzC,IAAAH,IAAA,SAAAf,MAEA,SAAO+e,EAAmB/e,GACxB,OAAOsnB,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAA65B,EAAAv/C,WAAA,eAAAc,KAAA,KAAaoc,EAAM/e,KAAKsnB,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAA65B,EAAAv/C,WAAA,eAAAc,KAAA,KAAkBoc,EAAM6F,SAAS5kB,EAAO,IACzE,IAAAe,IAAA,QAAAf,MAEA,SAAM+e,GACJ,OAAO6F,UAAQ0C,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAA65B,EAAAv/C,WAAA,cAAAc,KAAC,KAAYoc,GAAO,UAAO/d,CAC5C,KAtBoB,CAASghB,IAyBzBu/B,GAAc,IAAIH,GAAiB,SAAU,YAAa,CAC9DviC,MAAOlB,GAAMO,MAEbY,UAAW,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,KAGnC,YCjCqC,IAE/B0iC,GAAU,SAAAvT,GAAA,SAAAuT,IAAA,OAAA1vC,EAAAA,EAAAA,GAAA,KAAA0vC,IAAA9hC,EAAAA,GAAAA,GAAA,KAAA8hC,EAAArxC,UAAA,QAAAwP,EAAAA,GAAAA,GAAA6hC,EAAAvT,IAAAl8B,EAAAA,EAAAA,GAAAyvC,EAAA,EAAS7wB,KAAKxc,EAAAA,EAAAA,GAAxBqtC,GAAU,WACI,eAAYrtC,EAAAA,EAAAA,GAD1BqtC,GAAU,UAEG,cAGnB,YCPqC,IAE/BC,GAAM,SAAAxT,GAAA,SAAAwT,IAAA,OAAA3vC,EAAAA,EAAAA,GAAA,KAAA2vC,IAAA/hC,EAAAA,GAAAA,GAAA,KAAA+hC,EAAAtxC,UAAA,QAAAwP,EAAAA,GAAAA,GAAA8hC,EAAAxT,IAAAl8B,EAAAA,EAAAA,GAAA0vC,EAAA,OAAA1gD,IAAA,UAAAf,MAIV,SAAeugB,GACb,OAAO3b,KAAKsc,QAAQ5uB,QAAQiuB,EAAQW,SAAW,CACjD,KANU,CAASyP,KAAKxc,EAAAA,EAAAA,GAApBstC,GAAM,WACQ,WAAQttC,EAAAA,EAAAA,GADtBstC,GAAM,UAEO,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,OAOlD,YCRoC,IAE9BC,GAAa,SAAA7T,GAAA,SAAA6T,IAAA,OAAA5vC,EAAAA,EAAAA,GAAA,KAAA4vC,IAAAhiC,EAAAA,GAAAA,GAAA,KAAAgiC,EAAAvxC,UAAA,QAAAwP,EAAAA,GAAAA,GAAA+hC,EAAA7T,IAAA97B,EAAAA,EAAAA,GAAA2vC,EAAA,EAASlX,IAC5BkX,GAAchgC,SAAW,iBACzBggC,GAAcxgC,QAAU,KAAI,IAEtBygC,GAAQ,SAAA1T,GAeZ,SAAA0T,EAAY5hC,EAAgBQ,GAAsB,IAAAd,GAAA3N,EAAAA,EAAAA,GAAA,KAAA6vC,GAChDliC,GAAAC,EAAAA,GAAAA,GAAA,KAAAiiC,EAAA,CAAM5hC,EAAQQ,IACd,IAAMqhC,EAAKrhC,EAAQohB,cAAc7c,cAAc,QACzC+8B,EAAoB,SAAA1gD,GACxB,GAAK4e,EAAOwnB,YAAZ,CACA,IAAMpkB,EAAS1D,EAAKqE,QAAQoH,QAAQ3K,EAASR,GAC9B,YAAXoD,GACF1D,EAAK0D,OAAO,OAAQ,aACpBhiB,EAAEkrC,kBACkB,cAAXlpB,IACT1D,EAAK0D,OAAO,OAAQ,WACpBhiB,EAAEkrC,iBAP2B,CASjC,EAGiB,OAFjBuV,EAAGvuB,iBAAiB,YAAawuB,GACjCD,EAAGvuB,iBAAiB,aAAcwuB,GAClCpiC,EAAKqiC,SAASF,GAAGniC,CACnB,QAAAE,EAAAA,GAAAA,GAAAgiC,EAAA1T,IAAAl8B,EAAAA,EAAAA,GAAA4vC,EAAA,EAAA5gD,IAAA,SAAAf,MAEA,SAAOwP,EAAcxP,GACfwP,IAAS5K,KAAKkf,QAAQpC,UAAY1hB,EACpC4E,KAAK2b,QAAQtB,aAAa,YAAajf,IAEvCsnB,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAo6B,EAAA9/C,WAAA,eAAAc,KAAA,KAAa6M,EAAMxP,EAEvB,MAAAe,IAAA,SAAAf,MAvCA,SAAcA,GACZ,IAAM+e,GAAIuI,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAo6B,GAAA,eAAAh/C,KAAA,MAEV,OADAoc,EAAKE,aAAa,YAAajf,GACxB+e,CACT,IAAAhe,IAAA,UAAAf,MAEA,SAAeugB,GACb,OAAOA,EAAQnB,aAAa,mBAAgBpe,CAC9C,IAAAD,IAAA,WAAAf,MAEA,WACE8jC,GAAMtW,SAASk0B,GACjB,KAbY,CAAS/wB,IA0CvBgxB,GAASjgC,SAAW,OACpBigC,GAASzgC,QAAU,KAEnBwgC,GAAc/4B,gBAAkB,CAACg5B,IACjCA,GAASv9B,kBAAoBs9B,GCvDU,IAEjCK,GAAI,SAAAtxB,GAAA,SAAAsxB,IAAA,OAAAjwC,EAAAA,EAAAA,GAAA,KAAAiwC,IAAAriC,EAAAA,GAAAA,GAAA,KAAAqiC,EAAA5xC,UAAA,QAAAwP,EAAAA,GAAAA,GAAAoiC,EAAAtxB,IAAA1e,EAAAA,EAAAA,GAAAgwC,EAAA,EAAAhhD,IAAA,WAAAf,MAYR,SAASmW,IACPmR,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAw6B,EAAAlgD,WAAA,iBAAAc,KAAA,KAAewT,GACXvR,KAAK2b,QAAQW,UAAYtc,KAAKkf,QAAQ5C,QAAQ,IAChDtc,KAAKumB,YAAYvmB,KAAKkf,QAAQpC,SAElC,MAAA3gB,IAAA,SAAAf,MAbA,WACE,OAAAsnB,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAw6B,GAAA,eAAAp/C,KAAA,KACF,IAAA5B,IAAA,UAAAf,MAEA,WACE,OAAO,CACT,KAVQ,CAASowB,KAAMjc,EAAAA,EAAAA,GAAnB4tC,GAAI,WACU,SAAM5tC,EAAAA,EAAAA,GADpB4tC,GAAI,UAES,CAAC,SAAU,MAkB9B,YCtB4B,IAEtBC,GAAM,SAAAC,GAAA,SAAAD,IAAA,OAAAlwC,EAAAA,EAAAA,GAAA,KAAAkwC,IAAAtiC,EAAAA,GAAAA,GAAA,KAAAsiC,EAAA7xC,UAAA,QAAAwP,EAAAA,GAAAA,GAAAqiC,EAAAC,IAAAlwC,EAAAA,EAAAA,GAAAiwC,EAAA,EAASD,KAAI5tC,EAAAA,EAAAA,GAAnB6tC,GAAM,WACQ,WAAQ7tC,EAAAA,EAAAA,GADtB6tC,GAAM,UAEO,CAAC,KAAM,MAG1B,YCPuC,IAEjCE,GAAI,SAAAzxB,GAAA,SAAAyxB,IAAA,OAAApwC,EAAAA,EAAAA,GAAA,KAAAowC,IAAAxiC,EAAAA,GAAAA,GAAA,KAAAwiC,EAAA/xC,UAAA,QAAAwP,EAAAA,GAAAA,GAAAuiC,EAAAzxB,IAAA1e,EAAAA,EAAAA,GAAAmwC,EAAA,EAAAnhD,IAAA,SAAAf,MAsBR,SAAOwP,EAAcxP,GACfwP,IAAS5K,KAAKkf,QAAQpC,UAAa1hB,EAIrC4E,KAAK2b,QAAQtB,aAAa,OAAQra,KAAKiF,YAAYs4C,SAASniD,KAH5DsnB,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAA26B,EAAArgD,WAAA,eAAAc,KAAA,KAAa6M,EAAMxP,EAKvB,MAAAe,IAAA,SAAAf,MAvBA,SAAcA,GACZ,IAAM+e,GAAIuI,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAA26B,GAAA,eAAAv/C,KAAA,KAAgB3C,GAI1B,OAHA+e,EAAKE,aAAa,OAAQra,KAAKu9C,SAASniD,IACxC+e,EAAKE,aAAa,MAAO,uBACzBF,EAAKE,aAAa,SAAU,UACrBF,CACT,IAAAhe,IAAA,UAAAf,MAEA,SAAeugB,GACb,OAAOA,EAAQnB,aAAa,OAC9B,IAAAre,IAAA,WAAAf,MAEA,SAAgBm6C,GACd,OAAOgI,GAAShI,EAAKv1C,KAAKw9C,oBAAsBjI,EAAMv1C,KAAKy9C,aAC7D,KApBQ,CAASjyB,IAgCnB,SAAS+xB,GAAShI,EAAamI,GAC7B,IAAMC,EAAS19B,SAASC,cAAc,KACtCy9B,EAAOC,KAAOrI,EACd,IAAMsI,EAAWF,EAAOC,KAAKvsD,MAAM,EAAGssD,EAAOC,KAAKlwD,QAAQ,MAC1D,OAAOgwD,EAAUhwD,QAAQmwD,IAAa,CACxC,EArCyBtuC,EAAAA,EAAAA,GAAnB+tC,GAAI,WACU,SAAM/tC,EAAAA,EAAAA,GADpB+tC,GAAI,UAES,MAAG/tC,EAAAA,EAAAA,GAFhB+tC,GAAI,gBAGe,gBAAa/tC,EAAAA,EAAAA,GAHhC+tC,GAAI,qBAIoB,CAAC,OAAQ,QAAS,SAAU,MAAO,QCN1B,IAEjCQ,GAAM,SAAAjyB,GAAA,SAAAiyB,IAAA,OAAA5wC,EAAAA,EAAAA,GAAA,KAAA4wC,IAAAhjC,EAAAA,GAAAA,GAAA,KAAAgjC,EAAAvyC,UAAA,QAAAwP,EAAAA,GAAAA,GAAA+iC,EAAAjyB,IAAA1e,EAAAA,EAAAA,GAAA2wC,EAAA,OAAA3hD,IAAA,SAAAf,MAIV,SAAcA,GACZ,MAAc,UAAVA,EACK6kB,SAASC,cAAc,OAElB,QAAV9kB,EACK6kB,SAASC,cAAc,QAEhCwC,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAm7B,GAAA,eAAA//C,KAAA,KAAoB3C,EACtB,IAAAe,IAAA,UAAAf,MAEA,SAAeugB,GACb,MAAwB,QAApBA,EAAQW,QAA0B,MACd,QAApBX,EAAQW,QAA0B,aAAtC,CAEF,KAlBU,CAASkP,KAAMjc,EAAAA,EAAAA,GAArBuuC,GAAM,WACQ,WAAQvuC,EAAAA,EAAAA,GADtBuuC,GAAM,UAEO,CAAC,MAAO,QAmB3B,YCvB4B,IAEtBC,GAAM,SAAAV,GAAA,SAAAU,IAAA,OAAA7wC,EAAAA,EAAAA,GAAA,KAAA6wC,IAAAjjC,EAAAA,GAAAA,GAAA,KAAAijC,EAAAxyC,UAAA,QAAAwP,EAAAA,GAAAA,GAAAgjC,EAAAV,IAAAlwC,EAAAA,EAAAA,GAAA4wC,EAAA,EAASZ,KAAI5tC,EAAAA,EAAAA,GAAnBwuC,GAAM,WACQ,WAAQxuC,EAAAA,EAAAA,GADtBwuC,GAAM,UAEO,CAAC,IAAK,WAGzB,YCPuC,IAEjCC,GAAS,SAAAnyB,GAAA,SAAAmyB,IAAA,OAAA9wC,EAAAA,EAAAA,GAAA,KAAA8wC,IAAAljC,EAAAA,GAAAA,GAAA,KAAAkjC,EAAAzyC,UAAA,QAAAwP,EAAAA,GAAAA,GAAAijC,EAAAnyB,IAAA1e,EAAAA,EAAAA,GAAA6wC,EAAA,EAASxyB,KAAMjc,EAAAA,EAAAA,GAAxByuC,GAAS,WACK,cAAWzuC,EAAAA,EAAAA,GADzByuC,GAAS,UAEI,KAGnB,YCPqC,IAE/BC,GAAO,SAAAC,GAAA,SAAAD,IAAA,OAAA/wC,EAAAA,EAAAA,GAAA,KAAA+wC,IAAAnjC,EAAAA,GAAAA,GAAA,KAAAmjC,EAAA1yC,UAAA,QAAAwP,EAAAA,GAAAA,GAAAkjC,EAAAC,IAAA/wC,EAAAA,EAAAA,GAAA8wC,EAAA,EAAA9hD,IAAA,OAAAf,MA0BX,WACE,IAAA+iD,EAAoBn+C,KAAK5E,QAAjBgjD,EAAAD,EAAAC,QACR,MAAO,SAAPhwD,OAAgBgwD,EAAQ,UAC1B,MAAAjiD,IAAA,SAAAf,MAxBA,SAAcA,GAEZ,GAAoB,MAAhBmiC,OAAO8gB,MACT,MAAM,IAAIvxC,MAAM,kCAElB,IAAMqN,GAAIuI,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAs7B,GAAA,eAAAlgD,KAAA,KAAgB3C,GAS1B,MARqB,kBAAVA,IAETmiC,OAAO8gB,MAAMC,OAAOljD,EAAO+e,EAAM,CAC/BokC,cAAc,EACdC,WAAY,SAEdrkC,EAAKE,aAAa,aAAcjf,IAE3B+e,CACT,IAAAhe,IAAA,QAAAf,MAEA,SAAaugB,GACX,OAAOA,EAAQnB,aAAa,aAC9B,KAxBW,CAAS+f,KAAKhrB,EAAAA,EAAAA,GAArB0uC,GAAO,WACO,YAAS1uC,EAAAA,EAAAA,GADvB0uC,GAAO,YAEQ,eAAY1uC,EAAAA,EAAAA,GAF3B0uC,GAAO,UAGM,QA6BnB,YC/BA,IAAMQ,GAAa,CAAC,MAAO,SAAU,SAE/BC,GAAK,SAAAtzB,GAAA,SAAAszB,IAAA,OAAAxxC,EAAAA,EAAAA,GAAA,KAAAwxC,IAAA5jC,EAAAA,GAAAA,GAAA,KAAA4jC,EAAAnzC,UAAA,QAAAwP,EAAAA,GAAAA,GAAA2jC,EAAAtzB,IAAAje,EAAAA,EAAAA,GAAAuxC,EAAA,EAAAviD,IAAA,SAAAf,MAsCT,SAAOwP,EAAcxP,GACfqjD,GAAW/wD,QAAQkd,IAAS,EAC1BxP,EACF4E,KAAK2b,QAAQtB,aAAazP,EAAMxP,GAEhC4E,KAAK2b,QAAQpB,gBAAgB3P,IAG/B8X,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAA+7B,EAAAzhD,WAAA,eAAAc,KAAA,KAAa6M,EAAMxP,EAEvB,MAAAe,IAAA,SAAAf,MA5CA,SAAcA,GACZ,IAAM+e,GAAIuI,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAA+7B,GAAA,eAAA3gD,KAAA,KAAgB3C,GAI1B,MAHqB,kBAAVA,GACT+e,EAAKE,aAAa,MAAOra,KAAKu9C,SAASniD,IAElC+e,CACT,IAAAhe,IAAA,UAAAf,MAEA,SAAeugB,GACb,OAAO8iC,GAAWzyC,QAChB,SAACsa,EAAwCnI,GAIvC,OAHIxC,EAAQgjC,aAAaxgC,KACvBmI,EAAQnI,GAAaxC,EAAQnB,aAAa2D,IAErCmI,CACT,GACA,CAAC,EAEL,IAAAnqB,IAAA,QAAAf,MAEA,SAAam6C,GACX,MAAO,qBAAqB1wC,KAAK0wC,IAAQ,yBAAyB1wC,KAAK0wC,EACzE,IAAAp5C,IAAA,WAAAf,MAEA,SAAgBm6C,GACd,OAAOgI,GAAShI,EAAK,CAAC,OAAQ,QAAS,SAAWA,EAAM,MAC1D,IAAAp5C,IAAA,QAAAf,MAEA,SAAaugB,GACX,OAAOA,EAAQnB,aAAa,MAC9B,KAlCS,CAASgN,KAASjY,EAAAA,EAAAA,GAAvBmvC,GAAK,WACS,UAAOnvC,EAAAA,EAAAA,GADrBmvC,GAAK,UAEQ,OAiDnB,YCrDA,IAAMD,GAAa,CAAC,SAAU,SAExBG,GAAK,SAAAC,GAAA,SAAAD,IAAA,OAAA1xC,EAAAA,EAAAA,GAAA,KAAA0xC,IAAA9jC,EAAAA,GAAAA,GAAA,KAAA8jC,EAAArzC,UAAA,QAAAwP,EAAAA,GAAAA,GAAA6jC,EAAAC,IAAA1xC,EAAAA,EAAAA,GAAAyxC,EAAA,EAAAziD,IAAA,SAAAf,MAmCT,SAAOwP,EAAcxP,GACfqjD,GAAW/wD,QAAQkd,IAAS,EAC1BxP,EACF4E,KAAK2b,QAAQtB,aAAazP,EAAMxP,GAEhC4E,KAAK2b,QAAQpB,gBAAgB3P,IAG/B8X,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAi8B,EAAA3hD,WAAA,eAAAc,KAAA,KAAa6M,EAAMxP,EAEvB,IAAAe,IAAA,OAAAf,MAEA,WACE,IAAA+iD,EAAkBn+C,KAAK5E,QAAf0jD,EAAAX,EAAAW,MACR,MAAO,YAAP1wD,OAAmB0wD,EAAM,MAAA1wD,OAAI0wD,EAAM,OACrC,MAAA3iD,IAAA,SAAAf,MA7CA,SAAcA,GACZ,IAAM+e,GAAIuI,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAi8B,GAAA,eAAA7gD,KAAA,KAAgB3C,GAI1B,OAHA+e,EAAKE,aAAa,cAAe,KACjCF,EAAKE,aAAa,kBAAmB,QACrCF,EAAKE,aAAa,MAAOra,KAAKu9C,SAASniD,IAChC+e,CACT,IAAAhe,IAAA,UAAAf,MAEA,SAAeugB,GACb,OAAO8iC,GAAWzyC,QAChB,SAACsa,EAAwCnI,GAIvC,OAHIxC,EAAQgjC,aAAaxgC,KACvBmI,EAAQnI,GAAaxC,EAAQnB,aAAa2D,IAErCmI,CACT,GACA,CAAC,EAEL,IAAAnqB,IAAA,WAAAf,MAEA,SAAgBm6C,GACd,OAAO+H,GAAKC,SAAShI,EACvB,IAAAp5C,IAAA,QAAAf,MAEA,SAAaugB,GACX,OAAOA,EAAQnB,aAAa,MAC9B,KA/BS,CAAS4R,KAAU7c,EAAAA,EAAAA,GAAxBqvC,GAAK,WACS,UAAOrvC,EAAAA,EAAAA,GADrBqvC,GAAK,YAEU,aAAUrvC,EAAAA,EAAAA,GAFzBqvC,GAAK,UAGQ,UAkDnB,YC7CA,IAAMG,GAAkB,IAAI3hC,GAAgB,aAAc,OAAQ,CAChEnD,MAAOlB,GAAMM,SAET2lC,GAAS,SAAAnzB,GAab,SAAAmzB,EAAY7jC,EAAoBQ,EAAevgB,GAAgB,IAAAyf,EAGrB,OAHqB3N,EAAAA,EAAAA,GAAA,KAAA8xC,GAE7DnkC,GAAAC,EAAAA,GAAAA,GAAA,KAAAkkC,EAAA,CAAM7jC,EAAQQ,EAASvgB,IACvB2jD,GAAgB1jD,IAAIwf,EAAKc,QAASvgB,GAAMyf,CAC1C,QAAAE,EAAAA,GAAAA,GAAAikC,EAAAnzB,IAAA1e,EAAAA,EAAAA,GAAA6xC,EAAA,EAAA7iD,IAAA,SAAAf,MAEA,SAAOmjB,EAAgBnjB,GACjBmjB,IAAWygC,EAAUliC,UACvB4F,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAq8B,EAAA/hD,WAAA,eAAAc,KAAA,KAAawgB,EAAQnjB,GACZA,EACT2jD,GAAgB1jD,IAAI2E,KAAK2b,QAASvgB,IAElC2jD,GAAgBzhC,OAAOtd,KAAK2b,SAC5B3b,KAAK2b,QAAQ4B,UAAUD,OAAOtd,KAAKkf,QAAQnC,WAE/C,IAAA5gB,IAAA,WAAAf,MAEA,YAEEsnB,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAq8B,EAAA/hD,WAAA,iBAAAmW,MAAA,KAAe7H,WACVwzC,GAAgB3jD,MAAM4E,KAAK2b,UAC9B3b,KAAKikB,QAET,MAAA9nB,IAAA,UAAAf,MAnCA,SAAe+e,EAAegB,GAC5B,MAAe,MAARhB,GAAgBA,IAASgB,EAAOQ,QAAS,CAC9C,GAAIxB,EAAKoD,WAAapD,EAAKoD,UAAUiE,SAAS4nB,GAAUrsB,WAEtD,OAAA2F,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAq8B,GAAA,gBAAAjhD,KAAA,KAAqBoc,EAAMgB,GAG7BhB,EAAOA,EAAK8C,UACd,CAEF,KAXa,CAASuO,IAsCxBwzB,GAAUliC,SAAW,aACrBkiC,GAAUjiC,UAAY,WAAU,IAE1BkiC,GAAe,SAAAC,GAAA,SAAAD,IAAA,OAAA/xC,EAAAA,EAAAA,GAAA,KAAA+xC,IAAAnkC,EAAAA,GAAAA,GAAA,KAAAmkC,EAAA1zC,UAAA,QAAAwP,EAAAA,GAAAA,GAAAkkC,EAAAC,IAAA/xC,EAAAA,EAAAA,GAAA8xC,EAAA,EAAA9iD,IAAA,SAAAf,MAgBnB,SAAOwP,EAAcxP,GACfwP,IAAS5K,KAAKkf,QAAQpC,UAAY1hB,EAEpC4E,KAAK2b,QAAQtB,aAAa,gBAAiBjf,IAE3CsnB,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAs8B,EAAAhiD,WAAA,eAAAc,KAAA,KAAa6M,EAAMxP,EAEvB,IAAAe,IAAA,cAAAf,MAEA,SAAYwP,EAAqBxP,GAE/B,OADA4E,KAAKkkB,SAAS,EAAGlkB,KAAKhT,SAAUgyD,GAAUliC,UAAU,IACpD4F,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAs8B,EAAAhiD,WAAA,oBAAAc,KAAA,KAAyB6M,EAAMxP,EACjC,MAAAe,IAAA,SAAAf,MA3BA,SAAcA,GACZ,IAAMugB,GAAO+G,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAs8B,GAAA,eAAAlhD,KAAA,KAAgB3C,GAI7B,MAHqB,kBAAVA,GACTugB,EAAQtB,aAAa,gBAAiBjf,GAEjCugB,CACT,IAAAxf,IAAA,UAAAf,MAEA,SAAeugB,GAEb,OAAOA,EAAQnB,aAAa,kBAAoB,OAClD,IAAAre,IAAA,WAAAf,MAEA,WAAmB,IAAC,CAdD,CAASguC,IA+BxB+V,GAAwB,SAAAC,GAAA,SAAAD,IAAA,OAAAjyC,EAAAA,EAAAA,GAAA,KAAAiyC,IAAArkC,EAAAA,GAAAA,GAAA,KAAAqkC,EAAA5zC,UAAA,QAAAwP,EAAAA,GAAAA,GAAAokC,EAAAC,IAAAjyC,EAAAA,EAAAA,GAAAgyC,EAAA,EAAAhjD,IAAA,SAAAf,MAI5B,YACEsnB,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAw8B,EAAAliD,WAAA,eAAAc,KAAA,MACAiC,KAAKq/C,WAAY,EAEjBr/C,KAAKmb,OAAOmkC,UAAUt/C,KACxB,IAAA7D,IAAA,SAAAf,MAEA,SAAOwP,EAAcxP,GACfwP,IAASq0C,GAAgBniC,WAC3B9c,KAAKq/C,WAAY,EACjBr/C,KAAKsf,SAAS5iB,SAAS,SAAAylB,GAErBA,EAAM5D,OAAO3T,EAAMxP,EACrB,IAEJ,IAAAe,IAAA,WAAAf,MAEA,SAAS1E,EAAe1J,EAAgB4d,EAAcxP,GAChDwP,IAASq0C,GAAgBniC,WAC3B9c,KAAKq/C,WAAY,IAEnB38B,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAw8B,EAAAliD,WAAA,iBAAAc,KAAA,KAAerH,EAAO1J,EAAQ4d,EAAMxP,EACtC,IAAAe,IAAA,YAAAf,MAEA,SACEmkD,GAEA,IAAAzjC,EAAA,KADAvH,EAAMhJ,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,IAAAA,UAAA,GAEN,GAA0B,MAAtBvL,KAAKsf,SAASwB,KAAlB,CACA,IAAMG,EAAQnyB,MAAM2rB,KAAKza,KAAK2b,QAAQ8E,YAAYjT,QAC/C,SAAA2M,GAAI,OAAKA,IAAS2B,EAAK2G,MAC1B,IACMzG,EAAO,GAAH5tB,OAAM6yB,EAAMjmB,KAAK,SAAAmf,GAAI,OAAKA,EAAKk1B,WAAW,IAAEz/B,KAAK,MAAM,MAC3DonC,EAAWiI,GAAgB34B,QAAQtmB,KAAKsf,SAASwB,KAAKnF,SAC5D,GAAIpH,GAAUvU,KAAKq/C,WAAar/C,KAAKw/C,aAAexjC,EAAM,CACxD,GAAIA,EAAK+B,OAAO/wB,OAAS,GAAwB,MAAnBgT,KAAKw/C,WAAoB,CACrD,IAAMtnB,EAAWl4B,KAAKsf,SAAStT,QAAO,SAAC/c,EAAOkzB,GAE5C,OAAOlzB,EAAMb,OAAO49B,GAAW7J,GAAO,GACxC,GAAG,IAAInV,IACD/d,EAAQswD,EAAUvjC,EAAMg7B,GAC9B9e,EAASxgC,KAAKzI,GAAO+c,QAAO,SAACtV,EAAK84B,GAA6B,IAAzBliB,EAAoBkiB,EAApBliB,OAAQvB,EAAYyjB,EAAZzjB,WAE5C,OAAKuB,GACDvB,GACFzR,OAAOkD,KAAKuO,GAAYrP,SAAS,SAAA6hB,GAE7B,CAAC0gC,GAAgBniC,SAAUkiC,GAAUliC,UAAUszB,SAAS7xB,IAGxDzC,EAAKoI,SAASxtB,EAAO4W,EAAQiR,EAAQxS,EAAWwS,GAEpD,IAGK7nB,EAAQ4W,GAZK5W,CAatB,GAAG,EACL,CACAsJ,KAAKw/C,WAAaxjC,EAClBhc,KAAKq/C,WAAY,CACnB,CAhCsC,CAiCxC,IAAAljD,IAAA,OAAAf,MAEA,SAAK1E,EAAe1J,GAClB,IAAAq2B,EAAoBrjB,KAAKsf,SAASzD,KAAKnlB,GAAM4sB,GAAApU,EAAAA,EAAAA,GAAAmU,EAAA,GAAtCo8B,EAASn8B,EAAA,GACV0zB,EAAWyI,EACbR,GAAgB34B,QAAQm5B,EAAU9jC,SAClC,QAEJ,MAAO,uBAAPvtB,OAA8B4oD,EAAS,QAAA5oD,OAAMi9B,GAC3CrrB,KAAKmpC,KAAKzyC,EAAO1J,IACjB,WACJ,IAAAmP,IAAA,WAAAf,MAEA,SAASmW,GAEP,IADAmR,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAw8B,EAAAliD,WAAA,iBAAAc,KAAA,KAAewT,GAEE,MAAfvR,KAAK8e,QACiB,MAAtB9e,KAAKsf,SAASwB,MACC,MAAf9gB,KAAKyiB,OACL,CACA,IAAMu0B,EAAWiI,GAAgB34B,QAAQtmB,KAAKsf,SAASwB,KAAKnF,SAExDq7B,IAAah3C,KAAKyiB,OAAOrnB,QAE3B4E,KAAKyiB,OAAOrnB,MAAQ47C,EAExB,CACF,KA5F4B,CAAShO,IA+FvCmW,GAAyBp7B,gBAAkB,CAACk7B,IAC5CA,GAAgBz/B,kBAAoB2/B,GACpCF,GAAgBl7B,gBAAkB,CAACi7B,GAAW3mB,GAAYrO,GAAU01B,IAQpE,IAAMH,GAAY,SAACI,EAAU3I,EAAkBh7B,GAC7C,GAAiC,kBAAtB2jC,EAAIC,cAA4B,CACzC,IAAMC,EAAeF,EAAIC,cAAcxjC,MAAM,KAAK,GAClD,GAAI4D,SAAS6/B,EAAc,KAAO,GAChC,OAAOF,EAAIJ,UAAUvjC,EAAM,CAAEg7B,SAAAA,IAAY57C,KAE7C,CACA,OAAOukD,EAAIJ,UAAUvI,EAAUh7B,GAAM5gB,KACvC,EAEM0kD,GAAM,SAAA3V,GAWV,SAAA2V,EAAYlxB,EAAc7U,GAAiC,IAAAwC,EAEzD,IAFyDrP,EAAAA,EAAAA,GAAA,KAAA4yC,GACzDvjC,GAAAzB,EAAAA,GAAAA,GAAA,KAAAglC,EAAA,CAAMlxB,EAAO7U,IACY,MAArBwC,EAAKxC,QAAQgmC,KACf,MAAM,IAAIjzC,MACR,6FAaY,OAThByP,EAAKyjC,UAAYzjC,EAAKxC,QAAQimC,UAAUh0C,QACtC,SAACM,EAA6B44B,GAAc,IAAV/oC,EAAK+oC,EAAL/oC,IAEhC,OADAmQ,EAAKnQ,IAAO,EACLmQ,CACT,GACA,CAAC,GAEHiQ,EAAK0jC,cAAgB1jC,EAAK0jC,cAAcznC,KAAI+D,GAC5CA,EAAK2jC,eACL3jC,EAAK4jC,YAAW5jC,CAClB,QAAAxB,EAAAA,GAAAA,GAAA+kC,EAAA3V,IAAAh9B,EAAAA,EAAAA,GAAA2yC,EAAA,EAAA3jD,IAAA,eAAAf,MAEA,WAAe,IAAAgjB,EAAA,KACbpe,KAAK4uB,MAAMvb,GAAG6rB,GAAM7sB,OAAOsd,mBAAoB,SAAAlU,GAC7C,GAAMA,aAAgB0jC,GAAtB,CACA,IAAMiB,EAAShiC,EAAKwQ,MAAMn0B,KAAKsiC,cAAc7c,cAAc,UAE3D9B,EAAKrE,QAAQimC,UAAUtjD,SAAQ,SAAAsnC,GAAoB,IAAjB7nC,EAAY6nC,EAAZ7nC,IAAKkkD,EAAOrc,EAAPqc,MAC/BC,EAASF,EAAOrjB,cAAc7c,cAAc,UAClDogC,EAAOjR,YAAcgR,EACrBC,EAAOjmC,aAAa,QAASle,GAC7BikD,EAAOtgC,YAAYwgC,EACrB,IACAF,EAAO3xB,iBAAiB,UAAU,WAChChT,EAAK8C,OAAO0gC,GAAgBniC,SAAUsjC,EAAOhlD,OAC7CgjB,EAAKwQ,MAAMn0B,KAAKg3B,QAChBrT,EAAKmhC,UAAU9jC,GAAM,EACvB,IACmB,MAAfA,EAAKgH,SACPhH,EAAKyhC,SAASkD,GACV3kC,EAAK6D,SAASwB,OAChBs/B,EAAOhlD,MAAQ6jD,GAAgB34B,QAAQ7K,EAAK6D,SAASwB,KAAKnF,UAjBP,CAoBzD,GACF,IAAAxf,IAAA,YAAAf,MAEA,WAAY,IAAAkjB,EAAA,KACNiiC,EAA8C,KAClDvgD,KAAK4uB,MAAMvb,GAAG6rB,GAAM7sB,OAAOwd,iBAAiB,WACtC0wB,GACFC,aAAaD,GAEfA,EAAQrvB,YAAW,WACjB5S,EAAKihC,YACLgB,EAAQ,IACV,GAAGjiC,EAAKvE,QAAQ0mC,SAClB,GACF,IAAAtkD,IAAA,YAAAf,MAEA,WAAuE,IAAAojB,EAAA,KAA7D/C,EAAqClQ,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAG,KAAM2Z,EAAK3Z,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,IAAAA,UAAA,GAC3D,IAAIvL,KAAK4uB,MAAMlC,UAAUI,UAAzB,CACA9sB,KAAK4uB,MAAMnG,OAAOyW,GAAMnnB,QAAQyY,MAChC,IAAMzD,EAAQ/sB,KAAK4uB,MAAM8E,eACnBhY,EACI,MAARD,EACIzb,KAAK4uB,MAAMzT,OAAOuI,YAAYy7B,IAC9B,CAAC1jC,GACPC,EAAMhf,SAAS,SAAAyiC,GACbA,EAAUogB,UAAU/gC,EAAKyhC,cAAe/6B,EAC1C,IACAllB,KAAK4uB,MAAMnG,OAAOyW,GAAMnnB,QAAQwY,QACnB,MAATxD,GACF/sB,KAAK4uB,MAAMyS,aAAatU,EAAOmS,GAAMnnB,QAAQwY,OAZL,CAc5C,IAAAp0B,IAAA,gBAAAf,MAEA,SAAc4gB,GAAkC,IAApBg7B,EAAQzrC,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAG,QAErC,GADAyrC,EAAWh3C,KAAKggD,UAAUhJ,GAAYA,EAAW,QAChC,UAAbA,EACF,OAAO3rB,GAAWrP,GACfI,MAAM,MACNpQ,QAAO,SAAC/c,EAAOihB,EAAMziB,GAIpB,OAHU,IAANA,GACFwB,EAAMoe,OAAO,MAAIkC,EAAAA,EAAAA,GAAA,GAAK65B,GAAUtsB,SAAWk6B,IAEtC/nD,EAAMoe,OAAO6C,EACtB,GAAG,IAAIlD,IAEX,IAAMmyB,EAAYn/B,KAAK4uB,MAAMn0B,KAAKsiC,cAAc7c,cAAc,OAG9D,OAFAif,EAAU5hB,UAAUliB,IAAI+tC,GAAUrsB,WAClCoiB,EAAUrF,UAAYylB,GAAUv/C,KAAK+Z,QAAQgmC,KAAM/I,EAAUh7B,GACtD24B,GACL30C,KAAK4uB,MAAMzT,OACXgkB,EACA,CACE,SAAChlB,EAAMlrB,GAEL,IAAMmM,EAAQ2jD,GAAgB3jD,MAAM+e,GACpC,OAAI/e,EACKnM,EAAM0c,SACX,IAAIqB,IAAQM,OAAOre,EAAMjC,UAAQuiB,EAAAA,EAAAA,GAAA,GAC9ByvC,GAAUliC,SAAW1hB,KAIrBnM,CACT,GAEF,CACE,SAACkrB,EAAMlrB,GAEL,OAAOkrB,EAAK3Z,KAAK4b,MAAM,MAAMpQ,QAAO,SAACM,EAAMo0C,EAAUjzD,GAEnD,OADU,IAANA,GAAS6e,EAAKe,OAAO,MAAIkC,EAAAA,EAAAA,GAAA,GAAK65B,GAAUtsB,SAAWk6B,IAChD1qC,EAAKe,OAAOqzC,EACrB,GAAGzxD,EACL,GAEF,IAAIkQ,QAER,MAAAhD,IAAA,WAAAf,MA9HA,WACE8jC,GAAMtW,SAASo2B,IAAW,GAC1B9f,GAAMtW,SAASq2B,IAAiB,GAChC/f,GAAMtW,SAASu2B,IAA0B,EAC3C,KAPU,CAAS9kB,IAmIrBylB,GAAOxb,SAAW,CAChByb,KAAO,WACL,OAAOxiB,OAAOwiB,IAChB,CAFO,GAGPU,SAAU,IACVT,UAAW,CACT,CAAE7jD,IAAK,QAASkkD,MAAO,SACvB,CAAElkD,IAAK,OAAQkkD,MAAO,QACtB,CAAElkD,IAAK,MAAOkkD,MAAO,OACrB,CAAElkD,IAAK,KAAMkkD,MAAO,MACpB,CAAElkD,IAAK,MAAOkkD,MAAO,OACrB,CAAElkD,IAAK,OAAQkkD,MAAO,QACtB,CAAElkD,IAAK,MAAOkkD,MAAO,YACrB,CAAElkD,IAAK,OAAQkkD,MAAO,QACtB,CAAElkD,IAAK,aAAckkD,MAAO,cAC5B,CAAElkD,IAAK,WAAYkkD,MAAO,YAC1B,CAAElkD,IAAK,MAAOkkD,MAAO,OACrB,CAAElkD,IAAK,SAAUkkD,MAAO,UACxB,CAAElkD,IAAK,OAAQkkD,MAAO,QACtB,CAAElkD,IAAK,MAAOkkD,MAAO,S,+BC7VnBM,GAAS,SAAAtX,GAAA,SAAAsX,IAAA,OAAAzzC,EAAAA,EAAAA,GAAA,KAAAyzC,IAAA7lC,EAAAA,GAAAA,GAAA,KAAA6lC,EAAAp1C,UAAA,QAAAwP,EAAAA,GAAAA,GAAA4lC,EAAAtX,IAAAl8B,EAAAA,EAAAA,GAAAwzC,EAAA,EAAAxkD,IAAA,aAAAf,MAuBb,WACE,OAAI4E,KAAK8e,OACA9e,KAAK8e,OAAOQ,SAAS5xB,QAAQsS,OAE9B,CACV,IAAA7D,IAAA,SAAAf,MAEA,SAAOwP,EAAcxP,GACfwP,IAAS+1C,EAAU7jC,UAAY1hB,EACjC4E,KAAK2b,QAAQtB,aAAa,WAAYjf,IAEtCsnB,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAg+B,EAAA1jD,WAAA,eAAAc,KAAA,KAAa6M,EAAMxP,EAEvB,IAAAe,IAAA,MAAAf,MAEA,WACE,OAAO4E,KAAK8e,MACd,IAAA3iB,IAAA,YAAAf,MAEA,WACE,OAAI4E,KAAKyuC,MACAzuC,KAAKyuC,MAAMmS,aAEZ,CACV,IAAAzkD,IAAA,QAAAf,MAEA,WACE,OAAO4E,KAAKyuC,OAASzuC,KAAKyuC,MAAMX,OAClC,MAAA3xC,IAAA,SAAAf,MA/CA,SAAcA,GACZ,IAAM+e,GAAIuI,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAg+B,GAAA,eAAA5iD,KAAA,MAMV,OALI3C,EACF+e,EAAKE,aAAa,WAAYjf,GAE9B+e,EAAKE,aAAa,WAAYwmC,MAEzB1mC,CACT,IAAAhe,IAAA,UAAAf,MAEA,SAAeugB,GACb,GAAIA,EAAQgjC,aAAa,YACvB,OAAOhjC,EAAQnB,aAAa,WAGhC,KAnBa,CAASuR,KAAKxc,EAAAA,EAAAA,GAAvBoxC,GAAS,WACK,UAAOpxC,EAAAA,EAAAA,GADrBoxC,GAAS,UAEI,MAAI,IAoDjBG,GAAQ,SAAA7X,GAAA,SAAA6X,IAAA,OAAA5zC,EAAAA,EAAAA,GAAA,KAAA4zC,IAAAhmC,EAAAA,GAAAA,GAAA,KAAAgmC,EAAAv1C,UAAA,QAAAwP,EAAAA,GAAAA,GAAA+lC,EAAA7X,IAAA97B,EAAAA,EAAAA,GAAA2zC,EAAA,EAAA3kD,IAAA,aAAAf,MAOZ,WAEE,IAAIsnB,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAm+B,EAAA7jD,WAAA,mBAAAc,KAAA,OAAiD,MAA3BiC,KAAKqO,KAAKiR,SAASwB,KAAc,CAEzD,IAAMigC,EAAW/gD,KAAKsf,SAASwB,KAAKwF,UAE9B06B,EAAWhhD,KAAKsf,SAASyB,KAAKuF,UAE9B26B,EAAWjhD,KAAKqO,KAAKiR,SAASwB,KAAKwF,UAEnC46B,EAAWlhD,KAAKqO,KAAKiR,SAASyB,KAAKuF,UACzC,OACEy6B,EAASjT,QAAUkT,EAASlT,OAC5BiT,EAASjT,QAAUmT,EAASnT,OAC5BiT,EAASjT,QAAUoT,EAASpT,KAEhC,CACA,OAAO,CACT,IAAA3xC,IAAA,WAAAf,MAEA,SAASmW,GAAiC,IAAAsJ,EAAA,MACxC6H,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAm+B,EAAA7jD,WAAA,iBAAAc,KAAA,KAAewT,GACfvR,KAAKsf,SAAS5iB,SAAS,SAAAylB,GACrB,GAAkB,MAAdA,EAAM9T,KAAV,CACA,IAAM8yC,EAAeh/B,EAAMmE,UACrB8mB,EAAcjrB,EAAM9T,KAAKiY,UAC/B,GAAI66B,EAAarT,QAAUV,EAAYU,MAAO,CAC5C,IAAMz/B,EAAOwM,EAAKmJ,WAAW7B,GACzB9T,GAEFA,EAAK+a,WAGHvO,EAAK+D,MAEP/D,EAAK+D,KAAKwK,UAEd,CAd8B,CAehC,GACF,IAAAjtB,IAAA,YAAAf,MAEA,WACE,OAAI4E,KAAK8e,OACA9e,KAAK8e,OAAOQ,SAAS5xB,QAAQsS,OAE9B,CACV,IAAA7D,IAAA,QAAAf,MAEA,WACE,OAAO4E,KAAK8e,QAAU9e,KAAK8e,OAAOA,MACpC,KAzDY,CAAS8mB,KAASr2B,EAAAA,EAAAA,GAA1BuxC,GAAQ,WACM,cAAWvxC,EAAAA,EAAAA,GADzBuxC,GAAQ,UAEK,MAAI,IA0DjBM,GAAS,SAAAC,GAAA,SAAAD,IAAA,OAAAl0C,EAAAA,EAAAA,GAAA,KAAAk0C,IAAAtmC,EAAAA,GAAAA,GAAA,KAAAsmC,EAAA71C,UAAA,QAAAwP,EAAAA,GAAAA,GAAAqmC,EAAAC,IAAAl0C,EAAAA,EAAAA,GAAAi0C,EAAA,EAASxb,KAASr2B,EAAAA,EAAAA,GAA3B6xC,GAAS,WACK,eAAY7xC,EAAAA,EAAAA,GAD1B6xC,GAAS,UAEI,SAAO,IAKpBE,GAAc,SAAAC,GAAA,SAAAD,IAAA,OAAAp0C,EAAAA,EAAAA,GAAA,KAAAo0C,IAAAxmC,EAAAA,GAAAA,GAAA,KAAAwmC,EAAA/1C,UAAA,QAAAwP,EAAAA,GAAAA,GAAAumC,EAAAC,IAAAp0C,EAAAA,EAAAA,GAAAm0C,EAAA,EAAAnlD,IAAA,eAAAf,MAMlB,WAAe,IAAA0gB,EAAA,KACPg8B,EAAO93C,KAAK0jB,YAAYo9B,IACxBU,EAAa1J,EAAK9rC,QAAO,SAACnZ,EAAK47C,GACnC,OAAOhgD,KAAKoE,IAAI47C,EAAInvB,SAAStyB,OAAQ6F,EACvC,GAAG,GACHilD,EAAKp7C,SAAS,SAAA+xC,GACZ,IAAI3/C,MAAM0yD,EAAa/S,EAAInvB,SAAStyB,QAAQy0D,KAAK,GAAG/kD,SAAQ,WAC1D,IAAItB,EACqB,MAArBqzC,EAAInvB,SAASwB,OACf1lB,EAAQulD,GAAUr6B,QAAQmoB,EAAInvB,SAASwB,KAAKnF,UAE9C,IAAMF,EAAOK,EAAKX,OAAO5c,OAAOoiD,GAAU7jC,SAAU1hB,GACpDqzC,EAAI3uB,YAAYrE,GAEhBA,EAAK2N,UACP,GACF,GACF,IAAAjtB,IAAA,QAAAf,MAEA,SAAMsmD,GACJ,OAAO1hD,KAAK83C,OAAO98C,KAAK,SAAAyzC,GAAG,OAAKA,EAAInvB,SAASqiC,GAAGD,EAAO,GACzD,IAAAvlD,IAAA,eAAAf,MAEA,SAAa1E,GAEX,IAAA6wC,EAAevnC,KAAKujB,WAAW69B,IAAyB5Z,GAAAt4B,EAAAA,EAAAA,GAAAq4B,EAAA,GAAjD7hB,EAAI8hB,EAAA,GACC,MAAR9hB,GAAsC,MAAtBA,EAAKpG,SAASwB,MAClC4E,EAAKpG,SAAS5iB,SAAS,SAAA+xC,GACrB,IAAMC,EAAOD,EAAInvB,SAASqiC,GAAGjrD,GACjB,MAARg4C,GACFA,EAAKpxB,QAET,GACF,IAAAnhB,IAAA,eAAAf,MAEA,SAAa1E,GAAe,IAAA6lB,EAAA,KAE1BqlC,EAAe5hD,KAAKujB,WAAW69B,IAAyBS,GAAA3yC,EAAAA,EAAAA,GAAA0yC,EAAA,GAAjDl8B,EAAIm8B,EAAA,GACC,MAARn8B,GAAsC,MAAtBA,EAAKpG,SAASwB,MAClC4E,EAAKpG,SAAS5iB,SAAS,SAAA+xC,GACrB,IAAMrvB,EAAMqvB,EAAInvB,SAASqiC,GAAGjrD,GAEtB0E,EAAQulD,GAAUr6B,QAAQmoB,EAAInvB,SAASwB,KAAKnF,SAC5C+yB,EAAOnyB,EAAKpB,OAAO5c,OAAOoiD,GAAU7jC,SAAU1hB,GACpDqzC,EAAIpvB,aAAaqvB,EAAMtvB,EACzB,GACF,IAAAjjB,IAAA,YAAAf,MAEA,SAAU1E,GAAe,IAAA0nB,EAAA,KAEvB0jC,EAAe9hD,KAAKujB,WAAW69B,IAAyBW,GAAA7yC,EAAAA,EAAAA,GAAA4yC,EAAA,GAAjDp8B,EAAIq8B,EAAA,GACX,GAAY,MAARr8B,GAAsC,MAAtBA,EAAKpG,SAASwB,KAAlC,CACA,IAAMuwB,EAAKwP,KACLpS,EAAMzuC,KAAKmb,OAAO5c,OAAOuiD,GAAShkC,UACxC4I,EAAKpG,SAASwB,KAAKxB,SAAS5iB,SAAQ,WAClC,IAAMgyC,EAAOtwB,EAAKjD,OAAO5c,OAAOoiD,GAAU7jC,SAAUu0B,GACpD5C,EAAI3uB,YAAY4uB,EAClB,IACA,IAAMtvB,EAAMsG,EAAKpG,SAASqiC,GAAGjrD,GAC7BgvB,EAAKrG,aAAaovB,EAAKrvB,EAR+B,CASxD,IAAAjjB,IAAA,OAAAf,MAEA,WACE,IAAMsqB,EAAO1lB,KAAKsf,SAASwB,KAC3B,OAAY,MAAR4E,EAAqB,GAClBA,EAAKpG,SAAStkB,KAAK,SAAAyzC,GAAG,OAAKA,CAAG,GACvC,KAxEkB,CAAS7I,IAoF7B,SAASib,KACP,IAAMxP,EAAK5iD,KAAKuzD,SAAS1lD,SAAS,IAAIjL,MAAM,EAAG,GAC/C,MAAO,OAAPjD,OAAcijD,EAChB,EAvFsC9hC,EAAAA,EAAAA,GAAhC+xC,GAAc,WACA,oBAAiB/xC,EAAAA,EAAAA,GAD/B+xC,GAAc,UAED,SAyEnBA,GAAev9B,gBAAkB,CAACq9B,IAClCA,GAAU5hC,kBAAoB8hC,GAE9BF,GAAUr9B,gBAAkB,CAAC+8B,IAC7BA,GAASthC,kBAAoB4hC,GAE7BN,GAAS/8B,gBAAkB,CAAC48B,IAC5BA,GAAUnhC,kBAAoBshC,GCtMF,IAEtBmB,GAAK,SAAA9X,GAQT,SAAA8X,IAA2D,IAAApnC,EAEhC,OAFgC3N,EAAAA,EAAAA,GAAA,KAAA+0C,GACzDpnC,GAAAC,EAAAA,GAAAA,GAAA,KAAAmnC,EAAM12C,WACNsP,EAAKqnC,qBAAoBrnC,CAC3B,QAAAE,EAAAA,GAAAA,GAAAknC,EAAA9X,IAAAh9B,EAAAA,EAAAA,GAAA80C,EAAA,EAAA9lD,IAAA,gBAAAf,MAEA,WACE4E,KAAK4uB,MAAMzT,OAAOuI,YAAY49B,IAAgB5kD,SAAS,SAAAoxC,GACrDA,EAAMqU,cACR,GACF,IAAAhmD,IAAA,eAAAf,MAEA,WACE,IAAAgnD,EAAwBpiD,KAAKuuC,WAAU8T,GAAAnzC,EAAAA,EAAAA,GAAAkzC,EAAA,GAAhCtU,EAAKuU,EAAA,GAAI3T,EAAI2T,EAAA,GACR,MAAR3T,IAEJZ,EAAMwU,aAAa5T,EAAK6T,cACxBviD,KAAK4uB,MAAMnG,OAAOyW,GAAMnnB,QAAQyY,MAClC,IAAAr0B,IAAA,YAAAf,MAEA,WACE,IAAAonD,EAAgBxiD,KAAKuuC,WAAUkU,GAAAvzC,EAAAA,EAAAA,GAAAszC,EAAA,GAAtB/T,EAAGgU,EAAA,GACD,MAAPhU,IACJA,EAAInxB,SACJtd,KAAK4uB,MAAMnG,OAAOyW,GAAMnnB,QAAQyY,MAClC,IAAAr0B,IAAA,cAAAf,MAEA,WACE,IAAAsnD,EAAgB1iD,KAAKuuC,WAAUoU,GAAAzzC,EAAAA,EAAAA,GAAAwzC,EAAA,GAAxB5U,EAAK6U,EAAA,GACZ,GAAa,MAAT7U,EAAJ,CAEA,IAAMnyC,EAASmyC,EAAMnyC,SAErBmyC,EAAMxwB,SACNtd,KAAK4uB,MAAMnG,OAAOyW,GAAMnnB,QAAQyY,MAChCxwB,KAAK4uB,MAAMyS,aAAa1lC,EAAQujC,GAAMnnB,QAAQwY,OANrB,CAO3B,IAAAp0B,IAAA,WAAAf,MAEA,WAEiE,IAD/D2xB,EAAKxhB,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAGvL,KAAK4uB,MAAM8E,eAEnB,GAAa,MAAT3G,EAAe,MAAO,CAAC,KAAM,KAAM,MAAO,GAC9C,IAAAwf,EAAuBvsC,KAAK4uB,MAAM4c,QAAQze,EAAMr2B,OAAM81C,GAAAt9B,EAAAA,EAAAA,GAAAq9B,EAAA,GAA/CmC,EAAIlC,EAAA,GAAE7wC,EAAM6wC,EAAA,GACnB,GAAY,MAARkC,GAAgBA,EAAKxvB,QAAQpC,WAAa6jC,GAAU7jC,SACtD,MAAO,CAAC,KAAM,KAAM,MAAO,GAE7B,IAAM2xB,EAAMC,EAAK5vB,OACXgvB,EAAQW,EAAI3vB,OAAOA,OAEzB,MAAO,CAACgvB,EAAOW,EAAKC,EAAM/yC,EAC5B,IAAAQ,IAAA,eAAAf,MAEA,SAAaO,GACX,IAAMoxB,EAAQ/sB,KAAK4uB,MAAM8E,eACzB,GAAK3G,EAAL,CACA,IAAA61B,EAA2B5iD,KAAKuuC,SAASxhB,GAAM81B,GAAA3zC,EAAAA,EAAAA,GAAA0zC,EAAA,GAAxC9U,EAAK+U,EAAA,GAAEpU,EAAGoU,EAAA,GAAEnU,EAAImU,EAAA,GACvB,GAAY,MAARnU,EAAJ,CACA,IAAMgT,EAAShT,EAAK6T,aACpBzU,EAAMgV,aAAapB,EAAS/lD,GAC5BqE,KAAK4uB,MAAMnG,OAAOyW,GAAMnnB,QAAQyY,MAChC,IAAItE,EAAQuiB,EAAImS,YACD,IAAXjlD,IACFuwB,GAAS,GAEXlsB,KAAK4uB,MAAMyS,aACTtU,EAAMr2B,MAAQw1B,EACda,EAAM//B,OACNkyC,GAAMnnB,QAAQwY,OAXQ,CAFN,CAepB,IAAAp0B,IAAA,mBAAAf,MAEA,WACE4E,KAAK8iD,aAAa,EACpB,IAAA3mD,IAAA,oBAAAf,MAEA,WACE4E,KAAK8iD,aAAa,EACpB,IAAA3mD,IAAA,YAAAf,MAEA,SAAUO,GACR,IAAMoxB,EAAQ/sB,KAAK4uB,MAAM8E,eACzB,GAAK3G,EAAL,CACA,IAAAg2B,EAA2B/iD,KAAKuuC,SAASxhB,GAAMi2B,GAAA9zC,EAAAA,EAAAA,GAAA6zC,EAAA,GAAxCjV,EAAKkV,EAAA,GAAEvU,EAAGuU,EAAA,GAAEtU,EAAIsU,EAAA,GACvB,GAAY,MAARtU,EAAJ,CACA,IAAMh4C,EAAQ+3C,EAAImS,YAClB9S,EAAMmV,UAAUvsD,EAAQiF,GACxBqE,KAAK4uB,MAAMnG,OAAOyW,GAAMnnB,QAAQyY,MAC5B70B,EAAS,EACXqE,KAAK4uB,MAAMyS,aAAatU,EAAOmS,GAAMnnB,QAAQwY,QAE7CvwB,KAAK4uB,MAAMyS,aACTtU,EAAMr2B,MAAQ+3C,EAAInvB,SAAStyB,OAC3B+/B,EAAM//B,OACNkyC,GAAMnnB,QAAQwY,OAVM,CAFN,CAepB,IAAAp0B,IAAA,iBAAAf,MAEA,WACE4E,KAAKijD,UAAU,EACjB,IAAA9mD,IAAA,iBAAAf,MAEA,WACE4E,KAAKijD,UAAU,EACjB,IAAA9mD,IAAA,cAAAf,MAEA,SAAY08C,EAAcoL,GACxB,IAAMn2B,EAAQ/sB,KAAK4uB,MAAM8E,eACzB,GAAa,MAAT3G,EAAJ,CACA,IAAM99B,EAAQ,IAAIH,MAAMgpD,GAAM2J,KAAK,GAAGz1C,QAAQ,SAAAM,GAC5C,IAAM0P,EAAO,IAAIltB,MAAMo0D,GAASzB,KAAK,MAAM7xC,KAAK,IAChD,OAAOtD,EAAKe,OAAO2O,EAAM,CAAE8xB,MAAO+S,MACpC,IAAG,IAAI7zC,IAAQM,OAAOyf,EAAMr2B,QAC5BsJ,KAAK4uB,MAAMme,eAAe99C,EAAOiwC,GAAMnnB,QAAQyY,MAC/CxwB,KAAK4uB,MAAMyS,aAAatU,EAAMr2B,MAAOwoC,GAAMnnB,QAAQwY,QACnDvwB,KAAKmjD,eAPoB,CAQ3B,IAAAhnD,IAAA,qBAAAf,MAEA,WAAqB,IAAA0gB,EAAA,KACnB9b,KAAK4uB,MAAMvb,GACT6rB,GAAM7sB,OAAOwd,iBACZ,SAAAxK,GACCA,EAAUhJ,MAAM,SAAAoJ,GACd,QACE,CAAC,KAAM,KAAM,QAAS,SAAS2qB,SAC5B3qB,EAAS7X,OAAuB0O,WAGnCR,EAAK8S,MAAMpd,KAAK0tB,GAAM7sB,OAAO4d,aAAa,SAAChhC,EAAOm0D,EAAKtgD,GACjDA,IAAWo8B,GAAMnnB,QAAQyY,MAC7B1U,EAAKqnC,eACP,KACO,EAGX,GACF,GAEJ,MAAAhnD,IAAA,WAAAf,MAhJA,WACE8jC,GAAMtW,SAAS+3B,IACfzhB,GAAMtW,SAASk4B,IACf5hB,GAAMtW,SAASw4B,IACfliB,GAAMtW,SAAS04B,GACjB,KANS,CAASjnB,IAoJpB,Y,gBCxJMtM,GAAQM,GAAO,iBAefg1B,GAAO,SAAAlZ,GAOX,SAAAkZ,EAAYz0B,EAAc7U,GAAgC,IAAAc,EAExD,IAFwD3N,EAAAA,EAAAA,GAAA,KAAAm2C,GACxDxoC,GAAAC,EAAAA,GAAAA,GAAA,KAAAuoC,EAAA,CAAMz0B,EAAO7U,IACTjrB,MAAMuT,QAAQwY,EAAKd,QAAQolB,WAAY,KAAAmkB,EACnCnkB,EAAYlf,SAASC,cAAc,OACzCif,EAAU9kB,aAAa,OAAQ,WAC/BkpC,GAAYpkB,EAAWtkB,EAAKd,QAAQolB,WACrB,QAAfmkB,EAAA10B,EAAMuQ,iBAAS,IAAAmkB,GAAY,QAAZA,EAAfA,EAAiBrmC,kBAAU,IAAAqmC,GAA3BA,EAA6BjkC,aAAa8f,EAAWvQ,EAAMuQ,WAC3DtkB,EAAKskB,UAAYA,CACnB,KAA6C,kBAA3BtkB,EAAKd,QAAQolB,UAC7BtkB,EAAKskB,UAAYlf,SAAS2jB,cAAc/oB,EAAKd,QAAQolB,WAErDtkB,EAAKskB,UAAYtkB,EAAKd,QAAQolB,UAEhC,OAAMtkB,EAAKskB,qBAAqBqkB,aAIhC3oC,EAAKskB,UAAU5hB,UAAUliB,IAAI,cAC7Bwf,EAAK4oC,SAAW,GAChB5oC,EAAKhK,SAAW,CAAC,EACbgK,EAAKd,QAAQlJ,UACfvW,OAAOkD,KAAKqd,EAAKd,QAAQlJ,UAAUnU,SAAS,SAAA6hB,GAAW,IAAAmlC,EAC/Cr0C,EAA+B,QAAxBq0C,EAAG7oC,EAAKd,QAAQlJ,gBAAQ,IAAA6yC,OAAA,EAArBA,EAAwBnlC,GACpClP,GACFwL,EAAK8oC,WAAWplC,EAAQlP,EAE5B,IAEFvgB,MAAM2rB,KAAKI,EAAKskB,UAAUzQ,iBAAiB,mBAAmBhyB,SAC3D,SAAA4J,GAECuU,EAAKwH,OAAO/b,EACd,IAEFuU,EAAK+T,MAAMvb,GAAG6rB,GAAM7sB,OAAOod,eAAe,WACxC,IAAAulB,EAAgBn6B,EAAK+T,MAAMlC,UAAUuI,WAAUggB,GAAA/lC,EAAAA,EAAAA,GAAA8lC,EAAA,GAAxCjoB,EAAKkoB,EAAA,GACZp6B,EAAK4N,OAAOsE,EACd,IAAElS,IAvBAkT,GAAMmB,MAAM,iCAAkCrU,EAAKd,UACnD6pC,EAAAA,GAAAA,GAAA/oC,GAuBJ,QAAAE,EAAAA,GAAAA,GAAAsoC,EAAAlZ,IAAAh9B,EAAAA,EAAAA,GAAAk2C,EAAA,EAAAlnD,IAAA,aAAAf,MAEA,SAAWmjB,EAAgBlP,GACzBrP,KAAK6Q,SAAS0N,GAAUlP,CAC1B,IAAAlT,IAAA,SAAAf,MAEA,SAAOkL,GAAoB,IAAAwV,EAAA,KACrByC,EAASzvB,MAAM2rB,KAAKnU,EAAMiX,WAAW1B,MAAM,SAAAkB,GAC7C,OAAoC,IAA7BA,EAAUrvB,QAAQ,MAC3B,IACA,GAAK6wB,EAKL,GAJAA,EAASA,EAAOltB,MAAM,GACA,WAAlBiV,EAAMgW,SACRhW,EAAM+T,aAAa,OAAQ,UAGF,MAAzBra,KAAK6Q,SAAS0N,IACqB,MAAnCve,KAAK4uB,MAAMzT,OAAOE,MAAMkD,GAF1B,CAOA,IAAMiQ,EAA8B,WAAlBloB,EAAMgW,QAAuB,SAAW,QAC1DhW,EAAMmoB,iBAAiBD,GAAY,SAAAjyB,GACjC,IAAInB,EACJ,GAAsB,WAAlBkL,EAAMgW,QAAsB,CAE9B,GAAIhW,EAAMu9C,cAAgB,EAAG,OAE7B,IAAMC,EAAWx9C,EAAMyT,QAAQzT,EAAMu9C,eAEnCzoD,GADE0oD,EAASnF,aAAa,cAGhBmF,EAAS1oD,QAAS,EAE9B,MAEIA,GADEkL,EAAMiX,UAAUiE,SAAS,eAInBlb,EAAMlL,QAAUkL,EAAMq4C,aAAa,UAE7CpiD,EAAEkrC,iBAEJ3rB,EAAK8S,MAAM6C,QACX,IAAAsyB,EAAgBjoC,EAAK8S,MAAMlC,UAAUuI,WAAU+uB,GAAA90C,EAAAA,EAAAA,GAAA60C,EAAA,GAAxCh3B,EAAKi3B,EAAA,GACZ,GAA6B,MAAzBloC,EAAKjL,SAAS0N,GAChBzC,EAAKjL,SAAS0N,GAAQxgB,KAAK+d,EAAM1gB,QAC5B,GAEL0gB,EAAK8S,MAAMzT,OAAOE,MAAMkD,GAAQthB,qBAAqBuqB,GACrD,CAEA,GADApsB,EAAQ6oD,OAAO,SAAD71D,OAAUmwB,KACnBnjB,EAAO,OACZ0gB,EAAK8S,MAAMme,gBACT,IAAI//B,IAEDM,OAAOyf,EAAMr2B,OACd,UACQq2B,EAAM//B,QACbqgB,QAAMkC,EAAAA,EAAAA,GAAC,CAAC,EAAEgP,EAASnjB,IACtB8jC,GAAMnnB,QAAQyY,KAElB,MACE1U,EAAK8S,MAAMrQ,OAAOA,EAAQnjB,EAAO8jC,GAAMnnB,QAAQyY,MAEjD1U,EAAK2M,OAAOsE,EACd,IACA/sB,KAAKyjD,SAASr2D,KAAK,CAACmxB,EAAQjY,GA/C5B,MAFEynB,GAAMiV,KAAK,2CAA4CzkB,EAAQjY,EAkDnE,IAAAnK,IAAA,SAAAf,MAEA,SAAO2xB,GACL,IAAMzG,EAAmB,MAATyG,EAAgB,CAAC,EAAI/sB,KAAK4uB,MAAMoT,UAAUjV,GAC1D/sB,KAAKyjD,SAAS/mD,SAAS,SAAAzB,GACrB,IAAAq7C,GAAApnC,EAAAA,EAAAA,GAAwBjU,EAAI,GAArBsjB,EAAM+3B,EAAA,GAAEhwC,EAAKgwC,EAAA,GACpB,GAAsB,WAAlBhwC,EAAMgW,QAAsB,CAC9B,IAAIgkC,EAAmC,KACvC,GAAa,MAATvzB,EACFuzB,EAAS,UACJ,GAAuB,MAAnBh6B,EAAQ/H,GACjB+hC,EAASh6C,EAAMs9B,cAAc,yBACxB,IAAK90C,MAAMuT,QAAQikB,EAAQ/H,IAAU,CAC1C,IAAInjB,EAAQkrB,EAAQ/H,GACC,kBAAVnjB,IACTA,EAAQA,EAAM4C,QAAQ,KAAM,QAE9BsiD,EAASh6C,EAAMs9B,cAAc,iBAADx1C,OAAkBgN,EAAM,MACtD,CACc,MAAVklD,GAEFh6C,EAAMlL,MAAQ,GAEdkL,EAAMu9C,eAAiB,GAEvBvD,EAAOwD,UAAW,CAEtB,MAAO,GAAa,MAAT/2B,EACTzmB,EAAMiX,UAAUD,OAAO,aACvBhX,EAAM+T,aAAa,eAAgB,cAC9B,GAAI/T,EAAMq4C,aAAa,SAAU,CAGtC,IAAMvjD,EAAQkrB,EAAQ/H,GAChB2lC,EACJ9oD,IAAUkL,EAAMkU,aAAa,UACnB,MAATpf,GAAiBA,EAAMkB,aAAegK,EAAMkU,aAAa,UAChD,MAATpf,IAAkBkL,EAAMkU,aAAa,SACxClU,EAAMiX,UAAUwiB,OAAO,YAAamkB,GACpC59C,EAAM+T,aAAa,eAAgB6pC,EAAS5nD,WAC9C,KAAO,CACL,IAAM4nD,EAA8B,MAAnB59B,EAAQ/H,GACzBjY,EAAMiX,UAAUwiB,OAAO,YAAamkB,GACpC59C,EAAM+T,aAAa,eAAgB6pC,EAAS5nD,WAC9C,CACF,GACF,KAhKW,CAAS+9B,IAoKtB,SAAS8pB,GAAUhlB,EAAwB5gB,EAAgBnjB,GACzD,IAAMkL,EAAQ2Z,SAASC,cAAc,UACrC5Z,EAAM+T,aAAa,OAAQ,UAC3B/T,EAAMiX,UAAUliB,IAAI,MAADjN,OAAOmwB,IAC1BjY,EAAM+T,aAAa,eAAgB,SACtB,MAATjf,GACFkL,EAAMlL,MAAQA,EACdkL,EAAM+T,aAAa,aAAc,GAAFjsB,OAAKmwB,EAAO,MAAAnwB,OAAIgN,KAE/CkL,EAAM+T,aAAa,aAAckE,GAEnC4gB,EAAUrf,YAAYxZ,EACxB,CAEA,SAASi9C,GACPpkB,EACAilB,GAIKt1D,MAAMuT,QAAQ+hD,EAAO,MAExBA,EAAS,CAACA,IAEZA,EAAO1nD,SAAS,SAAA+mD,GACd,IAAMY,EAAQpkC,SAASC,cAAc,QACrCmkC,EAAM9mC,UAAUliB,IAAI,cACpBooD,EAAS/mD,SAAS,SAAA4nD,GAChB,GAAuB,kBAAZA,EACTH,GAAUE,EAAOC,OACZ,CACL,IAAM/lC,EAASjkB,OAAOkD,KAAK8mD,GAAS,GAC9BlpD,EAAQkpD,EAAQ/lC,GAClBzvB,MAAMuT,QAAQjH,GAChBmpD,GAAUF,EAAO9lC,EAAQnjB,GAEzB+oD,GAAUE,EAAO9lC,EAAQnjB,EAE7B,CACF,IACA+jC,EAAUrf,YAAYukC,EACxB,GACF,CAEA,SAASE,GACPplB,EACA5gB,EACA7iB,GAEA,IAAM4K,EAAQ2Z,SAASC,cAAc,UACrC5Z,EAAMiX,UAAUliB,IAAI,MAADjN,OAAOmwB,IAC1B7iB,EAAOgB,SAAS,SAAAtB,GACd,IAAMklD,EAASrgC,SAASC,cAAc,WACxB,IAAV9kB,EACFklD,EAAOjmC,aAAa,QAAS9X,OAAOnH,IAEpCklD,EAAOjmC,aAAa,WAAY,YAElC/T,EAAMwZ,YAAYwgC,EACpB,IACAnhB,EAAUrf,YAAYxZ,EACxB,CA/DA+8C,GAAQ/e,SAAW,CAAC,EAiEpB+e,GAAQ/e,SAAW,CACjBnF,UAAW,KACXtuB,SAAU,CACR2zC,MAAK,WAAG,IAAAjoC,EAAA,KACAwQ,EAAQ/sB,KAAK4uB,MAAM8E,eACzB,GAAa,MAAT3G,EACJ,GAAqB,IAAjBA,EAAM//B,OAAc,CACtB,IAAMs5B,EAAUtmB,KAAK4uB,MAAMoT,YAC3B1nC,OAAOkD,KAAK8oB,GAAS5pB,SAAS,SAAAkO,GAEuB,MAA/C2R,EAAKqS,MAAMzT,OAAOE,MAAMzQ,EAAMmO,GAAMM,SACtCkD,EAAKqS,MAAMrQ,OAAO3T,GAAM,EAAOs0B,GAAMnnB,QAAQyY,KAEjD,GACF,MACExwB,KAAK4uB,MAAMmU,aAAahW,EAAMr2B,MAAOq2B,EAAM//B,OAAQkyC,GAAMnnB,QAAQyY,KAErE,EACAi0B,UAAS,SAACrpD,GACR,IAAAspD,EAAkB1kD,KAAK4uB,MAAMoT,YAArB2iB,EAAAD,EAAAC,MACM,QAAVvpD,GAA4B,MAATupD,EACrB3kD,KAAK4uB,MAAMrQ,OAAO,QAAS,QAAS2gB,GAAMnnB,QAAQyY,MACxCp1B,GAAmB,UAAVupD,GACnB3kD,KAAK4uB,MAAMrQ,OAAO,SAAS,EAAO2gB,GAAMnnB,QAAQyY,MAElDxwB,KAAK4uB,MAAMrQ,OAAO,YAAanjB,EAAO8jC,GAAMnnB,QAAQyY,KACtD,EACA2I,OAAM,SAAC/9B,GACL,IAAM2xB,EAAQ/sB,KAAK4uB,MAAM8E,eAEnBpN,EAAUtmB,KAAK4uB,MAAMoT,UAAUjV,GAE/BoM,EAASnZ,SAASsG,EAAQ6S,QAAU,EAAG,IAC7C,GAAc,OAAV/9B,GAA4B,OAAVA,EAAgB,CACpC,IAAI4lC,EAAqB,OAAV5lC,EAAiB,GAAK,EACX,QAAtBkrB,EAAQm+B,YAAqBzjB,IAAa,GAC9ChhC,KAAK4uB,MAAMrQ,OAAO,SAAU4a,EAAS6H,EAAU9B,GAAMnnB,QAAQyY,KAC/D,CACF,EACAo0B,KAAI,SAACxpD,IACW,IAAVA,IACFA,EAAQ6oD,OAAO,oBAEjBjkD,KAAK4uB,MAAMrQ,OAAO,OAAQnjB,EAAO8jC,GAAMnnB,QAAQyY,KACjD,EACAmJ,KAAI,SAACv+B,GACH,IAAM2xB,EAAQ/sB,KAAK4uB,MAAM8E,eAEnBpN,EAAUtmB,KAAK4uB,MAAMoT,UAAUjV,GACvB,UAAV3xB,EACmB,YAAjBkrB,EAAQqT,MAAuC,cAAjBrT,EAAQqT,KACxC35B,KAAK4uB,MAAMrQ,OAAO,QAAQ,EAAO2gB,GAAMnnB,QAAQyY,MAE/CxwB,KAAK4uB,MAAMrQ,OAAO,OAAQ,YAAa2gB,GAAMnnB,QAAQyY,MAGvDxwB,KAAK4uB,MAAMrQ,OAAO,OAAQnjB,EAAO8jC,GAAMnnB,QAAQyY,KAEnD,I,25gBCjRJ,UACEm0B,MAAO,CACL,GAAIE,GACJC,OAAQC,GACRvxB,MAAOwxB,GACPC,QAASC,IAEXC,WAAYC,GACZxW,WAAYyW,GACZ9X,KAAM+X,GACNd,MAAOe,GACPpc,KAAMqc,GACN,aAAcA,GACdC,MAAOC,GACPjB,UAAW,CACT,GAAIkB,GACJC,IAAKC,IAEPzH,QAAS0H,GACT1X,OAAQ,CACN,EAAK2X,GACL,EAAKC,GACL,EAAKC,GACL,EAAKC,GACL,EAAKC,GACL,EAAKC,IAEP3Y,OAAQ4Y,GACRnL,MAAOoL,GACPntB,OAAQ,CACN,KAAMotB,GACN,KAAMC,IAER5B,KAAM6B,GACN9sB,KAAM,CACJ+sB,OAAQC,GACRC,MAAOC,GACPC,QAASC,IAEXC,OAAQ,CACNC,IAAKC,GACLC,MAAOC,IAET7P,OAAQ8P,GACRvZ,MAAOwZ,GACP5Z,UAAW6Z,GACXzI,MAAO0I,I,yJC9ELC,GAAiB,EAErB,SAASC,GAAoBjsB,EAAsBtd,GACjDsd,EAAQphB,aACN8D,EAAS,GAAA/vB,SACgC,SAApCqtC,EAAQjhB,aAAa2D,KAE9B,KAEMwpC,GAAM,WAKV,SAAAA,EAAYvH,GAA2B,IAAAvlC,EAAA,MAAA3N,EAAAA,EAAAA,GAAA,KAAAy6C,GACrC3nD,KAAKogD,OAASA,EACdpgD,KAAKm/B,UAAYlf,SAASC,cAAc,QACxClgB,KAAK4nD,cACL5nD,KAAKogD,OAAOtiC,MAAM+pC,QAAU,OAE5B7nD,KAAKogD,OAAOnjC,WAAWoC,aAAarf,KAAKm/B,UAAWn/B,KAAKogD,QAEzDpgD,KAAKqgD,MAAM5xB,iBAAiB,aAAa,WACvC5T,EAAKitC,cACP,IACA9nD,KAAKqgD,MAAM5xB,iBAAiB,WAAY,SAAA9c,GACtC,OAAQA,EAAMxV,KACZ,IAAK,QACH0e,EAAKitC,eACL,MACF,IAAK,SACHjtC,EAAKktC,SACLp2C,EAAM81B,iBACN,MACF,SAEJ,IACAznC,KAAKogD,OAAO3xB,iBAAiB,SAAUzuB,KAAKyoB,OAAOjQ,KAAKxY,MAC1D,QAAAmN,EAAAA,EAAAA,GAAAw6C,EAAA,EAAAxrD,IAAA,eAAAf,MAEA,WACE4E,KAAKm/B,UAAU5hB,UAAUwiB,OAAO,eAEhC2nB,GAAoB1nD,KAAKqgD,MAAO,iBAEhCqH,GAAoB1nD,KAAK+Z,QAAS,cACpC,IAAA5d,IAAA,YAAAf,MAEA,SAAUklD,GAA2B,IAAAxkC,EAAA,KAC7BpB,EAAOuF,SAASC,cAAc,QAEpCxF,EAAKstC,SAAW,IAChBttC,EAAKL,aAAa,OAAQ,UAC1BK,EAAK6C,UAAUliB,IAAI,kBACnB,IAAMD,EAAQklD,EAAO9lC,aAAa,SAwBlC,OAvBIpf,GACFsf,EAAKL,aAAa,aAAcjf,GAE9BklD,EAAOjR,aACT30B,EAAKL,aAAa,aAAcimC,EAAOjR,aAEzC30B,EAAK+T,iBAAiB,SAAS,WAC7B3S,EAAKmsC,WAAWvtC,GAAM,EACxB,IACAA,EAAK+T,iBAAiB,WAAY,SAAA9c,GAChC,OAAQA,EAAMxV,KACZ,IAAK,QACH2f,EAAKmsC,WAAWvtC,GAAM,GACtB/I,EAAM81B,iBACN,MACF,IAAK,SACH3rB,EAAKisC,SACLp2C,EAAM81B,iBACN,MACF,SAEJ,IAEO/sB,CACT,IAAAve,IAAA,aAAAf,MAEA,WACE,IAAMilD,EAAQpgC,SAASC,cAAc,QAQrC,OAPAmgC,EAAM9iC,UAAUliB,IAAI,mBACpBglD,EAAMvmB,UAAYouB,GAElB7H,EAAM2H,SAAW,IACjB3H,EAAMhmC,aAAa,OAAQ,UAC3BgmC,EAAMhmC,aAAa,gBAAiB,SACpCra,KAAKm/B,UAAUrf,YAAYugC,GACpBA,CACT,IAAAlkD,IAAA,eAAAf,MAEA,WAAe,IAAAmhB,EAAA,KACPxC,EAAUkG,SAASC,cAAc,QACvCnG,EAAQwD,UAAUliB,IAAI,qBAGtB0e,EAAQM,aAAa,cAAe,QAEpCN,EAAQiuC,SAAW,KAGnBjuC,EAAQs3B,GAAK,qBAAHjjD,OAAwBq5D,IAClCA,IAAkB,EAClBznD,KAAKqgD,MAAMhmC,aAAa,gBAAiBN,EAAQs3B,IAGjDrxC,KAAK+Z,QAAUA,EAEfjrB,MAAM2rB,KAAKza,KAAKogD,OAAOrmC,SAASrd,SAAS,SAAA4jD,GACvC,IAAM5lC,EAAO6B,EAAK4rC,UAAU7H,GAC5BvmC,EAAQ+F,YAAYpF,IACI,IAApB4lC,EAAOwD,UACTvnC,EAAK0rC,WAAWvtC,EAEpB,IACA1a,KAAKm/B,UAAUrf,YAAY/F,EAC7B,IAAA5d,IAAA,cAAAf,MAEA,WAAc,IAAAgjB,EAAA,KACZtvB,MAAM2rB,KAAKza,KAAKogD,OAAOr0C,YAAYrP,SAAS,SAAAge,GAC1C0D,EAAK+gB,UAAU9kB,aAAaK,EAAK9P,KAAM8P,EAAKtf,MAC9C,IACA4E,KAAKm/B,UAAU5hB,UAAUliB,IAAI,aAC7B2E,KAAKqgD,MAAQrgD,KAAKooD,aAClBpoD,KAAKqoD,cACP,IAAAlsD,IAAA,SAAAf,MAEA,WAAS,IAAAkjB,EAAA,KAEPte,KAAKsoD,QAGLp3B,YAAW,kBAAM5S,EAAK+hC,MAAM5uB,OAAO,GAAE,EACvC,IAAAt1B,IAAA,QAAAf,MAEA,WACE4E,KAAKm/B,UAAU5hB,UAAUD,OAAO,eAChCtd,KAAKqgD,MAAMhmC,aAAa,gBAAiB,SAEzCra,KAAK+Z,QAAQM,aAAa,cAAe,OAC3C,IAAAle,IAAA,aAAAf,MAEA,SAAWsf,GAA2C,IAAjB6tC,EAAOh9C,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,IAAAA,UAAA,GACpCu4C,EAAW9jD,KAAKm/B,UAAUyE,cAAc,gBAC1ClpB,IAASopC,IACG,MAAZA,GACFA,EAASvmC,UAAUD,OAAO,eAEhB,MAAR5C,IACJA,EAAK6C,UAAUliB,IAAI,eAEnB2E,KAAKogD,OAAOyD,cAAgB/0D,MAAM2rB,KAAKC,EAAKuC,WAAWqC,UAAU5xB,QAC/DgtB,GAEEA,EAAKikC,aAAa,cAEpB3+C,KAAKqgD,MAAMhmC,aAAa,aAAcK,EAAKF,aAAa,eAExDxa,KAAKqgD,MAAM9lC,gBAAgB,cAEzBG,EAAKikC,aAAa,cAEpB3+C,KAAKqgD,MAAMhmC,aAAa,aAAcK,EAAKF,aAAa,eAExDxa,KAAKqgD,MAAM9lC,gBAAgB,cAEzBguC,IACFvoD,KAAKogD,OAAOoI,cAAc,IAAIC,MAAM,WACpCzoD,KAAKsoD,UAET,IAAAnsD,IAAA,SAAAf,MAEA,WACE,IAAIklD,EACJ,GAAItgD,KAAKogD,OAAOyD,eAAiB,EAAG,CAClC,IAAMnpC,EAEJ1a,KAAKm/B,UAAUyE,cAAc,sBAAsBtkB,SACjDtf,KAAKogD,OAAOyD,eAEhBvD,EAAStgD,KAAKogD,OAAOrmC,QAAQ/Z,KAAKogD,OAAOyD,eAEzC7jD,KAAKioD,WAAWvtC,EAClB,MACE1a,KAAKioD,WAAW,MAElB,IAAM/D,EACM,MAAV5D,GACAA,IAAWtgD,KAAKogD,OAAOxc,cAAc,oBACvC5jC,KAAKqgD,MAAM9iC,UAAUwiB,OAAO,YAAamkB,EAC3C,KAvLU,GA0LZ,YCrMgC,IAE1BwE,GAAW,SAAAC,GACf,SAAAD,EAAYtI,EAA2BC,GAAe,IAAAxlC,EAQhD,OARgD3N,EAAAA,EAAAA,GAAA,KAAAw7C,GACpD7tC,GAAAC,EAAAA,GAAAA,GAAA,KAAA4tC,EAAA,CAAMtI,IACNvlC,EAAKwlC,MAAMvmB,UAAYumB,EACvBxlC,EAAKskB,UAAU5hB,UAAUliB,IAAI,mBAC7BvM,MAAM2rB,KAAKI,EAAKskB,UAAUzQ,iBAAiB,oBACxCr9B,MAAM,EAAG,GACTqL,SAAS,SAAAge,GACRA,EAAK6C,UAAUliB,IAAI,aACrB,IAAEwf,CACN,QAAAE,EAAAA,GAAAA,GAAA2tC,EAAAC,IAAAx7C,EAAAA,EAAAA,GAAAu7C,EAAA,EAAAvsD,IAAA,YAAAf,MAEA,SAAUklD,GACR,IAAM5lC,GAAIgI,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAA+lC,EAAAzrD,WAAA,kBAAAc,KAAA,KAAmBuiD,GAE7B,OADA5lC,EAAKoD,MAAM8qC,gBAAkBtI,EAAO9lC,aAAa,UAAY,GACtDE,CACT,IAAAve,IAAA,aAAAf,MAEA,SAAWsf,EAA0B6tC,IACnC7lC,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAA+lC,EAAAzrD,WAAA,mBAAAc,KAAA,KAAiB2c,EAAM6tC,GACvB,IAAMM,EAAa7oD,KAAKqgD,MAAMzc,cAA2B,mBACnDxoC,EAAQsf,GAAOA,EAAKF,aAAa,eAAsB,GACzDquC,IACyB,SAAvBA,EAAWvsC,QACbusC,EAAW/qC,MAAMgrC,OAAS1tD,EAE1BytD,EAAW/qC,MAAM2jC,KAAOrmD,EAG9B,KA7Be,CAASusD,IAgC1B,YClCgC,IAE1BoB,GAAU,SAAAJ,GAGd,SAAAI,EAAY3I,EAA2B4I,GAA+B,IAAAnuC,EASnC,OATmC3N,EAAAA,EAAAA,GAAA,KAAA67C,GACpEluC,GAAAC,EAAAA,GAAAA,GAAA,KAAAiuC,EAAA,CAAM3I,IACNvlC,EAAKskB,UAAU5hB,UAAUliB,IAAI,kBAC7BvM,MAAM2rB,KAAKI,EAAKskB,UAAUzQ,iBAAiB,oBAAoBhyB,SAC5D,SAAAge,GACCA,EAAKof,UAAYkvB,EAAMtuC,EAAKF,aAAa,eAAiB,GAC5D,IAEFK,EAAKouC,YAAcpuC,EAAKskB,UAAUyE,cAAc,gBAChD/oB,EAAKotC,WAAWptC,EAAKouC,aAAYpuC,CACnC,QAAAE,EAAAA,GAAAA,GAAAguC,EAAAJ,IAAAx7C,EAAAA,EAAAA,GAAA47C,EAAA,EAAA5sD,IAAA,aAAAf,MAEA,SAAWwS,EAA4B26C,IACrC7lC,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAomC,EAAA9rD,WAAA,mBAAAc,KAAA,KAAiB6P,EAAQ26C,GACzB,IAAM7tC,EAAO9M,GAAU5N,KAAKipD,YAC5B,GAAY,MAARvuC,EAAc,CAChB,GAAI1a,KAAKqgD,MAAMvmB,YAAcpf,EAAKof,UAAW,OAC7C95B,KAAKqgD,MAAMvmB,UAAYpf,EAAKof,SAC9B,CACF,KAtBc,CAAS6tB,IAyBzB,YCxBA,IAAMuB,GAAgB,SAAAC,GACpB,IAAAC,EAAsB1rB,iBAAiByrB,EAAI,MAAnCE,EAAAD,EAAAC,UACR,MAAqB,YAAdA,GAAyC,SAAdA,CACpC,EAEMC,GAAO,WAKX,SAAAA,EAAY16B,EAAc26B,GAA+B,IAAA1uC,EAAA,MAAA3N,EAAAA,EAAAA,GAAA,KAAAo8C,GACvDtpD,KAAK4uB,MAAQA,EACb5uB,KAAKupD,gBAAkBA,GAAmBtpC,SAASyF,KACnD1lB,KAAKvF,KAAOm0B,EAAMyQ,aAAa,cAE/Br/B,KAAKvF,KAAKq/B,UAAY95B,KAAKiF,YAAYukD,SACnCN,GAAalpD,KAAK4uB,MAAMn0B,OAC1BuF,KAAK4uB,MAAMn0B,KAAKg0B,iBAAiB,UAAU,WACzC5T,EAAKpgB,KAAKqjB,MAAM2rC,UAAY,GAAHr7D,QAAO,EAAIysB,EAAK+T,MAAMn0B,KAAK6jC,UAAU,KAChE,IAEFt+B,KAAK0pD,MACP,QAAAv8C,EAAAA,EAAAA,GAAAm8C,EAAA,EAAAntD,IAAA,OAAAf,MAEA,WACE4E,KAAKvF,KAAK8iB,UAAUliB,IAAI,YAC1B,IAAAc,IAAA,WAAAf,MAEA,SAASuuD,GACP,IAAMp2B,EACJo2B,EAAUp2B,KAAOo2B,EAAUl2B,MAAQ,EAAIzzB,KAAKvF,KAAKuhC,YAAc,EAE3D3I,EAAMs2B,EAAUv2B,OAASpzB,KAAK4uB,MAAMn0B,KAAK6jC,UAC/Ct+B,KAAKvF,KAAKqjB,MAAMyV,KAAO,GAAHnlC,OAAMmlC,EAAK,MAC/BvzB,KAAKvF,KAAKqjB,MAAMuV,IAAM,GAAHjlC,OAAMilC,EAAI,MAC7BrzB,KAAKvF,KAAK8iB,UAAUD,OAAO,WAC3B,IAAMskB,EAAkB5hC,KAAKupD,gBAAgBt2B,wBACvC22B,EAAa5pD,KAAKvF,KAAKw4B,wBACzB/G,EAAQ,EASZ,GARI09B,EAAWp2B,MAAQoO,EAAgBpO,QACrCtH,EAAQ0V,EAAgBpO,MAAQo2B,EAAWp2B,MAC3CxzB,KAAKvF,KAAKqjB,MAAMyV,KAAO,GAAHnlC,OAAMmlC,EAAOrH,EAAM,OAErC09B,EAAWr2B,KAAOqO,EAAgBrO,OACpCrH,EAAQ0V,EAAgBrO,KAAOq2B,EAAWr2B,KAC1CvzB,KAAKvF,KAAKqjB,MAAMyV,KAAO,GAAHnlC,OAAMmlC,EAAOrH,EAAM,OAErC09B,EAAWx2B,OAASwO,EAAgBxO,OAAQ,CAC9C,IAAME,EAASs2B,EAAWx2B,OAASw2B,EAAWv2B,IACxCw2B,EAAgBF,EAAUv2B,OAASu2B,EAAUt2B,IAAMC,EACzDtzB,KAAKvF,KAAKqjB,MAAMuV,IAAM,GAAHjlC,OAAMilC,EAAMw2B,EAAc,MAC7C7pD,KAAKvF,KAAK8iB,UAAUliB,IAAI,UAC1B,CACA,OAAO6wB,CACT,IAAA/vB,IAAA,OAAAf,MAEA,WACE4E,KAAKvF,KAAK8iB,UAAUD,OAAO,cAC3Btd,KAAKvF,KAAK8iB,UAAUD,OAAO,YAC7B,KAtDW,GAyDb,YCjDA,IAAMwsC,GAAS,EAAC,EAAO,SAAU,QAAS,WAEpCC,GAAS,CACb,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAGIC,GAAQ,EAAC,EAAO,QAAS,aAEzBC,GAAU,CAAC,IAAK,IAAK,KAAK,GAE1BC,GAAQ,CAAC,SAAS,EAAO,QAAS,QAElCC,GAAS,SAAA7uB,GAIb,SAAA6uB,EAAYv7B,EAAc7U,GAAuB,IAAAc,GAAA3N,EAAAA,EAAAA,GAAA,KAAAi9C,GAC/CtvC,GAAAC,EAAAA,GAAAA,GAAA,KAAAqvC,EAAA,CAAMv7B,EAAO7U,IACb,IAAMlI,EAAY,SAAZA,EAAYtV,GACX0jB,SAASyF,KAAKlE,SAASoN,EAAMn0B,OAKhB,MAAhBogB,EAAKuvC,SAEJvvC,EAAKuvC,QAAQ3vD,KAAK+mB,SAASjlB,EAAEqR,SAE9BqS,SAASiU,gBAAkBrZ,EAAKuvC,QAAQC,SACvCxvC,EAAK+T,MAAMuC,YAEZtW,EAAKuvC,QAAQV,OAEK,MAAhB7uC,EAAKyvC,SACPzvC,EAAKyvC,QAAQ5tD,SAAS,SAAA6tD,GAEfA,EAAOprB,UAAU3d,SAASjlB,EAAEqR,SAC/B28C,EAAOjC,OAEX,KAnBAroC,SAASyF,KAAK8kC,oBAAoB,QAAS34C,EAqB/C,EACyD,OAAzD+c,EAAMld,QAAQuf,UAAU,QAAShR,SAASyF,KAAM7T,GAASgJ,CAC3D,QAAAE,EAAAA,GAAAA,GAAAovC,EAAA7uB,IAAAnuB,EAAAA,EAAAA,GAAAg9C,EAAA,EAAAhuD,IAAA,YAAAf,MAQA,SAAUwP,GACR,IAAM9S,GAAM4qB,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAwnC,EAAAltD,WAAA,kBAAAc,KAAA,KAAmB6M,GAK/B,MAJa,YAATA,GAEF5K,KAAKyqD,cAAc3yD,GAEdA,CACT,IAAAqE,IAAA,eAAAf,MAEA,SACEsvD,EACA1B,GAEAl6D,MAAM2rB,KAAKiwC,GAAShuD,SAAS,SAAAiuD,GAC3B,IAAM5tC,EAAY4tC,EAAOnwC,aAAa,UAAY,GAClDuC,EAAUX,MAAM,OAAO1f,SAAS,SAAAkO,GAC9B,GAAKA,EAAK64B,WAAW,SACrB74B,EAAOA,EAAKvZ,MAAM,GACC,MAAf23D,EAAMp+C,IACV,GAAa,cAATA,EAEF+/C,EAAO7wB,UAAYkvB,EAAMp+C,GAAM,IAAMo+C,EAAMp+C,GAAMg7C,SAC5C,GAA2B,kBAAhBoD,EAAMp+C,GAEtB+/C,EAAO7wB,UAAYkvB,EAAMp+C,OACpB,CAEL,IAAMxP,EAAQuvD,EAAOvvD,OAAS,GAEjB,MAATA,GAAiB4tD,EAAMp+C,GAAMxP,KAE/BuvD,EAAO7wB,UAAYkvB,EAAMp+C,GAAMxP,GAEnC,CACF,GACF,GACF,IAAAe,IAAA,eAAAf,MAEA,SACEwvD,EACA5B,GACA,IAAAltC,EAAA,KACA9b,KAAKsqD,QAAUx7D,MAAM2rB,KAAKmwC,GAAS5vD,KAAK,SAAAolD,GACtC,GAAIA,EAAO7iC,UAAUiE,SAAS,cACU,MAAlC4+B,EAAOxc,cAAc,WACvBinB,GAAWzK,EAAQ0J,IAEM,YAAvBzvD,EAAAA,EAAAA,GAAO2uD,EAAMrE,QACf,OAAO,IAAIoE,GAAW3I,EAAQ4I,EAAMrE,OAGxC,GACEvE,EAAO7iC,UAAUiE,SAAS,kBAC1B4+B,EAAO7iC,UAAUiE,SAAS,YAC1B,CACA,IAAMjD,EAAS6hC,EAAO7iC,UAAUiE,SAAS,iBACrC,aACA,QAQJ,OAPsC,MAAlC4+B,EAAOxc,cAAc,WACvBinB,GACEzK,EACA2J,GACW,eAAXxrC,EAA0B,UAAY,WAGnC,IAAImqC,GAAYtI,EAAQ4I,EAAMzqC,GACvC,CAUA,OATsC,MAAlC6hC,EAAOxc,cAAc,YACnBwc,EAAO7iC,UAAUiE,SAAS,WAC5BqpC,GAAWzK,EAAQ4J,IACV5J,EAAO7iC,UAAUiE,SAAS,aACnCqpC,GAAWzK,EAAQ6J,IACV7J,EAAO7iC,UAAUiE,SAAS,YACnCqpC,GAAWzK,EAAQ8J,KAGhB,IAAIvC,GAAOvH,EACpB,IACA,IAAM33B,EAAS,WACb3M,EAAKwuC,QAAQ5tD,SAAS,SAAA6tD,GACpBA,EAAO9hC,QACT,GACF,EACAzoB,KAAK4uB,MAAMvb,GAAG0b,GAAQ1c,OAAOod,cAAehH,EAC9C,KA3Ha,CAASyS,IA6HxBivB,GAAU7lB,SAAWrsB,GAAM,CAAC,EAAGijB,GAAMoJ,SAAU,CAC7CnJ,QAAS,CACP6J,QAAS,CACPn0B,SAAU,CACRutC,QAAO,WACLp+C,KAAK4uB,MAAM6Q,MAAM2qB,QAAQ51D,KAAK,UAChC,EACA0mD,MAAK,WAAG,IAAA3+B,EAAA,KACFuuC,EAAY9qD,KAAKm/B,UAAUyE,cAC7B,6BAEe,MAAbknB,IACFA,EAAY7qC,SAASC,cAAc,SACnC4qC,EAAUzwC,aAAa,OAAQ,QAC/BywC,EAAUzwC,aACR,SACAra,KAAK4uB,MAAMiR,SAAS9lB,QAAQ0gC,UAAU7qC,KAAK,OAE7Ck7C,EAAUvtC,UAAUliB,IAAI,YACxByvD,EAAUr8B,iBAAiB,UAAU,WACnC,IAAM1B,EAAQxQ,EAAKqS,MAAM8E,cAAa,GACtCnX,EAAKqS,MAAMiR,SAASkW,OAAOhpB,EAAO+9B,EAAUhV,OAC5CgV,EAAU1vD,MAAQ,EACpB,IACA4E,KAAKm/B,UAAUrf,YAAYgrC,IAE7BA,EAAUC,OACZ,EACAjM,MAAK,WACH9+C,KAAK4uB,MAAM6Q,MAAM2qB,QAAQ51D,KAAK,QAChC,OAIN,IAEIw2D,GAAW,SAAAC,GAIf,SAAAD,EAAYp8B,EAAc26B,GAA+B,IAAAnrC,EAG1C,OAH0ClR,EAAAA,EAAAA,GAAA,KAAA89C,GACvD5sC,GAAAtD,EAAAA,GAAAA,GAAA,KAAAkwC,EAAA,CAAMp8B,EAAO26B,IACbnrC,EAAKisC,QAAUjsC,EAAK3jB,KAAKmpC,cAAc,sBACvCxlB,EAAK2sB,SAAQ3sB,CACf,QAAArD,EAAAA,GAAAA,GAAAiwC,EAAAC,IAAA99C,EAAAA,EAAAA,GAAA69C,EAAA,EAAA7uD,IAAA,SAAAf,MAEA,WAAS,IAAAkjB,EAAA,KAEPte,KAAKqqD,QAAQ57B,iBAAiB,WAAY,SAAA9c,GACtB,UAAdA,EAAMxV,KACRmiB,EAAK4sC,OACLv5C,EAAM81B,kBACiB,WAAd91B,EAAMxV,MACfmiB,EAAK6sC,SACLx5C,EAAM81B,iBAEV,GACF,IAAAtrC,IAAA,SAAAf,MAEA,WACE4E,KAAK0pD,OACL1pD,KAAKorD,cACP,IAAAjvD,IAAA,OAAAf,MAEA,WAAmD,IAA9CiwD,EAAI9/C,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAG,OAAQ+/C,EAAsB//C,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,GAAAA,UAAA,GAAG,KAG3C,GAFAvL,KAAKvF,KAAK8iB,UAAUD,OAAO,aAC3Btd,KAAKvF,KAAK8iB,UAAUliB,IAAI,cACJ,MAAhB2E,KAAKqqD,QAAT,CAEe,MAAXiB,EACFtrD,KAAKqqD,QAAQjvD,MAAQkwD,EACZD,IAASrrD,KAAKvF,KAAK+f,aAAa,eACzCxa,KAAKqqD,QAAQjvD,MAAQ,IAEvB,IAAMsmC,EAAS1hC,KAAK4uB,MAAM+S,UAAU3hC,KAAK4uB,MAAMlC,UAAUkE,YAC3C,MAAV8Q,GACF1hC,KAAK+kB,SAAS2c,GAEhB1hC,KAAKqqD,QAAQjK,SACbpgD,KAAKqqD,QAAQhwC,aACX,cACAra,KAAKqqD,QAAQ7vC,aAAa,QAADpsB,OAASi9D,KAAW,IAE/CrrD,KAAKvF,KAAK4f,aAAa,YAAagxC,EAhBJ,CAiBlC,IAAAlvD,IAAA,eAAAf,MAEA,WACE4E,KAAK4uB,MAAM6C,MAAM,CAAEC,eAAe,GACpC,IAAAv1B,IAAA,OAAAf,MAEA,WAEE,IAAMA,EAAU4E,KAAKqqD,QAAfjvD,MACN,OAAQ4E,KAAKvF,KAAK+f,aAAa,cAC7B,IAAK,OACH,IAAQ8jB,EAAct+B,KAAK4uB,MAAMn0B,KAAzB6jC,UACJt+B,KAAKurD,WACPvrD,KAAK4uB,MAAMwS,WACTphC,KAAKurD,UACL,OACAnwD,EACA2zB,GAAQhX,QAAQyY,aAEXxwB,KAAKurD,YAEZvrD,KAAKorD,eACLprD,KAAK4uB,MAAMrQ,OAAO,OAAQnjB,EAAO2zB,GAAQhX,QAAQyY,OAEnDxwB,KAAK4uB,MAAMn0B,KAAK6jC,UAAYA,EAC5B,MAEF,IAAK,QACHljC,EAAQowD,GAAgBpwD,GAE1B,IAAK,UACH,IAAKA,EAAO,MACZ,IAAM2xB,EAAQ/sB,KAAK4uB,MAAM8E,cAAa,GACtC,GAAa,MAAT3G,EAAe,CACjB,IAAMr2B,EAAQq2B,EAAMr2B,MAAQq2B,EAAM//B,OAClCgT,KAAK4uB,MAAM2T,YACT7rC,EAEAsJ,KAAKvF,KAAK+f,aAAa,aACvBpf,EACA2zB,GAAQhX,QAAQyY,MAE0B,YAAxCxwB,KAAKvF,KAAK+f,aAAa,cACzBxa,KAAK4uB,MAAM8T,WAAWhsC,EAAQ,EAAG,IAAKq4B,GAAQhX,QAAQyY,MAExDxwB,KAAK4uB,MAAMyS,aAAa3qC,EAAQ,EAAGq4B,GAAQhX,QAAQyY,KACrD,CACA,MAEF,SAGFxwB,KAAKqqD,QAAQjvD,MAAQ,GACrB4E,KAAK0pD,MACP,KAtGe,CAASJ,IAyG1B,SAASkC,GAAgBjW,GACvB,IAAIxhD,EACFwhD,EAAIxhD,MACF,+EAEFwhD,EAAIxhD,MAAM,kEACZ,OAAIA,EACK,GAAP3F,OAAU2F,EAAM,IAAM,QAAQ,6BAAA3F,OAC5B2F,EAAM,GACP,gBAGEA,EAAQwhD,EAAIxhD,MAAM,mDACd,GAAP3F,OAAU2F,EAAM,IAAM,QAAQ,8BAAA3F,OAA4B2F,EAAM,GAAG,KAE9DwhD,CACT,CAEA,SAASsV,GACPzK,EACA1kD,GAEA,IADA+vD,EAAqBlgD,UAAAve,OAAA,QAAAoP,IAAAmP,UAAA,IAAAA,UAAA,GAErB7P,EAAOgB,SAAS,SAAAtB,GACd,IAAMklD,EAASrgC,SAASC,cAAc,UAClC9kB,IAAUqwD,EACZnL,EAAOjmC,aAAa,WAAY,YAEhCimC,EAAOjmC,aAAa,QAAS9X,OAAOnH,IAEtCglD,EAAOtgC,YAAYwgC,EACrB,GACF,CC7VA,IAAMoL,GAAgC,CACpC,CAAC,OAAQ,SAAU,QACnB,CAAC,CAAEtd,OAAQ,GAAK,CAAEA,OAAQ,GAAK,eAG3Bud,GAAa,SAAAC,GASjB,SAAAD,EAAY/8B,EAAc8S,GAAsB,IAAA7mB,EAyC7C,OAzC6C3N,EAAAA,EAAAA,GAAA,KAAAy+C,GAC9C9wC,GAAAC,EAAAA,GAAAA,GAAA,KAAA6wC,EAAA,CAAM/8B,EAAO8S,IACb7mB,EAAK+T,MAAMvb,GACT0b,GAAQ1c,OAAOod,eACf,SAACjpB,EAAMumB,EAAOt2B,EAAUqM,GACtB,GAAI0D,IAASuoB,GAAQ1c,OAAO2d,iBAC5B,GACW,MAATjD,GACAA,EAAM//B,OAAS,GACf8V,IAAWisB,GAAQhX,QAAQyY,KAC3B,CACA3V,EAAKgxC,OAELhxC,EAAKpgB,KAAKqjB,MAAMyV,KAAO,MACvB1Y,EAAKpgB,KAAKqjB,MAAM2V,MAAQ,GACxB5Y,EAAKpgB,KAAKqjB,MAAM2V,MAAQ,GAAHrlC,OAAMysB,EAAKpgB,KAAKuhC,YAAY,MACjD,IAAM/P,EAAQpR,EAAK+T,MAAMwY,SAASra,EAAMr2B,MAAOq2B,EAAM//B,QACrD,GAAqB,IAAjBi/B,EAAMj/B,OAAc,CACtB,IAAM00C,EAAS7mB,EAAK+T,MAAM+S,UAAU5U,GACtB,MAAV2U,GACF7mB,EAAKkK,SAAS2c,EAElB,KAAO,CACL,IAAMoqB,EAAW7/B,EAAMA,EAAMj/B,OAAS,GAChC0J,EAAQmkB,EAAK+T,MAAMm9B,SAASD,GAC5B9+D,EAASyB,KAAKiC,IAClBo7D,EAAS9+D,SAAW,EACpB+/B,EAAMr2B,MAAQq2B,EAAM//B,OAAS0J,GAEzBs1D,EAAcnxC,EAAK+T,MAAM+S,UAAU,IAAIlR,GAAM/5B,EAAO1J,IACvC,MAAfg/D,GACFnxC,EAAKkK,SAASinC,EAElB,CACF,MACE/rC,SAASiU,gBAAkBrZ,EAAKwvC,SAChCxvC,EAAK+T,MAAMuC,YAEXtW,EAAK6uC,MAET,IACD7uC,CACH,QAAAE,EAAAA,GAAAA,GAAA4wC,EAAAC,IAAAz+C,EAAAA,EAAAA,GAAAw+C,EAAA,EAAAxvD,IAAA,SAAAf,MAEA,WAAS,IAAA0gB,EAAA,MACP4G,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAgpC,EAAA1uD,WAAA,eAAAc,KAAA,MAEAiC,KAAKvF,KAAKmpC,cAAc,aAAanV,iBAAiB,SAAS,WAC7D3S,EAAKrhB,KAAK8iB,UAAUD,OAAO,aAC7B,IACAtd,KAAK4uB,MAAMvb,GAAG0b,GAAQ1c,OAAOwd,iBAAiB,WAE5CqB,YAAW,WACT,IAAIpV,EAAKrhB,KAAK8iB,UAAUiE,SAAS,aAAjC,CACA,IAAMuL,EAAQjR,EAAK8S,MAAM8E,eACzB,GAAa,MAAT3G,EAAe,CACjB,IAAM2U,EAAS5lB,EAAK8S,MAAM+S,UAAU5U,GACtB,MAAV2U,GACF5lB,EAAKiJ,SAAS2c,EAElB,CAPqD,CAQvD,GAAG,EACL,GACF,IAAAvlC,IAAA,SAAAf,MAEA,WACE4E,KAAK6rD,MACP,IAAA1vD,IAAA,WAAAf,MAEA,SAASuuD,GACP,IAAMz9B,GAAKxJ,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAAgpC,EAAA1uD,WAAA,iBAAAc,KAAA,KAAkB4rD,GACvBsC,EAAQjsD,KAAKvF,KAAKmpC,cAAc,qBAOtC,OALAqoB,EAAMnuC,MAAMouC,WAAa,GACX,IAAVhgC,IAEF+/B,EAAMnuC,MAAMouC,WAAa,GAAH99D,QAAO,EAAI89B,EAAQ+/B,EAAMjwB,YAAc,EAAE,OAE1D9P,CACT,KAxFiB,CAAS8+B,KAAWz7C,EAAAA,EAAAA,GAAjCo8C,GAAa,WACC,CAChB,yCACA,kCACA,mGACA,2BACA,UACA/7C,KAAK,KAAG,IAoFNu8C,GAAW,SAAAC,GAGf,SAAAD,EAAYv9B,EAAc7U,GAAuB,IAAAwC,EAQA,OARArP,EAAAA,EAAAA,GAAA,KAAAi/C,GAElB,MAA3BpyC,EAAQohB,QAAQ6J,SACqB,MAArCjrB,EAAQohB,QAAQ6J,QAAQ7F,YAExBplB,EAAQohB,QAAQ6J,QAAQ7F,UAAYusB,IAEtCnvC,GAAAzB,EAAAA,GAAAA,GAAA,KAAAqxC,EAAA,CAAMv9B,EAAO7U,IACbwC,EAAKqS,MAAMuQ,UAAU5hB,UAAUliB,IAAI,aAAYkhB,CACjD,QAAAxB,EAAAA,GAAAA,GAAAoxC,EAAAC,IAAAj/C,EAAAA,EAAAA,GAAAg/C,EAAA,EAAAhwD,IAAA,gBAAAf,MAEA,SAAc4pC,GAEZhlC,KAAKoqD,QAAU,IAAIuB,GAAc3rD,KAAK4uB,MAAO5uB,KAAK+Z,QAAQ2nB,QACjC,MAArBsD,EAAQ7F,YACVn/B,KAAKoqD,QAAQ3vD,KAAKqlB,YAAyBklB,EAAQ7F,WACnDn/B,KAAKqsD,aAAarnB,EAAQ7F,UAAUzQ,iBAAiB,UAAWs6B,IAChEhpD,KAAKssD,aAAatnB,EAAQ7F,UAAUzQ,iBAAiB,UAAWs6B,IAEpE,KAtBe,CAASmB,IAwB1BgC,GAAY7nB,SAAWrsB,GAAM,CAAC,EAAGkyC,GAAU7lB,SAAU,CACnDnJ,QAAS,CACP6J,QAAS,CACPn0B,SAAU,CACR+zC,KAAI,SAACxpD,GACEA,EAIH4E,KAAK4uB,MAAM6Q,MAAM2qB,QAAQ51D,OAHzBwL,KAAK4uB,MAAMrQ,OAAO,QAAQ,EAAO2gB,GAAMnnB,QAAQyY,KAKnD,O,aClIFk7B,GAAgC,CACpC,CAAC,CAAEtd,OAAQ,CAAC,IAAK,IAAK,KAAK,KAC3B,CAAC,OAAQ,SAAU,YAAa,QAChC,CAAC,CAAEzU,KAAM,WAAa,CAAEA,KAAM,WAC9B,CAAC,UAGG4yB,GAAW,SAAAX,GAAA,SAAAW,IAAA,IAAA1xC,GAAA3N,EAAAA,EAAAA,GAAA,KAAAq/C,GAAA,QAAA/vC,EAAAjR,UAAAve,OAAAimB,EAAA,IAAAnkB,MAAA0tB,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAAzJ,EAAAyJ,GAAAnR,UAAAmR,GAQkC,OARlC7B,GAAAC,EAAAA,GAAAA,GAAA,KAAAyxC,EAAA,GAAAn+D,OAAA6kB,KAAA1D,EAAAA,EAAAA,GAAAsL,EAAA,UAQLA,EAAKpgB,KAAKmpC,cAAc,iBAAe/oB,CAAA,QAAAE,EAAAA,GAAAA,GAAAwxC,EAAAX,IAAAz+C,EAAAA,EAAAA,GAAAo/C,EAAA,EAAApwD,IAAA,SAAAf,MAEjD,WAAS,IAAA0gB,EAAA,MACP4G,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAA4pC,EAAAtvD,WAAA,eAAAc,KAAA,MAEAiC,KAAKvF,KACFmpC,cAAc,eACdnV,iBAAiB,SAAU,SAAA9c,GACtBmK,EAAKrhB,KAAK8iB,UAAUiE,SAAS,cAC/B1F,EAAKovC,OAGLpvC,EAAKtnB,KAAK,OAAQsnB,EAAKwvC,QAAQjc,aAEjC19B,EAAM81B,gBACR,IAEFznC,KAAKvF,KACFmpC,cAAc,eACdnV,iBAAiB,SAAU,SAAA9c,GAC1B,GAAsB,MAAlBmK,EAAKyvC,UAAmB,CAC1B,IAAMx+B,EAAQjR,EAAKyvC,UACnBzvC,EAAKsvC,eACLtvC,EAAK8S,MAAMwS,WAAWrU,EAAO,QAAQ,EAAOgC,GAAQhX,QAAQyY,aACrD1U,EAAKyvC,SACd,CACA55C,EAAM81B,iBACN3rB,EAAK4tC,MACP,IACF1pD,KAAK4uB,MAAMvb,GACT0b,GAAQ1c,OAAO2d,kBACf,SAACjD,EAAOt2B,EAAUqM,GAChB,GAAa,MAATiqB,EAAJ,CACA,GAAqB,IAAjBA,EAAM//B,QAAgB8V,IAAWisB,GAAQhX,QAAQyY,KAAM,CACzD,IAAAg8B,EAAuB1wC,EAAK8S,MAAMzT,OAAOoI,WACvCkpC,GACA1/B,EAAMr2B,OACPg2D,GAAAx9C,EAAAA,EAAAA,GAAAs9C,EAAA,GAHM5H,EAAI8H,EAAA,GAAE/wD,EAAM+wD,EAAA,GAInB,GAAY,MAAR9H,EAAc,CAChB9oC,EAAKyvC,UAAY,IAAI96B,GAAM1D,EAAMr2B,MAAQiF,EAAQipD,EAAK53D,UACtD,IAAMs+D,EAAUmB,GAASnmC,QAAQs+B,EAAKjpC,SAEtCG,EAAKwvC,QAAQjc,YAAcic,EAE3BxvC,EAAKwvC,QAAQjxC,aAAa,OAAQixC,GAClCxvC,EAAK+vC,OACL,IAAMnqB,EAAS5lB,EAAK8S,MAAM+S,UAAU7lB,EAAKyvC,WAIzC,YAHc,MAAV7pB,GACF5lB,EAAKiJ,SAAS2c,GAGlB,CACF,aACS5lB,EAAKyvC,UAEdzvC,EAAK4tC,MAvBoB,CAwB3B,GAEJ,IAAAvtD,IAAA,OAAAf,MAEA,YACEsnB,EAAAA,GAAAA,IAAAC,EAAAA,GAAAA,GAAA4pC,EAAAtvD,WAAA,aAAAc,KAAA,MACAiC,KAAKvF,KAAK8f,gBAAgB,YAC5B,KAvEe,CAASywC,KAAWz7C,EAAAA,EAAAA,GAA/Bg9C,GAAW,WACG,CAChB,0FACA,mGACA,4BACA,6BACA38C,KAAK,KAAG,IAoEN+8C,GAAS,SAAAP,GACb,SAAAO,EAAY/9B,EAAc7U,GAAuB,IAAAwC,EAQF,OARErP,EAAAA,EAAAA,GAAA,KAAAy/C,GAElB,MAA3B5yC,EAAQohB,QAAQ6J,SACqB,MAArCjrB,EAAQohB,QAAQ6J,QAAQ7F,YAExBplB,EAAQohB,QAAQ6J,QAAQ7F,UAAYusB,IAEtCnvC,GAAAzB,EAAAA,GAAAA,GAAA,KAAA6xC,EAAA,CAAM/9B,EAAO7U,IACbwC,EAAKqS,MAAMuQ,UAAU5hB,UAAUliB,IAAI,WAAUkhB,CAC/C,QAAAxB,EAAAA,GAAAA,GAAA4xC,EAAAP,IAAAj/C,EAAAA,EAAAA,GAAAw/C,EAAA,EAAAxwD,IAAA,gBAAAf,MAEA,SAAc4pC,GACa,MAArBA,EAAQ7F,YACV6F,EAAQ7F,UAAU5hB,UAAUliB,IAAI,WAChC2E,KAAKqsD,aAAarnB,EAAQ7F,UAAUzQ,iBAAiB,UAAWs6B,IAChEhpD,KAAKssD,aAAatnB,EAAQ7F,UAAUzQ,iBAAiB,UAAWs6B,IAEhEhpD,KAAKoqD,QAAU,IAAImC,GAAYvsD,KAAK4uB,MAAO5uB,KAAK+Z,QAAQ2nB,QACpDsD,EAAQ7F,UAAUyE,cAAc,aAClC5jC,KAAK4uB,MAAM8Q,SAAS2K,WAClB,CAAEluC,IAAK,IAAKszC,UAAU,IACtB,SAACmd,EAAer7C,GACdyzB,EAAQn0B,SAAS+zC,KAAK7mD,KAAKinC,GAAUzzB,EAAQgN,OAAOqmC,KACtD,IAIR,KA5Ba,CAASuF,IA8BxBwC,GAAUroB,SAAWrsB,GAAM,CAAC,EAAGkyC,GAAU7lB,SAAU,CACjDnJ,QAAS,CACP6J,QAAS,CACPn0B,SAAU,CACR+zC,KAAI,SAACxpD,GACH,GAAIA,EAAO,CACT,IAAM2xB,EAAQ/sB,KAAK4uB,MAAM8E,eACzB,GAAa,MAAT3G,GAAkC,IAAjBA,EAAM//B,OAAc,OACzC,IAAIs+D,EAAUtrD,KAAK4uB,MAAMgJ,QAAQ7K,GAE/B,iBAAiBloB,KAAKymD,IACS,IAA/BA,EAAQ59D,QAAQ,aAEhB49D,EAAU,UAAHl9D,OAAak9D,IAGtB,IAAQlB,EAAYpqD,KAAK4uB,MAAM6Q,MAAvB2qB,QACRA,EAAQ51D,KAAK,OAAQ82D,EACvB,MACEtrD,KAAK4uB,MAAMrQ,OAAO,QAAQ,EAAO2gB,GAAMnnB,QAAQyY,KAEnD,OAMR,YClGA0O,GAAMtW,SACJ,CACE,kCAAmC2gB,GAEnC,0BAA2BhB,GAC3B,+BAAgCO,GAChC,0BAA2BF,GAC3B,8BAA+BY,GAC/B,yBAA0BE,GAC1B,yBAA0BG,GAE1B,0BAA2BrB,GAC3B,+BAAgCO,GAChC,0BAA2BF,GAC3B,8BAA+BY,GAC/B,yBAA0BG,GAC1B,yBAA0BE,KAE5B,GAGF5K,GAAMtW,SACJ,CACE,gBAAiB2f,GACjB,oBAAqBiB,GACrB,iBAAkBqjB,GAElB,qBAAsB9jB,GACtB,gBAAiBF,GACjB,eAAgBa,GAChB,eAAgBG,GAEhB,qBAAsB+S,GACtB,qBAAsBxT,GACtB,iBAAkByT,GAClB,eAAgBiQ,GAEhB,eAAgB3P,GAChB,eAAgB4P,GAChB,iBAAkB3P,GAClB,eAAgBE,GAChB,iBAAkBQ,GAClB,iBAAkBC,GAClB,oBAAqBC,GAErB,kBAAmBC,GACnB,gBAAiBS,GACjB,gBAAiBE,GAEjB,iBAAkBkB,GAClB,gBAAiBmC,GACjB,kBAAmBoB,GAEnB,gBAAiB8I,GACjB,cAAeQ,GAEf,WAAYK,GACZ,YAAarF,GACb,iBAAkBoB,GAClB,kBAAmBL,GACnB,aAAcY,KAEhB,GAaF,W","sources":["webpack://epharma/./node_modules/fast-diff/diff.js","webpack://epharma/./node_modules/lodash.clonedeep/index.js","webpack://epharma/./node_modules/lodash.isequal/index.js","webpack://epharma/../src/AttributeMap.ts","webpack://epharma/../src/Delta.ts","webpack://epharma/../src/Op.ts","webpack://epharma/../src/OpIterator.ts","webpack://epharma/./node_modules/quill/node_modules/eventemitter3/index.js","webpack://epharma/./node_modules/core-js/modules/es.number.is-nan.js","webpack://epharma/./node_modules/core-js/modules/web.queue-microtask.js","webpack://epharma/./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","webpack://epharma/./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","webpack://epharma/./node_modules/lodash-es/_listCacheClear.js","webpack://epharma/./node_modules/lodash-es/eq.js","webpack://epharma/./node_modules/lodash-es/_assocIndexOf.js","webpack://epharma/./node_modules/lodash-es/_listCacheDelete.js","webpack://epharma/./node_modules/lodash-es/_listCacheGet.js","webpack://epharma/./node_modules/lodash-es/_listCacheHas.js","webpack://epharma/./node_modules/lodash-es/_listCacheSet.js","webpack://epharma/./node_modules/lodash-es/_ListCache.js","webpack://epharma/./node_modules/lodash-es/_stackClear.js","webpack://epharma/./node_modules/lodash-es/_stackDelete.js","webpack://epharma/./node_modules/lodash-es/_stackGet.js","webpack://epharma/./node_modules/lodash-es/_stackHas.js","webpack://epharma/./node_modules/lodash-es/_freeGlobal.js","webpack://epharma/./node_modules/lodash-es/_root.js","webpack://epharma/./node_modules/lodash-es/_Symbol.js","webpack://epharma/./node_modules/lodash-es/_getRawTag.js","webpack://epharma/./node_modules/lodash-es/_objectToString.js","webpack://epharma/./node_modules/lodash-es/_baseGetTag.js","webpack://epharma/./node_modules/lodash-es/isObject.js","webpack://epharma/./node_modules/lodash-es/isFunction.js","webpack://epharma/./node_modules/lodash-es/_coreJsData.js","webpack://epharma/./node_modules/lodash-es/_isMasked.js","webpack://epharma/./node_modules/lodash-es/_toSource.js","webpack://epharma/./node_modules/lodash-es/_baseIsNative.js","webpack://epharma/./node_modules/lodash-es/_getValue.js","webpack://epharma/./node_modules/lodash-es/_getNative.js","webpack://epharma/./node_modules/lodash-es/_Map.js","webpack://epharma/./node_modules/lodash-es/_nativeCreate.js","webpack://epharma/./node_modules/lodash-es/_hashClear.js","webpack://epharma/./node_modules/lodash-es/_hashDelete.js","webpack://epharma/./node_modules/lodash-es/_hashGet.js","webpack://epharma/./node_modules/lodash-es/_hashHas.js","webpack://epharma/./node_modules/lodash-es/_hashSet.js","webpack://epharma/./node_modules/lodash-es/_Hash.js","webpack://epharma/./node_modules/lodash-es/_mapCacheClear.js","webpack://epharma/./node_modules/lodash-es/_isKeyable.js","webpack://epharma/./node_modules/lodash-es/_getMapData.js","webpack://epharma/./node_modules/lodash-es/_mapCacheDelete.js","webpack://epharma/./node_modules/lodash-es/_mapCacheGet.js","webpack://epharma/./node_modules/lodash-es/_mapCacheHas.js","webpack://epharma/./node_modules/lodash-es/_mapCacheSet.js","webpack://epharma/./node_modules/lodash-es/_MapCache.js","webpack://epharma/./node_modules/lodash-es/_stackSet.js","webpack://epharma/./node_modules/lodash-es/_Stack.js","webpack://epharma/./node_modules/lodash-es/_defineProperty.js","webpack://epharma/./node_modules/lodash-es/_baseAssignValue.js","webpack://epharma/./node_modules/lodash-es/_assignMergeValue.js","webpack://epharma/./node_modules/lodash-es/_createBaseFor.js","webpack://epharma/./node_modules/lodash-es/_baseFor.js","webpack://epharma/./node_modules/lodash-es/_cloneBuffer.js","webpack://epharma/./node_modules/lodash-es/_Uint8Array.js","webpack://epharma/./node_modules/lodash-es/_cloneArrayBuffer.js","webpack://epharma/./node_modules/lodash-es/_cloneTypedArray.js","webpack://epharma/./node_modules/lodash-es/_copyArray.js","webpack://epharma/./node_modules/lodash-es/_baseCreate.js","webpack://epharma/./node_modules/lodash-es/_overArg.js","webpack://epharma/./node_modules/lodash-es/_getPrototype.js","webpack://epharma/./node_modules/lodash-es/_isPrototype.js","webpack://epharma/./node_modules/lodash-es/_initCloneObject.js","webpack://epharma/./node_modules/lodash-es/isObjectLike.js","webpack://epharma/./node_modules/lodash-es/_baseIsArguments.js","webpack://epharma/./node_modules/lodash-es/isArguments.js","webpack://epharma/./node_modules/lodash-es/isArray.js","webpack://epharma/./node_modules/lodash-es/isLength.js","webpack://epharma/./node_modules/lodash-es/isArrayLike.js","webpack://epharma/./node_modules/lodash-es/isArrayLikeObject.js","webpack://epharma/./node_modules/lodash-es/stubFalse.js","webpack://epharma/./node_modules/lodash-es/isBuffer.js","webpack://epharma/./node_modules/lodash-es/isPlainObject.js","webpack://epharma/./node_modules/lodash-es/_baseIsTypedArray.js","webpack://epharma/./node_modules/lodash-es/_baseUnary.js","webpack://epharma/./node_modules/lodash-es/_nodeUtil.js","webpack://epharma/./node_modules/lodash-es/isTypedArray.js","webpack://epharma/./node_modules/lodash-es/_safeGet.js","webpack://epharma/./node_modules/lodash-es/_assignValue.js","webpack://epharma/./node_modules/lodash-es/_copyObject.js","webpack://epharma/./node_modules/lodash-es/_baseTimes.js","webpack://epharma/./node_modules/lodash-es/_isIndex.js","webpack://epharma/./node_modules/lodash-es/_arrayLikeKeys.js","webpack://epharma/./node_modules/lodash-es/_nativeKeysIn.js","webpack://epharma/./node_modules/lodash-es/_baseKeysIn.js","webpack://epharma/./node_modules/lodash-es/keysIn.js","webpack://epharma/./node_modules/lodash-es/toPlainObject.js","webpack://epharma/./node_modules/lodash-es/_baseMergeDeep.js","webpack://epharma/./node_modules/lodash-es/_baseMerge.js","webpack://epharma/./node_modules/lodash-es/identity.js","webpack://epharma/./node_modules/lodash-es/_apply.js","webpack://epharma/./node_modules/lodash-es/_overRest.js","webpack://epharma/./node_modules/lodash-es/constant.js","webpack://epharma/./node_modules/lodash-es/_baseSetToString.js","webpack://epharma/./node_modules/lodash-es/_shortOut.js","webpack://epharma/./node_modules/lodash-es/_setToString.js","webpack://epharma/./node_modules/lodash-es/_baseRest.js","webpack://epharma/./node_modules/lodash-es/_isIterateeCall.js","webpack://epharma/./node_modules/lodash-es/_createAssigner.js","webpack://epharma/./node_modules/lodash-es/merge.js","webpack://epharma/./node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","webpack://epharma/./node_modules/@babel/runtime/helpers/esm/construct.js","webpack://epharma/./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","webpack://epharma/../src/scope.ts","webpack://epharma/../src/attributor/attributor.ts","webpack://epharma/../src/error.ts","webpack://epharma/../src/registry.ts","webpack://epharma/../src/attributor/class.ts","webpack://epharma/../src/attributor/style.ts","webpack://epharma/../src/attributor/store.ts","webpack://epharma/../src/blot/abstract/shadow.ts","webpack://epharma/../src/blot/abstract/leaf.ts","webpack://epharma/../src/collection/linked-list.ts","webpack://epharma/../src/blot/abstract/parent.ts","webpack://epharma/../src/blot/inline.ts","webpack://epharma/../src/blot/block.ts","webpack://epharma/../src/blot/abstract/container.ts","webpack://epharma/../src/blot/embed.ts","webpack://epharma/../src/blot/scroll.ts","webpack://epharma/../src/blot/text.ts","webpack://epharma/./node_modules/lodash-es/_arrayEach.js","webpack://epharma/./node_modules/lodash-es/_nativeKeys.js","webpack://epharma/./node_modules/lodash-es/_baseKeys.js","webpack://epharma/./node_modules/lodash-es/keys.js","webpack://epharma/./node_modules/lodash-es/_baseAssign.js","webpack://epharma/./node_modules/lodash-es/_baseAssignIn.js","webpack://epharma/./node_modules/lodash-es/_arrayFilter.js","webpack://epharma/./node_modules/lodash-es/stubArray.js","webpack://epharma/./node_modules/lodash-es/_getSymbols.js","webpack://epharma/./node_modules/lodash-es/_copySymbols.js","webpack://epharma/./node_modules/lodash-es/_arrayPush.js","webpack://epharma/./node_modules/lodash-es/_getSymbolsIn.js","webpack://epharma/./node_modules/lodash-es/_copySymbolsIn.js","webpack://epharma/./node_modules/lodash-es/_baseGetAllKeys.js","webpack://epharma/./node_modules/lodash-es/_getAllKeys.js","webpack://epharma/./node_modules/lodash-es/_getAllKeysIn.js","webpack://epharma/./node_modules/lodash-es/_DataView.js","webpack://epharma/./node_modules/lodash-es/_Promise.js","webpack://epharma/./node_modules/lodash-es/_Set.js","webpack://epharma/./node_modules/lodash-es/_WeakMap.js","webpack://epharma/./node_modules/lodash-es/_getTag.js","webpack://epharma/./node_modules/lodash-es/_initCloneArray.js","webpack://epharma/./node_modules/lodash-es/_cloneDataView.js","webpack://epharma/./node_modules/lodash-es/_cloneRegExp.js","webpack://epharma/./node_modules/lodash-es/_cloneSymbol.js","webpack://epharma/./node_modules/lodash-es/_initCloneByTag.js","webpack://epharma/./node_modules/lodash-es/_baseIsMap.js","webpack://epharma/./node_modules/lodash-es/isMap.js","webpack://epharma/./node_modules/lodash-es/_baseIsSet.js","webpack://epharma/./node_modules/lodash-es/isSet.js","webpack://epharma/./node_modules/lodash-es/_baseClone.js","webpack://epharma/./node_modules/lodash-es/cloneDeep.js","webpack://epharma/./node_modules/lodash-es/_setCacheAdd.js","webpack://epharma/./node_modules/lodash-es/_setCacheHas.js","webpack://epharma/./node_modules/lodash-es/_SetCache.js","webpack://epharma/./node_modules/lodash-es/_arraySome.js","webpack://epharma/./node_modules/lodash-es/_cacheHas.js","webpack://epharma/./node_modules/lodash-es/_equalArrays.js","webpack://epharma/./node_modules/lodash-es/_mapToArray.js","webpack://epharma/./node_modules/lodash-es/_setToArray.js","webpack://epharma/./node_modules/lodash-es/_equalByTag.js","webpack://epharma/./node_modules/lodash-es/_equalObjects.js","webpack://epharma/./node_modules/lodash-es/_baseIsEqualDeep.js","webpack://epharma/./node_modules/lodash-es/_baseIsEqual.js","webpack://epharma/./node_modules/lodash-es/isEqual.js","webpack://epharma/../../src/blots/break.ts","webpack://epharma/../../src/blots/text.ts","webpack://epharma/../../src/blots/inline.ts","webpack://epharma/../../src/blots/block.ts","webpack://epharma/../../src/blots/cursor.ts","webpack://epharma/./node_modules/quill/node_modules/eventemitter3/index.mjs","webpack://epharma/../../src/core/instances.ts","webpack://epharma/../../src/core/logger.ts","webpack://epharma/../../src/core/emitter.ts","webpack://epharma/../../src/core/selection.ts","webpack://epharma/../../src/core/editor.ts","webpack://epharma/../../src/core/module.ts","webpack://epharma/../../src/blots/embed.ts","webpack://epharma/../../src/core/composition.ts","webpack://epharma/../../src/core/theme.ts","webpack://epharma/../../../src/core/utils/scrollRectIntoView.ts","webpack://epharma/../../../src/core/utils/createRegistryWithFormats.ts","webpack://epharma/../../src/core/quill.ts","webpack://epharma/../../src/blots/container.ts","webpack://epharma/../../src/blots/scroll.ts","webpack://epharma/../../src/formats/align.ts","webpack://epharma/../../src/formats/color.ts","webpack://epharma/../../src/formats/background.ts","webpack://epharma/../../src/formats/code.ts","webpack://epharma/../../src/formats/direction.ts","webpack://epharma/../../src/formats/font.ts","webpack://epharma/../../src/formats/size.ts","webpack://epharma/../../src/modules/keyboard.ts","webpack://epharma/../../../../src/modules/normalizeExternalHTML/normalizers/googleDocs.ts","webpack://epharma/../../../../src/modules/normalizeExternalHTML/normalizers/msWord.ts","webpack://epharma/../../../src/modules/normalizeExternalHTML/index.ts","webpack://epharma/../../src/modules/clipboard.ts","webpack://epharma/../../src/modules/history.ts","webpack://epharma/../../src/modules/uploader.ts","webpack://epharma/../../src/modules/input.ts","webpack://epharma/../../src/modules/uiNode.ts","webpack://epharma/../src/core.ts","webpack://epharma/../../src/formats/indent.ts","webpack://epharma/../../src/formats/blockquote.ts","webpack://epharma/../../src/formats/header.ts","webpack://epharma/../../src/formats/list.ts","webpack://epharma/../../src/formats/bold.ts","webpack://epharma/../../src/formats/italic.ts","webpack://epharma/../../src/formats/link.ts","webpack://epharma/../../src/formats/script.ts","webpack://epharma/../../src/formats/strike.ts","webpack://epharma/../../src/formats/underline.ts","webpack://epharma/../../src/formats/formula.ts","webpack://epharma/../../src/formats/image.ts","webpack://epharma/../../src/formats/video.ts","webpack://epharma/../../src/modules/syntax.ts","webpack://epharma/../../src/formats/table.ts","webpack://epharma/../../src/modules/table.ts","webpack://epharma/../../src/modules/toolbar.ts","webpack://epharma/../../src/ui/icons.ts","webpack://epharma/../../src/ui/picker.ts","webpack://epharma/../../src/ui/color-picker.ts","webpack://epharma/../../src/ui/icon-picker.ts","webpack://epharma/../../src/ui/tooltip.ts","webpack://epharma/../../src/themes/base.ts","webpack://epharma/../../src/themes/bubble.ts","webpack://epharma/../../src/themes/snow.ts","webpack://epharma/../src/quill.ts"],"sourcesContent":["/**\n * This library modifies the diff-patch-match library by Neil Fraser\n * by removing the patch and match functionality and certain advanced\n * options in the diff function. The original license is as follows:\n *\n * ===\n *\n * Diff Match and Patch\n *\n * Copyright 2006 Google Inc.\n * http://code.google.com/p/google-diff-match-patch/\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * The data structure representing a diff is an array of tuples:\n * [[DIFF_DELETE, 'Hello'], [DIFF_INSERT, 'Goodbye'], [DIFF_EQUAL, ' world.']]\n * which means: delete 'Hello', add 'Goodbye' and keep ' world.'\n */\nvar DIFF_DELETE = -1;\nvar DIFF_INSERT = 1;\nvar DIFF_EQUAL = 0;\n\n/**\n * Find the differences between two texts.  Simplifies the problem by stripping\n * any common prefix or suffix off the texts before diffing.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {Int|Object} [cursor_pos] Edit position in text1 or object with more info\n * @param {boolean} [cleanup] Apply semantic cleanup before returning.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_main(text1, text2, cursor_pos, cleanup, _fix_unicode) {\n  // Check for equality\n  if (text1 === text2) {\n    if (text1) {\n      return [[DIFF_EQUAL, text1]];\n    }\n    return [];\n  }\n\n  if (cursor_pos != null) {\n    var editdiff = find_cursor_edit_diff(text1, text2, cursor_pos);\n    if (editdiff) {\n      return editdiff;\n    }\n  }\n\n  // Trim off common prefix (speedup).\n  var commonlength = diff_commonPrefix(text1, text2);\n  var commonprefix = text1.substring(0, commonlength);\n  text1 = text1.substring(commonlength);\n  text2 = text2.substring(commonlength);\n\n  // Trim off common suffix (speedup).\n  commonlength = diff_commonSuffix(text1, text2);\n  var commonsuffix = text1.substring(text1.length - commonlength);\n  text1 = text1.substring(0, text1.length - commonlength);\n  text2 = text2.substring(0, text2.length - commonlength);\n\n  // Compute the diff on the middle block.\n  var diffs = diff_compute_(text1, text2);\n\n  // Restore the prefix and suffix.\n  if (commonprefix) {\n    diffs.unshift([DIFF_EQUAL, commonprefix]);\n  }\n  if (commonsuffix) {\n    diffs.push([DIFF_EQUAL, commonsuffix]);\n  }\n  diff_cleanupMerge(diffs, _fix_unicode);\n  if (cleanup) {\n    diff_cleanupSemantic(diffs);\n  }\n  return diffs;\n}\n\n/**\n * Find the differences between two texts.  Assumes that the texts do not\n * have any common prefix or suffix.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_compute_(text1, text2) {\n  var diffs;\n\n  if (!text1) {\n    // Just add some text (speedup).\n    return [[DIFF_INSERT, text2]];\n  }\n\n  if (!text2) {\n    // Just delete some text (speedup).\n    return [[DIFF_DELETE, text1]];\n  }\n\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  var i = longtext.indexOf(shorttext);\n  if (i !== -1) {\n    // Shorter text is inside the longer text (speedup).\n    diffs = [\n      [DIFF_INSERT, longtext.substring(0, i)],\n      [DIFF_EQUAL, shorttext],\n      [DIFF_INSERT, longtext.substring(i + shorttext.length)],\n    ];\n    // Swap insertions for deletions if diff is reversed.\n    if (text1.length > text2.length) {\n      diffs[0][0] = diffs[2][0] = DIFF_DELETE;\n    }\n    return diffs;\n  }\n\n  if (shorttext.length === 1) {\n    // Single character string.\n    // After the previous speedup, the character can't be an equality.\n    return [\n      [DIFF_DELETE, text1],\n      [DIFF_INSERT, text2],\n    ];\n  }\n\n  // Check to see if the problem can be split in two.\n  var hm = diff_halfMatch_(text1, text2);\n  if (hm) {\n    // A half-match was found, sort out the return data.\n    var text1_a = hm[0];\n    var text1_b = hm[1];\n    var text2_a = hm[2];\n    var text2_b = hm[3];\n    var mid_common = hm[4];\n    // Send both pairs off for separate processing.\n    var diffs_a = diff_main(text1_a, text2_a);\n    var diffs_b = diff_main(text1_b, text2_b);\n    // Merge the results.\n    return diffs_a.concat([[DIFF_EQUAL, mid_common]], diffs_b);\n  }\n\n  return diff_bisect_(text1, text2);\n}\n\n/**\n * Find the 'middle snake' of a diff, split the problem in two\n * and return the recursively constructed diff.\n * See Myers 1986 paper: An O(ND) Difference Algorithm and Its Variations.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @return {Array} Array of diff tuples.\n * @private\n */\nfunction diff_bisect_(text1, text2) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  var max_d = Math.ceil((text1_length + text2_length) / 2);\n  var v_offset = max_d;\n  var v_length = 2 * max_d;\n  var v1 = new Array(v_length);\n  var v2 = new Array(v_length);\n  // Setting all elements to -1 is faster in Chrome & Firefox than mixing\n  // integers and undefined.\n  for (var x = 0; x < v_length; x++) {\n    v1[x] = -1;\n    v2[x] = -1;\n  }\n  v1[v_offset + 1] = 0;\n  v2[v_offset + 1] = 0;\n  var delta = text1_length - text2_length;\n  // If the total number of characters is odd, then the front path will collide\n  // with the reverse path.\n  var front = delta % 2 !== 0;\n  // Offsets for start and end of k loop.\n  // Prevents mapping of space beyond the grid.\n  var k1start = 0;\n  var k1end = 0;\n  var k2start = 0;\n  var k2end = 0;\n  for (var d = 0; d < max_d; d++) {\n    // Walk the front path one step.\n    for (var k1 = -d + k1start; k1 <= d - k1end; k1 += 2) {\n      var k1_offset = v_offset + k1;\n      var x1;\n      if (k1 === -d || (k1 !== d && v1[k1_offset - 1] < v1[k1_offset + 1])) {\n        x1 = v1[k1_offset + 1];\n      } else {\n        x1 = v1[k1_offset - 1] + 1;\n      }\n      var y1 = x1 - k1;\n      while (\n        x1 < text1_length &&\n        y1 < text2_length &&\n        text1.charAt(x1) === text2.charAt(y1)\n      ) {\n        x1++;\n        y1++;\n      }\n      v1[k1_offset] = x1;\n      if (x1 > text1_length) {\n        // Ran off the right of the graph.\n        k1end += 2;\n      } else if (y1 > text2_length) {\n        // Ran off the bottom of the graph.\n        k1start += 2;\n      } else if (front) {\n        var k2_offset = v_offset + delta - k1;\n        if (k2_offset >= 0 && k2_offset < v_length && v2[k2_offset] !== -1) {\n          // Mirror x2 onto top-left coordinate system.\n          var x2 = text1_length - v2[k2_offset];\n          if (x1 >= x2) {\n            // Overlap detected.\n            return diff_bisectSplit_(text1, text2, x1, y1);\n          }\n        }\n      }\n    }\n\n    // Walk the reverse path one step.\n    for (var k2 = -d + k2start; k2 <= d - k2end; k2 += 2) {\n      var k2_offset = v_offset + k2;\n      var x2;\n      if (k2 === -d || (k2 !== d && v2[k2_offset - 1] < v2[k2_offset + 1])) {\n        x2 = v2[k2_offset + 1];\n      } else {\n        x2 = v2[k2_offset - 1] + 1;\n      }\n      var y2 = x2 - k2;\n      while (\n        x2 < text1_length &&\n        y2 < text2_length &&\n        text1.charAt(text1_length - x2 - 1) ===\n          text2.charAt(text2_length - y2 - 1)\n      ) {\n        x2++;\n        y2++;\n      }\n      v2[k2_offset] = x2;\n      if (x2 > text1_length) {\n        // Ran off the left of the graph.\n        k2end += 2;\n      } else if (y2 > text2_length) {\n        // Ran off the top of the graph.\n        k2start += 2;\n      } else if (!front) {\n        var k1_offset = v_offset + delta - k2;\n        if (k1_offset >= 0 && k1_offset < v_length && v1[k1_offset] !== -1) {\n          var x1 = v1[k1_offset];\n          var y1 = v_offset + x1 - k1_offset;\n          // Mirror x2 onto top-left coordinate system.\n          x2 = text1_length - x2;\n          if (x1 >= x2) {\n            // Overlap detected.\n            return diff_bisectSplit_(text1, text2, x1, y1);\n          }\n        }\n      }\n    }\n  }\n  // Diff took too long and hit the deadline or\n  // number of diffs equals number of characters, no commonality at all.\n  return [\n    [DIFF_DELETE, text1],\n    [DIFF_INSERT, text2],\n  ];\n}\n\n/**\n * Given the location of the 'middle snake', split the diff in two parts\n * and recurse.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} x Index of split point in text1.\n * @param {number} y Index of split point in text2.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_bisectSplit_(text1, text2, x, y) {\n  var text1a = text1.substring(0, x);\n  var text2a = text2.substring(0, y);\n  var text1b = text1.substring(x);\n  var text2b = text2.substring(y);\n\n  // Compute both diffs serially.\n  var diffs = diff_main(text1a, text2a);\n  var diffsb = diff_main(text1b, text2b);\n\n  return diffs.concat(diffsb);\n}\n\n/**\n * Determine the common prefix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the start of each\n *     string.\n */\nfunction diff_commonPrefix(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.charAt(0) !== text2.charAt(0)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerstart = 0;\n  while (pointermin < pointermid) {\n    if (\n      text1.substring(pointerstart, pointermid) ==\n      text2.substring(pointerstart, pointermid)\n    ) {\n      pointermin = pointermid;\n      pointerstart = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n\n  if (is_surrogate_pair_start(text1.charCodeAt(pointermid - 1))) {\n    pointermid--;\n  }\n\n  return pointermid;\n}\n\n/**\n * Determine if the suffix of one string is the prefix of another.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of the first\n *     string and the start of the second string.\n * @private\n */\nfunction diff_commonOverlap_(text1, text2) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  // Eliminate the null case.\n  if (text1_length == 0 || text2_length == 0) {\n    return 0;\n  }\n  // Truncate the longer string.\n  if (text1_length > text2_length) {\n    text1 = text1.substring(text1_length - text2_length);\n  } else if (text1_length < text2_length) {\n    text2 = text2.substring(0, text1_length);\n  }\n  var text_length = Math.min(text1_length, text2_length);\n  // Quick check for the worst case.\n  if (text1 == text2) {\n    return text_length;\n  }\n\n  // Start by looking for a single character match\n  // and increase length until no match is found.\n  // Performance analysis: http://neil.fraser.name/news/2010/11/04/\n  var best = 0;\n  var length = 1;\n  while (true) {\n    var pattern = text1.substring(text_length - length);\n    var found = text2.indexOf(pattern);\n    if (found == -1) {\n      return best;\n    }\n    length += found;\n    if (\n      found == 0 ||\n      text1.substring(text_length - length) == text2.substring(0, length)\n    ) {\n      best = length;\n      length++;\n    }\n  }\n}\n\n/**\n * Determine the common suffix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of each string.\n */\nfunction diff_commonSuffix(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.slice(-1) !== text2.slice(-1)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerend = 0;\n  while (pointermin < pointermid) {\n    if (\n      text1.substring(text1.length - pointermid, text1.length - pointerend) ==\n      text2.substring(text2.length - pointermid, text2.length - pointerend)\n    ) {\n      pointermin = pointermid;\n      pointerend = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n\n  if (is_surrogate_pair_end(text1.charCodeAt(text1.length - pointermid))) {\n    pointermid--;\n  }\n\n  return pointermid;\n}\n\n/**\n * Do the two texts share a substring which is at least half the length of the\n * longer text?\n * This speedup can produce non-minimal diffs.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {Array.<string>} Five element Array, containing the prefix of\n *     text1, the suffix of text1, the prefix of text2, the suffix of\n *     text2 and the common middle.  Or null if there was no match.\n */\nfunction diff_halfMatch_(text1, text2) {\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  if (longtext.length < 4 || shorttext.length * 2 < longtext.length) {\n    return null; // Pointless.\n  }\n\n  /**\n   * Does a substring of shorttext exist within longtext such that the substring\n   * is at least half the length of longtext?\n   * Closure, but does not reference any external variables.\n   * @param {string} longtext Longer string.\n   * @param {string} shorttext Shorter string.\n   * @param {number} i Start index of quarter length substring within longtext.\n   * @return {Array.<string>} Five element Array, containing the prefix of\n   *     longtext, the suffix of longtext, the prefix of shorttext, the suffix\n   *     of shorttext and the common middle.  Or null if there was no match.\n   * @private\n   */\n  function diff_halfMatchI_(longtext, shorttext, i) {\n    // Start with a 1/4 length substring at position i as a seed.\n    var seed = longtext.substring(i, i + Math.floor(longtext.length / 4));\n    var j = -1;\n    var best_common = \"\";\n    var best_longtext_a, best_longtext_b, best_shorttext_a, best_shorttext_b;\n    while ((j = shorttext.indexOf(seed, j + 1)) !== -1) {\n      var prefixLength = diff_commonPrefix(\n        longtext.substring(i),\n        shorttext.substring(j)\n      );\n      var suffixLength = diff_commonSuffix(\n        longtext.substring(0, i),\n        shorttext.substring(0, j)\n      );\n      if (best_common.length < suffixLength + prefixLength) {\n        best_common =\n          shorttext.substring(j - suffixLength, j) +\n          shorttext.substring(j, j + prefixLength);\n        best_longtext_a = longtext.substring(0, i - suffixLength);\n        best_longtext_b = longtext.substring(i + prefixLength);\n        best_shorttext_a = shorttext.substring(0, j - suffixLength);\n        best_shorttext_b = shorttext.substring(j + prefixLength);\n      }\n    }\n    if (best_common.length * 2 >= longtext.length) {\n      return [\n        best_longtext_a,\n        best_longtext_b,\n        best_shorttext_a,\n        best_shorttext_b,\n        best_common,\n      ];\n    } else {\n      return null;\n    }\n  }\n\n  // First check if the second quarter is the seed for a half-match.\n  var hm1 = diff_halfMatchI_(\n    longtext,\n    shorttext,\n    Math.ceil(longtext.length / 4)\n  );\n  // Check again based on the third quarter.\n  var hm2 = diff_halfMatchI_(\n    longtext,\n    shorttext,\n    Math.ceil(longtext.length / 2)\n  );\n  var hm;\n  if (!hm1 && !hm2) {\n    return null;\n  } else if (!hm2) {\n    hm = hm1;\n  } else if (!hm1) {\n    hm = hm2;\n  } else {\n    // Both matched.  Select the longest.\n    hm = hm1[4].length > hm2[4].length ? hm1 : hm2;\n  }\n\n  // A half-match was found, sort out the return data.\n  var text1_a, text1_b, text2_a, text2_b;\n  if (text1.length > text2.length) {\n    text1_a = hm[0];\n    text1_b = hm[1];\n    text2_a = hm[2];\n    text2_b = hm[3];\n  } else {\n    text2_a = hm[0];\n    text2_b = hm[1];\n    text1_a = hm[2];\n    text1_b = hm[3];\n  }\n  var mid_common = hm[4];\n  return [text1_a, text1_b, text2_a, text2_b, mid_common];\n}\n\n/**\n * Reduce the number of edits by eliminating semantically trivial equalities.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\nfunction diff_cleanupSemantic(diffs) {\n  var changes = false;\n  var equalities = []; // Stack of indices where equalities are found.\n  var equalitiesLength = 0; // Keeping our own length var is faster in JS.\n  /** @type {?string} */\n  var lastequality = null;\n  // Always equal to diffs[equalities[equalitiesLength - 1]][1]\n  var pointer = 0; // Index of current position.\n  // Number of characters that changed prior to the equality.\n  var length_insertions1 = 0;\n  var length_deletions1 = 0;\n  // Number of characters that changed after the equality.\n  var length_insertions2 = 0;\n  var length_deletions2 = 0;\n  while (pointer < diffs.length) {\n    if (diffs[pointer][0] == DIFF_EQUAL) {\n      // Equality found.\n      equalities[equalitiesLength++] = pointer;\n      length_insertions1 = length_insertions2;\n      length_deletions1 = length_deletions2;\n      length_insertions2 = 0;\n      length_deletions2 = 0;\n      lastequality = diffs[pointer][1];\n    } else {\n      // An insertion or deletion.\n      if (diffs[pointer][0] == DIFF_INSERT) {\n        length_insertions2 += diffs[pointer][1].length;\n      } else {\n        length_deletions2 += diffs[pointer][1].length;\n      }\n      // Eliminate an equality that is smaller or equal to the edits on both\n      // sides of it.\n      if (\n        lastequality &&\n        lastequality.length <=\n          Math.max(length_insertions1, length_deletions1) &&\n        lastequality.length <= Math.max(length_insertions2, length_deletions2)\n      ) {\n        // Duplicate record.\n        diffs.splice(equalities[equalitiesLength - 1], 0, [\n          DIFF_DELETE,\n          lastequality,\n        ]);\n        // Change second copy to insert.\n        diffs[equalities[equalitiesLength - 1] + 1][0] = DIFF_INSERT;\n        // Throw away the equality we just deleted.\n        equalitiesLength--;\n        // Throw away the previous equality (it needs to be reevaluated).\n        equalitiesLength--;\n        pointer = equalitiesLength > 0 ? equalities[equalitiesLength - 1] : -1;\n        length_insertions1 = 0; // Reset the counters.\n        length_deletions1 = 0;\n        length_insertions2 = 0;\n        length_deletions2 = 0;\n        lastequality = null;\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n\n  // Normalize the diff.\n  if (changes) {\n    diff_cleanupMerge(diffs);\n  }\n  diff_cleanupSemanticLossless(diffs);\n\n  // Find any overlaps between deletions and insertions.\n  // e.g: <del>abcxxx</del><ins>xxxdef</ins>\n  //   -> <del>abc</del>xxx<ins>def</ins>\n  // e.g: <del>xxxabc</del><ins>defxxx</ins>\n  //   -> <ins>def</ins>xxx<del>abc</del>\n  // Only extract an overlap if it is as big as the edit ahead or behind it.\n  pointer = 1;\n  while (pointer < diffs.length) {\n    if (\n      diffs[pointer - 1][0] == DIFF_DELETE &&\n      diffs[pointer][0] == DIFF_INSERT\n    ) {\n      var deletion = diffs[pointer - 1][1];\n      var insertion = diffs[pointer][1];\n      var overlap_length1 = diff_commonOverlap_(deletion, insertion);\n      var overlap_length2 = diff_commonOverlap_(insertion, deletion);\n      if (overlap_length1 >= overlap_length2) {\n        if (\n          overlap_length1 >= deletion.length / 2 ||\n          overlap_length1 >= insertion.length / 2\n        ) {\n          // Overlap found.  Insert an equality and trim the surrounding edits.\n          diffs.splice(pointer, 0, [\n            DIFF_EQUAL,\n            insertion.substring(0, overlap_length1),\n          ]);\n          diffs[pointer - 1][1] = deletion.substring(\n            0,\n            deletion.length - overlap_length1\n          );\n          diffs[pointer + 1][1] = insertion.substring(overlap_length1);\n          pointer++;\n        }\n      } else {\n        if (\n          overlap_length2 >= deletion.length / 2 ||\n          overlap_length2 >= insertion.length / 2\n        ) {\n          // Reverse overlap found.\n          // Insert an equality and swap and trim the surrounding edits.\n          diffs.splice(pointer, 0, [\n            DIFF_EQUAL,\n            deletion.substring(0, overlap_length2),\n          ]);\n          diffs[pointer - 1][0] = DIFF_INSERT;\n          diffs[pointer - 1][1] = insertion.substring(\n            0,\n            insertion.length - overlap_length2\n          );\n          diffs[pointer + 1][0] = DIFF_DELETE;\n          diffs[pointer + 1][1] = deletion.substring(overlap_length2);\n          pointer++;\n        }\n      }\n      pointer++;\n    }\n    pointer++;\n  }\n}\n\nvar nonAlphaNumericRegex_ = /[^a-zA-Z0-9]/;\nvar whitespaceRegex_ = /\\s/;\nvar linebreakRegex_ = /[\\r\\n]/;\nvar blanklineEndRegex_ = /\\n\\r?\\n$/;\nvar blanklineStartRegex_ = /^\\r?\\n\\r?\\n/;\n\n/**\n * Look for single edits surrounded on both sides by equalities\n * which can be shifted sideways to align the edit to a word boundary.\n * e.g: The c<ins>at c</ins>ame. -> The <ins>cat </ins>came.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\nfunction diff_cleanupSemanticLossless(diffs) {\n  /**\n   * Given two strings, compute a score representing whether the internal\n   * boundary falls on logical boundaries.\n   * Scores range from 6 (best) to 0 (worst).\n   * Closure, but does not reference any external variables.\n   * @param {string} one First string.\n   * @param {string} two Second string.\n   * @return {number} The score.\n   * @private\n   */\n  function diff_cleanupSemanticScore_(one, two) {\n    if (!one || !two) {\n      // Edges are the best.\n      return 6;\n    }\n\n    // Each port of this function behaves slightly differently due to\n    // subtle differences in each language's definition of things like\n    // 'whitespace'.  Since this function's purpose is largely cosmetic,\n    // the choice has been made to use each language's native features\n    // rather than force total conformity.\n    var char1 = one.charAt(one.length - 1);\n    var char2 = two.charAt(0);\n    var nonAlphaNumeric1 = char1.match(nonAlphaNumericRegex_);\n    var nonAlphaNumeric2 = char2.match(nonAlphaNumericRegex_);\n    var whitespace1 = nonAlphaNumeric1 && char1.match(whitespaceRegex_);\n    var whitespace2 = nonAlphaNumeric2 && char2.match(whitespaceRegex_);\n    var lineBreak1 = whitespace1 && char1.match(linebreakRegex_);\n    var lineBreak2 = whitespace2 && char2.match(linebreakRegex_);\n    var blankLine1 = lineBreak1 && one.match(blanklineEndRegex_);\n    var blankLine2 = lineBreak2 && two.match(blanklineStartRegex_);\n\n    if (blankLine1 || blankLine2) {\n      // Five points for blank lines.\n      return 5;\n    } else if (lineBreak1 || lineBreak2) {\n      // Four points for line breaks.\n      return 4;\n    } else if (nonAlphaNumeric1 && !whitespace1 && whitespace2) {\n      // Three points for end of sentences.\n      return 3;\n    } else if (whitespace1 || whitespace2) {\n      // Two points for whitespace.\n      return 2;\n    } else if (nonAlphaNumeric1 || nonAlphaNumeric2) {\n      // One point for non-alphanumeric.\n      return 1;\n    }\n    return 0;\n  }\n\n  var pointer = 1;\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (\n      diffs[pointer - 1][0] == DIFF_EQUAL &&\n      diffs[pointer + 1][0] == DIFF_EQUAL\n    ) {\n      // This is a single edit surrounded by equalities.\n      var equality1 = diffs[pointer - 1][1];\n      var edit = diffs[pointer][1];\n      var equality2 = diffs[pointer + 1][1];\n\n      // First, shift the edit as far left as possible.\n      var commonOffset = diff_commonSuffix(equality1, edit);\n      if (commonOffset) {\n        var commonString = edit.substring(edit.length - commonOffset);\n        equality1 = equality1.substring(0, equality1.length - commonOffset);\n        edit = commonString + edit.substring(0, edit.length - commonOffset);\n        equality2 = commonString + equality2;\n      }\n\n      // Second, step character by character right, looking for the best fit.\n      var bestEquality1 = equality1;\n      var bestEdit = edit;\n      var bestEquality2 = equality2;\n      var bestScore =\n        diff_cleanupSemanticScore_(equality1, edit) +\n        diff_cleanupSemanticScore_(edit, equality2);\n      while (edit.charAt(0) === equality2.charAt(0)) {\n        equality1 += edit.charAt(0);\n        edit = edit.substring(1) + equality2.charAt(0);\n        equality2 = equality2.substring(1);\n        var score =\n          diff_cleanupSemanticScore_(equality1, edit) +\n          diff_cleanupSemanticScore_(edit, equality2);\n        // The >= encourages trailing rather than leading whitespace on edits.\n        if (score >= bestScore) {\n          bestScore = score;\n          bestEquality1 = equality1;\n          bestEdit = edit;\n          bestEquality2 = equality2;\n        }\n      }\n\n      if (diffs[pointer - 1][1] != bestEquality1) {\n        // We have an improvement, save it back to the diff.\n        if (bestEquality1) {\n          diffs[pointer - 1][1] = bestEquality1;\n        } else {\n          diffs.splice(pointer - 1, 1);\n          pointer--;\n        }\n        diffs[pointer][1] = bestEdit;\n        if (bestEquality2) {\n          diffs[pointer + 1][1] = bestEquality2;\n        } else {\n          diffs.splice(pointer + 1, 1);\n          pointer--;\n        }\n      }\n    }\n    pointer++;\n  }\n}\n\n/**\n * Reorder and merge like edit sections.  Merge equalities.\n * Any edit section can move as long as it doesn't cross an equality.\n * @param {Array} diffs Array of diff tuples.\n * @param {boolean} fix_unicode Whether to normalize to a unicode-correct diff\n */\nfunction diff_cleanupMerge(diffs, fix_unicode) {\n  diffs.push([DIFF_EQUAL, \"\"]); // Add a dummy entry at the end.\n  var pointer = 0;\n  var count_delete = 0;\n  var count_insert = 0;\n  var text_delete = \"\";\n  var text_insert = \"\";\n  var commonlength;\n  while (pointer < diffs.length) {\n    if (pointer < diffs.length - 1 && !diffs[pointer][1]) {\n      diffs.splice(pointer, 1);\n      continue;\n    }\n    switch (diffs[pointer][0]) {\n      case DIFF_INSERT:\n        count_insert++;\n        text_insert += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_DELETE:\n        count_delete++;\n        text_delete += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_EQUAL:\n        var previous_equality = pointer - count_insert - count_delete - 1;\n        if (fix_unicode) {\n          // prevent splitting of unicode surrogate pairs.  when fix_unicode is true,\n          // we assume that the old and new text in the diff are complete and correct\n          // unicode-encoded JS strings, but the tuple boundaries may fall between\n          // surrogate pairs.  we fix this by shaving off stray surrogates from the end\n          // of the previous equality and the beginning of this equality.  this may create\n          // empty equalities or a common prefix or suffix.  for example, if AB and AC are\n          // emojis, `[[0, 'A'], [-1, 'BA'], [0, 'C']]` would turn into deleting 'ABAC' and\n          // inserting 'AC', and then the common suffix 'AC' will be eliminated.  in this\n          // particular case, both equalities go away, we absorb any previous inequalities,\n          // and we keep scanning for the next equality before rewriting the tuples.\n          if (\n            previous_equality >= 0 &&\n            ends_with_pair_start(diffs[previous_equality][1])\n          ) {\n            var stray = diffs[previous_equality][1].slice(-1);\n            diffs[previous_equality][1] = diffs[previous_equality][1].slice(\n              0,\n              -1\n            );\n            text_delete = stray + text_delete;\n            text_insert = stray + text_insert;\n            if (!diffs[previous_equality][1]) {\n              // emptied out previous equality, so delete it and include previous delete/insert\n              diffs.splice(previous_equality, 1);\n              pointer--;\n              var k = previous_equality - 1;\n              if (diffs[k] && diffs[k][0] === DIFF_INSERT) {\n                count_insert++;\n                text_insert = diffs[k][1] + text_insert;\n                k--;\n              }\n              if (diffs[k] && diffs[k][0] === DIFF_DELETE) {\n                count_delete++;\n                text_delete = diffs[k][1] + text_delete;\n                k--;\n              }\n              previous_equality = k;\n            }\n          }\n          if (starts_with_pair_end(diffs[pointer][1])) {\n            var stray = diffs[pointer][1].charAt(0);\n            diffs[pointer][1] = diffs[pointer][1].slice(1);\n            text_delete += stray;\n            text_insert += stray;\n          }\n        }\n        if (pointer < diffs.length - 1 && !diffs[pointer][1]) {\n          // for empty equality not at end, wait for next equality\n          diffs.splice(pointer, 1);\n          break;\n        }\n        if (text_delete.length > 0 || text_insert.length > 0) {\n          // note that diff_commonPrefix and diff_commonSuffix are unicode-aware\n          if (text_delete.length > 0 && text_insert.length > 0) {\n            // Factor out any common prefixes.\n            commonlength = diff_commonPrefix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              if (previous_equality >= 0) {\n                diffs[previous_equality][1] += text_insert.substring(\n                  0,\n                  commonlength\n                );\n              } else {\n                diffs.splice(0, 0, [\n                  DIFF_EQUAL,\n                  text_insert.substring(0, commonlength),\n                ]);\n                pointer++;\n              }\n              text_insert = text_insert.substring(commonlength);\n              text_delete = text_delete.substring(commonlength);\n            }\n            // Factor out any common suffixes.\n            commonlength = diff_commonSuffix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              diffs[pointer][1] =\n                text_insert.substring(text_insert.length - commonlength) +\n                diffs[pointer][1];\n              text_insert = text_insert.substring(\n                0,\n                text_insert.length - commonlength\n              );\n              text_delete = text_delete.substring(\n                0,\n                text_delete.length - commonlength\n              );\n            }\n          }\n          // Delete the offending records and add the merged ones.\n          var n = count_insert + count_delete;\n          if (text_delete.length === 0 && text_insert.length === 0) {\n            diffs.splice(pointer - n, n);\n            pointer = pointer - n;\n          } else if (text_delete.length === 0) {\n            diffs.splice(pointer - n, n, [DIFF_INSERT, text_insert]);\n            pointer = pointer - n + 1;\n          } else if (text_insert.length === 0) {\n            diffs.splice(pointer - n, n, [DIFF_DELETE, text_delete]);\n            pointer = pointer - n + 1;\n          } else {\n            diffs.splice(\n              pointer - n,\n              n,\n              [DIFF_DELETE, text_delete],\n              [DIFF_INSERT, text_insert]\n            );\n            pointer = pointer - n + 2;\n          }\n        }\n        if (pointer !== 0 && diffs[pointer - 1][0] === DIFF_EQUAL) {\n          // Merge this equality with the previous one.\n          diffs[pointer - 1][1] += diffs[pointer][1];\n          diffs.splice(pointer, 1);\n        } else {\n          pointer++;\n        }\n        count_insert = 0;\n        count_delete = 0;\n        text_delete = \"\";\n        text_insert = \"\";\n        break;\n    }\n  }\n  if (diffs[diffs.length - 1][1] === \"\") {\n    diffs.pop(); // Remove the dummy entry at the end.\n  }\n\n  // Second pass: look for single edits surrounded on both sides by equalities\n  // which can be shifted sideways to eliminate an equality.\n  // e.g: A<ins>BA</ins>C -> <ins>AB</ins>AC\n  var changes = false;\n  pointer = 1;\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (\n      diffs[pointer - 1][0] === DIFF_EQUAL &&\n      diffs[pointer + 1][0] === DIFF_EQUAL\n    ) {\n      // This is a single edit surrounded by equalities.\n      if (\n        diffs[pointer][1].substring(\n          diffs[pointer][1].length - diffs[pointer - 1][1].length\n        ) === diffs[pointer - 1][1]\n      ) {\n        // Shift the edit over the previous equality.\n        diffs[pointer][1] =\n          diffs[pointer - 1][1] +\n          diffs[pointer][1].substring(\n            0,\n            diffs[pointer][1].length - diffs[pointer - 1][1].length\n          );\n        diffs[pointer + 1][1] = diffs[pointer - 1][1] + diffs[pointer + 1][1];\n        diffs.splice(pointer - 1, 1);\n        changes = true;\n      } else if (\n        diffs[pointer][1].substring(0, diffs[pointer + 1][1].length) ==\n        diffs[pointer + 1][1]\n      ) {\n        // Shift the edit over the next equality.\n        diffs[pointer - 1][1] += diffs[pointer + 1][1];\n        diffs[pointer][1] =\n          diffs[pointer][1].substring(diffs[pointer + 1][1].length) +\n          diffs[pointer + 1][1];\n        diffs.splice(pointer + 1, 1);\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n  // If shifts were made, the diff needs reordering and another shift sweep.\n  if (changes) {\n    diff_cleanupMerge(diffs, fix_unicode);\n  }\n}\n\nfunction is_surrogate_pair_start(charCode) {\n  return charCode >= 0xd800 && charCode <= 0xdbff;\n}\n\nfunction is_surrogate_pair_end(charCode) {\n  return charCode >= 0xdc00 && charCode <= 0xdfff;\n}\n\nfunction starts_with_pair_end(str) {\n  return is_surrogate_pair_end(str.charCodeAt(0));\n}\n\nfunction ends_with_pair_start(str) {\n  return is_surrogate_pair_start(str.charCodeAt(str.length - 1));\n}\n\nfunction remove_empty_tuples(tuples) {\n  var ret = [];\n  for (var i = 0; i < tuples.length; i++) {\n    if (tuples[i][1].length > 0) {\n      ret.push(tuples[i]);\n    }\n  }\n  return ret;\n}\n\nfunction make_edit_splice(before, oldMiddle, newMiddle, after) {\n  if (ends_with_pair_start(before) || starts_with_pair_end(after)) {\n    return null;\n  }\n  return remove_empty_tuples([\n    [DIFF_EQUAL, before],\n    [DIFF_DELETE, oldMiddle],\n    [DIFF_INSERT, newMiddle],\n    [DIFF_EQUAL, after],\n  ]);\n}\n\nfunction find_cursor_edit_diff(oldText, newText, cursor_pos) {\n  // note: this runs after equality check has ruled out exact equality\n  var oldRange =\n    typeof cursor_pos === \"number\"\n      ? { index: cursor_pos, length: 0 }\n      : cursor_pos.oldRange;\n  var newRange = typeof cursor_pos === \"number\" ? null : cursor_pos.newRange;\n  // take into account the old and new selection to generate the best diff\n  // possible for a text edit.  for example, a text change from \"xxx\" to \"xx\"\n  // could be a delete or forwards-delete of any one of the x's, or the\n  // result of selecting two of the x's and typing \"x\".\n  var oldLength = oldText.length;\n  var newLength = newText.length;\n  if (oldRange.length === 0 && (newRange === null || newRange.length === 0)) {\n    // see if we have an insert or delete before or after cursor\n    var oldCursor = oldRange.index;\n    var oldBefore = oldText.slice(0, oldCursor);\n    var oldAfter = oldText.slice(oldCursor);\n    var maybeNewCursor = newRange ? newRange.index : null;\n    editBefore: {\n      // is this an insert or delete right before oldCursor?\n      var newCursor = oldCursor + newLength - oldLength;\n      if (maybeNewCursor !== null && maybeNewCursor !== newCursor) {\n        break editBefore;\n      }\n      if (newCursor < 0 || newCursor > newLength) {\n        break editBefore;\n      }\n      var newBefore = newText.slice(0, newCursor);\n      var newAfter = newText.slice(newCursor);\n      if (newAfter !== oldAfter) {\n        break editBefore;\n      }\n      var prefixLength = Math.min(oldCursor, newCursor);\n      var oldPrefix = oldBefore.slice(0, prefixLength);\n      var newPrefix = newBefore.slice(0, prefixLength);\n      if (oldPrefix !== newPrefix) {\n        break editBefore;\n      }\n      var oldMiddle = oldBefore.slice(prefixLength);\n      var newMiddle = newBefore.slice(prefixLength);\n      return make_edit_splice(oldPrefix, oldMiddle, newMiddle, oldAfter);\n    }\n    editAfter: {\n      // is this an insert or delete right after oldCursor?\n      if (maybeNewCursor !== null && maybeNewCursor !== oldCursor) {\n        break editAfter;\n      }\n      var cursor = oldCursor;\n      var newBefore = newText.slice(0, cursor);\n      var newAfter = newText.slice(cursor);\n      if (newBefore !== oldBefore) {\n        break editAfter;\n      }\n      var suffixLength = Math.min(oldLength - cursor, newLength - cursor);\n      var oldSuffix = oldAfter.slice(oldAfter.length - suffixLength);\n      var newSuffix = newAfter.slice(newAfter.length - suffixLength);\n      if (oldSuffix !== newSuffix) {\n        break editAfter;\n      }\n      var oldMiddle = oldAfter.slice(0, oldAfter.length - suffixLength);\n      var newMiddle = newAfter.slice(0, newAfter.length - suffixLength);\n      return make_edit_splice(oldBefore, oldMiddle, newMiddle, oldSuffix);\n    }\n  }\n  if (oldRange.length > 0 && newRange && newRange.length === 0) {\n    replaceRange: {\n      // see if diff could be a splice of the old selection range\n      var oldPrefix = oldText.slice(0, oldRange.index);\n      var oldSuffix = oldText.slice(oldRange.index + oldRange.length);\n      var prefixLength = oldPrefix.length;\n      var suffixLength = oldSuffix.length;\n      if (newLength < prefixLength + suffixLength) {\n        break replaceRange;\n      }\n      var newPrefix = newText.slice(0, prefixLength);\n      var newSuffix = newText.slice(newLength - suffixLength);\n      if (oldPrefix !== newPrefix || oldSuffix !== newSuffix) {\n        break replaceRange;\n      }\n      var oldMiddle = oldText.slice(prefixLength, oldLength - suffixLength);\n      var newMiddle = newText.slice(prefixLength, newLength - suffixLength);\n      return make_edit_splice(oldPrefix, oldMiddle, newMiddle, oldSuffix);\n    }\n  }\n\n  return null;\n}\n\nfunction diff(text1, text2, cursor_pos, cleanup) {\n  // only pass fix_unicode=true at the top level, not when diff_main is\n  // recursively invoked\n  return diff_main(text1, text2, cursor_pos, cleanup, true);\n}\n\ndiff.INSERT = DIFF_INSERT;\ndiff.DELETE = DIFF_DELETE;\ndiff.EQUAL = DIFF_EQUAL;\n\nmodule.exports = diff;\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/**\n * Adds the key-value `pair` to `map`.\n *\n * @private\n * @param {Object} map The map to modify.\n * @param {Array} pair The key-value pair to add.\n * @returns {Object} Returns `map`.\n */\nfunction addMapEntry(map, pair) {\n  // Don't return `map.set` because it's not chainable in IE 11.\n  map.set(pair[0], pair[1]);\n  return map;\n}\n\n/**\n * Adds `value` to `set`.\n *\n * @private\n * @param {Object} set The set to modify.\n * @param {*} value The value to add.\n * @returns {Object} Returns `set`.\n */\nfunction addSetEntry(set, value) {\n  // Don't return `set.add` because it's not chainable in IE 11.\n  set.add(value);\n  return set;\n}\n\n/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    getPrototype = overArg(Object.getPrototypeOf, Object),\n    objectCreate = Object.create,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  this.__data__ = new ListCache(entries);\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  return this.__data__['delete'](key);\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var cache = this.__data__;\n  if (cache instanceof ListCache) {\n    var pairs = cache.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      return this;\n    }\n    cache = this.__data__ = new MapCache(pairs);\n  }\n  cache.set(key, value);\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @param {boolean} [isFull] Specify a clone including symbols.\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, isDeep, isFull, customizer, key, object, stack) {\n  var result;\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      if (isHostObject(value)) {\n        return object ? value : {};\n      }\n      result = initCloneObject(isFunc ? {} : value);\n      if (!isDeep) {\n        return copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, baseClone, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (!isArr) {\n    var props = isFull ? getAllKeys(value) : keys(value);\n  }\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, isDeep, isFull, customizer, key, value, stack));\n  });\n  return result;\n}\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} prototype The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nfunction baseCreate(proto) {\n  return isObject(proto) ? objectCreate(proto) : {};\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  return objectToString.call(value);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var result = new buffer.constructor(buffer.length);\n  buffer.copy(result);\n  return result;\n}\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\n/**\n * Creates a clone of `map`.\n *\n * @private\n * @param {Object} map The map to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned map.\n */\nfunction cloneMap(map, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(mapToArray(map), true) : mapToArray(map);\n  return arrayReduce(array, addMapEntry, new map.constructor);\n}\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\n/**\n * Creates a clone of `set`.\n *\n * @private\n * @param {Object} set The set to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned set.\n */\nfunction cloneSet(set, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(setToArray(set), true) : setToArray(set);\n  return arrayReduce(array, addSetEntry, new set.constructor);\n}\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\n/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    assignValue(object, key, newValue === undefined ? source[key] : newValue);\n  }\n  return object;\n}\n\n/**\n * Copies own symbol properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Creates an array of the own enumerable symbol properties of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = nativeGetSymbols ? overArg(nativeGetSymbols, Object) : stubArray;\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11,\n// for data views in Edge < 14, and promises in Node.js.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = objectToString.call(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : undefined;\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, cloneFunc, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return cloneMap(object, isDeep, cloneFunc);\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return cloneSet(object, isDeep, cloneFunc);\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, true, true);\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = cloneDeep;\n","/**\n * Lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright JS Foundation and other contributors <https://js.foundation/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    asyncTag = '[object AsyncFunction]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    nullTag = '[object Null]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    proxyTag = '[object Proxy]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    undefinedTag = '[object Undefined]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice,\n    symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\n/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(array);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(object);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = isEqual;\n",null,null,null,null,"'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","'use strict';\nvar $ = require('../internals/export');\n\n// `Number.isNaN` method\n// https://tc39.es/ecma262/#sec-number.isnan\n$({ target: 'Number', stat: true }, {\n  isNaN: function isNaN(number) {\n    // eslint-disable-next-line no-self-compare -- NaN check\n    return number !== number;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar globalThis = require('../internals/global');\nvar microtask = require('../internals/microtask');\nvar aCallable = require('../internals/a-callable');\nvar validateArgumentsLength = require('../internals/validate-arguments-length');\nvar fails = require('../internals/fails');\nvar DESCRIPTORS = require('../internals/descriptors');\n\n// Bun ~ 1.0.30 bug\n// https://github.com/oven-sh/bun/issues/9249\nvar WRONG_ARITY = fails(function () {\n  // getOwnPropertyDescriptor for prevent experimental warning in Node 11\n  // eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\n  return DESCRIPTORS && Object.getOwnPropertyDescriptor(globalThis, 'queueMicrotask').value.length !== 1;\n});\n\n// `queueMicrotask` method\n// https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#dom-queuemicrotask\n$({ global: true, enumerable: true, dontCallGetSet: true, forced: WRONG_ARITY }, {\n  queueMicrotask: function queueMicrotask(fn) {\n    validateArgumentsLength(arguments.length, 1);\n    microtask(aCallable(fn));\n  }\n});\n","function _objectWithoutPropertiesLoose(r, e) {\n  if (null == r) return {};\n  var t = {};\n  for (var n in r) if ({}.hasOwnProperty.call(r, n)) {\n    if (e.indexOf(n) >= 0) continue;\n    t[n] = r[n];\n  }\n  return t;\n}\nexport { _objectWithoutPropertiesLoose as default };","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose.js\";\nfunction _objectWithoutProperties(e, t) {\n  if (null == e) return {};\n  var o,\n    r,\n    i = objectWithoutPropertiesLoose(e, t);\n  if (Object.getOwnPropertySymbols) {\n    var n = Object.getOwnPropertySymbols(e);\n    for (r = 0; r < n.length; r++) o = n[r], t.indexOf(o) >= 0 || {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);\n  }\n  return i;\n}\nexport { _objectWithoutProperties as default };","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nexport default listCacheClear;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nexport default eq;\n","import eq from './eq.js';\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nexport default assocIndexOf;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nexport default listCacheDelete;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nexport default listCacheGet;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nexport default listCacheHas;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nexport default listCacheSet;\n","import listCacheClear from './_listCacheClear.js';\nimport listCacheDelete from './_listCacheDelete.js';\nimport listCacheGet from './_listCacheGet.js';\nimport listCacheHas from './_listCacheHas.js';\nimport listCacheSet from './_listCacheSet.js';\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nexport default ListCache;\n","import ListCache from './_ListCache.js';\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nexport default stackClear;\n","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nexport default stackDelete;\n","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nexport default stackGet;\n","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nexport default stackHas;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n","import baseGetTag from './_baseGetTag.js';\nimport isObject from './isObject.js';\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nexport default isFunction;\n","import root from './_root.js';\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nexport default coreJsData;\n","import coreJsData from './_coreJsData.js';\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nexport default isMasked;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nexport default toSource;\n","import isFunction from './isFunction.js';\nimport isMasked from './_isMasked.js';\nimport isObject from './isObject.js';\nimport toSource from './_toSource.js';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nexport default baseIsNative;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nexport default getValue;\n","import baseIsNative from './_baseIsNative.js';\nimport getValue from './_getValue.js';\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nexport default getNative;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nexport default Map;\n","import getNative from './_getNative.js';\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nexport default nativeCreate;\n","import nativeCreate from './_nativeCreate.js';\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nexport default hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default hashDelete;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nexport default hashGet;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nexport default hashHas;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nexport default hashSet;\n","import hashClear from './_hashClear.js';\nimport hashDelete from './_hashDelete.js';\nimport hashGet from './_hashGet.js';\nimport hashHas from './_hashHas.js';\nimport hashSet from './_hashSet.js';\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nexport default Hash;\n","import Hash from './_Hash.js';\nimport ListCache from './_ListCache.js';\nimport Map from './_Map.js';\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nexport default mapCacheClear;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nexport default isKeyable;\n","import isKeyable from './_isKeyable.js';\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nexport default getMapData;\n","import getMapData from './_getMapData.js';\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default mapCacheDelete;\n","import getMapData from './_getMapData.js';\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nexport default mapCacheGet;\n","import getMapData from './_getMapData.js';\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nexport default mapCacheHas;\n","import getMapData from './_getMapData.js';\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nexport default mapCacheSet;\n","import mapCacheClear from './_mapCacheClear.js';\nimport mapCacheDelete from './_mapCacheDelete.js';\nimport mapCacheGet from './_mapCacheGet.js';\nimport mapCacheHas from './_mapCacheHas.js';\nimport mapCacheSet from './_mapCacheSet.js';\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nexport default MapCache;\n","import ListCache from './_ListCache.js';\nimport Map from './_Map.js';\nimport MapCache from './_MapCache.js';\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nexport default stackSet;\n","import ListCache from './_ListCache.js';\nimport stackClear from './_stackClear.js';\nimport stackDelete from './_stackDelete.js';\nimport stackGet from './_stackGet.js';\nimport stackHas from './_stackHas.js';\nimport stackSet from './_stackSet.js';\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nexport default Stack;\n","import getNative from './_getNative.js';\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nexport default defineProperty;\n","import defineProperty from './_defineProperty.js';\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nexport default baseAssignValue;\n","import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/**\n * This function is like `assignValue` except that it doesn't assign\n * `undefined` values.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignMergeValue(object, key, value) {\n  if ((value !== undefined && !eq(object[key], value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignMergeValue;\n","/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nexport default createBaseFor;\n","import createBaseFor from './_createBaseFor.js';\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nexport default baseFor;\n","import root from './_root.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\nexport default cloneBuffer;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nexport default Uint8Array;\n","import Uint8Array from './_Uint8Array.js';\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nexport default cloneArrayBuffer;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nexport default cloneTypedArray;\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nexport default copyArray;\n","import isObject from './isObject.js';\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nexport default baseCreate;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nexport default overArg;\n","import overArg from './_overArg.js';\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nexport default getPrototype;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nexport default isPrototype;\n","import baseCreate from './_baseCreate.js';\nimport getPrototype from './_getPrototype.js';\nimport isPrototype from './_isPrototype.js';\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\nexport default initCloneObject;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nexport default baseIsArguments;\n","import baseIsArguments from './_baseIsArguments.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nexport default isArguments;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nexport default isArray;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nexport default isLength;\n","import isFunction from './isFunction.js';\nimport isLength from './isLength.js';\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nexport default isArrayLike;\n","import isArrayLike from './isArrayLike.js';\nimport isObjectLike from './isObjectLike.js';\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nexport default isArrayLikeObject;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nexport default stubFalse;\n","import root from './_root.js';\nimport stubFalse from './stubFalse.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nexport default isBuffer;\n","import baseGetTag from './_baseGetTag.js';\nimport getPrototype from './_getPrototype.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nexport default isPlainObject;\n","import baseGetTag from './_baseGetTag.js';\nimport isLength from './isLength.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nexport default baseIsTypedArray;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nexport default baseUnary;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nexport default nodeUtil;\n","import baseIsTypedArray from './_baseIsTypedArray.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nexport default isTypedArray;\n","/**\n * Gets the value at `key`, unless `key` is \"__proto__\" or \"constructor\".\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction safeGet(object, key) {\n  if (key === 'constructor' && typeof object[key] === 'function') {\n    return;\n  }\n\n  if (key == '__proto__') {\n    return;\n  }\n\n  return object[key];\n}\n\nexport default safeGet;\n","import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignValue;\n","import assignValue from './_assignValue.js';\nimport baseAssignValue from './_baseAssignValue.js';\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nexport default copyObject;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nexport default baseTimes;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nexport default isIndex;\n","import baseTimes from './_baseTimes.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isIndex from './_isIndex.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default arrayLikeKeys;\n","/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default nativeKeysIn;\n","import isObject from './isObject.js';\nimport isPrototype from './_isPrototype.js';\nimport nativeKeysIn from './_nativeKeysIn.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeysIn;\n","import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeysIn from './_baseKeysIn.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nexport default keysIn;\n","import copyObject from './_copyObject.js';\nimport keysIn from './keysIn.js';\n\n/**\n * Converts `value` to a plain object flattening inherited enumerable string\n * keyed properties of `value` to own properties of the plain object.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {Object} Returns the converted plain object.\n * @example\n *\n * function Foo() {\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.assign({ 'a': 1 }, new Foo);\n * // => { 'a': 1, 'b': 2 }\n *\n * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n * // => { 'a': 1, 'b': 2, 'c': 3 }\n */\nfunction toPlainObject(value) {\n  return copyObject(value, keysIn(value));\n}\n\nexport default toPlainObject;\n","import assignMergeValue from './_assignMergeValue.js';\nimport cloneBuffer from './_cloneBuffer.js';\nimport cloneTypedArray from './_cloneTypedArray.js';\nimport copyArray from './_copyArray.js';\nimport initCloneObject from './_initCloneObject.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isArrayLikeObject from './isArrayLikeObject.js';\nimport isBuffer from './isBuffer.js';\nimport isFunction from './isFunction.js';\nimport isObject from './isObject.js';\nimport isPlainObject from './isPlainObject.js';\nimport isTypedArray from './isTypedArray.js';\nimport safeGet from './_safeGet.js';\nimport toPlainObject from './toPlainObject.js';\n\n/**\n * A specialized version of `baseMerge` for arrays and objects which performs\n * deep merges and tracks traversed objects enabling objects with circular\n * references to be merged.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {string} key The key of the value to merge.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} mergeFunc The function to merge values.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n  var objValue = safeGet(object, key),\n      srcValue = safeGet(source, key),\n      stacked = stack.get(srcValue);\n\n  if (stacked) {\n    assignMergeValue(object, key, stacked);\n    return;\n  }\n  var newValue = customizer\n    ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n    : undefined;\n\n  var isCommon = newValue === undefined;\n\n  if (isCommon) {\n    var isArr = isArray(srcValue),\n        isBuff = !isArr && isBuffer(srcValue),\n        isTyped = !isArr && !isBuff && isTypedArray(srcValue);\n\n    newValue = srcValue;\n    if (isArr || isBuff || isTyped) {\n      if (isArray(objValue)) {\n        newValue = objValue;\n      }\n      else if (isArrayLikeObject(objValue)) {\n        newValue = copyArray(objValue);\n      }\n      else if (isBuff) {\n        isCommon = false;\n        newValue = cloneBuffer(srcValue, true);\n      }\n      else if (isTyped) {\n        isCommon = false;\n        newValue = cloneTypedArray(srcValue, true);\n      }\n      else {\n        newValue = [];\n      }\n    }\n    else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n      newValue = objValue;\n      if (isArguments(objValue)) {\n        newValue = toPlainObject(objValue);\n      }\n      else if (!isObject(objValue) || isFunction(objValue)) {\n        newValue = initCloneObject(srcValue);\n      }\n    }\n    else {\n      isCommon = false;\n    }\n  }\n  if (isCommon) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, newValue);\n    mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n    stack['delete'](srcValue);\n  }\n  assignMergeValue(object, key, newValue);\n}\n\nexport default baseMergeDeep;\n","import Stack from './_Stack.js';\nimport assignMergeValue from './_assignMergeValue.js';\nimport baseFor from './_baseFor.js';\nimport baseMergeDeep from './_baseMergeDeep.js';\nimport isObject from './isObject.js';\nimport keysIn from './keysIn.js';\nimport safeGet from './_safeGet.js';\n\n/**\n * The base implementation of `_.merge` without support for multiple sources.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} [customizer] The function to customize merged values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMerge(object, source, srcIndex, customizer, stack) {\n  if (object === source) {\n    return;\n  }\n  baseFor(source, function(srcValue, key) {\n    stack || (stack = new Stack);\n    if (isObject(srcValue)) {\n      baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n    }\n    else {\n      var newValue = customizer\n        ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      if (newValue === undefined) {\n        newValue = srcValue;\n      }\n      assignMergeValue(object, key, newValue);\n    }\n  }, keysIn);\n}\n\nexport default baseMerge;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nexport default identity;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nexport default apply;\n","import apply from './_apply.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nexport default overRest;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nexport default constant;\n","import constant from './constant.js';\nimport defineProperty from './_defineProperty.js';\nimport identity from './identity.js';\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nexport default baseSetToString;\n","/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nexport default shortOut;\n","import baseSetToString from './_baseSetToString.js';\nimport shortOut from './_shortOut.js';\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nexport default setToString;\n","import identity from './identity.js';\nimport overRest from './_overRest.js';\nimport setToString from './_setToString.js';\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nexport default baseRest;\n","import eq from './eq.js';\nimport isArrayLike from './isArrayLike.js';\nimport isIndex from './_isIndex.js';\nimport isObject from './isObject.js';\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nexport default isIterateeCall;\n","import baseRest from './_baseRest.js';\nimport isIterateeCall from './_isIterateeCall.js';\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nexport default createAssigner;\n","import baseMerge from './_baseMerge.js';\nimport createAssigner from './_createAssigner.js';\n\n/**\n * This method is like `_.assign` except that it recursively merges own and\n * inherited enumerable string keyed properties of source objects into the\n * destination object. Source properties that resolve to `undefined` are\n * skipped if a destination value exists. Array and plain object properties\n * are merged recursively. Other objects and value types are overridden by\n * assignment. Source objects are applied from left to right. Subsequent\n * sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 0.5.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = {\n *   'a': [{ 'b': 2 }, { 'd': 4 }]\n * };\n *\n * var other = {\n *   'a': [{ 'c': 3 }, { 'e': 5 }]\n * };\n *\n * _.merge(object, other);\n * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\n */\nvar merge = createAssigner(function(object, source, srcIndex) {\n  baseMerge(object, source, srcIndex);\n});\n\nexport default merge;\n","function _isNativeFunction(t) {\n  try {\n    return -1 !== Function.toString.call(t).indexOf(\"[native code]\");\n  } catch (n) {\n    return \"function\" == typeof t;\n  }\n}\nexport { _isNativeFunction as default };","import isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _construct(t, e, r) {\n  if (isNativeReflectConstruct()) return Reflect.construct.apply(null, arguments);\n  var o = [null];\n  o.push.apply(o, e);\n  var p = new (t.bind.apply(t, o))();\n  return r && setPrototypeOf(p, r.prototype), p;\n}\nexport { _construct as default };","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeFunction from \"./isNativeFunction.js\";\nimport construct from \"./construct.js\";\nfunction _wrapNativeSuper(t) {\n  var r = \"function\" == typeof Map ? new Map() : void 0;\n  return _wrapNativeSuper = function _wrapNativeSuper(t) {\n    if (null === t || !isNativeFunction(t)) return t;\n    if (\"function\" != typeof t) throw new TypeError(\"Super expression must either be null or a function\");\n    if (void 0 !== r) {\n      if (r.has(t)) return r.get(t);\n      r.set(t, Wrapper);\n    }\n    function Wrapper() {\n      return construct(t, arguments, getPrototypeOf(this).constructor);\n    }\n    return Wrapper.prototype = Object.create(t.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: !1,\n        writable: !0,\n        configurable: !0\n      }\n    }), setPrototypeOf(Wrapper, t);\n  }, _wrapNativeSuper(t);\n}\nexport { _wrapNativeSuper as default };","enum Scope {\n  TYPE = (1 << 2) - 1, // 0011 Lower two bits\n  LEVEL = ((1 << 2) - 1) << 2, // 1100 Higher two bits\n\n  ATTRIBUTE = (1 << 0) | LEVEL, // 1101\n  BLOT = (1 << 1) | LEVEL, // 1110\n  INLINE = (1 << 2) | TYPE, // 0111\n  BLOCK = (1 << 3) | TYPE, // 1011\n\n  BLOCK_BLOT = BLOCK & BLOT, // 1010\n  INLINE_BLOT = INLINE & BLOT, // 0110\n  BLOCK_ATTRIBUTE = BLOCK & ATTRIBUTE, // 1001\n  INLINE_ATTRIBUTE = INLINE & ATTRIBUTE, // 0101\n\n  ANY = TYPE | LEVEL,\n}\n\nexport default Scope;\n","import Scope from '../scope.js';\n\nexport interface AttributorOptions {\n  scope?: Scope;\n  whitelist?: string[];\n}\n\nexport default class Attributor {\n  public static keys(node: HTMLElement): string[] {\n    return Array.from(node.attributes).map((item: Attr) => item.name);\n  }\n\n  public scope: Scope;\n  public whitelist: string[] | undefined;\n\n  constructor(\n    public readonly attrName: string,\n    public readonly keyName: string,\n    options: AttributorOptions = {},\n  ) {\n    const attributeBit = Scope.TYPE & Scope.ATTRIBUTE;\n    this.scope =\n      options.scope != null\n        ? // Ignore type bits, force attribute bit\n          (options.scope & Scope.LEVEL) | attributeBit\n        : Scope.ATTRIBUTE;\n    if (options.whitelist != null) {\n      this.whitelist = options.whitelist;\n    }\n  }\n\n  public add(node: HTMLElement, value: any): boolean {\n    if (!this.canAdd(node, value)) {\n      return false;\n    }\n    node.setAttribute(this.keyName, value);\n    return true;\n  }\n\n  public canAdd(_node: HTMLElement, value: any): boolean {\n    if (this.whitelist == null) {\n      return true;\n    }\n    if (typeof value === 'string') {\n      return this.whitelist.indexOf(value.replace(/[\"']/g, '')) > -1;\n    } else {\n      return this.whitelist.indexOf(value) > -1;\n    }\n  }\n\n  public remove(node: HTMLElement): void {\n    node.removeAttribute(this.keyName);\n  }\n\n  public value(node: HTMLElement): any {\n    const value = node.getAttribute(this.keyName);\n    if (this.canAdd(node, value) && value) {\n      return value;\n    }\n    return '';\n  }\n}\n","export default class ParchmentError extends Error {\n  public message: string;\n  public name: string;\n  public stack!: string;\n\n  constructor(message: string) {\n    message = '[Parchment] ' + message;\n    super(message);\n    this.message = message;\n    this.name = this.constructor.name;\n  }\n}\n","import Attributor from './attributor/attributor.js';\nimport {\n  type Blot,\n  type BlotConstructor,\n  type Root,\n} from './blot/abstract/blot.js';\nimport ParchmentError from './error.js';\nimport Scope from './scope.js';\n\nexport type RegistryDefinition = Attributor | BlotConstructor;\n\nexport interface RegistryInterface {\n  create(scroll: Root, input: Node | string | Scope, value?: any): Blot;\n  query(query: string | Node | Scope, scope: Scope): RegistryDefinition | null;\n  register(...definitions: any[]): any;\n}\n\nexport default class Registry implements RegistryInterface {\n  public static blots = new WeakMap<Node, Blot>();\n\n  public static find(node?: Node | null, bubble = false): Blot | null {\n    if (node == null) {\n      return null;\n    }\n    if (this.blots.has(node)) {\n      return this.blots.get(node) || null;\n    }\n    if (bubble) {\n      let parentNode: Node | null = null;\n      try {\n        parentNode = node.parentNode;\n      } catch (err) {\n        // Probably hit a permission denied error.\n        // A known case is in Firefox, event targets can be anonymous DIVs\n        // inside an input element.\n        // https://bugzilla.mozilla.org/show_bug.cgi?id=208427\n        return null;\n      }\n      return this.find(parentNode, bubble);\n    }\n    return null;\n  }\n\n  private attributes: { [key: string]: Attributor } = {};\n  private classes: { [key: string]: BlotConstructor } = {};\n  private tags: { [key: string]: BlotConstructor } = {};\n  private types: { [key: string]: RegistryDefinition } = {};\n\n  public create(scroll: Root, input: Node | string | Scope, value?: any): Blot {\n    const match = this.query(input);\n    if (match == null) {\n      throw new ParchmentError(`Unable to create ${input} blot`);\n    }\n    const blotClass = match as BlotConstructor;\n    const node =\n      // @ts-expect-error Fix me later\n      input instanceof Node || input.nodeType === Node.TEXT_NODE\n        ? input\n        : blotClass.create(value);\n\n    const blot = new blotClass(scroll, node as Node, value);\n    Registry.blots.set(blot.domNode, blot);\n    return blot;\n  }\n\n  public find(node: Node | null, bubble = false): Blot | null {\n    return Registry.find(node, bubble);\n  }\n\n  public query(\n    query: string | Node | Scope,\n    scope: Scope = Scope.ANY,\n  ): RegistryDefinition | null {\n    let match;\n    if (typeof query === 'string') {\n      match = this.types[query] || this.attributes[query];\n      // @ts-expect-error Fix me later\n    } else if (query instanceof Text || query.nodeType === Node.TEXT_NODE) {\n      match = this.types.text;\n    } else if (typeof query === 'number') {\n      if (query & Scope.LEVEL & Scope.BLOCK) {\n        match = this.types.block;\n      } else if (query & Scope.LEVEL & Scope.INLINE) {\n        match = this.types.inline;\n      }\n    } else if (query instanceof Element) {\n      const names = (query.getAttribute('class') || '').split(/\\s+/);\n      names.some((name) => {\n        match = this.classes[name];\n        if (match) {\n          return true;\n        }\n        return false;\n      });\n      match = match || this.tags[query.tagName];\n    }\n    if (match == null) {\n      return null;\n    }\n    if (\n      'scope' in match &&\n      scope & Scope.LEVEL & match.scope &&\n      scope & Scope.TYPE & match.scope\n    ) {\n      return match;\n    }\n    return null;\n  }\n\n  public register(...definitions: RegistryDefinition[]): RegistryDefinition[] {\n    return definitions.map((definition) => {\n      const isBlot = 'blotName' in definition;\n      const isAttr = 'attrName' in definition;\n      if (!isBlot && !isAttr) {\n        throw new ParchmentError('Invalid definition');\n      } else if (isBlot && definition.blotName === 'abstract') {\n        throw new ParchmentError('Cannot register abstract class');\n      }\n      const key = isBlot\n        ? definition.blotName\n        : isAttr\n          ? definition.attrName\n          : (undefined as never); // already handled by above checks\n      this.types[key] = definition;\n\n      if (isAttr) {\n        if (typeof definition.keyName === 'string') {\n          this.attributes[definition.keyName] = definition;\n        }\n      } else if (isBlot) {\n        if (definition.className) {\n          this.classes[definition.className] = definition;\n        }\n        if (definition.tagName) {\n          if (Array.isArray(definition.tagName)) {\n            definition.tagName = definition.tagName.map((tagName: string) => {\n              return tagName.toUpperCase();\n            });\n          } else {\n            definition.tagName = definition.tagName.toUpperCase();\n          }\n          const tagNames = Array.isArray(definition.tagName)\n            ? definition.tagName\n            : [definition.tagName];\n          tagNames.forEach((tag: string) => {\n            if (this.tags[tag] == null || definition.className == null) {\n              this.tags[tag] = definition;\n            }\n          });\n        }\n      }\n      return definition;\n    });\n  }\n}\n","import Attributor from './attributor.js';\n\nfunction match(node: HTMLElement, prefix: string): string[] {\n  const className = node.getAttribute('class') || '';\n  return className\n    .split(/\\s+/)\n    .filter((name) => name.indexOf(`${prefix}-`) === 0);\n}\n\nclass ClassAttributor extends Attributor {\n  public static keys(node: HTMLElement): string[] {\n    return (node.getAttribute('class') || '')\n      .split(/\\s+/)\n      .map((name) => name.split('-').slice(0, -1).join('-'));\n  }\n\n  public add(node: HTMLElement, value: any): boolean {\n    if (!this.canAdd(node, value)) {\n      return false;\n    }\n    this.remove(node);\n    node.classList.add(`${this.keyName}-${value}`);\n    return true;\n  }\n\n  public remove(node: HTMLElement): void {\n    const matches = match(node, this.keyName);\n    matches.forEach((name) => {\n      node.classList.remove(name);\n    });\n    if (node.classList.length === 0) {\n      node.removeAttribute('class');\n    }\n  }\n\n  public value(node: HTMLElement): any {\n    const result = match(node, this.keyName)[0] || '';\n    const value = result.slice(this.keyName.length + 1); // +1 for hyphen\n    return this.canAdd(node, value) ? value : '';\n  }\n}\n\nexport default ClassAttributor;\n","import Attributor from './attributor.js';\n\nfunction camelize(name: string): string {\n  const parts = name.split('-');\n  const rest = parts\n    .slice(1)\n    .map((part: string) => part[0].toUpperCase() + part.slice(1))\n    .join('');\n  return parts[0] + rest;\n}\n\nclass StyleAttributor extends Attributor {\n  public static keys(node: HTMLElement): string[] {\n    return (node.getAttribute('style') || '').split(';').map((value) => {\n      const arr = value.split(':');\n      return arr[0].trim();\n    });\n  }\n\n  public add(node: HTMLElement, value: any): boolean {\n    if (!this.canAdd(node, value)) {\n      return false;\n    }\n    // @ts-expect-error Fix me later\n    node.style[camelize(this.keyName)] = value;\n    return true;\n  }\n\n  public remove(node: HTMLElement): void {\n    // @ts-expect-error Fix me later\n    node.style[camelize(this.keyName)] = '';\n    if (!node.getAttribute('style')) {\n      node.removeAttribute('style');\n    }\n  }\n\n  public value(node: HTMLElement): any {\n    // @ts-expect-error Fix me later\n    const value = node.style[camelize(this.keyName)];\n    return this.canAdd(node, value) ? value : '';\n  }\n}\n\nexport default StyleAttributor;\n","import type { Formattable } from '../blot/abstract/blot.js';\nimport Registry from '../registry.js';\nimport Scope from '../scope.js';\nimport Attributor from './attributor.js';\nimport ClassAttributor from './class.js';\nimport StyleAttributor from './style.js';\n\nclass AttributorStore {\n  private attributes: { [key: string]: Attributor } = {};\n  private domNode: HTMLElement;\n\n  constructor(domNode: HTMLElement) {\n    this.domNode = domNode;\n    this.build();\n  }\n\n  public attribute(attribute: Attributor, value: any): void {\n    // verb\n    if (value) {\n      if (attribute.add(this.domNode, value)) {\n        if (attribute.value(this.domNode) != null) {\n          this.attributes[attribute.attrName] = attribute;\n        } else {\n          delete this.attributes[attribute.attrName];\n        }\n      }\n    } else {\n      attribute.remove(this.domNode);\n      delete this.attributes[attribute.attrName];\n    }\n  }\n\n  public build(): void {\n    this.attributes = {};\n    const blot = Registry.find(this.domNode);\n    if (blot == null) {\n      return;\n    }\n    const attributes = Attributor.keys(this.domNode);\n    const classes = ClassAttributor.keys(this.domNode);\n    const styles = StyleAttributor.keys(this.domNode);\n    attributes\n      .concat(classes)\n      .concat(styles)\n      .forEach((name) => {\n        const attr = blot.scroll.query(name, Scope.ATTRIBUTE);\n        if (attr instanceof Attributor) {\n          this.attributes[attr.attrName] = attr;\n        }\n      });\n  }\n\n  public copy(target: Formattable): void {\n    Object.keys(this.attributes).forEach((key) => {\n      const value = this.attributes[key].value(this.domNode);\n      target.format(key, value);\n    });\n  }\n\n  public move(target: Formattable): void {\n    this.copy(target);\n    Object.keys(this.attributes).forEach((key) => {\n      this.attributes[key].remove(this.domNode);\n    });\n    this.attributes = {};\n  }\n\n  public values(): { [key: string]: any } {\n    return Object.keys(this.attributes).reduce(\n      (attributes: { [key: string]: any }, name: string) => {\n        attributes[name] = this.attributes[name].value(this.domNode);\n        return attributes;\n      },\n      {},\n    );\n  }\n}\n\nexport default AttributorStore;\n","import ParchmentError from '../../error.js';\nimport Registry from '../../registry.js';\nimport Scope from '../../scope.js';\nimport type {\n  Blot,\n  BlotConstructor,\n  Formattable,\n  Parent,\n  Root,\n} from './blot.js';\n\nclass ShadowBlot implements Blot {\n  public static blotName = 'abstract';\n  public static className: string;\n  public static requiredContainer: BlotConstructor;\n  public static scope: Scope;\n  public static tagName: string | string[];\n\n  public static create(rawValue?: unknown): Node {\n    if (this.tagName == null) {\n      throw new ParchmentError('Blot definition missing tagName');\n    }\n    let node: HTMLElement;\n    let value: string | number | undefined;\n    if (Array.isArray(this.tagName)) {\n      if (typeof rawValue === 'string') {\n        value = rawValue.toUpperCase();\n        if (parseInt(value, 10).toString() === value) {\n          value = parseInt(value, 10);\n        }\n      } else if (typeof rawValue === 'number') {\n        value = rawValue;\n      }\n      if (typeof value === 'number') {\n        node = document.createElement(this.tagName[value - 1]);\n      } else if (value && this.tagName.indexOf(value) > -1) {\n        node = document.createElement(value);\n      } else {\n        node = document.createElement(this.tagName[0]);\n      }\n    } else {\n      node = document.createElement(this.tagName);\n    }\n    if (this.className) {\n      node.classList.add(this.className);\n    }\n    return node;\n  }\n\n  public prev: Blot | null;\n  public next: Blot | null;\n  // @ts-expect-error Fix me later\n  public parent: Parent;\n\n  // Hack for accessing inherited static methods\n  get statics(): any {\n    return this.constructor;\n  }\n  constructor(\n    public scroll: Root,\n    public domNode: Node,\n  ) {\n    Registry.blots.set(domNode, this);\n    this.prev = null;\n    this.next = null;\n  }\n\n  public attach(): void {\n    // Nothing to do\n  }\n\n  public clone(): Blot {\n    const domNode = this.domNode.cloneNode(false);\n    return this.scroll.create(domNode);\n  }\n\n  public detach(): void {\n    if (this.parent != null) {\n      this.parent.removeChild(this);\n    }\n    Registry.blots.delete(this.domNode);\n  }\n\n  public deleteAt(index: number, length: number): void {\n    const blot = this.isolate(index, length);\n    blot.remove();\n  }\n\n  public formatAt(\n    index: number,\n    length: number,\n    name: string,\n    value: any,\n  ): void {\n    const blot = this.isolate(index, length);\n    if (this.scroll.query(name, Scope.BLOT) != null && value) {\n      blot.wrap(name, value);\n    } else if (this.scroll.query(name, Scope.ATTRIBUTE) != null) {\n      const parent = this.scroll.create(this.statics.scope) as Parent &\n        Formattable;\n      blot.wrap(parent);\n      parent.format(name, value);\n    }\n  }\n\n  public insertAt(index: number, value: string, def?: any): void {\n    const blot =\n      def == null\n        ? this.scroll.create('text', value)\n        : this.scroll.create(value, def);\n    const ref = this.split(index);\n    this.parent.insertBefore(blot, ref || undefined);\n  }\n\n  public isolate(index: number, length: number): Blot {\n    const target = this.split(index);\n    if (target == null) {\n      throw new Error('Attempt to isolate at end');\n    }\n    target.split(length);\n    return target;\n  }\n\n  public length(): number {\n    return 1;\n  }\n\n  public offset(root: Blot = this.parent): number {\n    if (this.parent == null || this === root) {\n      return 0;\n    }\n    return this.parent.children.offset(this) + this.parent.offset(root);\n  }\n\n  public optimize(_context?: { [key: string]: any }): void {\n    if (\n      this.statics.requiredContainer &&\n      !(this.parent instanceof this.statics.requiredContainer)\n    ) {\n      this.wrap(this.statics.requiredContainer.blotName);\n    }\n  }\n\n  public remove(): void {\n    if (this.domNode.parentNode != null) {\n      this.domNode.parentNode.removeChild(this.domNode);\n    }\n    this.detach();\n  }\n\n  public replaceWith(name: string | Blot, value?: any): Blot {\n    const replacement =\n      typeof name === 'string' ? this.scroll.create(name, value) : name;\n    if (this.parent != null) {\n      this.parent.insertBefore(replacement, this.next || undefined);\n      this.remove();\n    }\n    return replacement;\n  }\n\n  public split(index: number, _force?: boolean): Blot | null {\n    return index === 0 ? this : this.next;\n  }\n\n  public update(\n    _mutations: MutationRecord[],\n    _context: { [key: string]: any },\n  ): void {\n    // Nothing to do by default\n  }\n\n  public wrap(name: string | Parent, value?: any): Parent {\n    const wrapper =\n      typeof name === 'string'\n        ? (this.scroll.create(name, value) as Parent)\n        : name;\n    if (this.parent != null) {\n      this.parent.insertBefore(wrapper, this.next || undefined);\n    }\n    if (typeof wrapper.appendChild !== 'function') {\n      throw new ParchmentError(`Cannot wrap ${name}`);\n    }\n    wrapper.appendChild(this);\n    return wrapper;\n  }\n}\n\nexport default ShadowBlot;\n","import Scope from '../../scope.js';\nimport type { Leaf } from './blot.js';\nimport ShadowBlot from './shadow.js';\n\nclass LeafBlot extends ShadowBlot implements Leaf {\n  public static scope = Scope.INLINE_BLOT;\n\n  /**\n   * Returns the value represented by domNode if it is this Blot's type\n   * No checking that domNode can represent this Blot type is required so\n   * applications needing it should check externally before calling.\n   */\n  public static value(_domNode: Node): any {\n    return true;\n  }\n\n  /**\n   * Given location represented by node and offset from DOM Selection Range,\n   * return index to that location.\n   */\n  public index(node: Node, offset: number): number {\n    if (\n      this.domNode === node ||\n      this.domNode.compareDocumentPosition(node) &\n        Node.DOCUMENT_POSITION_CONTAINED_BY\n    ) {\n      return Math.min(offset, 1);\n    }\n    return -1;\n  }\n\n  /**\n   * Given index to location within blot, return node and offset representing\n   * that location, consumable by DOM Selection Range\n   */\n  public position(index: number, _inclusive?: boolean): [Node, number] {\n    const childNodes: Node[] = Array.from(this.parent.domNode.childNodes);\n    let offset = childNodes.indexOf(this.domNode);\n    if (index > 0) {\n      offset += 1;\n    }\n    return [this.parent.domNode, offset];\n  }\n\n  /**\n   * Return value represented by this blot\n   * Should not change without interaction from API or\n   * user change detectable by update()\n   */\n  public value(): any {\n    return {\n      [this.statics.blotName]: this.statics.value(this.domNode) || true,\n    };\n  }\n}\n\nexport default LeafBlot;\n","import type LinkedNode from './linked-node.js';\n\nclass LinkedList<T extends LinkedNode> {\n  public head: T | null;\n  public tail: T | null;\n  public length: number;\n\n  constructor() {\n    this.head = null;\n    this.tail = null;\n    this.length = 0;\n  }\n\n  public append(...nodes: T[]): void {\n    this.insertBefore(nodes[0], null);\n    if (nodes.length > 1) {\n      const rest = nodes.slice(1);\n      this.append(...rest);\n    }\n  }\n\n  public at(index: number): T | null {\n    const next = this.iterator();\n    let cur = next();\n    while (cur && index > 0) {\n      index -= 1;\n      cur = next();\n    }\n    return cur;\n  }\n\n  public contains(node: T): boolean {\n    const next = this.iterator();\n    let cur = next();\n    while (cur) {\n      if (cur === node) {\n        return true;\n      }\n      cur = next();\n    }\n    return false;\n  }\n\n  public indexOf(node: T): number {\n    const next = this.iterator();\n    let cur = next();\n    let index = 0;\n    while (cur) {\n      if (cur === node) {\n        return index;\n      }\n      index += 1;\n      cur = next();\n    }\n    return -1;\n  }\n\n  public insertBefore(node: T | null, refNode: T | null): void {\n    if (node == null) {\n      return;\n    }\n    this.remove(node);\n    node.next = refNode;\n    if (refNode != null) {\n      node.prev = refNode.prev;\n      if (refNode.prev != null) {\n        refNode.prev.next = node;\n      }\n      refNode.prev = node;\n      if (refNode === this.head) {\n        this.head = node;\n      }\n    } else if (this.tail != null) {\n      this.tail.next = node;\n      node.prev = this.tail;\n      this.tail = node;\n    } else {\n      node.prev = null;\n      this.head = this.tail = node;\n    }\n    this.length += 1;\n  }\n\n  public offset(target: T): number {\n    let index = 0;\n    let cur = this.head;\n    while (cur != null) {\n      if (cur === target) {\n        return index;\n      }\n      index += cur.length();\n      cur = cur.next as T;\n    }\n    return -1;\n  }\n\n  public remove(node: T): void {\n    if (!this.contains(node)) {\n      return;\n    }\n    if (node.prev != null) {\n      node.prev.next = node.next;\n    }\n    if (node.next != null) {\n      node.next.prev = node.prev;\n    }\n    if (node === this.head) {\n      this.head = node.next as T;\n    }\n    if (node === this.tail) {\n      this.tail = node.prev as T;\n    }\n    this.length -= 1;\n  }\n\n  public iterator(curNode: T | null = this.head): () => T | null {\n    // TODO use yield when we can\n    return (): T | null => {\n      const ret = curNode;\n      if (curNode != null) {\n        curNode = curNode.next as T;\n      }\n      return ret;\n    };\n  }\n\n  public find(index: number, inclusive = false): [T | null, number] {\n    const next = this.iterator();\n    let cur = next();\n    while (cur) {\n      const length = cur.length();\n      if (\n        index < length ||\n        (inclusive &&\n          index === length &&\n          (cur.next == null || cur.next.length() !== 0))\n      ) {\n        return [cur, index];\n      }\n      index -= length;\n      cur = next();\n    }\n    return [null, 0];\n  }\n\n  public forEach(callback: (cur: T) => void): void {\n    const next = this.iterator();\n    let cur = next();\n    while (cur) {\n      callback(cur);\n      cur = next();\n    }\n  }\n\n  public forEachAt(\n    index: number,\n    length: number,\n    callback: (cur: T, offset: number, length: number) => void,\n  ): void {\n    if (length <= 0) {\n      return;\n    }\n    const [startNode, offset] = this.find(index);\n    let curIndex = index - offset;\n    const next = this.iterator(startNode);\n    let cur = next();\n    while (cur && curIndex < index + length) {\n      const curLength = cur.length();\n      if (index > curIndex) {\n        callback(\n          cur,\n          index - curIndex,\n          Math.min(length, curIndex + curLength - index),\n        );\n      } else {\n        callback(cur, 0, Math.min(curLength, index + length - curIndex));\n      }\n      curIndex += curLength;\n      cur = next();\n    }\n  }\n\n  public map(callback: (cur: T) => any): any[] {\n    return this.reduce((memo: T[], cur: T) => {\n      memo.push(callback(cur));\n      return memo;\n    }, []);\n  }\n\n  public reduce<M>(callback: (memo: M, cur: T) => M, memo: M): M {\n    const next = this.iterator();\n    let cur = next();\n    while (cur) {\n      memo = callback(memo, cur);\n      cur = next();\n    }\n    return memo;\n  }\n}\n\nexport default LinkedList;\n","import LinkedList from '../../collection/linked-list.js';\nimport ParchmentError from '../../error.js';\nimport Scope from '../../scope.js';\nimport type { Blot, BlotConstructor, Parent, Root } from './blot.js';\nimport ShadowBlot from './shadow.js';\n\nfunction makeAttachedBlot(node: Node, scroll: Root): Blot {\n  const found = scroll.find(node);\n  if (found) return found;\n  try {\n    return scroll.create(node);\n  } catch (e) {\n    const blot = scroll.create(Scope.INLINE);\n    Array.from(node.childNodes).forEach((child: Node) => {\n      blot.domNode.appendChild(child);\n    });\n    if (node.parentNode) {\n      node.parentNode.replaceChild(blot.domNode, node);\n    }\n    blot.attach();\n    return blot;\n  }\n}\n\nclass ParentBlot extends ShadowBlot implements Parent {\n  /**\n   * Whitelist array of Blots that can be direct children.\n   */\n  public static allowedChildren?: BlotConstructor[];\n\n  /**\n   * Default child blot to be inserted if this blot becomes empty.\n   */\n  public static defaultChild?: BlotConstructor;\n  public static uiClass = '';\n\n  public children!: LinkedList<Blot>;\n  public domNode!: HTMLElement;\n  public uiNode: HTMLElement | null = null;\n\n  constructor(scroll: Root, domNode: Node) {\n    super(scroll, domNode);\n    this.build();\n  }\n\n  public appendChild(other: Blot): void {\n    this.insertBefore(other);\n  }\n\n  public attach(): void {\n    super.attach();\n    this.children.forEach((child) => {\n      child.attach();\n    });\n  }\n\n  public attachUI(node: HTMLElement): void {\n    if (this.uiNode != null) {\n      this.uiNode.remove();\n    }\n    this.uiNode = node;\n    if (ParentBlot.uiClass) {\n      this.uiNode.classList.add(ParentBlot.uiClass);\n    }\n    this.uiNode.setAttribute('contenteditable', 'false');\n    this.domNode.insertBefore(this.uiNode, this.domNode.firstChild);\n  }\n\n  /**\n   * Called during construction, should fill its own children LinkedList.\n   */\n  public build(): void {\n    this.children = new LinkedList<Blot>();\n    // Need to be reversed for if DOM nodes already in order\n    Array.from(this.domNode.childNodes)\n      .filter((node: Node) => node !== this.uiNode)\n      .reverse()\n      .forEach((node: Node) => {\n        try {\n          const child = makeAttachedBlot(node, this.scroll);\n          this.insertBefore(child, this.children.head || undefined);\n        } catch (err) {\n          if (err instanceof ParchmentError) {\n            return;\n          } else {\n            throw err;\n          }\n        }\n      });\n  }\n\n  public deleteAt(index: number, length: number): void {\n    if (index === 0 && length === this.length()) {\n      return this.remove();\n    }\n    this.children.forEachAt(index, length, (child, offset, childLength) => {\n      child.deleteAt(offset, childLength);\n    });\n  }\n\n  public descendant<T extends Blot>(\n    criteria: new (...args: any[]) => T,\n    index: number,\n  ): [T | null, number];\n  public descendant(\n    criteria: (blot: Blot) => boolean,\n    index: number,\n  ): [Blot | null, number];\n  public descendant(criteria: any, index = 0): [Blot | null, number] {\n    const [child, offset] = this.children.find(index);\n    if (\n      (criteria.blotName == null && criteria(child)) ||\n      (criteria.blotName != null && child instanceof criteria)\n    ) {\n      return [child as any, offset];\n    } else if (child instanceof ParentBlot) {\n      return child.descendant(criteria, offset);\n    } else {\n      return [null, -1];\n    }\n  }\n\n  public descendants<T extends Blot>(\n    criteria: new (...args: any[]) => T,\n    index?: number,\n    length?: number,\n  ): T[];\n  public descendants(\n    criteria: (blot: Blot) => boolean,\n    index?: number,\n    length?: number,\n  ): Blot[];\n  public descendants(\n    criteria: any,\n    index = 0,\n    length: number = Number.MAX_VALUE,\n  ): Blot[] {\n    let descendants: Blot[] = [];\n    let lengthLeft = length;\n    this.children.forEachAt(\n      index,\n      length,\n      (child: Blot, childIndex: number, childLength: number) => {\n        if (\n          (criteria.blotName == null && criteria(child)) ||\n          (criteria.blotName != null && child instanceof criteria)\n        ) {\n          descendants.push(child);\n        }\n        if (child instanceof ParentBlot) {\n          descendants = descendants.concat(\n            child.descendants(criteria, childIndex, lengthLeft),\n          );\n        }\n        lengthLeft -= childLength;\n      },\n    );\n    return descendants;\n  }\n\n  public detach(): void {\n    this.children.forEach((child) => {\n      child.detach();\n    });\n    super.detach();\n  }\n\n  public enforceAllowedChildren(): void {\n    let done = false;\n    this.children.forEach((child: Blot) => {\n      if (done) {\n        return;\n      }\n      const allowed = this.statics.allowedChildren.some(\n        (def: BlotConstructor) => child instanceof def,\n      );\n      if (allowed) {\n        return;\n      }\n      if (child.statics.scope === Scope.BLOCK_BLOT) {\n        if (child.next != null) {\n          this.splitAfter(child);\n        }\n        if (child.prev != null) {\n          this.splitAfter(child.prev);\n        }\n        child.parent.unwrap();\n        done = true;\n      } else if (child instanceof ParentBlot) {\n        child.unwrap();\n      } else {\n        child.remove();\n      }\n    });\n  }\n\n  public formatAt(\n    index: number,\n    length: number,\n    name: string,\n    value: any,\n  ): void {\n    this.children.forEachAt(index, length, (child, offset, childLength) => {\n      child.formatAt(offset, childLength, name, value);\n    });\n  }\n\n  public insertAt(index: number, value: string, def?: any): void {\n    const [child, offset] = this.children.find(index);\n    if (child) {\n      child.insertAt(offset, value, def);\n    } else {\n      const blot =\n        def == null\n          ? this.scroll.create('text', value)\n          : this.scroll.create(value, def);\n      this.appendChild(blot);\n    }\n  }\n\n  public insertBefore(childBlot: Blot, refBlot?: Blot | null): void {\n    if (childBlot.parent != null) {\n      childBlot.parent.children.remove(childBlot);\n    }\n    let refDomNode: Node | null = null;\n    this.children.insertBefore(childBlot, refBlot || null);\n    childBlot.parent = this;\n    if (refBlot != null) {\n      refDomNode = refBlot.domNode;\n    }\n    if (\n      this.domNode.parentNode !== childBlot.domNode ||\n      this.domNode.nextSibling !== refDomNode\n    ) {\n      this.domNode.insertBefore(childBlot.domNode, refDomNode);\n    }\n    childBlot.attach();\n  }\n\n  public length(): number {\n    return this.children.reduce((memo, child) => {\n      return memo + child.length();\n    }, 0);\n  }\n\n  public moveChildren(targetParent: Parent, refNode?: Blot | null): void {\n    this.children.forEach((child) => {\n      targetParent.insertBefore(child, refNode);\n    });\n  }\n\n  public optimize(context?: { [key: string]: any }): void {\n    super.optimize(context);\n    this.enforceAllowedChildren();\n    if (this.uiNode != null && this.uiNode !== this.domNode.firstChild) {\n      this.domNode.insertBefore(this.uiNode, this.domNode.firstChild);\n    }\n    if (this.children.length === 0) {\n      if (this.statics.defaultChild != null) {\n        const child = this.scroll.create(this.statics.defaultChild.blotName);\n        this.appendChild(child);\n        // TODO double check if necessary\n        // child.optimize(context);\n      } else {\n        this.remove();\n      }\n    }\n  }\n\n  public path(index: number, inclusive = false): [Blot, number][] {\n    const [child, offset] = this.children.find(index, inclusive);\n    const position: [Blot, number][] = [[this, index]];\n    if (child instanceof ParentBlot) {\n      return position.concat(child.path(offset, inclusive));\n    } else if (child != null) {\n      position.push([child, offset]);\n    }\n    return position;\n  }\n\n  public removeChild(child: Blot): void {\n    this.children.remove(child);\n  }\n\n  public replaceWith(name: string | Blot, value?: any): Blot {\n    const replacement =\n      typeof name === 'string' ? this.scroll.create(name, value) : name;\n    if (replacement instanceof ParentBlot) {\n      this.moveChildren(replacement);\n    }\n    return super.replaceWith(replacement);\n  }\n\n  public split(index: number, force = false): Blot | null {\n    if (!force) {\n      if (index === 0) {\n        return this;\n      }\n      if (index === this.length()) {\n        return this.next;\n      }\n    }\n    const after = this.clone() as ParentBlot;\n    if (this.parent) {\n      this.parent.insertBefore(after, this.next || undefined);\n    }\n    this.children.forEachAt(index, this.length(), (child, offset, _length) => {\n      const split = child.split(offset, force);\n      if (split != null) {\n        after.appendChild(split);\n      }\n    });\n    return after;\n  }\n\n  public splitAfter(child: Blot): Parent {\n    const after = this.clone() as ParentBlot;\n    while (child.next != null) {\n      after.appendChild(child.next);\n    }\n    if (this.parent) {\n      this.parent.insertBefore(after, this.next || undefined);\n    }\n    return after;\n  }\n\n  public unwrap(): void {\n    if (this.parent) {\n      this.moveChildren(this.parent, this.next || undefined);\n    }\n    this.remove();\n  }\n\n  public update(\n    mutations: MutationRecord[],\n    _context: { [key: string]: any },\n  ): void {\n    const addedNodes: Node[] = [];\n    const removedNodes: Node[] = [];\n    mutations.forEach((mutation) => {\n      if (mutation.target === this.domNode && mutation.type === 'childList') {\n        addedNodes.push(...mutation.addedNodes);\n        removedNodes.push(...mutation.removedNodes);\n      }\n    });\n    removedNodes.forEach((node: Node) => {\n      // Check node has actually been removed\n      // One exception is Chrome does not immediately remove IFRAMEs\n      // from DOM but MutationRecord is correct in its reported removal\n      if (\n        node.parentNode != null &&\n        // @ts-expect-error Fix me later\n        node.tagName !== 'IFRAME' &&\n        document.body.compareDocumentPosition(node) &\n          Node.DOCUMENT_POSITION_CONTAINED_BY\n      ) {\n        return;\n      }\n      const blot = this.scroll.find(node);\n      if (blot == null) {\n        return;\n      }\n      if (\n        blot.domNode.parentNode == null ||\n        blot.domNode.parentNode === this.domNode\n      ) {\n        blot.detach();\n      }\n    });\n    addedNodes\n      .filter((node) => {\n        return node.parentNode === this.domNode && node !== this.uiNode;\n      })\n      .sort((a, b) => {\n        if (a === b) {\n          return 0;\n        }\n        if (a.compareDocumentPosition(b) & Node.DOCUMENT_POSITION_FOLLOWING) {\n          return 1;\n        }\n        return -1;\n      })\n      .forEach((node) => {\n        let refBlot: Blot | null = null;\n        if (node.nextSibling != null) {\n          refBlot = this.scroll.find(node.nextSibling);\n        }\n        const blot = makeAttachedBlot(node, this.scroll);\n        if (blot.next !== refBlot || blot.next == null) {\n          if (blot.parent != null) {\n            blot.parent.removeChild(this);\n          }\n          this.insertBefore(blot, refBlot || undefined);\n        }\n      });\n    this.enforceAllowedChildren();\n  }\n}\n\nexport default ParentBlot;\n","import Attributor from '../attributor/attributor.js';\nimport AttributorStore from '../attributor/store.js';\nimport Scope from '../scope.js';\nimport type {\n  Blot,\n  BlotConstructor,\n  Formattable,\n  Parent,\n  Root,\n} from './abstract/blot.js';\nimport LeafBlot from './abstract/leaf.js';\nimport ParentBlot from './abstract/parent.js';\n\n// Shallow object comparison\nfunction isEqual(\n  obj1: Record<string, unknown>,\n  obj2: Record<string, unknown>,\n): boolean {\n  if (Object.keys(obj1).length !== Object.keys(obj2).length) {\n    return false;\n  }\n  for (const prop in obj1) {\n    if (obj1[prop] !== obj2[prop]) {\n      return false;\n    }\n  }\n  return true;\n}\n\nclass InlineBlot extends ParentBlot implements Formattable {\n  public static allowedChildren: BlotConstructor[] = [InlineBlot, LeafBlot];\n  public static blotName = 'inline';\n  public static scope = Scope.INLINE_BLOT;\n  public static tagName: string | string[] = 'SPAN';\n\n  static create(value?: unknown) {\n    return super.create(value) as HTMLElement;\n  }\n\n  public static formats(domNode: HTMLElement, scroll: Root): any {\n    const match = scroll.query(InlineBlot.blotName);\n    if (\n      match != null &&\n      domNode.tagName === (match as BlotConstructor).tagName\n    ) {\n      return undefined;\n    } else if (typeof this.tagName === 'string') {\n      return true;\n    } else if (Array.isArray(this.tagName)) {\n      return domNode.tagName.toLowerCase();\n    }\n    return undefined;\n  }\n\n  protected attributes: AttributorStore;\n\n  constructor(scroll: Root, domNode: Node) {\n    super(scroll, domNode);\n    this.attributes = new AttributorStore(this.domNode);\n  }\n\n  public format(name: string, value: any): void {\n    if (name === this.statics.blotName && !value) {\n      this.children.forEach((child) => {\n        if (!(child instanceof InlineBlot)) {\n          child = child.wrap(InlineBlot.blotName, true);\n        }\n        this.attributes.copy(child as InlineBlot);\n      });\n      this.unwrap();\n    } else {\n      const format = this.scroll.query(name, Scope.INLINE);\n      if (format == null) {\n        return;\n      }\n      if (format instanceof Attributor) {\n        this.attributes.attribute(format, value);\n      } else if (\n        value &&\n        (name !== this.statics.blotName || this.formats()[name] !== value)\n      ) {\n        this.replaceWith(name, value);\n      }\n    }\n  }\n\n  public formats(): { [index: string]: any } {\n    const formats = this.attributes.values();\n    const format = this.statics.formats(this.domNode, this.scroll);\n    if (format != null) {\n      formats[this.statics.blotName] = format;\n    }\n    return formats;\n  }\n\n  public formatAt(\n    index: number,\n    length: number,\n    name: string,\n    value: any,\n  ): void {\n    if (\n      this.formats()[name] != null ||\n      this.scroll.query(name, Scope.ATTRIBUTE)\n    ) {\n      const blot = this.isolate(index, length) as InlineBlot;\n      blot.format(name, value);\n    } else {\n      super.formatAt(index, length, name, value);\n    }\n  }\n\n  public optimize(context: { [key: string]: any }): void {\n    super.optimize(context);\n    const formats = this.formats();\n    if (Object.keys(formats).length === 0) {\n      return this.unwrap(); // unformatted span\n    }\n    const next = this.next;\n    if (\n      next instanceof InlineBlot &&\n      next.prev === this &&\n      isEqual(formats, next.formats())\n    ) {\n      next.moveChildren(this);\n      next.remove();\n    }\n  }\n\n  public replaceWith(name: string | Blot, value?: any): Blot {\n    const replacement = super.replaceWith(name, value) as InlineBlot;\n    this.attributes.copy(replacement);\n    return replacement;\n  }\n\n  public update(\n    mutations: MutationRecord[],\n    context: { [key: string]: any },\n  ): void {\n    super.update(mutations, context);\n    const attributeChanged = mutations.some(\n      (mutation) =>\n        mutation.target === this.domNode && mutation.type === 'attributes',\n    );\n    if (attributeChanged) {\n      this.attributes.build();\n    }\n  }\n\n  public wrap(name: string | Parent, value?: any): Parent {\n    const wrapper = super.wrap(name, value);\n    if (wrapper instanceof InlineBlot) {\n      this.attributes.move(wrapper);\n    }\n    return wrapper;\n  }\n}\n\nexport default InlineBlot;\n","import Attributor from '../attributor/attributor.js';\nimport AttributorStore from '../attributor/store.js';\nimport Scope from '../scope.js';\nimport type {\n  Blot,\n  BlotConstructor,\n  Formattable,\n  Root,\n} from './abstract/blot.js';\nimport LeafBlot from './abstract/leaf.js';\nimport ParentBlot from './abstract/parent.js';\nimport InlineBlot from './inline.js';\n\nclass BlockBlot extends ParentBlot implements Formattable {\n  public static blotName = 'block';\n  public static scope = Scope.BLOCK_BLOT;\n  public static tagName: string | string[] = 'P';\n  public static allowedChildren: BlotConstructor[] = [\n    InlineBlot,\n    BlockBlot,\n    LeafBlot,\n  ];\n\n  static create(value?: unknown) {\n    return super.create(value) as HTMLElement;\n  }\n\n  public static formats(domNode: HTMLElement, scroll: Root): any {\n    const match = scroll.query(BlockBlot.blotName);\n    if (\n      match != null &&\n      domNode.tagName === (match as BlotConstructor).tagName\n    ) {\n      return undefined;\n    } else if (typeof this.tagName === 'string') {\n      return true;\n    } else if (Array.isArray(this.tagName)) {\n      return domNode.tagName.toLowerCase();\n    }\n  }\n\n  protected attributes: AttributorStore;\n\n  constructor(scroll: Root, domNode: Node) {\n    super(scroll, domNode);\n    this.attributes = new AttributorStore(this.domNode);\n  }\n\n  public format(name: string, value: any): void {\n    const format = this.scroll.query(name, Scope.BLOCK);\n    if (format == null) {\n      return;\n    } else if (format instanceof Attributor) {\n      this.attributes.attribute(format, value);\n    } else if (name === this.statics.blotName && !value) {\n      this.replaceWith(BlockBlot.blotName);\n    } else if (\n      value &&\n      (name !== this.statics.blotName || this.formats()[name] !== value)\n    ) {\n      this.replaceWith(name, value);\n    }\n  }\n\n  public formats(): { [index: string]: any } {\n    const formats = this.attributes.values();\n    const format = this.statics.formats(this.domNode, this.scroll);\n    if (format != null) {\n      formats[this.statics.blotName] = format;\n    }\n    return formats;\n  }\n\n  public formatAt(\n    index: number,\n    length: number,\n    name: string,\n    value: any,\n  ): void {\n    if (this.scroll.query(name, Scope.BLOCK) != null) {\n      this.format(name, value);\n    } else {\n      super.formatAt(index, length, name, value);\n    }\n  }\n\n  public insertAt(index: number, value: string, def?: any): void {\n    if (def == null || this.scroll.query(value, Scope.INLINE) != null) {\n      // Insert text or inline\n      super.insertAt(index, value, def);\n    } else {\n      const after = this.split(index);\n      if (after != null) {\n        const blot = this.scroll.create(value, def);\n        after.parent.insertBefore(blot, after);\n      } else {\n        throw new Error('Attempt to insertAt after block boundaries');\n      }\n    }\n  }\n\n  public replaceWith(name: string | Blot, value?: any): Blot {\n    const replacement = super.replaceWith(name, value) as BlockBlot;\n    this.attributes.copy(replacement);\n    return replacement;\n  }\n\n  public update(\n    mutations: MutationRecord[],\n    context: { [key: string]: any },\n  ): void {\n    super.update(mutations, context);\n    const attributeChanged = mutations.some(\n      (mutation) =>\n        mutation.target === this.domNode && mutation.type === 'attributes',\n    );\n    if (attributeChanged) {\n      this.attributes.build();\n    }\n  }\n}\n\nexport default BlockBlot;\n","import Scope from '../../scope.js';\nimport BlockBlot from '../block.js';\nimport ParentBlot from './parent.js';\n\nclass ContainerBlot extends ParentBlot {\n  public static blotName = 'container';\n  public static scope = Scope.BLOCK_BLOT;\n  public static tagName: string | string[];\n\n  public prev!: BlockBlot | ContainerBlot | null;\n  public next!: BlockBlot | ContainerBlot | null;\n\n  public checkMerge(): boolean {\n    return (\n      this.next !== null && this.next.statics.blotName === this.statics.blotName\n    );\n  }\n\n  public deleteAt(index: number, length: number): void {\n    super.deleteAt(index, length);\n    this.enforceAllowedChildren();\n  }\n\n  public formatAt(\n    index: number,\n    length: number,\n    name: string,\n    value: any,\n  ): void {\n    super.formatAt(index, length, name, value);\n    this.enforceAllowedChildren();\n  }\n\n  public insertAt(index: number, value: string, def?: any): void {\n    super.insertAt(index, value, def);\n    this.enforceAllowedChildren();\n  }\n\n  public optimize(context: { [key: string]: any }): void {\n    super.optimize(context);\n    if (this.children.length > 0 && this.next != null && this.checkMerge()) {\n      this.next.moveChildren(this);\n      this.next.remove();\n    }\n  }\n}\n\nexport default ContainerBlot;\n","import type { Formattable, Root } from './abstract/blot.js';\nimport LeafBlot from './abstract/leaf.js';\n\nclass EmbedBlot extends LeafBlot implements Formattable {\n  public static formats(_domNode: HTMLElement, _scroll: Root): any {\n    return undefined;\n  }\n\n  public format(name: string, value: any): void {\n    // super.formatAt wraps, which is what we want in general,\n    // but this allows subclasses to overwrite for formats\n    // that just apply to particular embeds\n    super.formatAt(0, this.length(), name, value);\n  }\n\n  public formatAt(\n    index: number,\n    length: number,\n    name: string,\n    value: any,\n  ): void {\n    if (index === 0 && length === this.length()) {\n      this.format(name, value);\n    } else {\n      super.formatAt(index, length, name, value);\n    }\n  }\n\n  public formats(): { [index: string]: any } {\n    return this.statics.formats(this.domNode, this.scroll);\n  }\n}\n\nexport default EmbedBlot;\n","import Registry, { type RegistryDefinition } from '../registry.js';\nimport Scope from '../scope.js';\nimport type { Blot, BlotConstructor, Root } from './abstract/blot.js';\nimport ContainerBlot from './abstract/container.js';\nimport ParentBlot from './abstract/parent.js';\nimport BlockBlot from './block.js';\n\nconst OBSERVER_CONFIG = {\n  attributes: true,\n  characterData: true,\n  characterDataOldValue: true,\n  childList: true,\n  subtree: true,\n};\n\nconst MAX_OPTIMIZE_ITERATIONS = 100;\n\nclass ScrollBlot extends ParentBlot implements Root {\n  public static blotName = 'scroll';\n  public static defaultChild = BlockBlot;\n  public static allowedChildren: BlotConstructor[] = [BlockBlot, ContainerBlot];\n  public static scope = Scope.BLOCK_BLOT;\n  public static tagName = 'DIV';\n\n  public observer: MutationObserver;\n\n  constructor(\n    public registry: Registry,\n    node: HTMLDivElement,\n  ) {\n    // @ts-expect-error scroll is the root with no parent\n    super(null, node);\n    this.scroll = this;\n    this.build();\n    this.observer = new MutationObserver((mutations: MutationRecord[]) => {\n      this.update(mutations);\n    });\n    this.observer.observe(this.domNode, OBSERVER_CONFIG);\n    this.attach();\n  }\n\n  public create(input: Node | string | Scope, value?: any): Blot {\n    return this.registry.create(this, input, value);\n  }\n\n  public find(node: Node | null, bubble = false): Blot | null {\n    const blot = this.registry.find(node, bubble);\n    if (!blot) {\n      return null;\n    }\n    if (blot.scroll === this) {\n      return blot;\n    }\n    return bubble ? this.find(blot.scroll.domNode.parentNode, true) : null;\n  }\n\n  public query(\n    query: string | Node | Scope,\n    scope: Scope = Scope.ANY,\n  ): RegistryDefinition | null {\n    return this.registry.query(query, scope);\n  }\n\n  public register(...definitions: RegistryDefinition[]) {\n    return this.registry.register(...definitions);\n  }\n\n  public build(): void {\n    if (this.scroll == null) {\n      return;\n    }\n    super.build();\n  }\n\n  public detach(): void {\n    super.detach();\n    this.observer.disconnect();\n  }\n\n  public deleteAt(index: number, length: number): void {\n    this.update();\n    if (index === 0 && length === this.length()) {\n      this.children.forEach((child) => {\n        child.remove();\n      });\n    } else {\n      super.deleteAt(index, length);\n    }\n  }\n\n  public formatAt(\n    index: number,\n    length: number,\n    name: string,\n    value: any,\n  ): void {\n    this.update();\n    super.formatAt(index, length, name, value);\n  }\n\n  public insertAt(index: number, value: string, def?: any): void {\n    this.update();\n    super.insertAt(index, value, def);\n  }\n\n  public optimize(context?: { [key: string]: any }): void;\n  public optimize(\n    mutations: MutationRecord[],\n    context: { [key: string]: any },\n  ): void;\n  public optimize(mutations: any = [], context: any = {}): void {\n    super.optimize(context);\n    const mutationsMap = context.mutationsMap || new WeakMap();\n    // We must modify mutations directly, cannot make copy and then modify\n    let records = Array.from(this.observer.takeRecords());\n    // Array.push currently seems to be implemented by a non-tail recursive function\n    // so we cannot just mutations.push.apply(mutations, this.observer.takeRecords());\n    while (records.length > 0) {\n      mutations.push(records.pop());\n    }\n    const mark = (blot: Blot | null, markParent = true): void => {\n      if (blot == null || blot === this) {\n        return;\n      }\n      if (blot.domNode.parentNode == null) {\n        return;\n      }\n      if (!mutationsMap.has(blot.domNode)) {\n        mutationsMap.set(blot.domNode, []);\n      }\n      if (markParent) {\n        mark(blot.parent);\n      }\n    };\n    const optimize = (blot: Blot): void => {\n      // Post-order traversal\n      if (!mutationsMap.has(blot.domNode)) {\n        return;\n      }\n      if (blot instanceof ParentBlot) {\n        blot.children.forEach(optimize);\n      }\n      mutationsMap.delete(blot.domNode);\n      blot.optimize(context);\n    };\n    let remaining = mutations;\n    for (let i = 0; remaining.length > 0; i += 1) {\n      if (i >= MAX_OPTIMIZE_ITERATIONS) {\n        throw new Error('[Parchment] Maximum optimize iterations reached');\n      }\n      remaining.forEach((mutation: MutationRecord) => {\n        const blot = this.find(mutation.target, true);\n        if (blot == null) {\n          return;\n        }\n        if (blot.domNode === mutation.target) {\n          if (mutation.type === 'childList') {\n            mark(this.find(mutation.previousSibling, false));\n            Array.from(mutation.addedNodes).forEach((node: Node) => {\n              const child = this.find(node, false);\n              mark(child, false);\n              if (child instanceof ParentBlot) {\n                child.children.forEach((grandChild: Blot) => {\n                  mark(grandChild, false);\n                });\n              }\n            });\n          } else if (mutation.type === 'attributes') {\n            mark(blot.prev);\n          }\n        }\n        mark(blot);\n      });\n      this.children.forEach(optimize);\n      remaining = Array.from(this.observer.takeRecords());\n      records = remaining.slice();\n      while (records.length > 0) {\n        mutations.push(records.pop());\n      }\n    }\n  }\n\n  public update(\n    mutations?: MutationRecord[],\n    context: { [key: string]: any } = {},\n  ): void {\n    mutations = mutations || this.observer.takeRecords();\n    const mutationsMap = new WeakMap();\n    mutations\n      .map((mutation: MutationRecord) => {\n        const blot = this.find(mutation.target, true);\n        if (blot == null) {\n          return null;\n        }\n        if (mutationsMap.has(blot.domNode)) {\n          mutationsMap.get(blot.domNode).push(mutation);\n          return null;\n        } else {\n          mutationsMap.set(blot.domNode, [mutation]);\n          return blot;\n        }\n      })\n      .forEach((blot: Blot | null) => {\n        if (blot != null && blot !== this && mutationsMap.has(blot.domNode)) {\n          blot.update(mutationsMap.get(blot.domNode) || [], context);\n        }\n      });\n    context.mutationsMap = mutationsMap;\n    if (mutationsMap.has(this.domNode)) {\n      super.update(mutationsMap.get(this.domNode), context);\n    }\n    this.optimize(mutations, context);\n  }\n}\n\nexport default ScrollBlot;\n","import Scope from '../scope.js';\nimport type { Blot, Leaf, Root } from './abstract/blot.js';\nimport LeafBlot from './abstract/leaf.js';\n\nclass TextBlot extends LeafBlot implements Leaf {\n  public static readonly blotName = 'text';\n  public static scope = Scope.INLINE_BLOT;\n\n  public static create(value: string): Text {\n    return document.createTextNode(value);\n  }\n\n  public static value(domNode: Text): string {\n    return domNode.data;\n  }\n\n  public domNode!: Text;\n  protected text: string;\n\n  constructor(scroll: Root, node: Node) {\n    super(scroll, node);\n    this.text = this.statics.value(this.domNode);\n  }\n\n  public deleteAt(index: number, length: number): void {\n    this.domNode.data = this.text =\n      this.text.slice(0, index) + this.text.slice(index + length);\n  }\n\n  public index(node: Node, offset: number): number {\n    if (this.domNode === node) {\n      return offset;\n    }\n    return -1;\n  }\n\n  public insertAt(index: number, value: string, def?: any): void {\n    if (def == null) {\n      this.text = this.text.slice(0, index) + value + this.text.slice(index);\n      this.domNode.data = this.text;\n    } else {\n      super.insertAt(index, value, def);\n    }\n  }\n\n  public length(): number {\n    return this.text.length;\n  }\n\n  public optimize(context: { [key: string]: any }): void {\n    super.optimize(context);\n    this.text = this.statics.value(this.domNode);\n    if (this.text.length === 0) {\n      this.remove();\n    } else if (this.next instanceof TextBlot && this.next.prev === this) {\n      this.insertAt(this.length(), (this.next as TextBlot).value());\n      this.next.remove();\n    }\n  }\n\n  public position(index: number, _inclusive = false): [Node, number] {\n    return [this.domNode, index];\n  }\n\n  public split(index: number, force = false): Blot | null {\n    if (!force) {\n      if (index === 0) {\n        return this;\n      }\n      if (index === this.length()) {\n        return this.next;\n      }\n    }\n    const after = this.scroll.create(this.domNode.splitText(index));\n    this.parent.insertBefore(after, this.next || undefined);\n    this.text = this.statics.value(this.domNode);\n    return after;\n  }\n\n  public update(\n    mutations: MutationRecord[],\n    _context: { [key: string]: any },\n  ): void {\n    if (\n      mutations.some((mutation) => {\n        return (\n          mutation.type === 'characterData' && mutation.target === this.domNode\n        );\n      })\n    ) {\n      this.text = this.statics.value(this.domNode);\n    }\n  }\n\n  public value(): string {\n    return this.text;\n  }\n}\n\nexport default TextBlot;\n","/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nexport default arrayEach;\n","import overArg from './_overArg.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nexport default nativeKeys;\n","import isPrototype from './_isPrototype.js';\nimport nativeKeys from './_nativeKeys.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeys;\n","import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeys from './_baseKeys.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nexport default keys;\n","import copyObject from './_copyObject.js';\nimport keys from './keys.js';\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\nexport default baseAssign;\n","import copyObject from './_copyObject.js';\nimport keysIn from './keysIn.js';\n\n/**\n * The base implementation of `_.assignIn` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssignIn(object, source) {\n  return object && copyObject(source, keysIn(source), object);\n}\n\nexport default baseAssignIn;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nexport default arrayFilter;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nexport default stubArray;\n","import arrayFilter from './_arrayFilter.js';\nimport stubArray from './stubArray.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nexport default getSymbols;\n","import copyObject from './_copyObject.js';\nimport getSymbols from './_getSymbols.js';\n\n/**\n * Copies own symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\nexport default copySymbols;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nexport default arrayPush;\n","import arrayPush from './_arrayPush.js';\nimport getPrototype from './_getPrototype.js';\nimport getSymbols from './_getSymbols.js';\nimport stubArray from './stubArray.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own and inherited enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols(object));\n    object = getPrototype(object);\n  }\n  return result;\n};\n\nexport default getSymbolsIn;\n","import copyObject from './_copyObject.js';\nimport getSymbolsIn from './_getSymbolsIn.js';\n\n/**\n * Copies own and inherited symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbolsIn(source, object) {\n  return copyObject(source, getSymbolsIn(source), object);\n}\n\nexport default copySymbolsIn;\n","import arrayPush from './_arrayPush.js';\nimport isArray from './isArray.js';\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nexport default baseGetAllKeys;\n","import baseGetAllKeys from './_baseGetAllKeys.js';\nimport getSymbols from './_getSymbols.js';\nimport keys from './keys.js';\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nexport default getAllKeys;\n","import baseGetAllKeys from './_baseGetAllKeys.js';\nimport getSymbolsIn from './_getSymbolsIn.js';\nimport keysIn from './keysIn.js';\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\nexport default getAllKeysIn;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nexport default DataView;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nexport default Promise;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nexport default Set;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nexport default WeakMap;\n","import DataView from './_DataView.js';\nimport Map from './_Map.js';\nimport Promise from './_Promise.js';\nimport Set from './_Set.js';\nimport WeakMap from './_WeakMap.js';\nimport baseGetTag from './_baseGetTag.js';\nimport toSource from './_toSource.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nexport default getTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = new array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nexport default initCloneArray;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\nexport default cloneDataView;\n","/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\nexport default cloneRegExp;\n","import Symbol from './_Symbol.js';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nexport default cloneSymbol;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\nimport cloneDataView from './_cloneDataView.js';\nimport cloneRegExp from './_cloneRegExp.js';\nimport cloneSymbol from './_cloneSymbol.js';\nimport cloneTypedArray from './_cloneTypedArray.js';\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return new Ctor;\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return new Ctor;\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\nexport default initCloneByTag;\n","import getTag from './_getTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]';\n\n/**\n * The base implementation of `_.isMap` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n */\nfunction baseIsMap(value) {\n  return isObjectLike(value) && getTag(value) == mapTag;\n}\n\nexport default baseIsMap;\n","import baseIsMap from './_baseIsMap.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsMap = nodeUtil && nodeUtil.isMap;\n\n/**\n * Checks if `value` is classified as a `Map` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n * @example\n *\n * _.isMap(new Map);\n * // => true\n *\n * _.isMap(new WeakMap);\n * // => false\n */\nvar isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\nexport default isMap;\n","import getTag from './_getTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar setTag = '[object Set]';\n\n/**\n * The base implementation of `_.isSet` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n */\nfunction baseIsSet(value) {\n  return isObjectLike(value) && getTag(value) == setTag;\n}\n\nexport default baseIsSet;\n","import baseIsSet from './_baseIsSet.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsSet = nodeUtil && nodeUtil.isSet;\n\n/**\n * Checks if `value` is classified as a `Set` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n * @example\n *\n * _.isSet(new Set);\n * // => true\n *\n * _.isSet(new WeakSet);\n * // => false\n */\nvar isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\nexport default isSet;\n","import Stack from './_Stack.js';\nimport arrayEach from './_arrayEach.js';\nimport assignValue from './_assignValue.js';\nimport baseAssign from './_baseAssign.js';\nimport baseAssignIn from './_baseAssignIn.js';\nimport cloneBuffer from './_cloneBuffer.js';\nimport copyArray from './_copyArray.js';\nimport copySymbols from './_copySymbols.js';\nimport copySymbolsIn from './_copySymbolsIn.js';\nimport getAllKeys from './_getAllKeys.js';\nimport getAllKeysIn from './_getAllKeysIn.js';\nimport getTag from './_getTag.js';\nimport initCloneArray from './_initCloneArray.js';\nimport initCloneByTag from './_initCloneByTag.js';\nimport initCloneObject from './_initCloneObject.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isMap from './isMap.js';\nimport isObject from './isObject.js';\nimport isSet from './isSet.js';\nimport keys from './keys.js';\nimport keysIn from './keysIn.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Deep clone\n *  2 - Flatten inherited properties\n *  4 - Clone symbols\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, bitmask, customizer, key, object, stack) {\n  var result,\n      isDeep = bitmask & CLONE_DEEP_FLAG,\n      isFlat = bitmask & CLONE_FLAT_FLAG,\n      isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      result = (isFlat || isFunc) ? {} : initCloneObject(value);\n      if (!isDeep) {\n        return isFlat\n          ? copySymbolsIn(value, baseAssignIn(result, value))\n          : copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (isSet(value)) {\n    value.forEach(function(subValue) {\n      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n    });\n  } else if (isMap(value)) {\n    value.forEach(function(subValue, key) {\n      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n    });\n  }\n\n  var keysFunc = isFull\n    ? (isFlat ? getAllKeysIn : getAllKeys)\n    : (isFlat ? keysIn : keys);\n\n  var props = isArr ? undefined : keysFunc(value);\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n  });\n  return result;\n}\n\nexport default baseClone;\n","import baseClone from './_baseClone.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n}\n\nexport default cloneDeep;\n","/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\nexport default setCacheAdd;\n","/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nexport default setCacheHas;\n","import MapCache from './_MapCache.js';\nimport setCacheAdd from './_setCacheAdd.js';\nimport setCacheHas from './_setCacheHas.js';\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\nexport default SetCache;\n","/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport default arraySome;\n","/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nexport default cacheHas;\n","import SetCache from './_SetCache.js';\nimport arraySome from './_arraySome.js';\nimport cacheHas from './_cacheHas.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Check that cyclic values are equal.\n  var arrStacked = stack.get(array);\n  var othStacked = stack.get(other);\n  if (arrStacked && othStacked) {\n    return arrStacked == other && othStacked == array;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\nexport default equalArrays;\n","/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\nexport default mapToArray;\n","/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nexport default setToArray;\n","import Symbol from './_Symbol.js';\nimport Uint8Array from './_Uint8Array.js';\nimport eq from './eq.js';\nimport equalArrays from './_equalArrays.js';\nimport mapToArray from './_mapToArray.js';\nimport setToArray from './_setToArray.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\nexport default equalByTag;\n","import getAllKeys from './_getAllKeys.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Check that cyclic values are equal.\n  var objStacked = stack.get(object);\n  var othStacked = stack.get(other);\n  if (objStacked && othStacked) {\n    return objStacked == other && othStacked == object;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\nexport default equalObjects;\n","import Stack from './_Stack.js';\nimport equalArrays from './_equalArrays.js';\nimport equalByTag from './_equalByTag.js';\nimport equalObjects from './_equalObjects.js';\nimport getTag from './_getTag.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\nexport default baseIsEqualDeep;\n","import baseIsEqualDeep from './_baseIsEqualDeep.js';\nimport isObjectLike from './isObjectLike.js';\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\nexport default baseIsEqual;\n","import baseIsEqual from './_baseIsEqual.js';\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\nexport default isEqual;\n","import { EmbedBlot } from 'parchment';\n\nclass Break extends EmbedBlot {\n  static value() {\n    return undefined;\n  }\n\n  optimize() {\n    if (this.prev || this.next) {\n      this.remove();\n    }\n  }\n\n  length() {\n    return 0;\n  }\n\n  value() {\n    return '';\n  }\n}\nBreak.blotName = 'break';\nBreak.tagName = 'BR';\n\nexport default Break;\n","import { TextBlot } from 'parchment';\n\nclass Text extends TextBlot {}\n\nfunction escapeText(text: string) {\n  return text.replace(/[&<>\"']/g, (s) => {\n    // https://lodash.com/docs#escape\n    const entityMap: Record<string, string> = {\n      '&': '&amp;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '\"': '&quot;',\n      \"'\": '&#39;',\n    };\n    return entityMap[s];\n  });\n}\n\nexport { Text as default, escapeText };\n","import { EmbedBlot, InlineBlot, Scope } from 'parchment';\nimport type { BlotConstructor } from 'parchment';\nimport Break from './break.js';\nimport Text from './text.js';\n\nclass Inline extends InlineBlot {\n  static allowedChildren: BlotConstructor[] = [Inline, Break, EmbedBlot, Text];\n  // Lower index means deeper in the DOM tree, since not found (-1) is for embeds\n  static order = [\n    'cursor',\n    'inline', // Must be lower\n    'link', // Chrome wants <a> to be lower\n    'underline',\n    'strike',\n    'italic',\n    'bold',\n    'script',\n    'code', // Must be higher\n  ];\n\n  static compare(self: string, other: string) {\n    const selfIndex = Inline.order.indexOf(self);\n    const otherIndex = Inline.order.indexOf(other);\n    if (selfIndex >= 0 || otherIndex >= 0) {\n      return selfIndex - otherIndex;\n    }\n    if (self === other) {\n      return 0;\n    }\n    if (self < other) {\n      return -1;\n    }\n    return 1;\n  }\n\n  formatAt(index: number, length: number, name: string, value: unknown) {\n    if (\n      Inline.compare(this.statics.blotName, name) < 0 &&\n      this.scroll.query(name, Scope.BLOT)\n    ) {\n      const blot = this.isolate(index, length);\n      if (value) {\n        blot.wrap(name, value);\n      }\n    } else {\n      super.formatAt(index, length, name, value);\n    }\n  }\n\n  optimize(context: { [key: string]: any }) {\n    super.optimize(context);\n    if (\n      this.parent instanceof Inline &&\n      Inline.compare(this.statics.blotName, this.parent.statics.blotName) > 0\n    ) {\n      const parent = this.parent.isolate(this.offset(), this.length());\n      // @ts-expect-error TODO: make isolate generic\n      this.moveChildren(parent);\n      parent.wrap(this);\n    }\n  }\n}\n\nexport default Inline;\n","import {\n  AttributorStore,\n  BlockBlot,\n  EmbedBlot,\n  LeafBlot,\n  Scope,\n} from 'parchment';\nimport type { Blot, Parent } from 'parchment';\nimport Delta from 'quill-delta';\nimport Break from './break.js';\nimport Inline from './inline.js';\nimport TextBlot from './text.js';\n\nconst NEWLINE_LENGTH = 1;\n\nclass Block extends BlockBlot {\n  cache: { delta?: Delta | null; length?: number } = {};\n\n  delta(): Delta {\n    if (this.cache.delta == null) {\n      this.cache.delta = blockDelta(this);\n    }\n    return this.cache.delta;\n  }\n\n  deleteAt(index: number, length: number) {\n    super.deleteAt(index, length);\n    this.cache = {};\n  }\n\n  formatAt(index: number, length: number, name: string, value: unknown) {\n    if (length <= 0) return;\n    if (this.scroll.query(name, Scope.BLOCK)) {\n      if (index + length === this.length()) {\n        this.format(name, value);\n      }\n    } else {\n      super.formatAt(\n        index,\n        Math.min(length, this.length() - index - 1),\n        name,\n        value,\n      );\n    }\n    this.cache = {};\n  }\n\n  insertAt(index: number, value: string, def?: unknown) {\n    if (def != null) {\n      super.insertAt(index, value, def);\n      this.cache = {};\n      return;\n    }\n    if (value.length === 0) return;\n    const lines = value.split('\\n');\n    const text = lines.shift() as string;\n    if (text.length > 0) {\n      if (index < this.length() - 1 || this.children.tail == null) {\n        super.insertAt(Math.min(index, this.length() - 1), text);\n      } else {\n        this.children.tail.insertAt(this.children.tail.length(), text);\n      }\n      this.cache = {};\n    }\n    // TODO: Fix this next time the file is edited.\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    let block: Blot | this = this;\n    lines.reduce((lineIndex, line) => {\n      // @ts-expect-error Fix me later\n      block = block.split(lineIndex, true);\n      block.insertAt(0, line);\n      return line.length;\n    }, index + text.length);\n  }\n\n  insertBefore(blot: Blot, ref?: Blot | null) {\n    const { head } = this.children;\n    super.insertBefore(blot, ref);\n    if (head instanceof Break) {\n      head.remove();\n    }\n    this.cache = {};\n  }\n\n  length() {\n    if (this.cache.length == null) {\n      this.cache.length = super.length() + NEWLINE_LENGTH;\n    }\n    return this.cache.length;\n  }\n\n  moveChildren(target: Parent, ref?: Blot | null) {\n    super.moveChildren(target, ref);\n    this.cache = {};\n  }\n\n  optimize(context: { [key: string]: any }) {\n    super.optimize(context);\n    this.cache = {};\n  }\n\n  path(index: number) {\n    return super.path(index, true);\n  }\n\n  removeChild(child: Blot) {\n    super.removeChild(child);\n    this.cache = {};\n  }\n\n  split(index: number, force: boolean | undefined = false): Blot | null {\n    if (force && (index === 0 || index >= this.length() - NEWLINE_LENGTH)) {\n      const clone = this.clone();\n      if (index === 0) {\n        this.parent.insertBefore(clone, this);\n        return this;\n      }\n      this.parent.insertBefore(clone, this.next);\n      return clone;\n    }\n    const next = super.split(index, force);\n    this.cache = {};\n    return next;\n  }\n}\nBlock.blotName = 'block';\nBlock.tagName = 'P';\nBlock.defaultChild = Break;\nBlock.allowedChildren = [Break, Inline, EmbedBlot, TextBlot];\n\nclass BlockEmbed extends EmbedBlot {\n  attributes: AttributorStore;\n  domNode: HTMLElement;\n\n  attach() {\n    super.attach();\n    this.attributes = new AttributorStore(this.domNode);\n  }\n\n  delta() {\n    return new Delta().insert(this.value(), {\n      ...this.formats(),\n      ...this.attributes.values(),\n    });\n  }\n\n  format(name: string, value: unknown) {\n    const attribute = this.scroll.query(name, Scope.BLOCK_ATTRIBUTE);\n    if (attribute != null) {\n      // @ts-expect-error TODO: Scroll#query() should return Attributor when scope is attribute\n      this.attributes.attribute(attribute, value);\n    }\n  }\n\n  formatAt(index: number, length: number, name: string, value: unknown) {\n    this.format(name, value);\n  }\n\n  insertAt(index: number, value: string, def?: unknown) {\n    if (def != null) {\n      super.insertAt(index, value, def);\n      return;\n    }\n    const lines = value.split('\\n');\n    const text = lines.pop();\n    const blocks = lines.map((line) => {\n      const block = this.scroll.create(Block.blotName);\n      block.insertAt(0, line);\n      return block;\n    });\n    const ref = this.split(index);\n    blocks.forEach((block) => {\n      this.parent.insertBefore(block, ref);\n    });\n    if (text) {\n      this.parent.insertBefore(this.scroll.create('text', text), ref);\n    }\n  }\n}\nBlockEmbed.scope = Scope.BLOCK_BLOT;\n// It is important for cursor behavior BlockEmbeds use tags that are block level elements\n\nfunction blockDelta(blot: BlockBlot, filter = true) {\n  return blot\n    .descendants(LeafBlot)\n    .reduce((delta, leaf) => {\n      if (leaf.length() === 0) {\n        return delta;\n      }\n      return delta.insert(leaf.value(), bubbleFormats(leaf, {}, filter));\n    }, new Delta())\n    .insert('\\n', bubbleFormats(blot));\n}\n\nfunction bubbleFormats(\n  blot: Blot | null,\n  formats: Record<string, unknown> = {},\n  filter = true,\n): Record<string, unknown> {\n  if (blot == null) return formats;\n  if ('formats' in blot && typeof blot.formats === 'function') {\n    formats = {\n      ...formats,\n      ...blot.formats(),\n    };\n    if (filter) {\n      // exclude syntax highlighting from deltas and getFormat()\n      delete formats['code-token'];\n    }\n  }\n  if (\n    blot.parent == null ||\n    blot.parent.statics.blotName === 'scroll' ||\n    blot.parent.statics.scope !== blot.statics.scope\n  ) {\n    return formats;\n  }\n  return bubbleFormats(blot.parent, formats, filter);\n}\n\nexport { blockDelta, bubbleFormats, BlockEmbed, Block as default };\n","import { EmbedBlot, Scope } from 'parchment';\nimport type { Parent, ScrollBlot } from 'parchment';\nimport type Selection from '../core/selection.js';\nimport TextBlot from './text.js';\nimport type { EmbedContextRange } from './embed.js';\n\nclass Cursor extends EmbedBlot {\n  static blotName = 'cursor';\n  static className = 'ql-cursor';\n  static tagName = 'span';\n  static CONTENTS = '\\uFEFF'; // Zero width no break space\n\n  static value() {\n    return undefined;\n  }\n\n  selection: Selection;\n  textNode: Text;\n  savedLength: number;\n\n  constructor(scroll: ScrollBlot, domNode: HTMLElement, selection: Selection) {\n    super(scroll, domNode);\n    this.selection = selection;\n    this.textNode = document.createTextNode(Cursor.CONTENTS);\n    this.domNode.appendChild(this.textNode);\n    this.savedLength = 0;\n  }\n\n  detach() {\n    // super.detach() will also clear domNode.__blot\n    if (this.parent != null) this.parent.removeChild(this);\n  }\n\n  format(name: string, value: unknown) {\n    if (this.savedLength !== 0) {\n      super.format(name, value);\n      return;\n    }\n    // TODO: Fix this next time the file is edited.\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    let target: Parent | this = this;\n    let index = 0;\n    while (target != null && target.statics.scope !== Scope.BLOCK_BLOT) {\n      index += target.offset(target.parent);\n      target = target.parent;\n    }\n    if (target != null) {\n      this.savedLength = Cursor.CONTENTS.length;\n      // @ts-expect-error TODO: allow empty context in Parchment\n      target.optimize();\n      target.formatAt(index, Cursor.CONTENTS.length, name, value);\n      this.savedLength = 0;\n    }\n  }\n\n  index(node: Node, offset: number) {\n    if (node === this.textNode) return 0;\n    return super.index(node, offset);\n  }\n\n  length() {\n    return this.savedLength;\n  }\n\n  position(): [Text, number] {\n    return [this.textNode, this.textNode.data.length];\n  }\n\n  remove() {\n    super.remove();\n    // @ts-expect-error Fix me later\n    this.parent = null;\n  }\n\n  restore(): EmbedContextRange | null {\n    if (this.selection.composing || this.parent == null) return null;\n    const range = this.selection.getNativeRange();\n    // Browser may push down styles/nodes inside the cursor blot.\n    // https://dvcs.w3.org/hg/editing/raw-file/tip/editing.html#push-down-values\n    while (\n      this.domNode.lastChild != null &&\n      this.domNode.lastChild !== this.textNode\n    ) {\n      // @ts-expect-error Fix me later\n      this.domNode.parentNode.insertBefore(\n        this.domNode.lastChild,\n        this.domNode,\n      );\n    }\n\n    const prevTextBlot = this.prev instanceof TextBlot ? this.prev : null;\n    const prevTextLength = prevTextBlot ? prevTextBlot.length() : 0;\n    const nextTextBlot = this.next instanceof TextBlot ? this.next : null;\n    // @ts-expect-error TODO: make TextBlot.text public\n    const nextText = nextTextBlot ? nextTextBlot.text : '';\n    const { textNode } = this;\n    // take text from inside this blot and reset it\n    const newText = textNode.data.split(Cursor.CONTENTS).join('');\n    textNode.data = Cursor.CONTENTS;\n\n    // proactively merge TextBlots around cursor so that optimization\n    // doesn't lose the cursor.  the reason we are here in cursor.restore\n    // could be that the user clicked in prevTextBlot or nextTextBlot, or\n    // the user typed something.\n    let mergedTextBlot;\n    if (prevTextBlot) {\n      mergedTextBlot = prevTextBlot;\n      if (newText || nextTextBlot) {\n        prevTextBlot.insertAt(prevTextBlot.length(), newText + nextText);\n        if (nextTextBlot) {\n          nextTextBlot.remove();\n        }\n      }\n    } else if (nextTextBlot) {\n      mergedTextBlot = nextTextBlot;\n      nextTextBlot.insertAt(0, newText);\n    } else {\n      const newTextNode = document.createTextNode(newText);\n      mergedTextBlot = this.scroll.create(newTextNode);\n      this.parent.insertBefore(mergedTextBlot, this);\n    }\n\n    this.remove();\n    if (range) {\n      // calculate selection to restore\n      const remapOffset = (node: Node, offset: number) => {\n        if (prevTextBlot && node === prevTextBlot.domNode) {\n          return offset;\n        }\n        if (node === textNode) {\n          return prevTextLength + offset - 1;\n        }\n        if (nextTextBlot && node === nextTextBlot.domNode) {\n          return prevTextLength + newText.length + offset;\n        }\n        return null;\n      };\n\n      const start = remapOffset(range.start.node, range.start.offset);\n      const end = remapOffset(range.end.node, range.end.offset);\n      if (start !== null && end !== null) {\n        return {\n          startNode: mergedTextBlot.domNode,\n          startOffset: start,\n          endNode: mergedTextBlot.domNode,\n          endOffset: end,\n        };\n      }\n    }\n    return null;\n  }\n\n  update(mutations: MutationRecord[], context: Record<string, unknown>) {\n    if (\n      mutations.some((mutation) => {\n        return (\n          mutation.type === 'characterData' && mutation.target === this.textNode\n        );\n      })\n    ) {\n      const range = this.restore();\n      if (range) context.range = range;\n    }\n  }\n\n  // Avoid .ql-cursor being a descendant of `<a/>`.\n  // The reason is Safari pushes down `<a/>` on text insertion.\n  // That will cause DOM nodes not sync with the model.\n  //\n  // For example ({I} is the caret), given the markup:\n  //    <a><span class=\"ql-cursor\">\\uFEFF{I}</span></a>\n  // When typing a char \"x\", `<a/>` will be pushed down inside the `<span>` first:\n  //    <span class=\"ql-cursor\"><a>\\uFEFF{I}</a></span>\n  // And then \"x\" will be inserted after `<a/>`:\n  //    <span class=\"ql-cursor\"><a>\\uFEFF</a>d{I}</span>\n  optimize(context?: unknown) {\n    // @ts-expect-error Fix me later\n    super.optimize(context);\n\n    let { parent } = this;\n    while (parent) {\n      if (parent.domNode.tagName === 'A') {\n        this.savedLength = Cursor.CONTENTS.length;\n        // @ts-expect-error TODO: make isolate generic\n        parent.isolate(this.offset(parent), this.length()).unwrap();\n        this.savedLength = 0;\n        break;\n      }\n      parent = parent.parent;\n    }\n  }\n\n  value() {\n    return '';\n  }\n}\n\nexport default Cursor;\n","import EventEmitter from './index.js'\n\nexport { EventEmitter }\nexport default EventEmitter\n","import type Quill from '../core.js';\n\nexport default new WeakMap<Node, Quill>();\n","const levels = ['error', 'warn', 'log', 'info'] as const;\nexport type DebugLevel = (typeof levels)[number];\nlet level: DebugLevel | false = 'warn';\n\nfunction debug(method: DebugLevel, ...args: unknown[]) {\n  if (level) {\n    if (levels.indexOf(method) <= levels.indexOf(level)) {\n      console[method](...args); // eslint-disable-line no-console\n    }\n  }\n}\n\nfunction namespace(\n  ns: string,\n): Record<DebugLevel, (...args: unknown[]) => void> {\n  return levels.reduce(\n    (logger, method) => {\n      logger[method] = debug.bind(console, method, ns);\n      return logger;\n    },\n    {} as Record<DebugLevel, (...args: unknown[]) => void>,\n  );\n}\n\nnamespace.level = (newLevel: DebugLevel | false) => {\n  level = newLevel;\n};\ndebug.level = namespace.level;\n\nexport default namespace;\n","import { EventEmitter } from 'eventemitter3';\nimport instances from './instances.js';\nimport logger from './logger.js';\n\nconst debug = logger('quill:events');\nconst EVENTS = ['selectionchange', 'mousedown', 'mouseup', 'click'];\n\nEVENTS.forEach((eventName) => {\n  document.addEventListener(eventName, (...args) => {\n    Array.from(document.querySelectorAll('.ql-container')).forEach((node) => {\n      const quill = instances.get(node);\n      if (quill && quill.emitter) {\n        quill.emitter.handleDOM(...args);\n      }\n    });\n  });\n});\n\nclass Emitter extends EventEmitter<string> {\n  static events = {\n    EDITOR_CHANGE: 'editor-change',\n    SCROLL_BEFORE_UPDATE: 'scroll-before-update',\n    SCROLL_BLOT_MOUNT: 'scroll-blot-mount',\n    SCROLL_BLOT_UNMOUNT: 'scroll-blot-unmount',\n    SCROLL_OPTIMIZE: 'scroll-optimize',\n    SCROLL_UPDATE: 'scroll-update',\n    SCROLL_EMBED_UPDATE: 'scroll-embed-update',\n    SELECTION_CHANGE: 'selection-change',\n    TEXT_CHANGE: 'text-change',\n    COMPOSITION_BEFORE_START: 'composition-before-start',\n    COMPOSITION_START: 'composition-start',\n    COMPOSITION_BEFORE_END: 'composition-before-end',\n    COMPOSITION_END: 'composition-end',\n  } as const;\n\n  static sources = {\n    API: 'api',\n    SILENT: 'silent',\n    USER: 'user',\n  } as const;\n\n  protected domListeners: Record<string, { node: Node; handler: Function }[]>;\n\n  constructor() {\n    super();\n    this.domListeners = {};\n    this.on('error', debug.error);\n  }\n\n  emit(...args: unknown[]): boolean {\n    debug.log.call(debug, ...args);\n    // @ts-expect-error\n    return super.emit(...args);\n  }\n\n  handleDOM(event: Event, ...args: unknown[]) {\n    (this.domListeners[event.type] || []).forEach(({ node, handler }) => {\n      if (event.target === node || node.contains(event.target as Node)) {\n        handler(event, ...args);\n      }\n    });\n  }\n\n  listenDOM(eventName: string, node: Node, handler: EventListener) {\n    if (!this.domListeners[eventName]) {\n      this.domListeners[eventName] = [];\n    }\n    this.domListeners[eventName].push({ node, handler });\n  }\n}\n\nexport type EmitterSource =\n  (typeof Emitter.sources)[keyof typeof Emitter.sources];\n\nexport default Emitter;\n","import { LeafBlot, Scope } from 'parchment';\nimport { cloneDeep, isEqual } from 'lodash-es';\nimport Emitter from './emitter.js';\nimport type { EmitterSource } from './emitter.js';\nimport logger from './logger.js';\nimport type Cursor from '../blots/cursor.js';\nimport type Scroll from '../blots/scroll.js';\n\nconst debug = logger('quill:selection');\n\ntype NativeRange = AbstractRange;\n\ninterface NormalizedRange {\n  start: {\n    node: NativeRange['startContainer'];\n    offset: NativeRange['startOffset'];\n  };\n  end: { node: NativeRange['endContainer']; offset: NativeRange['endOffset'] };\n  native: NativeRange;\n}\n\nexport interface Bounds {\n  bottom: number;\n  height: number;\n  left: number;\n  right: number;\n  top: number;\n  width: number;\n}\n\nexport class Range {\n  constructor(\n    public index: number,\n    public length = 0,\n  ) {}\n}\n\nclass Selection {\n  scroll: Scroll;\n  emitter: Emitter;\n  composing: boolean;\n  mouseDown: boolean;\n\n  root: HTMLElement;\n  cursor: Cursor;\n  savedRange: Range;\n  lastRange: Range | null;\n  lastNative: NormalizedRange | null;\n\n  constructor(scroll: Scroll, emitter: Emitter) {\n    this.emitter = emitter;\n    this.scroll = scroll;\n    this.composing = false;\n    this.mouseDown = false;\n    this.root = this.scroll.domNode;\n    // @ts-expect-error\n    this.cursor = this.scroll.create('cursor', this);\n    // savedRange is last non-null range\n    this.savedRange = new Range(0, 0);\n    this.lastRange = this.savedRange;\n    this.lastNative = null;\n    this.handleComposition();\n    this.handleDragging();\n    this.emitter.listenDOM('selectionchange', document, () => {\n      if (!this.mouseDown && !this.composing) {\n        setTimeout(this.update.bind(this, Emitter.sources.USER), 1);\n      }\n    });\n    this.emitter.on(Emitter.events.SCROLL_BEFORE_UPDATE, () => {\n      if (!this.hasFocus()) return;\n      const native = this.getNativeRange();\n      if (native == null) return;\n      if (native.start.node === this.cursor.textNode) return; // cursor.restore() will handle\n      this.emitter.once(\n        Emitter.events.SCROLL_UPDATE,\n        (source, mutations: MutationRecord[]) => {\n          try {\n            if (\n              this.root.contains(native.start.node) &&\n              this.root.contains(native.end.node)\n            ) {\n              this.setNativeRange(\n                native.start.node,\n                native.start.offset,\n                native.end.node,\n                native.end.offset,\n              );\n            }\n            const triggeredByTyping = mutations.some(\n              (mutation) =>\n                mutation.type === 'characterData' ||\n                mutation.type === 'childList' ||\n                (mutation.type === 'attributes' &&\n                  mutation.target === this.root),\n            );\n            this.update(triggeredByTyping ? Emitter.sources.SILENT : source);\n          } catch (ignored) {\n            // ignore\n          }\n        },\n      );\n    });\n    this.emitter.on(Emitter.events.SCROLL_OPTIMIZE, (mutations, context) => {\n      if (context.range) {\n        const { startNode, startOffset, endNode, endOffset } = context.range;\n        this.setNativeRange(startNode, startOffset, endNode, endOffset);\n        this.update(Emitter.sources.SILENT);\n      }\n    });\n    this.update(Emitter.sources.SILENT);\n  }\n\n  handleComposition() {\n    this.emitter.on(Emitter.events.COMPOSITION_BEFORE_START, () => {\n      this.composing = true;\n    });\n    this.emitter.on(Emitter.events.COMPOSITION_END, () => {\n      this.composing = false;\n      if (this.cursor.parent) {\n        const range = this.cursor.restore();\n        if (!range) return;\n        setTimeout(() => {\n          this.setNativeRange(\n            range.startNode,\n            range.startOffset,\n            range.endNode,\n            range.endOffset,\n          );\n        }, 1);\n      }\n    });\n  }\n\n  handleDragging() {\n    this.emitter.listenDOM('mousedown', document.body, () => {\n      this.mouseDown = true;\n    });\n    this.emitter.listenDOM('mouseup', document.body, () => {\n      this.mouseDown = false;\n      this.update(Emitter.sources.USER);\n    });\n  }\n\n  focus() {\n    if (this.hasFocus()) return;\n    this.root.focus({ preventScroll: true });\n    this.setRange(this.savedRange);\n  }\n\n  format(format: string, value: unknown) {\n    this.scroll.update();\n    const nativeRange = this.getNativeRange();\n    if (\n      nativeRange == null ||\n      !nativeRange.native.collapsed ||\n      this.scroll.query(format, Scope.BLOCK)\n    )\n      return;\n    if (nativeRange.start.node !== this.cursor.textNode) {\n      const blot = this.scroll.find(nativeRange.start.node, false);\n      if (blot == null) return;\n      // TODO Give blot ability to not split\n      if (blot instanceof LeafBlot) {\n        const after = blot.split(nativeRange.start.offset);\n        blot.parent.insertBefore(this.cursor, after);\n      } else {\n        // @ts-expect-error TODO: nativeRange.start.node doesn't seem to match function signature\n        blot.insertBefore(this.cursor, nativeRange.start.node); // Should never happen\n      }\n      this.cursor.attach();\n    }\n    this.cursor.format(format, value);\n    this.scroll.optimize();\n    this.setNativeRange(this.cursor.textNode, this.cursor.textNode.data.length);\n    this.update();\n  }\n\n  getBounds(index: number, length = 0) {\n    const scrollLength = this.scroll.length();\n    index = Math.min(index, scrollLength - 1);\n    length = Math.min(index + length, scrollLength - 1) - index;\n    let node: Node;\n    let [leaf, offset] = this.scroll.leaf(index);\n    if (leaf == null) return null;\n    if (length > 0 && offset === leaf.length()) {\n      const [next] = this.scroll.leaf(index + 1);\n      if (next) {\n        const [line] = this.scroll.line(index);\n        const [nextLine] = this.scroll.line(index + 1);\n        if (line === nextLine) {\n          leaf = next;\n          offset = 0;\n        }\n      }\n    }\n    [node, offset] = leaf.position(offset, true);\n    const range = document.createRange();\n    if (length > 0) {\n      range.setStart(node, offset);\n      [leaf, offset] = this.scroll.leaf(index + length);\n      if (leaf == null) return null;\n      [node, offset] = leaf.position(offset, true);\n      range.setEnd(node, offset);\n      return range.getBoundingClientRect();\n    }\n    let side: 'left' | 'right' = 'left';\n    let rect: DOMRect;\n    if (node instanceof Text) {\n      // Return null if the text node is empty because it is\n      // not able to get a useful client rect:\n      // https://github.com/w3c/csswg-drafts/issues/2514.\n      // Empty text nodes are most likely caused by TextBlot#optimize()\n      // not getting called when editor content changes.\n      if (!node.data.length) {\n        return null;\n      }\n      if (offset < node.data.length) {\n        range.setStart(node, offset);\n        range.setEnd(node, offset + 1);\n      } else {\n        range.setStart(node, offset - 1);\n        range.setEnd(node, offset);\n        side = 'right';\n      }\n      rect = range.getBoundingClientRect();\n    } else {\n      if (!(leaf.domNode instanceof Element)) return null;\n      rect = leaf.domNode.getBoundingClientRect();\n      if (offset > 0) side = 'right';\n    }\n    return {\n      bottom: rect.top + rect.height,\n      height: rect.height,\n      left: rect[side],\n      right: rect[side],\n      top: rect.top,\n      width: 0,\n    };\n  }\n\n  getNativeRange(): NormalizedRange | null {\n    const selection = document.getSelection();\n    if (selection == null || selection.rangeCount <= 0) return null;\n    const nativeRange = selection.getRangeAt(0);\n    if (nativeRange == null) return null;\n    const range = this.normalizeNative(nativeRange);\n    debug.info('getNativeRange', range);\n    return range;\n  }\n\n  getRange(): [Range, NormalizedRange] | [null, null] {\n    const root = this.scroll.domNode;\n    if ('isConnected' in root && !root.isConnected) {\n      // document.getSelection() forces layout on Blink, so we trend to\n      // not calling it.\n      return [null, null];\n    }\n    const normalized = this.getNativeRange();\n    if (normalized == null) return [null, null];\n    const range = this.normalizedToRange(normalized);\n    return [range, normalized];\n  }\n\n  hasFocus(): boolean {\n    return (\n      document.activeElement === this.root ||\n      (document.activeElement != null &&\n        contains(this.root, document.activeElement))\n    );\n  }\n\n  normalizedToRange(range: NormalizedRange) {\n    const positions: [Node, number][] = [\n      [range.start.node, range.start.offset],\n    ];\n    if (!range.native.collapsed) {\n      positions.push([range.end.node, range.end.offset]);\n    }\n    const indexes = positions.map((position) => {\n      const [node, offset] = position;\n      const blot = this.scroll.find(node, true);\n      // @ts-expect-error Fix me later\n      const index = blot.offset(this.scroll);\n      if (offset === 0) {\n        return index;\n      }\n      if (blot instanceof LeafBlot) {\n        return index + blot.index(node, offset);\n      }\n      // @ts-expect-error Fix me later\n      return index + blot.length();\n    });\n    const end = Math.min(Math.max(...indexes), this.scroll.length() - 1);\n    const start = Math.min(end, ...indexes);\n    return new Range(start, end - start);\n  }\n\n  normalizeNative(nativeRange: NativeRange) {\n    if (\n      !contains(this.root, nativeRange.startContainer) ||\n      (!nativeRange.collapsed && !contains(this.root, nativeRange.endContainer))\n    ) {\n      return null;\n    }\n    const range = {\n      start: {\n        node: nativeRange.startContainer,\n        offset: nativeRange.startOffset,\n      },\n      end: { node: nativeRange.endContainer, offset: nativeRange.endOffset },\n      native: nativeRange,\n    };\n    [range.start, range.end].forEach((position) => {\n      let { node, offset } = position;\n      while (!(node instanceof Text) && node.childNodes.length > 0) {\n        if (node.childNodes.length > offset) {\n          node = node.childNodes[offset];\n          offset = 0;\n        } else if (node.childNodes.length === offset) {\n          // @ts-expect-error Fix me later\n          node = node.lastChild;\n          if (node instanceof Text) {\n            offset = node.data.length;\n          } else if (node.childNodes.length > 0) {\n            // Container case\n            offset = node.childNodes.length;\n          } else {\n            // Embed case\n            offset = node.childNodes.length + 1;\n          }\n        } else {\n          break;\n        }\n      }\n      position.node = node;\n      position.offset = offset;\n    });\n    return range;\n  }\n\n  rangeToNative(range: Range): [Node | null, number, Node | null, number] {\n    const scrollLength = this.scroll.length();\n\n    const getPosition = (\n      index: number,\n      inclusive: boolean,\n    ): [Node | null, number] => {\n      index = Math.min(scrollLength - 1, index);\n      const [leaf, leafOffset] = this.scroll.leaf(index);\n      return leaf ? leaf.position(leafOffset, inclusive) : [null, -1];\n    };\n    return [\n      ...getPosition(range.index, false),\n      ...getPosition(range.index + range.length, true),\n    ];\n  }\n\n  setNativeRange(\n    startNode: Node | null,\n    startOffset?: number,\n    endNode = startNode,\n    endOffset = startOffset,\n    force = false,\n  ) {\n    debug.info('setNativeRange', startNode, startOffset, endNode, endOffset);\n    if (\n      startNode != null &&\n      (this.root.parentNode == null ||\n        startNode.parentNode == null ||\n        // @ts-expect-error Fix me later\n        endNode.parentNode == null)\n    ) {\n      return;\n    }\n    const selection = document.getSelection();\n    if (selection == null) return;\n    if (startNode != null) {\n      if (!this.hasFocus()) this.root.focus({ preventScroll: true });\n      const { native } = this.getNativeRange() || {};\n      if (\n        native == null ||\n        force ||\n        startNode !== native.startContainer ||\n        startOffset !== native.startOffset ||\n        endNode !== native.endContainer ||\n        endOffset !== native.endOffset\n      ) {\n        if (startNode instanceof Element && startNode.tagName === 'BR') {\n          // @ts-expect-error Fix me later\n          startOffset = Array.from(startNode.parentNode.childNodes).indexOf(\n            startNode,\n          );\n          startNode = startNode.parentNode;\n        }\n        if (endNode instanceof Element && endNode.tagName === 'BR') {\n          // @ts-expect-error Fix me later\n          endOffset = Array.from(endNode.parentNode.childNodes).indexOf(\n            endNode,\n          );\n          endNode = endNode.parentNode;\n        }\n        const range = document.createRange();\n        // @ts-expect-error Fix me later\n        range.setStart(startNode, startOffset);\n        // @ts-expect-error Fix me later\n        range.setEnd(endNode, endOffset);\n        selection.removeAllRanges();\n        selection.addRange(range);\n      }\n    } else {\n      selection.removeAllRanges();\n      this.root.blur();\n    }\n  }\n\n  setRange(range: Range | null, force: boolean, source?: EmitterSource): void;\n  setRange(range: Range | null, source?: EmitterSource): void;\n  setRange(\n    range: Range | null,\n    force: boolean | EmitterSource = false,\n    source: EmitterSource = Emitter.sources.API,\n  ): void {\n    if (typeof force === 'string') {\n      source = force;\n      force = false;\n    }\n    debug.info('setRange', range);\n    if (range != null) {\n      const args = this.rangeToNative(range);\n      this.setNativeRange(...args, force);\n    } else {\n      this.setNativeRange(null);\n    }\n    this.update(source);\n  }\n\n  update(source: EmitterSource = Emitter.sources.USER) {\n    const oldRange = this.lastRange;\n    const [lastRange, nativeRange] = this.getRange();\n    this.lastRange = lastRange;\n    this.lastNative = nativeRange;\n    if (this.lastRange != null) {\n      this.savedRange = this.lastRange;\n    }\n    if (!isEqual(oldRange, this.lastRange)) {\n      if (\n        !this.composing &&\n        nativeRange != null &&\n        nativeRange.native.collapsed &&\n        nativeRange.start.node !== this.cursor.textNode\n      ) {\n        const range = this.cursor.restore();\n        if (range) {\n          this.setNativeRange(\n            range.startNode,\n            range.startOffset,\n            range.endNode,\n            range.endOffset,\n          );\n        }\n      }\n      const args = [\n        Emitter.events.SELECTION_CHANGE,\n        cloneDeep(this.lastRange),\n        cloneDeep(oldRange),\n        source,\n      ];\n      this.emitter.emit(Emitter.events.EDITOR_CHANGE, ...args);\n      if (source !== Emitter.sources.SILENT) {\n        this.emitter.emit(...args);\n      }\n    }\n  }\n}\n\nfunction contains(parent: Node, descendant: Node) {\n  try {\n    // Firefox inserts inaccessible nodes around video elements\n    descendant.parentNode; // eslint-disable-line @typescript-eslint/no-unused-expressions\n  } catch (e) {\n    return false;\n  }\n  return parent.contains(descendant);\n}\n\nexport default Selection;\n","import { cloneDeep, isEqual, merge } from 'lodash-es';\nimport { LeafBlot, EmbedBlot, Scope, ParentBlot } from 'parchment';\nimport type { Blot } from 'parchment';\nimport Delta, { AttributeMap, Op } from 'quill-delta';\nimport Block, { BlockEmbed, bubbleFormats } from '../blots/block.js';\nimport Break from '../blots/break.js';\nimport CursorBlot from '../blots/cursor.js';\nimport type Scroll from '../blots/scroll.js';\nimport TextBlot, { escapeText } from '../blots/text.js';\nimport { Range } from './selection.js';\n\nconst ASCII = /^[ -~]*$/;\n\ntype SelectionInfo = {\n  newRange: Range;\n  oldRange: Range;\n};\n\nclass Editor {\n  scroll: Scroll;\n  delta: Delta;\n\n  constructor(scroll: Scroll) {\n    this.scroll = scroll;\n    this.delta = this.getDelta();\n  }\n\n  applyDelta(delta: Delta): Delta {\n    this.scroll.update();\n    let scrollLength = this.scroll.length();\n    this.scroll.batchStart();\n    const normalizedDelta = normalizeDelta(delta);\n    const deleteDelta = new Delta();\n    const normalizedOps = splitOpLines(normalizedDelta.ops.slice());\n    normalizedOps.reduce((index, op) => {\n      const length = Op.length(op);\n      let attributes = op.attributes || {};\n      let isImplicitNewlinePrepended = false;\n      let isImplicitNewlineAppended = false;\n      if (op.insert != null) {\n        deleteDelta.retain(length);\n        if (typeof op.insert === 'string') {\n          const text = op.insert;\n          isImplicitNewlineAppended =\n            !text.endsWith('\\n') &&\n            (scrollLength <= index ||\n              !!this.scroll.descendant(BlockEmbed, index)[0]);\n          this.scroll.insertAt(index, text);\n          const [line, offset] = this.scroll.line(index);\n          let formats = merge({}, bubbleFormats(line));\n          if (line instanceof Block) {\n            const [leaf] = line.descendant(LeafBlot, offset);\n            if (leaf) {\n              formats = merge(formats, bubbleFormats(leaf));\n            }\n          }\n          attributes = AttributeMap.diff(formats, attributes) || {};\n        } else if (typeof op.insert === 'object') {\n          const key = Object.keys(op.insert)[0]; // There should only be one key\n          if (key == null) return index;\n          const isInlineEmbed = this.scroll.query(key, Scope.INLINE) != null;\n          if (isInlineEmbed) {\n            if (\n              scrollLength <= index ||\n              !!this.scroll.descendant(BlockEmbed, index)[0]\n            ) {\n              isImplicitNewlineAppended = true;\n            }\n          } else if (index > 0) {\n            const [leaf, offset] = this.scroll.descendant(LeafBlot, index - 1);\n            if (leaf instanceof TextBlot) {\n              const text = leaf.value();\n              if (text[offset] !== '\\n') {\n                isImplicitNewlinePrepended = true;\n              }\n            } else if (\n              leaf instanceof EmbedBlot &&\n              leaf.statics.scope === Scope.INLINE_BLOT\n            ) {\n              isImplicitNewlinePrepended = true;\n            }\n          }\n          this.scroll.insertAt(index, key, op.insert[key]);\n\n          if (isInlineEmbed) {\n            const [leaf] = this.scroll.descendant(LeafBlot, index);\n            if (leaf) {\n              const formats = merge({}, bubbleFormats(leaf));\n              attributes = AttributeMap.diff(formats, attributes) || {};\n            }\n          }\n        }\n        scrollLength += length;\n      } else {\n        deleteDelta.push(op);\n\n        if (op.retain !== null && typeof op.retain === 'object') {\n          const key = Object.keys(op.retain)[0];\n          if (key == null) return index;\n          this.scroll.updateEmbedAt(index, key, op.retain[key]);\n        }\n      }\n      Object.keys(attributes).forEach((name) => {\n        this.scroll.formatAt(index, length, name, attributes[name]);\n      });\n      const prependedLength = isImplicitNewlinePrepended ? 1 : 0;\n      const addedLength = isImplicitNewlineAppended ? 1 : 0;\n      scrollLength += prependedLength + addedLength;\n      deleteDelta.retain(prependedLength);\n      deleteDelta.delete(addedLength);\n      return index + length + prependedLength + addedLength;\n    }, 0);\n    deleteDelta.reduce((index, op) => {\n      if (typeof op.delete === 'number') {\n        this.scroll.deleteAt(index, op.delete);\n        return index;\n      }\n      return index + Op.length(op);\n    }, 0);\n    this.scroll.batchEnd();\n    this.scroll.optimize();\n    return this.update(normalizedDelta);\n  }\n\n  deleteText(index: number, length: number): Delta {\n    this.scroll.deleteAt(index, length);\n    return this.update(new Delta().retain(index).delete(length));\n  }\n\n  formatLine(\n    index: number,\n    length: number,\n    formats: Record<string, unknown> = {},\n  ): Delta {\n    this.scroll.update();\n    Object.keys(formats).forEach((format) => {\n      this.scroll.lines(index, Math.max(length, 1)).forEach((line) => {\n        line.format(format, formats[format]);\n      });\n    });\n    this.scroll.optimize();\n    const delta = new Delta().retain(index).retain(length, cloneDeep(formats));\n    return this.update(delta);\n  }\n\n  formatText(\n    index: number,\n    length: number,\n    formats: Record<string, unknown> = {},\n  ): Delta {\n    Object.keys(formats).forEach((format) => {\n      this.scroll.formatAt(index, length, format, formats[format]);\n    });\n    const delta = new Delta().retain(index).retain(length, cloneDeep(formats));\n    return this.update(delta);\n  }\n\n  getContents(index: number, length: number): Delta {\n    return this.delta.slice(index, index + length);\n  }\n\n  getDelta(): Delta {\n    return this.scroll.lines().reduce((delta, line) => {\n      return delta.concat(line.delta());\n    }, new Delta());\n  }\n\n  getFormat(index: number, length = 0): Record<string, unknown> {\n    let lines: (Block | BlockEmbed)[] = [];\n    let leaves: LeafBlot[] = [];\n    if (length === 0) {\n      this.scroll.path(index).forEach((path) => {\n        const [blot] = path;\n        if (blot instanceof Block) {\n          lines.push(blot);\n        } else if (blot instanceof LeafBlot) {\n          leaves.push(blot);\n        }\n      });\n    } else {\n      lines = this.scroll.lines(index, length);\n      leaves = this.scroll.descendants(LeafBlot, index, length);\n    }\n    const [lineFormats, leafFormats] = [lines, leaves].map((blots) => {\n      const blot = blots.shift();\n      if (blot == null) return {};\n      let formats = bubbleFormats(blot);\n      while (Object.keys(formats).length > 0) {\n        const blot = blots.shift();\n        if (blot == null) return formats;\n        formats = combineFormats(bubbleFormats(blot), formats);\n      }\n      return formats;\n    });\n    return { ...lineFormats, ...leafFormats };\n  }\n\n  getHTML(index: number, length: number): string {\n    const [line, lineOffset] = this.scroll.line(index);\n    if (line) {\n      const lineLength = line.length();\n      const isWithinLine = line.length() >= lineOffset + length;\n      if (isWithinLine && !(lineOffset === 0 && length === lineLength)) {\n        return convertHTML(line, lineOffset, length, true);\n      }\n      return convertHTML(this.scroll, index, length, true);\n    }\n    return '';\n  }\n\n  getText(index: number, length: number): string {\n    return this.getContents(index, length)\n      .filter((op) => typeof op.insert === 'string')\n      .map((op) => op.insert)\n      .join('');\n  }\n\n  insertContents(index: number, contents: Delta): Delta {\n    const normalizedDelta = normalizeDelta(contents);\n    const change = new Delta().retain(index).concat(normalizedDelta);\n    this.scroll.insertContents(index, normalizedDelta);\n    return this.update(change);\n  }\n\n  insertEmbed(index: number, embed: string, value: unknown): Delta {\n    this.scroll.insertAt(index, embed, value);\n    return this.update(new Delta().retain(index).insert({ [embed]: value }));\n  }\n\n  insertText(\n    index: number,\n    text: string,\n    formats: Record<string, unknown> = {},\n  ): Delta {\n    text = text.replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n    this.scroll.insertAt(index, text);\n    Object.keys(formats).forEach((format) => {\n      this.scroll.formatAt(index, text.length, format, formats[format]);\n    });\n    return this.update(\n      new Delta().retain(index).insert(text, cloneDeep(formats)),\n    );\n  }\n\n  isBlank(): boolean {\n    if (this.scroll.children.length === 0) return true;\n    if (this.scroll.children.length > 1) return false;\n    const blot = this.scroll.children.head;\n    if (blot?.statics.blotName !== Block.blotName) return false;\n    const block = blot as Block;\n    if (block.children.length > 1) return false;\n    return block.children.head instanceof Break;\n  }\n\n  removeFormat(index: number, length: number): Delta {\n    const text = this.getText(index, length);\n    const [line, offset] = this.scroll.line(index + length);\n    let suffixLength = 0;\n    let suffix = new Delta();\n    if (line != null) {\n      suffixLength = line.length() - offset;\n      suffix = line\n        .delta()\n        .slice(offset, offset + suffixLength - 1)\n        .insert('\\n');\n    }\n    const contents = this.getContents(index, length + suffixLength);\n    const diff = contents.diff(new Delta().insert(text).concat(suffix));\n    const delta = new Delta().retain(index).concat(diff);\n    return this.applyDelta(delta);\n  }\n\n  update(\n    change: Delta | null,\n    mutations: MutationRecord[] = [],\n    selectionInfo: SelectionInfo | undefined = undefined,\n  ): Delta {\n    const oldDelta = this.delta;\n    if (\n      mutations.length === 1 &&\n      mutations[0].type === 'characterData' &&\n      // @ts-expect-error Fix me later\n      mutations[0].target.data.match(ASCII) &&\n      this.scroll.find(mutations[0].target)\n    ) {\n      // Optimization for character changes\n      const textBlot = this.scroll.find(mutations[0].target) as Blot;\n      const formats = bubbleFormats(textBlot);\n      const index = textBlot.offset(this.scroll);\n      // @ts-expect-error Fix me later\n      const oldValue = mutations[0].oldValue.replace(CursorBlot.CONTENTS, '');\n      const oldText = new Delta().insert(oldValue);\n      // @ts-expect-error\n      const newText = new Delta().insert(textBlot.value());\n      const relativeSelectionInfo = selectionInfo && {\n        oldRange: shiftRange(selectionInfo.oldRange, -index),\n        newRange: shiftRange(selectionInfo.newRange, -index),\n      };\n      const diffDelta = new Delta()\n        .retain(index)\n        .concat(oldText.diff(newText, relativeSelectionInfo));\n      change = diffDelta.reduce((delta, op) => {\n        if (op.insert) {\n          return delta.insert(op.insert, formats);\n        }\n        return delta.push(op);\n      }, new Delta());\n      this.delta = oldDelta.compose(change);\n    } else {\n      this.delta = this.getDelta();\n      if (!change || !isEqual(oldDelta.compose(change), this.delta)) {\n        change = oldDelta.diff(this.delta, selectionInfo);\n      }\n    }\n    return change;\n  }\n}\n\ninterface ListItem {\n  child: Blot;\n  offset: number;\n  length: number;\n  indent: number;\n  type: string;\n}\nfunction convertListHTML(\n  items: ListItem[],\n  lastIndent: number,\n  types: string[],\n): string {\n  if (items.length === 0) {\n    const [endTag] = getListType(types.pop());\n    if (lastIndent <= 0) {\n      return `</li></${endTag}>`;\n    }\n    return `</li></${endTag}>${convertListHTML([], lastIndent - 1, types)}`;\n  }\n  const [{ child, offset, length, indent, type }, ...rest] = items;\n  const [tag, attribute] = getListType(type);\n  if (indent > lastIndent) {\n    types.push(type);\n    if (indent === lastIndent + 1) {\n      return `<${tag}><li${attribute}>${convertHTML(\n        child,\n        offset,\n        length,\n      )}${convertListHTML(rest, indent, types)}`;\n    }\n    return `<${tag}><li>${convertListHTML(items, lastIndent + 1, types)}`;\n  }\n  const previousType = types[types.length - 1];\n  if (indent === lastIndent && type === previousType) {\n    return `</li><li${attribute}>${convertHTML(\n      child,\n      offset,\n      length,\n    )}${convertListHTML(rest, indent, types)}`;\n  }\n  const [endTag] = getListType(types.pop());\n  return `</li></${endTag}>${convertListHTML(items, lastIndent - 1, types)}`;\n}\n\nfunction convertHTML(\n  blot: Blot,\n  index: number,\n  length: number,\n  isRoot = false,\n): string {\n  if ('html' in blot && typeof blot.html === 'function') {\n    return blot.html(index, length);\n  }\n  if (blot instanceof TextBlot) {\n    return escapeText(blot.value().slice(index, index + length));\n  }\n  if (blot instanceof ParentBlot) {\n    // TODO fix API\n    if (blot.statics.blotName === 'list-container') {\n      const items: any[] = [];\n      blot.children.forEachAt(index, length, (child, offset, childLength) => {\n        const formats =\n          'formats' in child && typeof child.formats === 'function'\n            ? child.formats()\n            : {};\n        items.push({\n          child,\n          offset,\n          length: childLength,\n          indent: formats.indent || 0,\n          type: formats.list,\n        });\n      });\n      return convertListHTML(items, -1, []);\n    }\n    const parts: string[] = [];\n    blot.children.forEachAt(index, length, (child, offset, childLength) => {\n      parts.push(convertHTML(child, offset, childLength));\n    });\n    if (isRoot || blot.statics.blotName === 'list') {\n      return parts.join('');\n    }\n    const { outerHTML, innerHTML } = blot.domNode as Element;\n    const [start, end] = outerHTML.split(`>${innerHTML}<`);\n    // TODO cleanup\n    if (start === '<table') {\n      return `<table style=\"border: 1px solid #000;\">${parts.join('')}<${end}`;\n    }\n    return `${start}>${parts.join('')}<${end}`;\n  }\n  return blot.domNode instanceof Element ? blot.domNode.outerHTML : '';\n}\n\nfunction combineFormats(\n  formats: Record<string, unknown>,\n  combined: Record<string, unknown>,\n): Record<string, unknown> {\n  return Object.keys(combined).reduce(\n    (merged, name) => {\n      if (formats[name] == null) return merged;\n      const combinedValue = combined[name];\n      if (combinedValue === formats[name]) {\n        merged[name] = combinedValue;\n      } else if (Array.isArray(combinedValue)) {\n        if (combinedValue.indexOf(formats[name]) < 0) {\n          merged[name] = combinedValue.concat([formats[name]]);\n        } else {\n          // If style already exists, don't add to an array, but don't lose other styles\n          merged[name] = combinedValue;\n        }\n      } else {\n        merged[name] = [combinedValue, formats[name]];\n      }\n      return merged;\n    },\n    {} as Record<string, unknown>,\n  );\n}\n\nfunction getListType(type: string | undefined) {\n  const tag = type === 'ordered' ? 'ol' : 'ul';\n  switch (type) {\n    case 'checked':\n      return [tag, ' data-list=\"checked\"'];\n    case 'unchecked':\n      return [tag, ' data-list=\"unchecked\"'];\n    default:\n      return [tag, ''];\n  }\n}\n\nfunction normalizeDelta(delta: Delta) {\n  return delta.reduce((normalizedDelta, op) => {\n    if (typeof op.insert === 'string') {\n      const text = op.insert.replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n      return normalizedDelta.insert(text, op.attributes);\n    }\n    return normalizedDelta.push(op);\n  }, new Delta());\n}\n\nfunction shiftRange({ index, length }: Range, amount: number) {\n  return new Range(index + amount, length);\n}\n\nfunction splitOpLines(ops: Op[]) {\n  const split: Op[] = [];\n  ops.forEach((op) => {\n    if (typeof op.insert === 'string') {\n      const lines = op.insert.split('\\n');\n      lines.forEach((line, index) => {\n        if (index) split.push({ insert: '\\n', attributes: op.attributes });\n        if (line) split.push({ insert: line, attributes: op.attributes });\n      });\n    } else {\n      split.push(op);\n    }\n  });\n\n  return split;\n}\n\nexport default Editor;\n","import type Quill from './quill.js';\n\nabstract class Module<T extends {} = {}> {\n  static DEFAULTS = {};\n\n  constructor(\n    public quill: Quill,\n    protected options: Partial<T> = {},\n  ) {}\n}\n\nexport default Module;\n","import type { ScrollBlot } from 'parchment';\nimport { EmbedBlot } from 'parchment';\nimport TextBlot from './text.js';\n\nconst GUARD_TEXT = '\\uFEFF';\n\nexport interface EmbedContextRange {\n  startNode: Node | Text;\n  startOffset: number;\n  endNode?: Node | Text;\n  endOffset?: number;\n}\n\nclass Embed extends EmbedBlot {\n  contentNode: HTMLSpanElement;\n  leftGuard: Text;\n  rightGuard: Text;\n\n  constructor(scroll: ScrollBlot, node: Node) {\n    super(scroll, node);\n    this.contentNode = document.createElement('span');\n    this.contentNode.setAttribute('contenteditable', 'false');\n    Array.from(this.domNode.childNodes).forEach((childNode) => {\n      this.contentNode.appendChild(childNode);\n    });\n    this.leftGuard = document.createTextNode(GUARD_TEXT);\n    this.rightGuard = document.createTextNode(GUARD_TEXT);\n    this.domNode.appendChild(this.leftGuard);\n    this.domNode.appendChild(this.contentNode);\n    this.domNode.appendChild(this.rightGuard);\n  }\n\n  index(node: Node, offset: number) {\n    if (node === this.leftGuard) return 0;\n    if (node === this.rightGuard) return 1;\n    return super.index(node, offset);\n  }\n\n  restore(node: Text): EmbedContextRange | null {\n    let range: EmbedContextRange | null = null;\n    let textNode: Text;\n    const text = node.data.split(GUARD_TEXT).join('');\n    if (node === this.leftGuard) {\n      if (this.prev instanceof TextBlot) {\n        const prevLength = this.prev.length();\n        this.prev.insertAt(prevLength, text);\n        range = {\n          startNode: this.prev.domNode,\n          startOffset: prevLength + text.length,\n        };\n      } else {\n        textNode = document.createTextNode(text);\n        this.parent.insertBefore(this.scroll.create(textNode), this);\n        range = {\n          startNode: textNode,\n          startOffset: text.length,\n        };\n      }\n    } else if (node === this.rightGuard) {\n      if (this.next instanceof TextBlot) {\n        this.next.insertAt(0, text);\n        range = {\n          startNode: this.next.domNode,\n          startOffset: text.length,\n        };\n      } else {\n        textNode = document.createTextNode(text);\n        this.parent.insertBefore(this.scroll.create(textNode), this.next);\n        range = {\n          startNode: textNode,\n          startOffset: text.length,\n        };\n      }\n    }\n    node.data = GUARD_TEXT;\n    return range;\n  }\n\n  update(mutations: MutationRecord[], context: Record<string, unknown>) {\n    mutations.forEach((mutation) => {\n      if (\n        mutation.type === 'characterData' &&\n        (mutation.target === this.leftGuard ||\n          mutation.target === this.rightGuard)\n      ) {\n        const range = this.restore(mutation.target as Text);\n        if (range) context.range = range;\n      }\n    });\n  }\n}\n\nexport default Embed;\n","import Embed from '../blots/embed.js';\nimport type Scroll from '../blots/scroll.js';\nimport Emitter from './emitter.js';\n\nclass Composition {\n  isComposing = false;\n\n  constructor(\n    private scroll: Scroll,\n    private emitter: Emitter,\n  ) {\n    this.setupListeners();\n  }\n\n  private setupListeners() {\n    this.scroll.domNode.addEventListener('compositionstart', (event) => {\n      if (!this.isComposing) {\n        this.handleCompositionStart(event);\n      }\n    });\n\n    this.scroll.domNode.addEventListener('compositionend', (event) => {\n      if (this.isComposing) {\n        // Webkit makes DOM changes after compositionend, so we use microtask to\n        // ensure the order.\n        // https://bugs.webkit.org/show_bug.cgi?id=31902\n        queueMicrotask(() => {\n          this.handleCompositionEnd(event);\n        });\n      }\n    });\n  }\n\n  private handleCompositionStart(event: CompositionEvent) {\n    const blot =\n      event.target instanceof Node\n        ? this.scroll.find(event.target, true)\n        : null;\n\n    if (blot && !(blot instanceof Embed)) {\n      this.emitter.emit(Emitter.events.COMPOSITION_BEFORE_START, event);\n      this.scroll.batchStart();\n      this.emitter.emit(Emitter.events.COMPOSITION_START, event);\n      this.isComposing = true;\n    }\n  }\n\n  private handleCompositionEnd(event: CompositionEvent) {\n    this.emitter.emit(Emitter.events.COMPOSITION_BEFORE_END, event);\n    this.scroll.batchEnd();\n    this.emitter.emit(Emitter.events.COMPOSITION_END, event);\n    this.isComposing = false;\n  }\n}\n\nexport default Composition;\n","import type Quill from '../core.js';\nimport type Clipboard from '../modules/clipboard.js';\nimport type History from '../modules/history.js';\nimport type Keyboard from '../modules/keyboard.js';\nimport type { ToolbarProps } from '../modules/toolbar.js';\nimport type Uploader from '../modules/uploader.js';\n\nexport interface ThemeOptions {\n  modules: Record<string, unknown> & {\n    toolbar?: null | ToolbarProps;\n  };\n}\n\nclass Theme {\n  static DEFAULTS: ThemeOptions = {\n    modules: {},\n  };\n\n  static themes = {\n    default: Theme,\n  };\n\n  modules: ThemeOptions['modules'] = {};\n\n  constructor(\n    protected quill: Quill,\n    protected options: ThemeOptions,\n  ) {}\n\n  init() {\n    Object.keys(this.options.modules).forEach((name) => {\n      if (this.modules[name] == null) {\n        this.addModule(name);\n      }\n    });\n  }\n\n  addModule(name: 'clipboard'): Clipboard;\n  addModule(name: 'keyboard'): Keyboard;\n  addModule(name: 'uploader'): Uploader;\n  addModule(name: 'history'): History;\n  addModule(name: string): unknown;\n  addModule(name: string) {\n    // @ts-expect-error\n    const ModuleClass = this.quill.constructor.import(`modules/${name}`);\n    this.modules[name] = new ModuleClass(\n      this.quill,\n      this.options.modules[name] || {},\n    );\n    return this.modules[name];\n  }\n}\n\nexport interface ThemeConstructor {\n  new (quill: Quill, options: unknown): Theme;\n  DEFAULTS: ThemeOptions;\n}\n\nexport default Theme;\n","export type Rect = {\n  top: number;\n  right: number;\n  bottom: number;\n  left: number;\n};\n\nconst getParentElement = (element: Node): Element | null =>\n  element.parentElement || (element.getRootNode() as ShadowRoot).host || null;\n\nconst getElementRect = (element: Element): Rect => {\n  const rect = element.getBoundingClientRect();\n  const scaleX =\n    ('offsetWidth' in element &&\n      Math.abs(rect.width) / (element as HTMLElement).offsetWidth) ||\n    1;\n  const scaleY =\n    ('offsetHeight' in element &&\n      Math.abs(rect.height) / (element as HTMLElement).offsetHeight) ||\n    1;\n  return {\n    top: rect.top,\n    right: rect.left + element.clientWidth * scaleX,\n    bottom: rect.top + element.clientHeight * scaleY,\n    left: rect.left,\n  };\n};\n\nconst paddingValueToInt = (value: string) => {\n  const number = parseInt(value, 10);\n  return Number.isNaN(number) ? 0 : number;\n};\n\n// Follow the steps described in https://www.w3.org/TR/cssom-view-1/#element-scrolling-members,\n// assuming that the scroll option is set to 'nearest'.\nconst getScrollDistance = (\n  targetStart: number,\n  targetEnd: number,\n  scrollStart: number,\n  scrollEnd: number,\n  scrollPaddingStart: number,\n  scrollPaddingEnd: number,\n) => {\n  if (targetStart < scrollStart && targetEnd > scrollEnd) {\n    return 0;\n  }\n\n  if (targetStart < scrollStart) {\n    return -(scrollStart - targetStart + scrollPaddingStart);\n  }\n\n  if (targetEnd > scrollEnd) {\n    return targetEnd - targetStart > scrollEnd - scrollStart\n      ? targetStart + scrollPaddingStart - scrollStart\n      : targetEnd - scrollEnd + scrollPaddingEnd;\n  }\n  return 0;\n};\n\nconst scrollRectIntoView = (root: HTMLElement, targetRect: Rect) => {\n  const document = root.ownerDocument;\n\n  let rect = targetRect;\n\n  let current: Element | null = root;\n  while (current) {\n    const isDocumentBody: boolean = current === document.body;\n    const bounding = isDocumentBody\n      ? {\n          top: 0,\n          right:\n            window.visualViewport?.width ??\n            document.documentElement.clientWidth,\n          bottom:\n            window.visualViewport?.height ??\n            document.documentElement.clientHeight,\n          left: 0,\n        }\n      : getElementRect(current);\n\n    const style = getComputedStyle(current);\n    const scrollDistanceX = getScrollDistance(\n      rect.left,\n      rect.right,\n      bounding.left,\n      bounding.right,\n      paddingValueToInt(style.scrollPaddingLeft),\n      paddingValueToInt(style.scrollPaddingRight),\n    );\n    const scrollDistanceY = getScrollDistance(\n      rect.top,\n      rect.bottom,\n      bounding.top,\n      bounding.bottom,\n      paddingValueToInt(style.scrollPaddingTop),\n      paddingValueToInt(style.scrollPaddingBottom),\n    );\n    if (scrollDistanceX || scrollDistanceY) {\n      if (isDocumentBody) {\n        document.defaultView?.scrollBy(scrollDistanceX, scrollDistanceY);\n      } else {\n        const { scrollLeft, scrollTop } = current;\n        if (scrollDistanceY) {\n          current.scrollTop += scrollDistanceY;\n        }\n        if (scrollDistanceX) {\n          current.scrollLeft += scrollDistanceX;\n        }\n        const scrolledLeft = current.scrollLeft - scrollLeft;\n        const scrolledTop = current.scrollTop - scrollTop;\n        rect = {\n          left: rect.left - scrolledLeft,\n          top: rect.top - scrolledTop,\n          right: rect.right - scrolledLeft,\n          bottom: rect.bottom - scrolledTop,\n        };\n      }\n    }\n\n    current =\n      isDocumentBody || style.position === 'fixed'\n        ? null\n        : getParentElement(current);\n  }\n};\n\nexport default scrollRectIntoView;\n","import { Registry } from 'parchment';\n\nconst MAX_REGISTER_ITERATIONS = 100;\nconst CORE_FORMATS = ['block', 'break', 'cursor', 'inline', 'scroll', 'text'];\n\nconst createRegistryWithFormats = (\n  formats: string[],\n  sourceRegistry: Registry,\n  debug: { error: (errorMessage: string) => void },\n) => {\n  const registry = new Registry();\n  CORE_FORMATS.forEach((name) => {\n    const coreBlot = sourceRegistry.query(name);\n    if (coreBlot) registry.register(coreBlot);\n  });\n\n  formats.forEach((name) => {\n    let format = sourceRegistry.query(name);\n    if (!format) {\n      debug.error(\n        `Cannot register \"${name}\" specified in \"formats\" config. Are you sure it was registered?`,\n      );\n    }\n    let iterations = 0;\n    while (format) {\n      registry.register(format);\n      format = 'blotName' in format ? format.requiredContainer ?? null : null;\n\n      iterations += 1;\n      if (iterations > MAX_REGISTER_ITERATIONS) {\n        debug.error(\n          `Cycle detected in registering blot requiredContainer: \"${name}\"`,\n        );\n        break;\n      }\n    }\n  });\n\n  return registry;\n};\n\nexport default createRegistryWithFormats;\n","import { merge } from 'lodash-es';\nimport * as Parchment from 'parchment';\nimport type { Op } from 'quill-delta';\nimport Delta from 'quill-delta';\nimport type { BlockEmbed } from '../blots/block.js';\nimport type Block from '../blots/block.js';\nimport type Scroll from '../blots/scroll.js';\nimport type Clipboard from '../modules/clipboard.js';\nimport type History from '../modules/history.js';\nimport type Keyboard from '../modules/keyboard.js';\nimport type Uploader from '../modules/uploader.js';\nimport Editor from './editor.js';\nimport Emitter from './emitter.js';\nimport type { EmitterSource } from './emitter.js';\nimport instances from './instances.js';\nimport logger from './logger.js';\nimport type { DebugLevel } from './logger.js';\nimport Module from './module.js';\nimport Selection, { Range } from './selection.js';\nimport type { Bounds } from './selection.js';\nimport Composition from './composition.js';\nimport Theme from './theme.js';\nimport type { ThemeConstructor } from './theme.js';\nimport scrollRectIntoView from './utils/scrollRectIntoView.js';\nimport type { Rect } from './utils/scrollRectIntoView.js';\nimport createRegistryWithFormats from './utils/createRegistryWithFormats.js';\n\nconst debug = logger('quill');\n\nconst globalRegistry = new Parchment.Registry();\nParchment.ParentBlot.uiClass = 'ql-ui';\n\n/**\n * Options for initializing a Quill instance\n */\nexport interface QuillOptions {\n  theme?: string;\n  debug?: DebugLevel | boolean;\n  registry?: Parchment.Registry;\n  /**\n   * Whether to disable the editing\n   * @default false\n   */\n  readOnly?: boolean;\n\n  /**\n   * Placeholder text to display when the editor is empty\n   * @default \"\"\n   */\n  placeholder?: string;\n  bounds?: HTMLElement | string | null;\n  modules?: Record<string, unknown>;\n\n  /**\n   * A list of formats that are recognized and can exist within the editor contents.\n   * `null` means all formats are allowed.\n   * @default null\n   */\n  formats?: string[] | null;\n}\n\n/**\n * Similar to QuillOptions, but with all properties expanded to their default values,\n * and all selectors resolved to HTMLElements.\n */\nexport interface ExpandedQuillOptions\n  extends Omit<QuillOptions, 'theme' | 'formats'> {\n  theme: ThemeConstructor;\n  registry: Parchment.Registry;\n  container: HTMLElement;\n  modules: Record<string, unknown>;\n  bounds?: HTMLElement | null;\n  readOnly: boolean;\n}\n\nclass Quill {\n  static DEFAULTS = {\n    bounds: null,\n    modules: {\n      clipboard: true,\n      keyboard: true,\n      history: true,\n      uploader: true,\n    },\n    placeholder: '',\n    readOnly: false,\n    registry: globalRegistry,\n    theme: 'default',\n  } satisfies Partial<QuillOptions>;\n  static events = Emitter.events;\n  static sources = Emitter.sources;\n  static version = typeof QUILL_VERSION === 'undefined' ? 'dev' : QUILL_VERSION;\n\n  static imports: Record<string, unknown> = {\n    delta: Delta,\n    parchment: Parchment,\n    'core/module': Module,\n    'core/theme': Theme,\n  };\n\n  static debug(limit: DebugLevel | boolean) {\n    if (limit === true) {\n      limit = 'log';\n    }\n    logger.level(limit);\n  }\n\n  static find(node: Node, bubble = false) {\n    return instances.get(node) || globalRegistry.find(node, bubble);\n  }\n\n  static import(name: 'core/module'): typeof Module;\n  static import(name: `themes/${string}`): typeof Theme;\n  static import(name: 'parchment'): typeof Parchment;\n  static import(name: 'delta'): typeof Delta;\n  static import(name: string): unknown;\n  static import(name: string) {\n    if (this.imports[name] == null) {\n      debug.error(`Cannot import ${name}. Are you sure it was registered?`);\n    }\n    return this.imports[name];\n  }\n\n  static register(\n    targets: Record<\n      string,\n      | Parchment.RegistryDefinition\n      | Record<string, unknown> // any objects\n      | Theme\n      | Module\n      | Function // ES5 constructors\n    >,\n    overwrite?: boolean,\n  ): void;\n  static register(\n    target: Parchment.RegistryDefinition,\n    overwrite?: boolean,\n  ): void;\n  static register(path: string, target: any, overwrite?: boolean): void;\n  static register(...args: any[]): void {\n    if (typeof args[0] !== 'string') {\n      const target = args[0];\n      const overwrite = !!args[1];\n\n      const name = 'attrName' in target ? target.attrName : target.blotName;\n      if (typeof name === 'string') {\n        // Shortcut for formats:\n        // register(Blot | Attributor, overwrite)\n        this.register(`formats/${name}`, target, overwrite);\n      } else {\n        Object.keys(target).forEach((key) => {\n          this.register(key, target[key], overwrite);\n        });\n      }\n    } else {\n      const path = args[0];\n      const target = args[1];\n      const overwrite = !!args[2];\n\n      if (this.imports[path] != null && !overwrite) {\n        debug.warn(`Overwriting ${path} with`, target);\n      }\n      this.imports[path] = target;\n      if (\n        (path.startsWith('blots/') || path.startsWith('formats/')) &&\n        target &&\n        typeof target !== 'boolean' &&\n        target.blotName !== 'abstract'\n      ) {\n        globalRegistry.register(target);\n      }\n      if (typeof target.register === 'function') {\n        target.register(globalRegistry);\n      }\n    }\n  }\n\n  container: HTMLElement;\n  root: HTMLDivElement;\n  scroll: Scroll;\n  emitter: Emitter;\n  protected allowReadOnlyEdits: boolean;\n  editor: Editor;\n  composition: Composition;\n  selection: Selection;\n\n  theme: Theme;\n  keyboard: Keyboard;\n  clipboard: Clipboard;\n  history: History;\n  uploader: Uploader;\n\n  options: ExpandedQuillOptions;\n\n  constructor(container: HTMLElement | string, options: QuillOptions = {}) {\n    this.options = expandConfig(container, options);\n    this.container = this.options.container;\n    if (this.container == null) {\n      debug.error('Invalid Quill container', container);\n      return;\n    }\n    if (this.options.debug) {\n      Quill.debug(this.options.debug);\n    }\n    const html = this.container.innerHTML.trim();\n    this.container.classList.add('ql-container');\n    this.container.innerHTML = '';\n    instances.set(this.container, this);\n    this.root = this.addContainer('ql-editor');\n    this.root.classList.add('ql-blank');\n    this.emitter = new Emitter();\n    const scrollBlotName = Parchment.ScrollBlot.blotName;\n    const ScrollBlot = this.options.registry.query(scrollBlotName);\n    if (!ScrollBlot || !('blotName' in ScrollBlot)) {\n      throw new Error(\n        `Cannot initialize Quill without \"${scrollBlotName}\" blot`,\n      );\n    }\n    this.scroll = new ScrollBlot(this.options.registry, this.root, {\n      emitter: this.emitter,\n    }) as Scroll;\n    this.editor = new Editor(this.scroll);\n    this.selection = new Selection(this.scroll, this.emitter);\n    this.composition = new Composition(this.scroll, this.emitter);\n    this.theme = new this.options.theme(this, this.options); // eslint-disable-line new-cap\n    this.keyboard = this.theme.addModule('keyboard');\n    this.clipboard = this.theme.addModule('clipboard');\n    this.history = this.theme.addModule('history');\n    this.uploader = this.theme.addModule('uploader');\n    this.theme.addModule('input');\n    this.theme.addModule('uiNode');\n    this.theme.init();\n    this.emitter.on(Emitter.events.EDITOR_CHANGE, (type) => {\n      if (type === Emitter.events.TEXT_CHANGE) {\n        this.root.classList.toggle('ql-blank', this.editor.isBlank());\n      }\n    });\n    this.emitter.on(Emitter.events.SCROLL_UPDATE, (source, mutations) => {\n      const oldRange = this.selection.lastRange;\n      const [newRange] = this.selection.getRange();\n      const selectionInfo =\n        oldRange && newRange ? { oldRange, newRange } : undefined;\n      modify.call(\n        this,\n        () => this.editor.update(null, mutations, selectionInfo),\n        source,\n      );\n    });\n    this.emitter.on(Emitter.events.SCROLL_EMBED_UPDATE, (blot, delta) => {\n      const oldRange = this.selection.lastRange;\n      const [newRange] = this.selection.getRange();\n      const selectionInfo =\n        oldRange && newRange ? { oldRange, newRange } : undefined;\n      modify.call(\n        this,\n        () => {\n          const change = new Delta()\n            .retain(blot.offset(this))\n            .retain({ [blot.statics.blotName]: delta });\n          return this.editor.update(change, [], selectionInfo);\n        },\n        Quill.sources.USER,\n      );\n    });\n    if (html) {\n      const contents = this.clipboard.convert({\n        html: `${html}<p><br></p>`,\n        text: '\\n',\n      });\n      this.setContents(contents);\n    }\n    this.history.clear();\n    if (this.options.placeholder) {\n      this.root.setAttribute('data-placeholder', this.options.placeholder);\n    }\n    if (this.options.readOnly) {\n      this.disable();\n    }\n    this.allowReadOnlyEdits = false;\n  }\n\n  addContainer(container: string, refNode?: Node | null): HTMLDivElement;\n  addContainer(container: HTMLElement, refNode?: Node | null): HTMLElement;\n  addContainer(\n    container: string | HTMLElement,\n    refNode: Node | null = null,\n  ): HTMLDivElement | HTMLElement {\n    if (typeof container === 'string') {\n      const className = container;\n      container = document.createElement('div');\n      container.classList.add(className);\n    }\n    this.container.insertBefore(container, refNode);\n    return container;\n  }\n\n  blur() {\n    this.selection.setRange(null);\n  }\n\n  deleteText(range: Range, source?: EmitterSource): Delta;\n  deleteText(index: number, length: number, source?: EmitterSource): Delta;\n  deleteText(\n    index: number | Range,\n    length?: number | EmitterSource,\n    source?: EmitterSource,\n  ): Delta {\n    // @ts-expect-error\n    [index, length, , source] = overload(index, length, source);\n    return modify.call(\n      this,\n      () => {\n        return this.editor.deleteText(index, length);\n      },\n      source,\n      index,\n      -1 * length,\n    );\n  }\n\n  disable() {\n    this.enable(false);\n  }\n\n  editReadOnly<T>(modifier: () => T): T {\n    this.allowReadOnlyEdits = true;\n    const value = modifier();\n    this.allowReadOnlyEdits = false;\n    return value;\n  }\n\n  enable(enabled = true) {\n    this.scroll.enable(enabled);\n    this.container.classList.toggle('ql-disabled', !enabled);\n  }\n\n  focus(options: { preventScroll?: boolean } = {}) {\n    this.selection.focus();\n    if (!options.preventScroll) {\n      this.scrollSelectionIntoView();\n    }\n  }\n\n  format(\n    name: string,\n    value: unknown,\n    source: EmitterSource = Emitter.sources.API,\n  ): Delta {\n    return modify.call(\n      this,\n      () => {\n        const range = this.getSelection(true);\n        let change = new Delta();\n        if (range == null) return change;\n        if (this.scroll.query(name, Parchment.Scope.BLOCK)) {\n          change = this.editor.formatLine(range.index, range.length, {\n            [name]: value,\n          });\n        } else if (range.length === 0) {\n          this.selection.format(name, value);\n          return change;\n        } else {\n          change = this.editor.formatText(range.index, range.length, {\n            [name]: value,\n          });\n        }\n        this.setSelection(range, Emitter.sources.SILENT);\n        return change;\n      },\n      source,\n    );\n  }\n\n  formatLine(\n    index: number,\n    length: number,\n    formats: Record<string, unknown>,\n    source?: EmitterSource,\n  ): Delta;\n  formatLine(\n    index: number,\n    length: number,\n    name: string,\n    value?: unknown,\n    source?: EmitterSource,\n  ): Delta;\n  formatLine(\n    index: number,\n    length: number,\n    name: string | Record<string, unknown>,\n    value?: unknown | EmitterSource,\n    source?: EmitterSource,\n  ): Delta {\n    let formats: Record<string, unknown>;\n    // eslint-disable-next-line prefer-const\n    [index, length, formats, source] = overload(\n      index,\n      length,\n      // @ts-expect-error\n      name,\n      value,\n      source,\n    );\n    return modify.call(\n      this,\n      () => {\n        return this.editor.formatLine(index, length, formats);\n      },\n      source,\n      index,\n      0,\n    );\n  }\n\n  formatText(\n    range: Range,\n    name: string,\n    value: unknown,\n    source?: EmitterSource,\n  ): Delta;\n  formatText(\n    index: number,\n    length: number,\n    name: string,\n    value: unknown,\n    source?: EmitterSource,\n  ): Delta;\n  formatText(\n    index: number,\n    length: number,\n    formats: Record<string, unknown>,\n    source?: EmitterSource,\n  ): Delta;\n  formatText(\n    index: number | Range,\n    length: number | string,\n    name: string | unknown,\n    value?: unknown | EmitterSource,\n    source?: EmitterSource,\n  ): Delta {\n    let formats: Record<string, unknown>;\n    // eslint-disable-next-line prefer-const\n    [index, length, formats, source] = overload(\n      // @ts-expect-error\n      index,\n      length,\n      name,\n      value,\n      source,\n    );\n    return modify.call(\n      this,\n      () => {\n        return this.editor.formatText(index, length, formats);\n      },\n      source,\n      index,\n      0,\n    );\n  }\n\n  getBounds(index: number | Range, length = 0): Bounds | null {\n    let bounds: Bounds | null = null;\n    if (typeof index === 'number') {\n      bounds = this.selection.getBounds(index, length);\n    } else {\n      bounds = this.selection.getBounds(index.index, index.length);\n    }\n    if (!bounds) return null;\n    const containerBounds = this.container.getBoundingClientRect();\n    return {\n      bottom: bounds.bottom - containerBounds.top,\n      height: bounds.height,\n      left: bounds.left - containerBounds.left,\n      right: bounds.right - containerBounds.left,\n      top: bounds.top - containerBounds.top,\n      width: bounds.width,\n    };\n  }\n\n  getContents(index = 0, length = this.getLength() - index) {\n    [index, length] = overload(index, length);\n    return this.editor.getContents(index, length);\n  }\n\n  getFormat(index?: number, length?: number): { [format: string]: unknown };\n  getFormat(range?: Range): {\n    [format: string]: unknown;\n  };\n  getFormat(\n    index: Range | number = this.getSelection(true),\n    length = 0,\n  ): { [format: string]: unknown } {\n    if (typeof index === 'number') {\n      return this.editor.getFormat(index, length);\n    }\n    return this.editor.getFormat(index.index, index.length);\n  }\n\n  getIndex(blot: Parchment.Blot) {\n    return blot.offset(this.scroll);\n  }\n\n  getLength() {\n    return this.scroll.length();\n  }\n\n  getLeaf(index: number) {\n    return this.scroll.leaf(index);\n  }\n\n  getLine(index: number) {\n    return this.scroll.line(index);\n  }\n\n  getLines(range: Range): (Block | BlockEmbed)[];\n  getLines(index?: number, length?: number): (Block | BlockEmbed)[];\n  getLines(\n    index: Range | number = 0,\n    length = Number.MAX_VALUE,\n  ): (Block | BlockEmbed)[] {\n    if (typeof index !== 'number') {\n      return this.scroll.lines(index.index, index.length);\n    }\n    return this.scroll.lines(index, length);\n  }\n\n  getModule(name: string) {\n    return this.theme.modules[name];\n  }\n\n  getSelection(focus: true): Range;\n  getSelection(focus?: boolean): Range | null;\n  getSelection(focus = false): Range | null {\n    if (focus) this.focus();\n    this.update(); // Make sure we access getRange with editor in consistent state\n    return this.selection.getRange()[0];\n  }\n\n  getSemanticHTML(range: Range): string;\n  getSemanticHTML(index?: number, length?: number): string;\n  getSemanticHTML(index: Range | number = 0, length?: number) {\n    if (typeof index === 'number') {\n      length = length ?? this.getLength() - index;\n    }\n    // @ts-expect-error\n    [index, length] = overload(index, length);\n    return this.editor.getHTML(index, length);\n  }\n\n  getText(range?: Range): string;\n  getText(index?: number, length?: number): string;\n  getText(index: Range | number = 0, length?: number): string {\n    if (typeof index === 'number') {\n      length = length ?? this.getLength() - index;\n    }\n    // @ts-expect-error\n    [index, length] = overload(index, length);\n    return this.editor.getText(index, length);\n  }\n\n  hasFocus() {\n    return this.selection.hasFocus();\n  }\n\n  insertEmbed(\n    index: number,\n    embed: string,\n    value: unknown,\n    source: EmitterSource = Quill.sources.API,\n  ): Delta {\n    return modify.call(\n      this,\n      () => {\n        return this.editor.insertEmbed(index, embed, value);\n      },\n      source,\n      index,\n    );\n  }\n\n  insertText(index: number, text: string, source?: EmitterSource): Delta;\n  insertText(\n    index: number,\n    text: string,\n    formats: Record<string, unknown>,\n    source?: EmitterSource,\n  ): Delta;\n  insertText(\n    index: number,\n    text: string,\n    name: string,\n    value: unknown,\n    source?: EmitterSource,\n  ): Delta;\n  insertText(\n    index: number,\n    text: string,\n    name?: string | Record<string, unknown> | EmitterSource,\n    value?: unknown,\n    source?: EmitterSource,\n  ): Delta {\n    let formats: Record<string, unknown>;\n    // eslint-disable-next-line prefer-const\n    // @ts-expect-error\n    [index, , formats, source] = overload(index, 0, name, value, source);\n    return modify.call(\n      this,\n      () => {\n        return this.editor.insertText(index, text, formats);\n      },\n      source,\n      index,\n      text.length,\n    );\n  }\n\n  isEnabled() {\n    return this.scroll.isEnabled();\n  }\n\n  off(...args: Parameters<(typeof Emitter)['prototype']['off']>) {\n    return this.emitter.off(...args);\n  }\n\n  on(\n    event: (typeof Emitter)['events']['TEXT_CHANGE'],\n    handler: (delta: Delta, oldContent: Delta, source: EmitterSource) => void,\n  ): Emitter;\n  on(\n    event: (typeof Emitter)['events']['SELECTION_CHANGE'],\n    handler: (range: Range, oldRange: Range, source: EmitterSource) => void,\n  ): Emitter;\n  on(\n    event: (typeof Emitter)['events']['EDITOR_CHANGE'],\n    handler: (\n      ...args:\n        | [\n            (typeof Emitter)['events']['TEXT_CHANGE'],\n            Delta,\n            Delta,\n            EmitterSource,\n          ]\n        | [\n            (typeof Emitter)['events']['SELECTION_CHANGE'],\n            Range,\n            Range,\n            EmitterSource,\n          ]\n    ) => void,\n  ): Emitter;\n  on(event: string, ...args: unknown[]): Emitter;\n  on(...args: Parameters<(typeof Emitter)['prototype']['on']>): Emitter {\n    return this.emitter.on(...args);\n  }\n\n  once(...args: Parameters<(typeof Emitter)['prototype']['once']>) {\n    return this.emitter.once(...args);\n  }\n\n  removeFormat(index: number, length: number, source?: EmitterSource): Delta {\n    [index, length, , source] = overload(index, length, source);\n    return modify.call(\n      this,\n      () => {\n        return this.editor.removeFormat(index, length);\n      },\n      source,\n      index,\n    );\n  }\n\n  scrollRectIntoView(rect: Rect) {\n    scrollRectIntoView(this.root, rect);\n  }\n\n  /**\n   * @deprecated Use Quill#scrollSelectionIntoView() instead.\n   */\n  scrollIntoView() {\n    console.warn(\n      'Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead.',\n    );\n    this.scrollSelectionIntoView();\n  }\n\n  /**\n   * Scroll the current selection into the visible area.\n   * If the selection is already visible, no scrolling will occur.\n   */\n  scrollSelectionIntoView() {\n    const range = this.selection.lastRange;\n    const bounds = range && this.selection.getBounds(range.index, range.length);\n    if (bounds) {\n      this.scrollRectIntoView(bounds);\n    }\n  }\n\n  setContents(\n    delta: Delta | Op[],\n    source: EmitterSource = Emitter.sources.API,\n  ): Delta {\n    return modify.call(\n      this,\n      () => {\n        delta = new Delta(delta);\n        const length = this.getLength();\n        // Quill will set empty editor to \\n\n        const delete1 = this.editor.deleteText(0, length);\n        const applied = this.editor.insertContents(0, delta);\n        // Remove extra \\n from empty editor initialization\n        const delete2 = this.editor.deleteText(this.getLength() - 1, 1);\n        return delete1.compose(applied).compose(delete2);\n      },\n      source,\n    );\n  }\n  setSelection(range: Range | null, source?: EmitterSource): void;\n  setSelection(index: number, source?: EmitterSource): void;\n  setSelection(index: number, length?: number, source?: EmitterSource): void;\n  setSelection(index: number, source?: EmitterSource): void;\n  setSelection(\n    index: Range | null | number,\n    length?: EmitterSource | number,\n    source?: EmitterSource,\n  ): void {\n    if (index == null) {\n      // @ts-expect-error https://github.com/microsoft/TypeScript/issues/22609\n      this.selection.setRange(null, length || Quill.sources.API);\n    } else {\n      // @ts-expect-error\n      [index, length, , source] = overload(index, length, source);\n      this.selection.setRange(new Range(Math.max(0, index), length), source);\n      if (source !== Emitter.sources.SILENT) {\n        this.scrollSelectionIntoView();\n      }\n    }\n  }\n\n  setText(text: string, source: EmitterSource = Emitter.sources.API) {\n    const delta = new Delta().insert(text);\n    return this.setContents(delta, source);\n  }\n\n  update(source: EmitterSource = Emitter.sources.USER) {\n    const change = this.scroll.update(source); // Will update selection before selection.update() does if text changes\n    this.selection.update(source);\n    // TODO this is usually undefined\n    return change;\n  }\n\n  updateContents(\n    delta: Delta | Op[],\n    source: EmitterSource = Emitter.sources.API,\n  ): Delta {\n    return modify.call(\n      this,\n      () => {\n        delta = new Delta(delta);\n        return this.editor.applyDelta(delta);\n      },\n      source,\n      true,\n    );\n  }\n}\n\nfunction resolveSelector(selector: string | HTMLElement | null | undefined) {\n  return typeof selector === 'string'\n    ? document.querySelector<HTMLElement>(selector)\n    : selector;\n}\n\nfunction expandModuleConfig(config: Record<string, unknown> | undefined) {\n  return Object.entries(config ?? {}).reduce(\n    (expanded, [key, value]) => ({\n      ...expanded,\n      [key]: value === true ? {} : value,\n    }),\n    {} as Record<string, unknown>,\n  );\n}\n\nfunction omitUndefinedValuesFromOptions(obj: QuillOptions) {\n  return Object.fromEntries(\n    Object.entries(obj).filter((entry) => entry[1] !== undefined),\n  );\n}\n\nfunction expandConfig(\n  containerOrSelector: HTMLElement | string,\n  options: QuillOptions,\n): ExpandedQuillOptions {\n  const container = resolveSelector(containerOrSelector);\n  if (!container) {\n    throw new Error('Invalid Quill container');\n  }\n\n  const shouldUseDefaultTheme =\n    !options.theme || options.theme === Quill.DEFAULTS.theme;\n  const theme = shouldUseDefaultTheme\n    ? Theme\n    : Quill.import(`themes/${options.theme}`);\n  if (!theme) {\n    throw new Error(`Invalid theme ${options.theme}. Did you register it?`);\n  }\n\n  const { modules: quillModuleDefaults, ...quillDefaults } = Quill.DEFAULTS;\n  const { modules: themeModuleDefaults, ...themeDefaults } = theme.DEFAULTS;\n\n  let userModuleOptions = expandModuleConfig(options.modules);\n  // Special case toolbar shorthand\n  if (\n    userModuleOptions != null &&\n    userModuleOptions.toolbar &&\n    userModuleOptions.toolbar.constructor !== Object\n  ) {\n    userModuleOptions = {\n      ...userModuleOptions,\n      toolbar: { container: userModuleOptions.toolbar },\n    };\n  }\n\n  const modules: ExpandedQuillOptions['modules'] = merge(\n    {},\n    expandModuleConfig(quillModuleDefaults),\n    expandModuleConfig(themeModuleDefaults),\n    userModuleOptions,\n  );\n\n  const config = {\n    ...quillDefaults,\n    ...omitUndefinedValuesFromOptions(themeDefaults),\n    ...omitUndefinedValuesFromOptions(options),\n  };\n\n  let registry = options.registry;\n  if (registry) {\n    if (options.formats) {\n      debug.warn('Ignoring \"formats\" option because \"registry\" is specified');\n    }\n  } else {\n    registry = options.formats\n      ? createRegistryWithFormats(options.formats, config.registry, debug)\n      : config.registry;\n  }\n\n  return {\n    ...config,\n    registry,\n    container,\n    theme,\n    modules: Object.entries(modules).reduce(\n      (modulesWithDefaults, [name, value]) => {\n        if (!value) return modulesWithDefaults;\n\n        const moduleClass = Quill.import(`modules/${name}`);\n        if (moduleClass == null) {\n          debug.error(\n            `Cannot load ${name} module. Are you sure you registered it?`,\n          );\n          return modulesWithDefaults;\n        }\n        return {\n          ...modulesWithDefaults,\n          // @ts-expect-error\n          [name]: merge({}, moduleClass.DEFAULTS || {}, value),\n        };\n      },\n      {},\n    ),\n    bounds: resolveSelector(config.bounds),\n  };\n}\n\n// Handle selection preservation and TEXT_CHANGE emission\n// common to modification APIs\nfunction modify(\n  modifier: () => Delta,\n  source: EmitterSource,\n  index: number | boolean,\n  shift: number | null,\n) {\n  if (\n    !this.isEnabled() &&\n    source === Emitter.sources.USER &&\n    !this.allowReadOnlyEdits\n  ) {\n    return new Delta();\n  }\n  let range = index == null ? null : this.getSelection();\n  const oldDelta = this.editor.delta;\n  const change = modifier();\n  if (range != null) {\n    if (index === true) {\n      index = range.index; // eslint-disable-line prefer-destructuring\n    }\n    if (shift == null) {\n      range = shiftRange(range, change, source);\n    } else if (shift !== 0) {\n      // @ts-expect-error index should always be number\n      range = shiftRange(range, index, shift, source);\n    }\n    this.setSelection(range, Emitter.sources.SILENT);\n  }\n  if (change.length() > 0) {\n    const args = [Emitter.events.TEXT_CHANGE, change, oldDelta, source];\n    this.emitter.emit(Emitter.events.EDITOR_CHANGE, ...args);\n    if (source !== Emitter.sources.SILENT) {\n      this.emitter.emit(...args);\n    }\n  }\n  return change;\n}\n\ntype NormalizedIndexLength = [\n  number,\n  number,\n  Record<string, unknown>,\n  EmitterSource,\n];\nfunction overload(index: number, source?: EmitterSource): NormalizedIndexLength;\nfunction overload(\n  index: number,\n  length: number,\n  source?: EmitterSource,\n): NormalizedIndexLength;\nfunction overload(\n  index: number,\n  length: number,\n  format: string,\n  value: unknown,\n  source?: EmitterSource,\n): NormalizedIndexLength;\nfunction overload(\n  index: number,\n  length: number,\n  format: Record<string, unknown>,\n  source?: EmitterSource,\n): NormalizedIndexLength;\nfunction overload(range: Range, source?: EmitterSource): NormalizedIndexLength;\nfunction overload(\n  range: Range,\n  format: string,\n  value: unknown,\n  source?: EmitterSource,\n): NormalizedIndexLength;\nfunction overload(\n  range: Range,\n  format: Record<string, unknown>,\n  source?: EmitterSource,\n): NormalizedIndexLength;\nfunction overload(\n  index: Range | number,\n  length?: number | string | Record<string, unknown> | EmitterSource,\n  name?: string | unknown | Record<string, unknown> | EmitterSource,\n  value?: unknown | EmitterSource,\n  source?: EmitterSource,\n): NormalizedIndexLength {\n  let formats: Record<string, unknown> = {};\n  // @ts-expect-error\n  if (typeof index.index === 'number' && typeof index.length === 'number') {\n    // Allow for throwaway end (used by insertText/insertEmbed)\n    if (typeof length !== 'number') {\n      // @ts-expect-error\n      source = value;\n      value = name;\n      name = length;\n      // @ts-expect-error\n      length = index.length; // eslint-disable-line prefer-destructuring\n      // @ts-expect-error\n      index = index.index; // eslint-disable-line prefer-destructuring\n    } else {\n      // @ts-expect-error\n      length = index.length; // eslint-disable-line prefer-destructuring\n      // @ts-expect-error\n      index = index.index; // eslint-disable-line prefer-destructuring\n    }\n  } else if (typeof length !== 'number') {\n    // @ts-expect-error\n    source = value;\n    value = name;\n    name = length;\n    length = 0;\n  }\n  // Handle format being object, two format name/value strings or excluded\n  if (typeof name === 'object') {\n    // @ts-expect-error Fix me later\n    formats = name;\n    // @ts-expect-error\n    source = value;\n  } else if (typeof name === 'string') {\n    if (value != null) {\n      formats[name] = value;\n    } else {\n      // @ts-expect-error\n      source = name;\n    }\n  }\n  // Handle optional source\n  source = source || Emitter.sources.API;\n  // @ts-expect-error\n  return [index, length, formats, source];\n}\n\nfunction shiftRange(range: Range, change: Delta, source?: EmitterSource): Range;\nfunction shiftRange(\n  range: Range,\n  index: number,\n  length?: number,\n  source?: EmitterSource,\n): Range;\nfunction shiftRange(\n  range: Range,\n  index: number | Delta,\n  lengthOrSource?: number | EmitterSource,\n  source?: EmitterSource,\n) {\n  const length = typeof lengthOrSource === 'number' ? lengthOrSource : 0;\n  if (range == null) return null;\n  let start;\n  let end;\n  // @ts-expect-error -- TODO: add a better type guard around `index`\n  if (index && typeof index.transformPosition === 'function') {\n    [start, end] = [range.index, range.index + range.length].map((pos) =>\n      // @ts-expect-error -- TODO: add a better type guard around `index`\n      index.transformPosition(pos, source !== Emitter.sources.USER),\n    );\n  } else {\n    [start, end] = [range.index, range.index + range.length].map((pos) => {\n      // @ts-expect-error -- TODO: add a better type guard around `index`\n      if (pos < index || (pos === index && source === Emitter.sources.USER))\n        return pos;\n      if (length >= 0) {\n        return pos + length;\n      }\n      // @ts-expect-error -- TODO: add a better type guard around `index`\n      return Math.max(index, pos + length);\n    });\n  }\n  return new Range(start, end - start);\n}\n\nexport type { Bounds, DebugLevel, EmitterSource };\nexport { Parchment, Range };\n\nexport { globalRegistry, expandConfig, overload, Quill as default };\n","import { ContainerBlot } from 'parchment';\n\nclass Container extends ContainerBlot {}\n\nexport default Container;\n","import { ContainerBlot, LeafBlot, Scope, ScrollBlot } from 'parchment';\nimport type { Blot, Parent, EmbedBlot, ParentBlot, Registry } from 'parchment';\nimport Delta, { AttributeMap, Op } from 'quill-delta';\nimport Emitter from '../core/emitter.js';\nimport type { EmitterSource } from '../core/emitter.js';\nimport Block, { BlockEmbed, bubbleFormats } from './block.js';\nimport Break from './break.js';\nimport Container from './container.js';\n\ntype RenderBlock =\n  | {\n      type: 'blockEmbed';\n      attributes: AttributeMap;\n      key: string;\n      value: unknown;\n    }\n  | { type: 'block'; attributes: AttributeMap; delta: Delta };\n\nfunction isLine(blot: unknown): blot is Block | BlockEmbed {\n  return blot instanceof Block || blot instanceof BlockEmbed;\n}\n\ninterface UpdatableEmbed {\n  updateContent(change: unknown): void;\n}\n\nfunction isUpdatable(blot: Blot): blot is Blot & UpdatableEmbed {\n  return typeof (blot as unknown as any).updateContent === 'function';\n}\n\nclass Scroll extends ScrollBlot {\n  static blotName = 'scroll';\n  static className = 'ql-editor';\n  static tagName = 'DIV';\n  static defaultChild = Block;\n  static allowedChildren = [Block, BlockEmbed, Container];\n\n  emitter: Emitter;\n  batch: false | MutationRecord[];\n\n  constructor(\n    registry: Registry,\n    domNode: HTMLDivElement,\n    { emitter }: { emitter: Emitter },\n  ) {\n    super(registry, domNode);\n    this.emitter = emitter;\n    this.batch = false;\n    this.optimize();\n    this.enable();\n    this.domNode.addEventListener('dragstart', (e) => this.handleDragStart(e));\n  }\n\n  batchStart() {\n    if (!Array.isArray(this.batch)) {\n      this.batch = [];\n    }\n  }\n\n  batchEnd() {\n    if (!this.batch) return;\n    const mutations = this.batch;\n    this.batch = false;\n    this.update(mutations);\n  }\n\n  emitMount(blot: Blot) {\n    this.emitter.emit(Emitter.events.SCROLL_BLOT_MOUNT, blot);\n  }\n\n  emitUnmount(blot: Blot) {\n    this.emitter.emit(Emitter.events.SCROLL_BLOT_UNMOUNT, blot);\n  }\n\n  emitEmbedUpdate(blot: Blot, change: unknown) {\n    this.emitter.emit(Emitter.events.SCROLL_EMBED_UPDATE, blot, change);\n  }\n\n  deleteAt(index: number, length: number) {\n    const [first, offset] = this.line(index);\n    const [last] = this.line(index + length);\n    super.deleteAt(index, length);\n    if (last != null && first !== last && offset > 0) {\n      if (first instanceof BlockEmbed || last instanceof BlockEmbed) {\n        this.optimize();\n        return;\n      }\n      const ref =\n        last.children.head instanceof Break ? null : last.children.head;\n      // @ts-expect-error\n      first.moveChildren(last, ref);\n      // @ts-expect-error\n      first.remove();\n    }\n    this.optimize();\n  }\n\n  enable(enabled = true) {\n    this.domNode.setAttribute('contenteditable', enabled ? 'true' : 'false');\n  }\n\n  formatAt(index: number, length: number, format: string, value: unknown) {\n    super.formatAt(index, length, format, value);\n    this.optimize();\n  }\n\n  insertAt(index: number, value: string, def?: unknown) {\n    if (index >= this.length()) {\n      if (def == null || this.scroll.query(value, Scope.BLOCK) == null) {\n        const blot = this.scroll.create(this.statics.defaultChild.blotName);\n        this.appendChild(blot);\n        if (def == null && value.endsWith('\\n')) {\n          blot.insertAt(0, value.slice(0, -1), def);\n        } else {\n          blot.insertAt(0, value, def);\n        }\n      } else {\n        const embed = this.scroll.create(value, def);\n        this.appendChild(embed);\n      }\n    } else {\n      super.insertAt(index, value, def);\n    }\n    this.optimize();\n  }\n\n  insertBefore(blot: Blot, ref?: Blot | null) {\n    if (blot.statics.scope === Scope.INLINE_BLOT) {\n      const wrapper = this.scroll.create(\n        this.statics.defaultChild.blotName,\n      ) as Parent;\n      wrapper.appendChild(blot);\n      super.insertBefore(wrapper, ref);\n    } else {\n      super.insertBefore(blot, ref);\n    }\n  }\n\n  insertContents(index: number, delta: Delta) {\n    const renderBlocks = this.deltaToRenderBlocks(\n      delta.concat(new Delta().insert('\\n')),\n    );\n    const last = renderBlocks.pop();\n    if (last == null) return;\n\n    this.batchStart();\n\n    const first = renderBlocks.shift();\n    if (first) {\n      const shouldInsertNewlineChar =\n        first.type === 'block' &&\n        (first.delta.length() === 0 ||\n          (!this.descendant(BlockEmbed, index)[0] && index < this.length()));\n      const delta =\n        first.type === 'block'\n          ? first.delta\n          : new Delta().insert({ [first.key]: first.value });\n      insertInlineContents(this, index, delta);\n      const newlineCharLength = first.type === 'block' ? 1 : 0;\n      const lineEndIndex = index + delta.length() + newlineCharLength;\n      if (shouldInsertNewlineChar) {\n        this.insertAt(lineEndIndex - 1, '\\n');\n      }\n\n      const formats = bubbleFormats(this.line(index)[0]);\n      const attributes = AttributeMap.diff(formats, first.attributes) || {};\n      Object.keys(attributes).forEach((name) => {\n        this.formatAt(lineEndIndex - 1, 1, name, attributes[name]);\n      });\n\n      index = lineEndIndex;\n    }\n\n    let [refBlot, refBlotOffset] = this.children.find(index);\n    if (renderBlocks.length) {\n      if (refBlot) {\n        refBlot = refBlot.split(refBlotOffset);\n        refBlotOffset = 0;\n      }\n\n      renderBlocks.forEach((renderBlock) => {\n        if (renderBlock.type === 'block') {\n          const block = this.createBlock(\n            renderBlock.attributes,\n            refBlot || undefined,\n          );\n          insertInlineContents(block, 0, renderBlock.delta);\n        } else {\n          const blockEmbed = this.create(\n            renderBlock.key,\n            renderBlock.value,\n          ) as EmbedBlot;\n          this.insertBefore(blockEmbed, refBlot || undefined);\n          Object.keys(renderBlock.attributes).forEach((name) => {\n            blockEmbed.format(name, renderBlock.attributes[name]);\n          });\n        }\n      });\n    }\n\n    if (last.type === 'block' && last.delta.length()) {\n      const offset = refBlot\n        ? refBlot.offset(refBlot.scroll) + refBlotOffset\n        : this.length();\n      insertInlineContents(this, offset, last.delta);\n    }\n\n    this.batchEnd();\n    this.optimize();\n  }\n\n  isEnabled() {\n    return this.domNode.getAttribute('contenteditable') === 'true';\n  }\n\n  leaf(index: number): [LeafBlot | null, number] {\n    const last = this.path(index).pop();\n    if (!last) {\n      return [null, -1];\n    }\n\n    const [blot, offset] = last;\n    return blot instanceof LeafBlot ? [blot, offset] : [null, -1];\n  }\n\n  line(index: number): [Block | BlockEmbed | null, number] {\n    if (index === this.length()) {\n      return this.line(index - 1);\n    }\n    // @ts-expect-error TODO: make descendant() generic\n    return this.descendant(isLine, index);\n  }\n\n  lines(index = 0, length = Number.MAX_VALUE): (Block | BlockEmbed)[] {\n    const getLines = (\n      blot: ParentBlot,\n      blotIndex: number,\n      blotLength: number,\n    ) => {\n      let lines: (Block | BlockEmbed)[] = [];\n      let lengthLeft = blotLength;\n      blot.children.forEachAt(\n        blotIndex,\n        blotLength,\n        (child, childIndex, childLength) => {\n          if (isLine(child)) {\n            lines.push(child);\n          } else if (child instanceof ContainerBlot) {\n            lines = lines.concat(getLines(child, childIndex, lengthLeft));\n          }\n          lengthLeft -= childLength;\n        },\n      );\n      return lines;\n    };\n    return getLines(this, index, length);\n  }\n\n  optimize(context?: { [key: string]: any }): void;\n  optimize(\n    mutations?: MutationRecord[],\n    context?: { [key: string]: any },\n  ): void;\n  optimize(mutations = [], context = {}) {\n    if (this.batch) return;\n    super.optimize(mutations, context);\n    if (mutations.length > 0) {\n      this.emitter.emit(Emitter.events.SCROLL_OPTIMIZE, mutations, context);\n    }\n  }\n\n  path(index: number) {\n    return super.path(index).slice(1); // Exclude self\n  }\n\n  remove() {\n    // Never remove self\n  }\n\n  update(source?: EmitterSource): void;\n  update(mutations?: MutationRecord[]): void;\n  update(mutations?: MutationRecord[] | EmitterSource): void {\n    if (this.batch) {\n      if (Array.isArray(mutations)) {\n        this.batch = this.batch.concat(mutations);\n      }\n      return;\n    }\n    let source: EmitterSource = Emitter.sources.USER;\n    if (typeof mutations === 'string') {\n      source = mutations;\n    }\n    if (!Array.isArray(mutations)) {\n      mutations = this.observer.takeRecords();\n    }\n    mutations = mutations.filter(({ target }) => {\n      const blot = this.find(target, true);\n      return blot && !isUpdatable(blot);\n    });\n    if (mutations.length > 0) {\n      this.emitter.emit(Emitter.events.SCROLL_BEFORE_UPDATE, source, mutations);\n    }\n    super.update(mutations.concat([])); // pass copy\n    if (mutations.length > 0) {\n      this.emitter.emit(Emitter.events.SCROLL_UPDATE, source, mutations);\n    }\n  }\n\n  updateEmbedAt(index: number, key: string, change: unknown) {\n    // Currently it only supports top-level embeds (BlockEmbed).\n    // We can update `ParentBlot` in parchment to support inline embeds.\n    const [blot] = this.descendant((b: Blot) => b instanceof BlockEmbed, index);\n    if (blot && blot.statics.blotName === key && isUpdatable(blot)) {\n      blot.updateContent(change);\n    }\n  }\n\n  protected handleDragStart(event: DragEvent) {\n    event.preventDefault();\n  }\n\n  private deltaToRenderBlocks(delta: Delta) {\n    const renderBlocks: RenderBlock[] = [];\n\n    let currentBlockDelta = new Delta();\n    delta.forEach((op) => {\n      const insert = op?.insert;\n      if (!insert) return;\n      if (typeof insert === 'string') {\n        const splitted = insert.split('\\n');\n        splitted.slice(0, -1).forEach((text) => {\n          currentBlockDelta.insert(text, op.attributes);\n          renderBlocks.push({\n            type: 'block',\n            delta: currentBlockDelta,\n            attributes: op.attributes ?? {},\n          });\n          currentBlockDelta = new Delta();\n        });\n        const last = splitted[splitted.length - 1];\n        if (last) {\n          currentBlockDelta.insert(last, op.attributes);\n        }\n      } else {\n        const key = Object.keys(insert)[0];\n        if (!key) return;\n        if (this.query(key, Scope.INLINE)) {\n          currentBlockDelta.push(op);\n        } else {\n          if (currentBlockDelta.length()) {\n            renderBlocks.push({\n              type: 'block',\n              delta: currentBlockDelta,\n              attributes: {},\n            });\n          }\n          currentBlockDelta = new Delta();\n          renderBlocks.push({\n            type: 'blockEmbed',\n            key,\n            value: insert[key],\n            attributes: op.attributes ?? {},\n          });\n        }\n      }\n    });\n\n    if (currentBlockDelta.length()) {\n      renderBlocks.push({\n        type: 'block',\n        delta: currentBlockDelta,\n        attributes: {},\n      });\n    }\n\n    return renderBlocks;\n  }\n\n  private createBlock(attributes: AttributeMap, refBlot?: Blot) {\n    let blotName: string | undefined;\n    const formats: AttributeMap = {};\n\n    Object.entries(attributes).forEach(([key, value]) => {\n      const isBlockBlot = this.query(key, Scope.BLOCK & Scope.BLOT) != null;\n      if (isBlockBlot) {\n        blotName = key;\n      } else {\n        formats[key] = value;\n      }\n    });\n\n    const block = this.create(\n      blotName || this.statics.defaultChild.blotName,\n      blotName ? attributes[blotName] : undefined,\n    ) as ParentBlot;\n\n    this.insertBefore(block, refBlot || undefined);\n\n    const length = block.length();\n    Object.entries(formats).forEach(([key, value]) => {\n      block.formatAt(0, length, key, value);\n    });\n\n    return block;\n  }\n}\n\nfunction insertInlineContents(\n  parent: ParentBlot,\n  index: number,\n  inlineContents: Delta,\n) {\n  inlineContents.reduce((index, op) => {\n    const length = Op.length(op);\n    let attributes = op.attributes || {};\n    if (op.insert != null) {\n      if (typeof op.insert === 'string') {\n        const text = op.insert;\n        parent.insertAt(index, text);\n        const [leaf] = parent.descendant(LeafBlot, index);\n        const formats = bubbleFormats(leaf);\n        attributes = AttributeMap.diff(formats, attributes) || {};\n      } else if (typeof op.insert === 'object') {\n        const key = Object.keys(op.insert)[0]; // There should only be one key\n        if (key == null) return index;\n        parent.insertAt(index, key, op.insert[key]);\n        const isInlineEmbed = parent.scroll.query(key, Scope.INLINE) != null;\n        if (isInlineEmbed) {\n          const [leaf] = parent.descendant(LeafBlot, index);\n          const formats = bubbleFormats(leaf);\n          attributes = AttributeMap.diff(formats, attributes) || {};\n        }\n      }\n    }\n    Object.keys(attributes).forEach((key) => {\n      parent.formatAt(index, length, key, attributes[key]);\n    });\n    return index + length;\n  }, index);\n}\n\nexport default Scroll;\n","import { Attributor, ClassAttributor, Scope, StyleAttributor } from 'parchment';\n\nconst config = {\n  scope: Scope.BLOCK,\n  whitelist: ['right', 'center', 'justify'],\n};\n\nconst AlignAttribute = new Attributor('align', 'align', config);\nconst AlignClass = new ClassAttributor('align', 'ql-align', config);\nconst AlignStyle = new StyleAttributor('align', 'text-align', config);\n\nexport { AlignAttribute, AlignClass, AlignStyle };\n","import { ClassAttributor, Scope, StyleAttributor } from 'parchment';\n\nclass ColorAttributor extends StyleAttributor {\n  value(domNode: HTMLElement) {\n    let value = super.value(domNode) as string;\n    if (!value.startsWith('rgb(')) return value;\n    value = value.replace(/^[^\\d]+/, '').replace(/[^\\d]+$/, '');\n    const hex = value\n      .split(',')\n      .map((component) => `00${parseInt(component, 10).toString(16)}`.slice(-2))\n      .join('');\n    return `#${hex}`;\n  }\n}\n\nconst ColorClass = new ClassAttributor('color', 'ql-color', {\n  scope: Scope.INLINE,\n});\nconst ColorStyle = new ColorAttributor('color', 'color', {\n  scope: Scope.INLINE,\n});\n\nexport { ColorAttributor, ColorClass, ColorStyle };\n","import { ClassAttributor, Scope } from 'parchment';\nimport { ColorAttributor } from './color.js';\n\nconst BackgroundClass = new ClassAttributor('background', 'ql-bg', {\n  scope: Scope.INLINE,\n});\nconst BackgroundStyle = new ColorAttributor('background', 'background-color', {\n  scope: Scope.INLINE,\n});\n\nexport { BackgroundClass, BackgroundStyle };\n","import Block from '../blots/block.js';\nimport Break from '../blots/break.js';\nimport Cursor from '../blots/cursor.js';\nimport Inline from '../blots/inline.js';\nimport TextBlot, { escapeText } from '../blots/text.js';\nimport Container from '../blots/container.js';\nimport Quill from '../core/quill.js';\n\nclass CodeBlockContainer extends Container {\n  static create(value: string) {\n    const domNode = super.create(value) as Element;\n    domNode.setAttribute('spellcheck', 'false');\n    return domNode;\n  }\n\n  code(index: number, length: number) {\n    return (\n      this.children\n        // @ts-expect-error\n        .map((child) => (child.length() <= 1 ? '' : child.domNode.innerText))\n        .join('\\n')\n        .slice(index, index + length)\n    );\n  }\n\n  html(index: number, length: number) {\n    // `\\n`s are needed in order to support empty lines at the beginning and the end.\n    // https://html.spec.whatwg.org/multipage/syntax.html#element-restrictions\n    return `<pre>\\n${escapeText(this.code(index, length))}\\n</pre>`;\n  }\n}\n\nclass CodeBlock extends Block {\n  static TAB = '  ';\n\n  static register() {\n    Quill.register(CodeBlockContainer);\n  }\n}\n\nclass Code extends Inline {}\nCode.blotName = 'code';\nCode.tagName = 'CODE';\n\nCodeBlock.blotName = 'code-block';\nCodeBlock.className = 'ql-code-block';\nCodeBlock.tagName = 'DIV';\nCodeBlockContainer.blotName = 'code-block-container';\nCodeBlockContainer.className = 'ql-code-block-container';\nCodeBlockContainer.tagName = 'DIV';\n\nCodeBlockContainer.allowedChildren = [CodeBlock];\n\nCodeBlock.allowedChildren = [TextBlot, Break, Cursor];\nCodeBlock.requiredContainer = CodeBlockContainer;\n\nexport { Code, CodeBlockContainer, CodeBlock as default };\n","import { Attributor, ClassAttributor, Scope, StyleAttributor } from 'parchment';\n\nconst config = {\n  scope: Scope.BLOCK,\n  whitelist: ['rtl'],\n};\n\nconst DirectionAttribute = new Attributor('direction', 'dir', config);\nconst DirectionClass = new ClassAttributor('direction', 'ql-direction', config);\nconst DirectionStyle = new StyleAttributor('direction', 'direction', config);\n\nexport { DirectionAttribute, DirectionClass, DirectionStyle };\n","import { ClassAttributor, Scope, StyleAttributor } from 'parchment';\n\nconst config = {\n  scope: Scope.INLINE,\n  whitelist: ['serif', 'monospace'],\n};\n\nconst FontClass = new ClassAttributor('font', 'ql-font', config);\n\nclass FontStyleAttributor extends StyleAttributor {\n  value(node: HTMLElement) {\n    return super.value(node).replace(/[\"']/g, '');\n  }\n}\n\nconst FontStyle = new FontStyleAttributor('font', 'font-family', config);\n\nexport { FontStyle, FontClass };\n","import { ClassAttributor, Scope, StyleAttributor } from 'parchment';\n\nconst SizeClass = new ClassAttributor('size', 'ql-size', {\n  scope: Scope.INLINE,\n  whitelist: ['small', 'large', 'huge'],\n});\nconst SizeStyle = new StyleAttributor('size', 'font-size', {\n  scope: Scope.INLINE,\n  whitelist: ['10px', '18px', '32px'],\n});\n\nexport { SizeClass, SizeStyle };\n","import { cloneDeep, isEqual } from 'lodash-es';\nimport Delta, { AttributeMap } from 'quill-delta';\nimport { EmbedBlot, Scope, TextBlot } from 'parchment';\nimport type { Blot, BlockBlot } from 'parchment';\nimport Quill from '../core/quill.js';\nimport logger from '../core/logger.js';\nimport Module from '../core/module.js';\nimport type { BlockEmbed } from '../blots/block.js';\nimport type { Range } from '../core/selection.js';\n\nconst debug = logger('quill:keyboard');\n\nconst SHORTKEY = /Mac/i.test(navigator.platform) ? 'metaKey' : 'ctrlKey';\n\nexport interface Context {\n  collapsed: boolean;\n  empty: boolean;\n  offset: number;\n  prefix: string;\n  suffix: string;\n  format: Record<string, unknown>;\n  event: KeyboardEvent;\n  line: BlockEmbed | BlockBlot;\n}\n\ninterface BindingObject\n  extends Partial<Omit<Context, 'prefix' | 'suffix' | 'format'>> {\n  key: number | string | string[];\n  shortKey?: boolean | null;\n  shiftKey?: boolean | null;\n  altKey?: boolean | null;\n  metaKey?: boolean | null;\n  ctrlKey?: boolean | null;\n  prefix?: RegExp;\n  suffix?: RegExp;\n  format?: Record<string, unknown> | string[];\n  handler?: (\n    this: { quill: Quill },\n    range: Range,\n    curContext: Context,\n    // eslint-disable-next-line no-use-before-define\n    binding: NormalizedBinding,\n  ) => boolean | void;\n}\n\ntype Binding = BindingObject | string | number;\n\ninterface NormalizedBinding extends Omit<BindingObject, 'key' | 'shortKey'> {\n  key: string | number;\n}\n\ninterface KeyboardOptions {\n  bindings: Record<string, Binding>;\n}\n\ninterface KeyboardOptions {\n  bindings: Record<string, Binding>;\n}\n\nclass Keyboard extends Module<KeyboardOptions> {\n  static DEFAULTS: KeyboardOptions;\n\n  static match(evt: KeyboardEvent, binding: BindingObject) {\n    if (\n      (['altKey', 'ctrlKey', 'metaKey', 'shiftKey'] as const).some((key) => {\n        return !!binding[key] !== evt[key] && binding[key] !== null;\n      })\n    ) {\n      return false;\n    }\n    return binding.key === evt.key || binding.key === evt.which;\n  }\n\n  bindings: Record<string, NormalizedBinding[]>;\n\n  constructor(quill: Quill, options: Partial<KeyboardOptions>) {\n    super(quill, options);\n    this.bindings = {};\n    // @ts-expect-error Fix me later\n    Object.keys(this.options.bindings).forEach((name) => {\n      // @ts-expect-error Fix me later\n      if (this.options.bindings[name]) {\n        // @ts-expect-error Fix me later\n        this.addBinding(this.options.bindings[name]);\n      }\n    });\n    this.addBinding({ key: 'Enter', shiftKey: null }, this.handleEnter);\n    this.addBinding(\n      { key: 'Enter', metaKey: null, ctrlKey: null, altKey: null },\n      () => {},\n    );\n    if (/Firefox/i.test(navigator.userAgent)) {\n      // Need to handle delete and backspace for Firefox in the general case #1171\n      this.addBinding(\n        { key: 'Backspace' },\n        { collapsed: true },\n        this.handleBackspace,\n      );\n      this.addBinding(\n        { key: 'Delete' },\n        { collapsed: true },\n        this.handleDelete,\n      );\n    } else {\n      this.addBinding(\n        { key: 'Backspace' },\n        { collapsed: true, prefix: /^.?$/ },\n        this.handleBackspace,\n      );\n      this.addBinding(\n        { key: 'Delete' },\n        { collapsed: true, suffix: /^.?$/ },\n        this.handleDelete,\n      );\n    }\n    this.addBinding(\n      { key: 'Backspace' },\n      { collapsed: false },\n      this.handleDeleteRange,\n    );\n    this.addBinding(\n      { key: 'Delete' },\n      { collapsed: false },\n      this.handleDeleteRange,\n    );\n    this.addBinding(\n      {\n        key: 'Backspace',\n        altKey: null,\n        ctrlKey: null,\n        metaKey: null,\n        shiftKey: null,\n      },\n      { collapsed: true, offset: 0 },\n      this.handleBackspace,\n    );\n    this.listen();\n  }\n\n  addBinding(\n    keyBinding: Binding,\n    context:\n      | Required<BindingObject['handler']>\n      | Partial<Omit<BindingObject, 'key' | 'handler'>> = {},\n    handler:\n      | Required<BindingObject['handler']>\n      | Partial<Omit<BindingObject, 'key' | 'handler'>> = {},\n  ) {\n    const binding = normalize(keyBinding);\n    if (binding == null) {\n      debug.warn('Attempted to add invalid keyboard binding', binding);\n      return;\n    }\n    if (typeof context === 'function') {\n      context = { handler: context };\n    }\n    if (typeof handler === 'function') {\n      handler = { handler };\n    }\n    const keys = Array.isArray(binding.key) ? binding.key : [binding.key];\n    keys.forEach((key) => {\n      const singleBinding = {\n        ...binding,\n        key,\n        ...context,\n        ...handler,\n      };\n      this.bindings[singleBinding.key] = this.bindings[singleBinding.key] || [];\n      this.bindings[singleBinding.key].push(singleBinding);\n    });\n  }\n\n  listen() {\n    this.quill.root.addEventListener('keydown', (evt) => {\n      if (evt.defaultPrevented || evt.isComposing) return;\n\n      // evt.isComposing is false when pressing Enter/Backspace when composing in Safari\n      // https://bugs.webkit.org/show_bug.cgi?id=165004\n      const isComposing =\n        evt.keyCode === 229 && (evt.key === 'Enter' || evt.key === 'Backspace');\n      if (isComposing) return;\n\n      const bindings = (this.bindings[evt.key] || []).concat(\n        this.bindings[evt.which] || [],\n      );\n      const matches = bindings.filter((binding) =>\n        Keyboard.match(evt, binding),\n      );\n      if (matches.length === 0) return;\n      // @ts-expect-error\n      const blot = Quill.find(evt.target, true);\n      if (blot && blot.scroll !== this.quill.scroll) return;\n      const range = this.quill.getSelection();\n      if (range == null || !this.quill.hasFocus()) return;\n      const [line, offset] = this.quill.getLine(range.index);\n      const [leafStart, offsetStart] = this.quill.getLeaf(range.index);\n      const [leafEnd, offsetEnd] =\n        range.length === 0\n          ? [leafStart, offsetStart]\n          : this.quill.getLeaf(range.index + range.length);\n      const prefixText =\n        leafStart instanceof TextBlot\n          ? leafStart.value().slice(0, offsetStart)\n          : '';\n      const suffixText =\n        leafEnd instanceof TextBlot ? leafEnd.value().slice(offsetEnd) : '';\n      const curContext = {\n        collapsed: range.length === 0,\n        // @ts-expect-error Fix me later\n        empty: range.length === 0 && line.length() <= 1,\n        format: this.quill.getFormat(range),\n        line,\n        offset,\n        prefix: prefixText,\n        suffix: suffixText,\n        event: evt,\n      };\n      const prevented = matches.some((binding) => {\n        if (\n          binding.collapsed != null &&\n          binding.collapsed !== curContext.collapsed\n        ) {\n          return false;\n        }\n        if (binding.empty != null && binding.empty !== curContext.empty) {\n          return false;\n        }\n        if (binding.offset != null && binding.offset !== curContext.offset) {\n          return false;\n        }\n        if (Array.isArray(binding.format)) {\n          // any format is present\n          if (binding.format.every((name) => curContext.format[name] == null)) {\n            return false;\n          }\n        } else if (typeof binding.format === 'object') {\n          // all formats must match\n          if (\n            !Object.keys(binding.format).every((name) => {\n              // @ts-expect-error Fix me later\n              if (binding.format[name] === true)\n                return curContext.format[name] != null;\n              // @ts-expect-error Fix me later\n              if (binding.format[name] === false)\n                return curContext.format[name] == null;\n              // @ts-expect-error Fix me later\n              return isEqual(binding.format[name], curContext.format[name]);\n            })\n          ) {\n            return false;\n          }\n        }\n        if (binding.prefix != null && !binding.prefix.test(curContext.prefix)) {\n          return false;\n        }\n        if (binding.suffix != null && !binding.suffix.test(curContext.suffix)) {\n          return false;\n        }\n        // @ts-expect-error Fix me later\n        return binding.handler.call(this, range, curContext, binding) !== true;\n      });\n      if (prevented) {\n        evt.preventDefault();\n      }\n    });\n  }\n\n  handleBackspace(range: Range, context: Context) {\n    // Check for astral symbols\n    const length = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]$/.test(context.prefix)\n      ? 2\n      : 1;\n    if (range.index === 0 || this.quill.getLength() <= 1) return;\n    let formats = {};\n    const [line] = this.quill.getLine(range.index);\n    let delta = new Delta().retain(range.index - length).delete(length);\n    if (context.offset === 0) {\n      // Always deleting newline here, length always 1\n      const [prev] = this.quill.getLine(range.index - 1);\n      if (prev) {\n        const isPrevLineEmpty =\n          prev.statics.blotName === 'block' && prev.length() <= 1;\n        if (!isPrevLineEmpty) {\n          // @ts-expect-error Fix me later\n          const curFormats = line.formats();\n          const prevFormats = this.quill.getFormat(range.index - 1, 1);\n          formats = AttributeMap.diff(curFormats, prevFormats) || {};\n          if (Object.keys(formats).length > 0) {\n            // line.length() - 1 targets \\n in line, another -1 for newline being deleted\n            const formatDelta = new Delta()\n              // @ts-expect-error Fix me later\n              .retain(range.index + line.length() - 2)\n              .retain(1, formats);\n            delta = delta.compose(formatDelta);\n          }\n        }\n      }\n    }\n    this.quill.updateContents(delta, Quill.sources.USER);\n    this.quill.focus();\n  }\n\n  handleDelete(range: Range, context: Context) {\n    // Check for astral symbols\n    const length = /^[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/.test(context.suffix)\n      ? 2\n      : 1;\n    if (range.index >= this.quill.getLength() - length) return;\n    let formats = {};\n    const [line] = this.quill.getLine(range.index);\n    let delta = new Delta().retain(range.index).delete(length);\n    // @ts-expect-error Fix me later\n    if (context.offset >= line.length() - 1) {\n      const [next] = this.quill.getLine(range.index + 1);\n      if (next) {\n        // @ts-expect-error Fix me later\n        const curFormats = line.formats();\n        const nextFormats = this.quill.getFormat(range.index, 1);\n        formats = AttributeMap.diff(curFormats, nextFormats) || {};\n        if (Object.keys(formats).length > 0) {\n          delta = delta.retain(next.length() - 1).retain(1, formats);\n        }\n      }\n    }\n    this.quill.updateContents(delta, Quill.sources.USER);\n    this.quill.focus();\n  }\n\n  handleDeleteRange(range: Range) {\n    deleteRange({ range, quill: this.quill });\n    this.quill.focus();\n  }\n\n  handleEnter(range: Range, context: Context) {\n    const lineFormats = Object.keys(context.format).reduce(\n      (formats: Record<string, unknown>, format) => {\n        if (\n          this.quill.scroll.query(format, Scope.BLOCK) &&\n          !Array.isArray(context.format[format])\n        ) {\n          formats[format] = context.format[format];\n        }\n        return formats;\n      },\n      {},\n    );\n    const delta = new Delta()\n      .retain(range.index)\n      .delete(range.length)\n      .insert('\\n', lineFormats);\n    this.quill.updateContents(delta, Quill.sources.USER);\n    this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n    this.quill.focus();\n  }\n}\n\nconst defaultOptions: KeyboardOptions = {\n  bindings: {\n    bold: makeFormatHandler('bold'),\n    italic: makeFormatHandler('italic'),\n    underline: makeFormatHandler('underline'),\n    indent: {\n      // highlight tab or tab at beginning of list, indent or blockquote\n      key: 'Tab',\n      format: ['blockquote', 'indent', 'list'],\n      handler(range, context) {\n        if (context.collapsed && context.offset !== 0) return true;\n        this.quill.format('indent', '+1', Quill.sources.USER);\n        return false;\n      },\n    },\n    outdent: {\n      key: 'Tab',\n      shiftKey: true,\n      format: ['blockquote', 'indent', 'list'],\n      // highlight tab or tab at beginning of list, indent or blockquote\n      handler(range, context) {\n        if (context.collapsed && context.offset !== 0) return true;\n        this.quill.format('indent', '-1', Quill.sources.USER);\n        return false;\n      },\n    },\n    'outdent backspace': {\n      key: 'Backspace',\n      collapsed: true,\n      shiftKey: null,\n      metaKey: null,\n      ctrlKey: null,\n      altKey: null,\n      format: ['indent', 'list'],\n      offset: 0,\n      handler(range, context) {\n        if (context.format.indent != null) {\n          this.quill.format('indent', '-1', Quill.sources.USER);\n        } else if (context.format.list != null) {\n          this.quill.format('list', false, Quill.sources.USER);\n        }\n      },\n    },\n    'indent code-block': makeCodeBlockHandler(true),\n    'outdent code-block': makeCodeBlockHandler(false),\n    'remove tab': {\n      key: 'Tab',\n      shiftKey: true,\n      collapsed: true,\n      prefix: /\\t$/,\n      handler(range) {\n        this.quill.deleteText(range.index - 1, 1, Quill.sources.USER);\n      },\n    },\n    tab: {\n      key: 'Tab',\n      handler(range, context) {\n        if (context.format.table) return true;\n        this.quill.history.cutoff();\n        const delta = new Delta()\n          .retain(range.index)\n          .delete(range.length)\n          .insert('\\t');\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.history.cutoff();\n        this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n        return false;\n      },\n    },\n    'blockquote empty enter': {\n      key: 'Enter',\n      collapsed: true,\n      format: ['blockquote'],\n      empty: true,\n      handler() {\n        this.quill.format('blockquote', false, Quill.sources.USER);\n      },\n    },\n    'list empty enter': {\n      key: 'Enter',\n      collapsed: true,\n      format: ['list'],\n      empty: true,\n      handler(range, context) {\n        const formats: Record<string, unknown> = { list: false };\n        if (context.format.indent) {\n          formats.indent = false;\n        }\n        this.quill.formatLine(\n          range.index,\n          range.length,\n          formats,\n          Quill.sources.USER,\n        );\n      },\n    },\n    'checklist enter': {\n      key: 'Enter',\n      collapsed: true,\n      format: { list: 'checked' },\n      handler(range) {\n        const [line, offset] = this.quill.getLine(range.index);\n        const formats = {\n          // @ts-expect-error Fix me later\n          ...line.formats(),\n          list: 'checked',\n        };\n        const delta = new Delta()\n          .retain(range.index)\n          .insert('\\n', formats)\n          // @ts-expect-error Fix me later\n          .retain(line.length() - offset - 1)\n          .retain(1, { list: 'unchecked' });\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n        this.quill.scrollSelectionIntoView();\n      },\n    },\n    'header enter': {\n      key: 'Enter',\n      collapsed: true,\n      format: ['header'],\n      suffix: /^$/,\n      handler(range, context) {\n        const [line, offset] = this.quill.getLine(range.index);\n        const delta = new Delta()\n          .retain(range.index)\n          .insert('\\n', context.format)\n          // @ts-expect-error Fix me later\n          .retain(line.length() - offset - 1)\n          .retain(1, { header: null });\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n        this.quill.scrollSelectionIntoView();\n      },\n    },\n    'table backspace': {\n      key: 'Backspace',\n      format: ['table'],\n      collapsed: true,\n      offset: 0,\n      handler() {},\n    },\n    'table delete': {\n      key: 'Delete',\n      format: ['table'],\n      collapsed: true,\n      suffix: /^$/,\n      handler() {},\n    },\n    'table enter': {\n      key: 'Enter',\n      shiftKey: null,\n      format: ['table'],\n      handler(range) {\n        const module = this.quill.getModule('table');\n        if (module) {\n          // @ts-expect-error\n          const [table, row, cell, offset] = module.getTable(range);\n          const shift = tableSide(table, row, cell, offset);\n          if (shift == null) return;\n          let index = table.offset();\n          if (shift < 0) {\n            const delta = new Delta().retain(index).insert('\\n');\n            this.quill.updateContents(delta, Quill.sources.USER);\n            this.quill.setSelection(\n              range.index + 1,\n              range.length,\n              Quill.sources.SILENT,\n            );\n          } else if (shift > 0) {\n            index += table.length();\n            const delta = new Delta().retain(index).insert('\\n');\n            this.quill.updateContents(delta, Quill.sources.USER);\n            this.quill.setSelection(index, Quill.sources.USER);\n          }\n        }\n      },\n    },\n    'table tab': {\n      key: 'Tab',\n      shiftKey: null,\n      format: ['table'],\n      handler(range, context) {\n        const { event, line: cell } = context;\n        const offset = cell.offset(this.quill.scroll);\n        if (event.shiftKey) {\n          this.quill.setSelection(offset - 1, Quill.sources.USER);\n        } else {\n          this.quill.setSelection(offset + cell.length(), Quill.sources.USER);\n        }\n      },\n    },\n    'list autofill': {\n      key: ' ',\n      shiftKey: null,\n      collapsed: true,\n      format: {\n        'code-block': false,\n        blockquote: false,\n        table: false,\n      },\n      prefix: /^\\s*?(\\d+\\.|-|\\*|\\[ ?\\]|\\[x\\])$/,\n      handler(range, context) {\n        if (this.quill.scroll.query('list') == null) return true;\n        const { length } = context.prefix;\n        const [line, offset] = this.quill.getLine(range.index);\n        if (offset > length) return true;\n        let value;\n        switch (context.prefix.trim()) {\n          case '[]':\n          case '[ ]':\n            value = 'unchecked';\n            break;\n          case '[x]':\n            value = 'checked';\n            break;\n          case '-':\n          case '*':\n            value = 'bullet';\n            break;\n          default:\n            value = 'ordered';\n        }\n        this.quill.insertText(range.index, ' ', Quill.sources.USER);\n        this.quill.history.cutoff();\n        const delta = new Delta()\n          .retain(range.index - offset)\n          .delete(length + 1)\n          // @ts-expect-error Fix me later\n          .retain(line.length() - 2 - offset)\n          .retain(1, { list: value });\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.history.cutoff();\n        this.quill.setSelection(range.index - length, Quill.sources.SILENT);\n        return false;\n      },\n    },\n    'code exit': {\n      key: 'Enter',\n      collapsed: true,\n      format: ['code-block'],\n      prefix: /^$/,\n      suffix: /^\\s*$/,\n      handler(range) {\n        const [line, offset] = this.quill.getLine(range.index);\n        let numLines = 2;\n        let cur = line;\n        while (\n          cur != null &&\n          cur.length() <= 1 &&\n          cur.formats()['code-block']\n        ) {\n          // @ts-expect-error\n          cur = cur.prev;\n          numLines -= 1;\n          // Requisite prev lines are empty\n          if (numLines <= 0) {\n            const delta = new Delta()\n              // @ts-expect-error Fix me later\n              .retain(range.index + line.length() - offset - 2)\n              .retain(1, { 'code-block': null })\n              .delete(1);\n            this.quill.updateContents(delta, Quill.sources.USER);\n            this.quill.setSelection(range.index - 1, Quill.sources.SILENT);\n            return false;\n          }\n        }\n        return true;\n      },\n    },\n    'embed left': makeEmbedArrowHandler('ArrowLeft', false),\n    'embed left shift': makeEmbedArrowHandler('ArrowLeft', true),\n    'embed right': makeEmbedArrowHandler('ArrowRight', false),\n    'embed right shift': makeEmbedArrowHandler('ArrowRight', true),\n    'table down': makeTableArrowHandler(false),\n    'table up': makeTableArrowHandler(true),\n  },\n};\n\nKeyboard.DEFAULTS = defaultOptions;\n\nfunction makeCodeBlockHandler(indent: boolean): BindingObject {\n  return {\n    key: 'Tab',\n    shiftKey: !indent,\n    format: { 'code-block': true },\n    handler(range, { event }) {\n      const CodeBlock = this.quill.scroll.query('code-block');\n      // @ts-expect-error\n      const { TAB } = CodeBlock;\n      if (range.length === 0 && !event.shiftKey) {\n        this.quill.insertText(range.index, TAB, Quill.sources.USER);\n        this.quill.setSelection(range.index + TAB.length, Quill.sources.SILENT);\n        return;\n      }\n\n      const lines =\n        range.length === 0\n          ? this.quill.getLines(range.index, 1)\n          : this.quill.getLines(range);\n      let { index, length } = range;\n      lines.forEach((line, i) => {\n        if (indent) {\n          line.insertAt(0, TAB);\n          if (i === 0) {\n            index += TAB.length;\n          } else {\n            length += TAB.length;\n          }\n          // @ts-expect-error Fix me later\n        } else if (line.domNode.textContent.startsWith(TAB)) {\n          line.deleteAt(0, TAB.length);\n          if (i === 0) {\n            index -= TAB.length;\n          } else {\n            length -= TAB.length;\n          }\n        }\n      });\n      this.quill.update(Quill.sources.USER);\n      this.quill.setSelection(index, length, Quill.sources.SILENT);\n    },\n  };\n}\n\nfunction makeEmbedArrowHandler(\n  key: string,\n  shiftKey: boolean | null,\n): BindingObject {\n  const where = key === 'ArrowLeft' ? 'prefix' : 'suffix';\n  return {\n    key,\n    shiftKey,\n    altKey: null,\n    [where]: /^$/,\n    handler(range) {\n      let { index } = range;\n      if (key === 'ArrowRight') {\n        index += range.length + 1;\n      }\n      const [leaf] = this.quill.getLeaf(index);\n      if (!(leaf instanceof EmbedBlot)) return true;\n      if (key === 'ArrowLeft') {\n        if (shiftKey) {\n          this.quill.setSelection(\n            range.index - 1,\n            range.length + 1,\n            Quill.sources.USER,\n          );\n        } else {\n          this.quill.setSelection(range.index - 1, Quill.sources.USER);\n        }\n      } else if (shiftKey) {\n        this.quill.setSelection(\n          range.index,\n          range.length + 1,\n          Quill.sources.USER,\n        );\n      } else {\n        this.quill.setSelection(\n          range.index + range.length + 1,\n          Quill.sources.USER,\n        );\n      }\n      return false;\n    },\n  };\n}\n\nfunction makeFormatHandler(format: string): BindingObject {\n  return {\n    key: format[0],\n    shortKey: true,\n    handler(range, context) {\n      this.quill.format(format, !context.format[format], Quill.sources.USER);\n    },\n  };\n}\n\nfunction makeTableArrowHandler(up: boolean): BindingObject {\n  return {\n    key: up ? 'ArrowUp' : 'ArrowDown',\n    collapsed: true,\n    format: ['table'],\n    handler(range, context) {\n      // TODO move to table module\n      const key = up ? 'prev' : 'next';\n      const cell = context.line;\n      const targetRow = cell.parent[key];\n      if (targetRow != null) {\n        if (targetRow.statics.blotName === 'table-row') {\n          // @ts-expect-error\n          let targetCell = targetRow.children.head;\n          let cur = cell;\n          while (cur.prev != null) {\n            // @ts-expect-error\n            cur = cur.prev;\n            targetCell = targetCell.next;\n          }\n          const index =\n            targetCell.offset(this.quill.scroll) +\n            Math.min(context.offset, targetCell.length() - 1);\n          this.quill.setSelection(index, 0, Quill.sources.USER);\n        }\n      } else {\n        // @ts-expect-error\n        const targetLine = cell.table()[key];\n        if (targetLine != null) {\n          if (up) {\n            this.quill.setSelection(\n              targetLine.offset(this.quill.scroll) + targetLine.length() - 1,\n              0,\n              Quill.sources.USER,\n            );\n          } else {\n            this.quill.setSelection(\n              targetLine.offset(this.quill.scroll),\n              0,\n              Quill.sources.USER,\n            );\n          }\n        }\n      }\n      return false;\n    },\n  };\n}\n\nfunction normalize(binding: Binding): BindingObject | null {\n  if (typeof binding === 'string' || typeof binding === 'number') {\n    binding = { key: binding };\n  } else if (typeof binding === 'object') {\n    binding = cloneDeep(binding);\n  } else {\n    return null;\n  }\n  if (binding.shortKey) {\n    binding[SHORTKEY] = binding.shortKey;\n    delete binding.shortKey;\n  }\n  return binding;\n}\n\n// TODO: Move into quill.ts or editor.ts\nfunction deleteRange({ quill, range }: { quill: Quill; range: Range }) {\n  const lines = quill.getLines(range);\n  let formats = {};\n  if (lines.length > 1) {\n    const firstFormats = lines[0].formats();\n    const lastFormats = lines[lines.length - 1].formats();\n    formats = AttributeMap.diff(lastFormats, firstFormats) || {};\n  }\n  quill.deleteText(range, Quill.sources.USER);\n  if (Object.keys(formats).length > 0) {\n    quill.formatLine(range.index, 1, formats, Quill.sources.USER);\n  }\n  quill.setSelection(range.index, Quill.sources.SILENT);\n}\n\nfunction tableSide(_table: unknown, row: Blot, cell: Blot, offset: number) {\n  if (row.prev == null && row.next == null) {\n    if (cell.prev == null && cell.next == null) {\n      return offset === 0 ? -1 : 1;\n    }\n    return cell.prev == null ? -1 : 1;\n  }\n  if (row.prev == null) {\n    return -1;\n  }\n  if (row.next == null) {\n    return 1;\n  }\n  return null;\n}\n\nexport { Keyboard as default, SHORTKEY, normalize, deleteRange };\n","const normalWeightRegexp = /font-weight:\\s*normal/;\nconst blockTagNames = ['P', 'OL', 'UL'];\n\nconst isBlockElement = (element: Element | null) => {\n  return element && blockTagNames.includes(element.tagName);\n};\n\nconst normalizeEmptyLines = (doc: Document) => {\n  Array.from(doc.querySelectorAll('br'))\n    .filter(\n      (br) =>\n        isBlockElement(br.previousElementSibling) &&\n        isBlockElement(br.nextElementSibling),\n    )\n    .forEach((br) => {\n      br.parentNode?.removeChild(br);\n    });\n};\n\nconst normalizeFontWeight = (doc: Document) => {\n  Array.from(doc.querySelectorAll('b[style*=\"font-weight\"]'))\n    .filter((node) => node.getAttribute('style')?.match(normalWeightRegexp))\n    .forEach((node) => {\n      const fragment = doc.createDocumentFragment();\n      fragment.append(...node.childNodes);\n      node.parentNode?.replaceChild(fragment, node);\n    });\n};\n\nexport default function normalize(doc: Document) {\n  if (doc.querySelector('[id^=\"docs-internal-guid-\"]')) {\n    normalizeFontWeight(doc);\n    normalizeEmptyLines(doc);\n  }\n}\n","const ignoreRegexp = /\\bmso-list:[^;]*ignore/i;\nconst idRegexp = /\\bmso-list:[^;]*\\bl(\\d+)/i;\nconst indentRegexp = /\\bmso-list:[^;]*\\blevel(\\d+)/i;\n\nconst parseListItem = (element: Element, html: string) => {\n  const style = element.getAttribute('style');\n  const idMatch = style?.match(idRegexp);\n  if (!idMatch) {\n    return null;\n  }\n  const id = Number(idMatch[1]);\n\n  const indentMatch = style?.match(indentRegexp);\n  const indent = indentMatch ? Number(indentMatch[1]) : 1;\n\n  const typeRegexp = new RegExp(\n    `@list l${id}:level${indent}\\\\s*\\\\{[^\\\\}]*mso-level-number-format:\\\\s*([\\\\w-]+)`,\n    'i',\n  );\n  const typeMatch = html.match(typeRegexp);\n  const type = typeMatch && typeMatch[1] === 'bullet' ? 'bullet' : 'ordered';\n\n  return { id, indent, type, element };\n};\n\n// list items are represented as `p` tags with styles like `mso-list: l0 level1` where:\n// 1. \"0\" in \"l0\" means the list item id;\n// 2. \"1\" in \"level1\" means the indent level, starting from 1.\nconst normalizeListItem = (doc: Document) => {\n  const msoList = Array.from(doc.querySelectorAll('[style*=mso-list]'));\n  const ignored: Element[] = [];\n  const others: Element[] = [];\n  msoList.forEach((node) => {\n    const shouldIgnore = (node.getAttribute('style') || '').match(ignoreRegexp);\n    if (shouldIgnore) {\n      ignored.push(node);\n    } else {\n      others.push(node);\n    }\n  });\n\n  // Each list item contains a marker wrapped with \"mso-list: Ignore\".\n  ignored.forEach((node) => node.parentNode?.removeChild(node));\n\n  // The list stype is not defined inline with the tag, instead, it's in the\n  // style tag so we need to pass the html as a string.\n  const html = doc.documentElement.innerHTML;\n  const listItems = others\n    .map((element) => parseListItem(element, html))\n    .filter((parsed) => parsed);\n\n  while (listItems.length) {\n    const childListItems = [];\n\n    let current = listItems.shift();\n    // Group continuous items into the same group (aka \"ul\")\n    while (current) {\n      childListItems.push(current);\n      current =\n        listItems.length &&\n        listItems[0]?.element === current.element.nextElementSibling &&\n        // Different id means the next item doesn't belong to this group.\n        listItems[0].id === current.id\n          ? listItems.shift()\n          : null;\n    }\n\n    const ul = document.createElement('ul');\n    childListItems.forEach((listItem) => {\n      const li = document.createElement('li');\n      li.setAttribute('data-list', listItem.type);\n      if (listItem.indent > 1) {\n        li.setAttribute('class', `ql-indent-${listItem.indent - 1}`);\n      }\n      li.innerHTML = listItem.element.innerHTML;\n      ul.appendChild(li);\n    });\n\n    const element = childListItems[0]?.element;\n    const { parentNode } = element ?? {};\n    if (element) {\n      parentNode?.replaceChild(ul, element);\n    }\n    childListItems.slice(1).forEach(({ element: e }) => {\n      parentNode?.removeChild(e);\n    });\n  }\n};\n\nexport default function normalize(doc: Document) {\n  if (\n    doc.documentElement.getAttribute('xmlns:w') ===\n    'urn:schemas-microsoft-com:office:word'\n  ) {\n    normalizeListItem(doc);\n  }\n}\n","import googleDocs from './normalizers/googleDocs.js';\nimport msWord from './normalizers/msWord.js';\n\nconst NORMALIZERS = [msWord, googleDocs];\n\nconst normalizeExternalHTML = (doc: Document) => {\n  if (doc.documentElement) {\n    NORMALIZERS.forEach((normalize) => {\n      normalize(doc);\n    });\n  }\n};\n\nexport default normalizeExternalHTML;\n","import type { ScrollBlot } from 'parchment';\nimport {\n  Attributor,\n  BlockBlot,\n  ClassAttributor,\n  EmbedBlot,\n  Scope,\n  StyleAttributor,\n} from 'parchment';\nimport Delta from 'quill-delta';\nimport { BlockEmbed } from '../blots/block.js';\nimport type { EmitterSource } from '../core/emitter.js';\nimport logger from '../core/logger.js';\nimport Module from '../core/module.js';\nimport Quill from '../core/quill.js';\nimport type { Range } from '../core/selection.js';\nimport { AlignAttribute, AlignStyle } from '../formats/align.js';\nimport { BackgroundStyle } from '../formats/background.js';\nimport CodeBlock from '../formats/code.js';\nimport { ColorStyle } from '../formats/color.js';\nimport { DirectionAttribute, DirectionStyle } from '../formats/direction.js';\nimport { FontStyle } from '../formats/font.js';\nimport { SizeStyle } from '../formats/size.js';\nimport { deleteRange } from './keyboard.js';\nimport normalizeExternalHTML from './normalizeExternalHTML/index.js';\n\nconst debug = logger('quill:clipboard');\n\ntype Selector = string | Node['TEXT_NODE'] | Node['ELEMENT_NODE'];\ntype Matcher = (node: Node, delta: Delta, scroll: ScrollBlot) => Delta;\n\nconst CLIPBOARD_CONFIG: [Selector, Matcher][] = [\n  [Node.TEXT_NODE, matchText],\n  [Node.TEXT_NODE, matchNewline],\n  ['br', matchBreak],\n  [Node.ELEMENT_NODE, matchNewline],\n  [Node.ELEMENT_NODE, matchBlot],\n  [Node.ELEMENT_NODE, matchAttributor],\n  [Node.ELEMENT_NODE, matchStyles],\n  ['li', matchIndent],\n  ['ol, ul', matchList],\n  ['pre', matchCodeBlock],\n  ['tr', matchTable],\n  ['b', createMatchAlias('bold')],\n  ['i', createMatchAlias('italic')],\n  ['strike', createMatchAlias('strike')],\n  ['style', matchIgnore],\n];\n\nconst ATTRIBUTE_ATTRIBUTORS = [AlignAttribute, DirectionAttribute].reduce(\n  (memo: Record<string, Attributor>, attr) => {\n    memo[attr.keyName] = attr;\n    return memo;\n  },\n  {},\n);\n\nconst STYLE_ATTRIBUTORS = [\n  AlignStyle,\n  BackgroundStyle,\n  ColorStyle,\n  DirectionStyle,\n  FontStyle,\n  SizeStyle,\n].reduce((memo: Record<string, Attributor>, attr) => {\n  memo[attr.keyName] = attr;\n  return memo;\n}, {});\n\ninterface ClipboardOptions {\n  matchers: [Selector, Matcher][];\n}\n\nclass Clipboard extends Module<ClipboardOptions> {\n  static DEFAULTS: ClipboardOptions = {\n    matchers: [],\n  };\n\n  matchers: [Selector, Matcher][];\n\n  constructor(quill: Quill, options: Partial<ClipboardOptions>) {\n    super(quill, options);\n    this.quill.root.addEventListener('copy', (e) =>\n      this.onCaptureCopy(e, false),\n    );\n    this.quill.root.addEventListener('cut', (e) => this.onCaptureCopy(e, true));\n    this.quill.root.addEventListener('paste', this.onCapturePaste.bind(this));\n    this.matchers = [];\n    CLIPBOARD_CONFIG.concat(this.options.matchers ?? []).forEach(\n      ([selector, matcher]) => {\n        this.addMatcher(selector, matcher);\n      },\n    );\n  }\n\n  addMatcher(selector: Selector, matcher: Matcher) {\n    this.matchers.push([selector, matcher]);\n  }\n\n  convert(\n    { html, text }: { html?: string; text?: string },\n    formats: Record<string, unknown> = {},\n  ) {\n    if (formats[CodeBlock.blotName]) {\n      return new Delta().insert(text || '', {\n        [CodeBlock.blotName]: formats[CodeBlock.blotName],\n      });\n    }\n    if (!html) {\n      return new Delta().insert(text || '', formats);\n    }\n    const delta = this.convertHTML(html);\n    // Remove trailing newline\n    if (\n      deltaEndsWith(delta, '\\n') &&\n      (delta.ops[delta.ops.length - 1].attributes == null || formats.table)\n    ) {\n      return delta.compose(new Delta().retain(delta.length() - 1).delete(1));\n    }\n    return delta;\n  }\n\n  protected normalizeHTML(doc: Document) {\n    normalizeExternalHTML(doc);\n  }\n\n  protected convertHTML(html: string) {\n    const doc = new DOMParser().parseFromString(html, 'text/html');\n    this.normalizeHTML(doc);\n    const container = doc.body;\n    const nodeMatches = new WeakMap();\n    const [elementMatchers, textMatchers] = this.prepareMatching(\n      container,\n      nodeMatches,\n    );\n    return traverse(\n      this.quill.scroll,\n      container,\n      elementMatchers,\n      textMatchers,\n      nodeMatches,\n    );\n  }\n\n  dangerouslyPasteHTML(html: string, source?: EmitterSource): void;\n  dangerouslyPasteHTML(\n    index: number,\n    html: string,\n    source?: EmitterSource,\n  ): void;\n  dangerouslyPasteHTML(\n    index: number | string,\n    html?: string,\n    source: EmitterSource = Quill.sources.API,\n  ) {\n    if (typeof index === 'string') {\n      const delta = this.convert({ html: index, text: '' });\n      // @ts-expect-error\n      this.quill.setContents(delta, html);\n      this.quill.setSelection(0, Quill.sources.SILENT);\n    } else {\n      const paste = this.convert({ html, text: '' });\n      this.quill.updateContents(\n        new Delta().retain(index).concat(paste),\n        source,\n      );\n      this.quill.setSelection(index + paste.length(), Quill.sources.SILENT);\n    }\n  }\n\n  onCaptureCopy(e: ClipboardEvent, isCut = false) {\n    if (e.defaultPrevented) return;\n    e.preventDefault();\n    const [range] = this.quill.selection.getRange();\n    if (range == null) return;\n    const { html, text } = this.onCopy(range, isCut);\n    e.clipboardData?.setData('text/plain', text);\n    e.clipboardData?.setData('text/html', html);\n    if (isCut) {\n      deleteRange({ range, quill: this.quill });\n    }\n  }\n\n  /*\n   * https://www.iana.org/assignments/media-types/text/uri-list\n   */\n  private normalizeURIList(urlList: string) {\n    return (\n      urlList\n        .split(/\\r?\\n/)\n        // Ignore all comments\n        .filter((url) => url[0] !== '#')\n        .join('\\n')\n    );\n  }\n\n  onCapturePaste(e: ClipboardEvent) {\n    if (e.defaultPrevented || !this.quill.isEnabled()) return;\n    e.preventDefault();\n    const range = this.quill.getSelection(true);\n    if (range == null) return;\n    const html = e.clipboardData?.getData('text/html');\n    let text = e.clipboardData?.getData('text/plain');\n    if (!html && !text) {\n      const urlList = e.clipboardData?.getData('text/uri-list');\n      if (urlList) {\n        text = this.normalizeURIList(urlList);\n      }\n    }\n    const files = Array.from(e.clipboardData?.files || []);\n    if (!html && files.length > 0) {\n      this.quill.uploader.upload(range, files);\n      return;\n    }\n    if (html && files.length > 0) {\n      const doc = new DOMParser().parseFromString(html, 'text/html');\n      if (\n        doc.body.childElementCount === 1 &&\n        doc.body.firstElementChild?.tagName === 'IMG'\n      ) {\n        this.quill.uploader.upload(range, files);\n        return;\n      }\n    }\n    this.onPaste(range, { html, text });\n  }\n\n  onCopy(range: Range, isCut: boolean): { html: string; text: string };\n  onCopy(range: Range) {\n    const text = this.quill.getText(range);\n    const html = this.quill.getSemanticHTML(range);\n    return { html, text };\n  }\n\n  onPaste(range: Range, { text, html }: { text?: string; html?: string }) {\n    const formats = this.quill.getFormat(range.index);\n    const pastedDelta = this.convert({ text, html }, formats);\n    debug.log('onPaste', pastedDelta, { text, html });\n    const delta = new Delta()\n      .retain(range.index)\n      .delete(range.length)\n      .concat(pastedDelta);\n    this.quill.updateContents(delta, Quill.sources.USER);\n    // range.length contributes to delta.length()\n    this.quill.setSelection(\n      delta.length() - range.length,\n      Quill.sources.SILENT,\n    );\n    this.quill.scrollSelectionIntoView();\n  }\n\n  prepareMatching(container: Element, nodeMatches: WeakMap<Node, Matcher[]>) {\n    const elementMatchers: Matcher[] = [];\n    const textMatchers: Matcher[] = [];\n    this.matchers.forEach((pair) => {\n      const [selector, matcher] = pair;\n      switch (selector) {\n        case Node.TEXT_NODE:\n          textMatchers.push(matcher);\n          break;\n        case Node.ELEMENT_NODE:\n          elementMatchers.push(matcher);\n          break;\n        default:\n          Array.from(container.querySelectorAll(selector)).forEach((node) => {\n            if (nodeMatches.has(node)) {\n              const matches = nodeMatches.get(node);\n              matches?.push(matcher);\n            } else {\n              nodeMatches.set(node, [matcher]);\n            }\n          });\n          break;\n      }\n    });\n    return [elementMatchers, textMatchers];\n  }\n}\n\nfunction applyFormat(\n  delta: Delta,\n  format: string,\n  value: unknown,\n  scroll: ScrollBlot,\n): Delta {\n  if (!scroll.query(format)) {\n    return delta;\n  }\n\n  return delta.reduce((newDelta, op) => {\n    if (!op.insert) return newDelta;\n    if (op.attributes && op.attributes[format]) {\n      return newDelta.push(op);\n    }\n    const formats = value ? { [format]: value } : {};\n    return newDelta.insert(op.insert, { ...formats, ...op.attributes });\n  }, new Delta());\n}\n\nfunction deltaEndsWith(delta: Delta, text: string) {\n  let endText = '';\n  for (\n    let i = delta.ops.length - 1;\n    i >= 0 && endText.length < text.length;\n    --i // eslint-disable-line no-plusplus\n  ) {\n    const op = delta.ops[i];\n    if (typeof op.insert !== 'string') break;\n    endText = op.insert + endText;\n  }\n  return endText.slice(-1 * text.length) === text;\n}\n\nfunction isLine(node: Node, scroll: ScrollBlot) {\n  if (!(node instanceof Element)) return false;\n  const match = scroll.query(node);\n  // @ts-expect-error\n  if (match && match.prototype instanceof EmbedBlot) return false;\n\n  return [\n    'address',\n    'article',\n    'blockquote',\n    'canvas',\n    'dd',\n    'div',\n    'dl',\n    'dt',\n    'fieldset',\n    'figcaption',\n    'figure',\n    'footer',\n    'form',\n    'h1',\n    'h2',\n    'h3',\n    'h4',\n    'h5',\n    'h6',\n    'header',\n    'iframe',\n    'li',\n    'main',\n    'nav',\n    'ol',\n    'output',\n    'p',\n    'pre',\n    'section',\n    'table',\n    'td',\n    'tr',\n    'ul',\n    'video',\n  ].includes(node.tagName.toLowerCase());\n}\n\nfunction isBetweenInlineElements(node: HTMLElement, scroll: ScrollBlot) {\n  return (\n    node.previousElementSibling &&\n    node.nextElementSibling &&\n    !isLine(node.previousElementSibling, scroll) &&\n    !isLine(node.nextElementSibling, scroll)\n  );\n}\n\nconst preNodes = new WeakMap();\nfunction isPre(node: Node | null) {\n  if (node == null) return false;\n  if (!preNodes.has(node)) {\n    // @ts-expect-error\n    if (node.tagName === 'PRE') {\n      preNodes.set(node, true);\n    } else {\n      preNodes.set(node, isPre(node.parentNode));\n    }\n  }\n  return preNodes.get(node);\n}\n\nfunction traverse(\n  scroll: ScrollBlot,\n  node: ChildNode,\n  elementMatchers: Matcher[],\n  textMatchers: Matcher[],\n  nodeMatches: WeakMap<Node, Matcher[]>,\n): Delta {\n  // Post-order\n  if (node.nodeType === node.TEXT_NODE) {\n    return textMatchers.reduce((delta: Delta, matcher) => {\n      return matcher(node, delta, scroll);\n    }, new Delta());\n  }\n  if (node.nodeType === node.ELEMENT_NODE) {\n    return Array.from(node.childNodes || []).reduce((delta, childNode) => {\n      let childrenDelta = traverse(\n        scroll,\n        childNode,\n        elementMatchers,\n        textMatchers,\n        nodeMatches,\n      );\n      if (childNode.nodeType === node.ELEMENT_NODE) {\n        childrenDelta = elementMatchers.reduce((reducedDelta, matcher) => {\n          return matcher(childNode as HTMLElement, reducedDelta, scroll);\n        }, childrenDelta);\n        childrenDelta = (nodeMatches.get(childNode) || []).reduce(\n          (reducedDelta, matcher) => {\n            return matcher(childNode, reducedDelta, scroll);\n          },\n          childrenDelta,\n        );\n      }\n      return delta.concat(childrenDelta);\n    }, new Delta());\n  }\n  return new Delta();\n}\n\nfunction createMatchAlias(format: string) {\n  return (_node: Element, delta: Delta, scroll: ScrollBlot) => {\n    return applyFormat(delta, format, true, scroll);\n  };\n}\n\nfunction matchAttributor(node: HTMLElement, delta: Delta, scroll: ScrollBlot) {\n  const attributes = Attributor.keys(node);\n  const classes = ClassAttributor.keys(node);\n  const styles = StyleAttributor.keys(node);\n  const formats: Record<string, string | undefined> = {};\n  attributes\n    .concat(classes)\n    .concat(styles)\n    .forEach((name) => {\n      let attr = scroll.query(name, Scope.ATTRIBUTE) as Attributor;\n      if (attr != null) {\n        formats[attr.attrName] = attr.value(node);\n        if (formats[attr.attrName]) return;\n      }\n      attr = ATTRIBUTE_ATTRIBUTORS[name];\n      if (attr != null && (attr.attrName === name || attr.keyName === name)) {\n        formats[attr.attrName] = attr.value(node) || undefined;\n      }\n      attr = STYLE_ATTRIBUTORS[name];\n      if (attr != null && (attr.attrName === name || attr.keyName === name)) {\n        attr = STYLE_ATTRIBUTORS[name];\n        formats[attr.attrName] = attr.value(node) || undefined;\n      }\n    });\n\n  return Object.entries(formats).reduce(\n    (newDelta, [name, value]) => applyFormat(newDelta, name, value, scroll),\n    delta,\n  );\n}\n\nfunction matchBlot(node: Node, delta: Delta, scroll: ScrollBlot) {\n  const match = scroll.query(node);\n  if (match == null) return delta;\n  // @ts-expect-error\n  if (match.prototype instanceof EmbedBlot) {\n    const embed = {};\n    // @ts-expect-error\n    const value = match.value(node);\n    if (value != null) {\n      // @ts-expect-error\n      embed[match.blotName] = value;\n      // @ts-expect-error\n      return new Delta().insert(embed, match.formats(node, scroll));\n    }\n  } else {\n    // @ts-expect-error\n    if (match.prototype instanceof BlockBlot && !deltaEndsWith(delta, '\\n')) {\n      delta.insert('\\n');\n    }\n    if (\n      'blotName' in match &&\n      'formats' in match &&\n      typeof match.formats === 'function'\n    ) {\n      return applyFormat(\n        delta,\n        match.blotName,\n        match.formats(node, scroll),\n        scroll,\n      );\n    }\n  }\n  return delta;\n}\n\nfunction matchBreak(node: Node, delta: Delta) {\n  if (!deltaEndsWith(delta, '\\n')) {\n    delta.insert('\\n');\n  }\n  return delta;\n}\n\nfunction matchCodeBlock(node: Node, delta: Delta, scroll: ScrollBlot) {\n  const match = scroll.query('code-block');\n  const language =\n    match && 'formats' in match && typeof match.formats === 'function'\n      ? match.formats(node, scroll)\n      : true;\n  return applyFormat(delta, 'code-block', language, scroll);\n}\n\nfunction matchIgnore() {\n  return new Delta();\n}\n\nfunction matchIndent(node: Node, delta: Delta, scroll: ScrollBlot) {\n  const match = scroll.query(node);\n  if (\n    match == null ||\n    // @ts-expect-error\n    match.blotName !== 'list' ||\n    !deltaEndsWith(delta, '\\n')\n  ) {\n    return delta;\n  }\n  let indent = -1;\n  let parent = node.parentNode;\n  while (parent != null) {\n    // @ts-expect-error\n    if (['OL', 'UL'].includes(parent.tagName)) {\n      indent += 1;\n    }\n    parent = parent.parentNode;\n  }\n  if (indent <= 0) return delta;\n  return delta.reduce((composed, op) => {\n    if (!op.insert) return composed;\n    if (op.attributes && typeof op.attributes.indent === 'number') {\n      return composed.push(op);\n    }\n    return composed.insert(op.insert, { indent, ...(op.attributes || {}) });\n  }, new Delta());\n}\n\nfunction matchList(node: Node, delta: Delta, scroll: ScrollBlot) {\n  const element = node as Element;\n  let list = element.tagName === 'OL' ? 'ordered' : 'bullet';\n\n  const checkedAttr = element.getAttribute('data-checked');\n  if (checkedAttr) {\n    list = checkedAttr === 'true' ? 'checked' : 'unchecked';\n  }\n\n  return applyFormat(delta, 'list', list, scroll);\n}\n\nfunction matchNewline(node: Node, delta: Delta, scroll: ScrollBlot) {\n  if (!deltaEndsWith(delta, '\\n')) {\n    if (\n      isLine(node, scroll) &&\n      (node.childNodes.length > 0 || node instanceof HTMLParagraphElement)\n    ) {\n      return delta.insert('\\n');\n    }\n    if (delta.length() > 0 && node.nextSibling) {\n      let nextSibling: Node | null = node.nextSibling;\n      while (nextSibling != null) {\n        if (isLine(nextSibling, scroll)) {\n          return delta.insert('\\n');\n        }\n        const match = scroll.query(nextSibling);\n        // @ts-expect-error\n        if (match && match.prototype instanceof BlockEmbed) {\n          return delta.insert('\\n');\n        }\n        nextSibling = nextSibling.firstChild;\n      }\n    }\n  }\n  return delta;\n}\n\nfunction matchStyles(node: HTMLElement, delta: Delta, scroll: ScrollBlot) {\n  const formats: Record<string, unknown> = {};\n  const style: Partial<CSSStyleDeclaration> = node.style || {};\n  if (style.fontStyle === 'italic') {\n    formats.italic = true;\n  }\n  if (style.textDecoration === 'underline') {\n    formats.underline = true;\n  }\n  if (style.textDecoration === 'line-through') {\n    formats.strike = true;\n  }\n  if (\n    style.fontWeight?.startsWith('bold') ||\n    // @ts-expect-error Fix me later\n    parseInt(style.fontWeight, 10) >= 700\n  ) {\n    formats.bold = true;\n  }\n  delta = Object.entries(formats).reduce(\n    (newDelta, [name, value]) => applyFormat(newDelta, name, value, scroll),\n    delta,\n  );\n  // @ts-expect-error\n  if (parseFloat(style.textIndent || 0) > 0) {\n    // Could be 0.5in\n    return new Delta().insert('\\t').concat(delta);\n  }\n  return delta;\n}\n\nfunction matchTable(\n  node: HTMLTableRowElement,\n  delta: Delta,\n  scroll: ScrollBlot,\n) {\n  const table =\n    node.parentElement?.tagName === 'TABLE'\n      ? node.parentElement\n      : node.parentElement?.parentElement;\n  if (table != null) {\n    const rows = Array.from(table.querySelectorAll('tr'));\n    const row = rows.indexOf(node) + 1;\n    return applyFormat(delta, 'table', row, scroll);\n  }\n  return delta;\n}\n\nfunction matchText(node: HTMLElement, delta: Delta, scroll: ScrollBlot) {\n  // @ts-expect-error\n  let text = node.data;\n  // Word represents empty line with <o:p>&nbsp;</o:p>\n  if (node.parentElement?.tagName === 'O:P') {\n    return delta.insert(text.trim());\n  }\n  if (!isPre(node)) {\n    if (\n      text.trim().length === 0 &&\n      text.includes('\\n') &&\n      !isBetweenInlineElements(node, scroll)\n    ) {\n      return delta;\n    }\n    const replacer = (collapse: unknown, match: string) => {\n      const replaced = match.replace(/[^\\u00a0]/g, ''); // \\u00a0 is nbsp;\n      return replaced.length < 1 && collapse ? ' ' : replaced;\n    };\n    text = text.replace(/\\r\\n/g, ' ').replace(/\\n/g, ' ');\n    text = text.replace(/\\s\\s+/g, replacer.bind(replacer, true)); // collapse whitespace\n    if (\n      (node.previousSibling == null &&\n        node.parentElement != null &&\n        isLine(node.parentElement, scroll)) ||\n      (node.previousSibling instanceof Element &&\n        isLine(node.previousSibling, scroll))\n    ) {\n      text = text.replace(/^\\s+/, replacer.bind(replacer, false));\n    }\n    if (\n      (node.nextSibling == null &&\n        node.parentElement != null &&\n        isLine(node.parentElement, scroll)) ||\n      (node.nextSibling instanceof Element && isLine(node.nextSibling, scroll))\n    ) {\n      text = text.replace(/\\s+$/, replacer.bind(replacer, false));\n    }\n  }\n  return delta.insert(text);\n}\n\nexport {\n  Clipboard as default,\n  matchAttributor,\n  matchBlot,\n  matchNewline,\n  matchText,\n  traverse,\n};\n","import { Scope } from 'parchment';\nimport type Delta from 'quill-delta';\nimport Module from '../core/module.js';\nimport Quill from '../core/quill.js';\nimport type Scroll from '../blots/scroll.js';\nimport type { Range } from '../core/selection.js';\n\nexport interface HistoryOptions {\n  userOnly: boolean;\n  delay: number;\n  maxStack: number;\n}\n\nexport interface StackItem {\n  delta: Delta;\n  range: Range | null;\n}\n\ninterface Stack {\n  undo: StackItem[];\n  redo: StackItem[];\n}\n\nclass History extends Module<HistoryOptions> {\n  static DEFAULTS: HistoryOptions = {\n    delay: 1000,\n    maxStack: 100,\n    userOnly: false,\n  };\n\n  lastRecorded = 0;\n  ignoreChange = false;\n  stack: Stack = { undo: [], redo: [] };\n  currentRange: Range | null = null;\n\n  constructor(quill: Quill, options: Partial<HistoryOptions>) {\n    super(quill, options);\n    this.quill.on(\n      Quill.events.EDITOR_CHANGE,\n      (eventName, value, oldValue, source) => {\n        if (eventName === Quill.events.SELECTION_CHANGE) {\n          if (value && source !== Quill.sources.SILENT) {\n            this.currentRange = value;\n          }\n        } else if (eventName === Quill.events.TEXT_CHANGE) {\n          if (!this.ignoreChange) {\n            if (!this.options.userOnly || source === Quill.sources.USER) {\n              this.record(value, oldValue);\n            } else {\n              this.transform(value);\n            }\n          }\n\n          this.currentRange = transformRange(this.currentRange, value);\n        }\n      },\n    );\n\n    this.quill.keyboard.addBinding(\n      { key: 'z', shortKey: true },\n      this.undo.bind(this),\n    );\n    this.quill.keyboard.addBinding(\n      { key: ['z', 'Z'], shortKey: true, shiftKey: true },\n      this.redo.bind(this),\n    );\n    if (/Win/i.test(navigator.platform)) {\n      this.quill.keyboard.addBinding(\n        { key: 'y', shortKey: true },\n        this.redo.bind(this),\n      );\n    }\n\n    this.quill.root.addEventListener('beforeinput', (event) => {\n      if (event.inputType === 'historyUndo') {\n        this.undo();\n        event.preventDefault();\n      } else if (event.inputType === 'historyRedo') {\n        this.redo();\n        event.preventDefault();\n      }\n    });\n  }\n\n  change(source: 'undo' | 'redo', dest: 'redo' | 'undo') {\n    if (this.stack[source].length === 0) return;\n    const item = this.stack[source].pop();\n    if (!item) return;\n    const base = this.quill.getContents();\n    const inverseDelta = item.delta.invert(base);\n    this.stack[dest].push({\n      delta: inverseDelta,\n      range: transformRange(item.range, inverseDelta),\n    });\n    this.lastRecorded = 0;\n    this.ignoreChange = true;\n    this.quill.updateContents(item.delta, Quill.sources.USER);\n    this.ignoreChange = false;\n\n    this.restoreSelection(item);\n  }\n\n  clear() {\n    this.stack = { undo: [], redo: [] };\n  }\n\n  cutoff() {\n    this.lastRecorded = 0;\n  }\n\n  record(changeDelta: Delta, oldDelta: Delta) {\n    if (changeDelta.ops.length === 0) return;\n    this.stack.redo = [];\n    let undoDelta = changeDelta.invert(oldDelta);\n    let undoRange = this.currentRange;\n    const timestamp = Date.now();\n    if (\n      // @ts-expect-error Fix me later\n      this.lastRecorded + this.options.delay > timestamp &&\n      this.stack.undo.length > 0\n    ) {\n      const item = this.stack.undo.pop();\n      if (item) {\n        undoDelta = undoDelta.compose(item.delta);\n        undoRange = item.range;\n      }\n    } else {\n      this.lastRecorded = timestamp;\n    }\n    if (undoDelta.length() === 0) return;\n    this.stack.undo.push({ delta: undoDelta, range: undoRange });\n    // @ts-expect-error Fix me later\n    if (this.stack.undo.length > this.options.maxStack) {\n      this.stack.undo.shift();\n    }\n  }\n\n  redo() {\n    this.change('redo', 'undo');\n  }\n\n  transform(delta: Delta) {\n    transformStack(this.stack.undo, delta);\n    transformStack(this.stack.redo, delta);\n  }\n\n  undo() {\n    this.change('undo', 'redo');\n  }\n\n  protected restoreSelection(stackItem: StackItem) {\n    if (stackItem.range) {\n      this.quill.setSelection(stackItem.range, Quill.sources.USER);\n    } else {\n      const index = getLastChangeIndex(this.quill.scroll, stackItem.delta);\n      this.quill.setSelection(index, Quill.sources.USER);\n    }\n  }\n}\n\nfunction transformStack(stack: StackItem[], delta: Delta) {\n  let remoteDelta = delta;\n  for (let i = stack.length - 1; i >= 0; i -= 1) {\n    const oldItem = stack[i];\n    stack[i] = {\n      delta: remoteDelta.transform(oldItem.delta, true),\n      range: oldItem.range && transformRange(oldItem.range, remoteDelta),\n    };\n    remoteDelta = oldItem.delta.transform(remoteDelta);\n    if (stack[i].delta.length() === 0) {\n      stack.splice(i, 1);\n    }\n  }\n}\n\nfunction endsWithNewlineChange(scroll: Scroll, delta: Delta) {\n  const lastOp = delta.ops[delta.ops.length - 1];\n  if (lastOp == null) return false;\n  if (lastOp.insert != null) {\n    return typeof lastOp.insert === 'string' && lastOp.insert.endsWith('\\n');\n  }\n  if (lastOp.attributes != null) {\n    return Object.keys(lastOp.attributes).some((attr) => {\n      return scroll.query(attr, Scope.BLOCK) != null;\n    });\n  }\n  return false;\n}\n\nfunction getLastChangeIndex(scroll: Scroll, delta: Delta) {\n  const deleteLength = delta.reduce((length, op) => {\n    return length + (op.delete || 0);\n  }, 0);\n  let changeIndex = delta.length() - deleteLength;\n  if (endsWithNewlineChange(scroll, delta)) {\n    changeIndex -= 1;\n  }\n  return changeIndex;\n}\n\nfunction transformRange(range: Range | null, delta: Delta) {\n  if (!range) return range;\n  const start = delta.transformPosition(range.index);\n  const end = delta.transformPosition(range.index + range.length);\n  return { index: start, length: end - start };\n}\n\nexport { History as default, getLastChangeIndex };\n","import Delta from 'quill-delta';\nimport type Quill from '../core/quill.js';\nimport Emitter from '../core/emitter.js';\nimport Module from '../core/module.js';\nimport type { Range } from '../core/selection.js';\n\ninterface UploaderOptions {\n  mimetypes: string[];\n  handler: (this: { quill: Quill }, range: Range, files: File[]) => void;\n}\n\nclass Uploader extends Module<UploaderOptions> {\n  static DEFAULTS: UploaderOptions;\n\n  constructor(quill: Quill, options: Partial<UploaderOptions>) {\n    super(quill, options);\n    quill.root.addEventListener('drop', (e) => {\n      e.preventDefault();\n      let native: ReturnType<typeof document.createRange> | null = null;\n      if (document.caretRangeFromPoint) {\n        native = document.caretRangeFromPoint(e.clientX, e.clientY);\n        // @ts-expect-error\n      } else if (document.caretPositionFromPoint) {\n        // @ts-expect-error\n        const position = document.caretPositionFromPoint(e.clientX, e.clientY);\n        native = document.createRange();\n        native.setStart(position.offsetNode, position.offset);\n        native.setEnd(position.offsetNode, position.offset);\n      }\n\n      const normalized = native && quill.selection.normalizeNative(native);\n      if (normalized) {\n        const range = quill.selection.normalizedToRange(normalized);\n        if (e.dataTransfer?.files) {\n          this.upload(range, e.dataTransfer.files);\n        }\n      }\n    });\n  }\n\n  upload(range: Range, files: FileList | File[]) {\n    const uploads: File[] = [];\n    Array.from(files).forEach((file) => {\n      if (file && this.options.mimetypes?.includes(file.type)) {\n        uploads.push(file);\n      }\n    });\n    if (uploads.length > 0) {\n      // @ts-expect-error Fix me later\n      this.options.handler.call(this, range, uploads);\n    }\n  }\n}\n\nUploader.DEFAULTS = {\n  mimetypes: ['image/png', 'image/jpeg'],\n  handler(range: Range, files: File[]) {\n    if (!this.quill.scroll.query('image')) {\n      return;\n    }\n    const promises = files.map<Promise<string>>((file) => {\n      return new Promise((resolve) => {\n        const reader = new FileReader();\n        reader.onload = () => {\n          resolve(reader.result as string);\n        };\n        reader.readAsDataURL(file);\n      });\n    });\n    Promise.all(promises).then((images) => {\n      const update = images.reduce((delta: Delta, image) => {\n        return delta.insert({ image });\n      }, new Delta().retain(range.index).delete(range.length)) as Delta;\n      this.quill.updateContents(update, Emitter.sources.USER);\n      this.quill.setSelection(\n        range.index + images.length,\n        Emitter.sources.SILENT,\n      );\n    });\n  },\n};\n\nexport default Uploader;\n","import Delta from 'quill-delta';\nimport Module from '../core/module.js';\nimport Quill from '../core/quill.js';\nimport type { Range } from '../core/selection.js';\nimport { deleteRange } from './keyboard.js';\n\nconst INSERT_TYPES = ['insertText', 'insertReplacementText'];\n\nclass Input extends Module {\n  constructor(quill: Quill, options: Record<string, never>) {\n    super(quill, options);\n\n    quill.root.addEventListener('beforeinput', (event) => {\n      this.handleBeforeInput(event);\n    });\n\n    // Gboard with English input on Android triggers `compositionstart` sometimes even\n    // users are not going to type anything.\n    if (!/Android/i.test(navigator.userAgent)) {\n      quill.on(Quill.events.COMPOSITION_BEFORE_START, () => {\n        this.handleCompositionStart();\n      });\n    }\n  }\n\n  private deleteRange(range: Range) {\n    deleteRange({ range, quill: this.quill });\n  }\n\n  private replaceText(range: Range, text = '') {\n    if (range.length === 0) return false;\n\n    if (text) {\n      // Follow the native behavior that inherits the formats of the first character\n      const formats = this.quill.getFormat(range.index, 1);\n      this.deleteRange(range);\n      this.quill.updateContents(\n        new Delta().retain(range.index).insert(text, formats),\n        Quill.sources.USER,\n      );\n    } else {\n      this.deleteRange(range);\n    }\n\n    this.quill.setSelection(range.index + text.length, 0, Quill.sources.SILENT);\n    return true;\n  }\n\n  private handleBeforeInput(event: InputEvent) {\n    if (\n      this.quill.composition.isComposing ||\n      event.defaultPrevented ||\n      !INSERT_TYPES.includes(event.inputType)\n    ) {\n      return;\n    }\n\n    const staticRange = event.getTargetRanges\n      ? event.getTargetRanges()[0]\n      : null;\n    if (!staticRange || staticRange.collapsed === true) {\n      return;\n    }\n\n    const text = getPlainTextFromInputEvent(event);\n    if (text == null) {\n      return;\n    }\n    const normalized = this.quill.selection.normalizeNative(staticRange);\n    const range = normalized\n      ? this.quill.selection.normalizedToRange(normalized)\n      : null;\n    if (range && this.replaceText(range, text)) {\n      event.preventDefault();\n    }\n  }\n\n  private handleCompositionStart() {\n    const range = this.quill.getSelection();\n    if (range) {\n      this.replaceText(range);\n    }\n  }\n}\n\nfunction getPlainTextFromInputEvent(event: InputEvent) {\n  // When `inputType` is \"insertText\":\n  // - `event.data` should be string (Safari uses `event.dataTransfer`).\n  // - `event.dataTransfer` should be null.\n  // When `inputType` is \"insertReplacementText\":\n  // - `event.data` should be null.\n  // - `event.dataTransfer` should contain \"text/plain\" data.\n\n  if (typeof event.data === 'string') {\n    return event.data;\n  }\n  if (event.dataTransfer?.types.includes('text/plain')) {\n    return event.dataTransfer.getData('text/plain');\n  }\n  return null;\n}\n\nexport default Input;\n","import { ParentBlot } from 'parchment';\nimport Module from '../core/module.js';\nimport Quill from '../core/quill.js';\n\nconst isMac = /Mac/i.test(navigator.platform);\n\n// Export for testing\nexport const TTL_FOR_VALID_SELECTION_CHANGE = 100;\n\n// A loose check to determine if the shortcut can move the caret before a UI node:\n// <ANY_PARENT>[CARET]<div class=\"ql-ui\"></div>[CONTENT]</ANY_PARENT>\nconst canMoveCaretBeforeUINode = (event: KeyboardEvent) => {\n  if (\n    event.key === 'ArrowLeft' ||\n    event.key === 'ArrowRight' || // RTL scripts or moving from the end of the previous line\n    event.key === 'ArrowUp' ||\n    event.key === 'ArrowDown' ||\n    event.key === 'Home'\n  ) {\n    return true;\n  }\n\n  if (isMac && event.key === 'a' && event.ctrlKey === true) {\n    return true;\n  }\n\n  return false;\n};\n\nclass UINode extends Module {\n  isListening = false;\n  selectionChangeDeadline = 0;\n\n  constructor(quill: Quill, options: Record<string, never>) {\n    super(quill, options);\n\n    this.handleArrowKeys();\n    this.handleNavigationShortcuts();\n  }\n\n  private handleArrowKeys() {\n    this.quill.keyboard.addBinding({\n      key: ['ArrowLeft', 'ArrowRight'],\n      offset: 0,\n      shiftKey: null,\n      handler(range, { line, event }) {\n        if (!(line instanceof ParentBlot) || !line.uiNode) {\n          return true;\n        }\n\n        const isRTL = getComputedStyle(line.domNode)['direction'] === 'rtl';\n        if (\n          (isRTL && event.key !== 'ArrowRight') ||\n          (!isRTL && event.key !== 'ArrowLeft')\n        ) {\n          return true;\n        }\n\n        this.quill.setSelection(\n          range.index - 1,\n          range.length + (event.shiftKey ? 1 : 0),\n          Quill.sources.USER,\n        );\n        return false;\n      },\n    });\n  }\n\n  private handleNavigationShortcuts() {\n    this.quill.root.addEventListener('keydown', (event) => {\n      if (!event.defaultPrevented && canMoveCaretBeforeUINode(event)) {\n        this.ensureListeningToSelectionChange();\n      }\n    });\n  }\n\n  /**\n   * We only listen to the `selectionchange` event when\n   * there is an intention of moving the caret to the beginning using shortcuts.\n   * This is primarily implemented to prevent infinite loops, as we are changing\n   * the selection within the handler of a `selectionchange` event.\n   */\n  private ensureListeningToSelectionChange() {\n    this.selectionChangeDeadline = Date.now() + TTL_FOR_VALID_SELECTION_CHANGE;\n\n    if (this.isListening) return;\n    this.isListening = true;\n\n    const listener = () => {\n      this.isListening = false;\n\n      if (Date.now() <= this.selectionChangeDeadline) {\n        this.handleSelectionChange();\n      }\n    };\n\n    document.addEventListener('selectionchange', listener, {\n      once: true,\n    });\n  }\n\n  private handleSelectionChange() {\n    const selection = document.getSelection();\n    if (!selection) return;\n    const range = selection.getRangeAt(0);\n    if (range.collapsed !== true || range.startOffset !== 0) return;\n\n    const line = this.quill.scroll.find(range.startContainer);\n    if (!(line instanceof ParentBlot) || !line.uiNode) return;\n\n    const newRange = document.createRange();\n    newRange.setStartAfter(line.uiNode);\n    newRange.setEndAfter(line.uiNode);\n    selection.removeAllRanges();\n    selection.addRange(newRange);\n  }\n}\n\nexport default UINode;\n","import Quill, { Parchment, Range } from './core/quill.js';\nimport type {\n  Bounds,\n  DebugLevel,\n  EmitterSource,\n  ExpandedQuillOptions,\n  QuillOptions,\n} from './core/quill.js';\n\nimport Block, { BlockEmbed } from './blots/block.js';\nimport Break from './blots/break.js';\nimport Container from './blots/container.js';\nimport Cursor from './blots/cursor.js';\nimport Embed from './blots/embed.js';\nimport Inline from './blots/inline.js';\nimport Scroll from './blots/scroll.js';\nimport TextBlot from './blots/text.js';\n\nimport Clipboard from './modules/clipboard.js';\nimport History from './modules/history.js';\nimport Keyboard from './modules/keyboard.js';\nimport Uploader from './modules/uploader.js';\nimport Delta, { Op, OpIterator, AttributeMap } from 'quill-delta';\nimport Input from './modules/input.js';\nimport UINode from './modules/uiNode.js';\n\nexport { default as Module } from './core/module.js';\nexport { Delta, Op, OpIterator, AttributeMap, Parchment, Range };\nexport type {\n  Bounds,\n  DebugLevel,\n  EmitterSource,\n  ExpandedQuillOptions,\n  QuillOptions,\n};\n\nQuill.register({\n  'blots/block': Block,\n  'blots/block/embed': BlockEmbed,\n  'blots/break': Break,\n  'blots/container': Container,\n  'blots/cursor': Cursor,\n  'blots/embed': Embed,\n  'blots/inline': Inline,\n  'blots/scroll': Scroll,\n  'blots/text': TextBlot,\n\n  'modules/clipboard': Clipboard,\n  'modules/history': History,\n  'modules/keyboard': Keyboard,\n  'modules/uploader': Uploader,\n  'modules/input': Input,\n  'modules/uiNode': UINode,\n});\n\nexport default Quill;\n","import { ClassAttributor, Scope } from 'parchment';\n\nclass IndentAttributor extends ClassAttributor {\n  add(node: HTMLElement, value: string | number) {\n    let normalizedValue = 0;\n    if (value === '+1' || value === '-1') {\n      const indent = this.value(node) || 0;\n      normalizedValue = value === '+1' ? indent + 1 : indent - 1;\n    } else if (typeof value === 'number') {\n      normalizedValue = value;\n    }\n    if (normalizedValue === 0) {\n      this.remove(node);\n      return true;\n    }\n    return super.add(node, normalizedValue.toString());\n  }\n\n  canAdd(node: HTMLElement, value: string) {\n    return super.canAdd(node, value) || super.canAdd(node, parseInt(value, 10));\n  }\n\n  value(node: HTMLElement) {\n    return parseInt(super.value(node), 10) || undefined; // Don't return NaN\n  }\n}\n\nconst IndentClass = new IndentAttributor('indent', 'ql-indent', {\n  scope: Scope.BLOCK,\n  // @ts-expect-error\n  whitelist: [1, 2, 3, 4, 5, 6, 7, 8],\n});\n\nexport default IndentClass;\n","import Block from '../blots/block.js';\n\nclass Blockquote extends Block {\n  static blotName = 'blockquote';\n  static tagName = 'blockquote';\n}\n\nexport default Blockquote;\n","import Block from '../blots/block.js';\n\nclass Header extends Block {\n  static blotName = 'header';\n  static tagName = ['H1', 'H2', 'H3', 'H4', 'H5', 'H6'];\n\n  static formats(domNode: Element) {\n    return this.tagName.indexOf(domNode.tagName) + 1;\n  }\n}\n\nexport default Header;\n","import Block from '../blots/block.js';\nimport Container from '../blots/container.js';\nimport type Scroll from '../blots/scroll.js';\nimport Quill from '../core/quill.js';\n\nclass ListContainer extends Container {}\nListContainer.blotName = 'list-container';\nListContainer.tagName = 'OL';\n\nclass ListItem extends Block {\n  static create(value: string) {\n    const node = super.create() as HTMLElement;\n    node.setAttribute('data-list', value);\n    return node;\n  }\n\n  static formats(domNode: HTMLElement) {\n    return domNode.getAttribute('data-list') || undefined;\n  }\n\n  static register() {\n    Quill.register(ListContainer);\n  }\n\n  constructor(scroll: Scroll, domNode: HTMLElement) {\n    super(scroll, domNode);\n    const ui = domNode.ownerDocument.createElement('span');\n    const listEventHandler = (e: Event) => {\n      if (!scroll.isEnabled()) return;\n      const format = this.statics.formats(domNode, scroll);\n      if (format === 'checked') {\n        this.format('list', 'unchecked');\n        e.preventDefault();\n      } else if (format === 'unchecked') {\n        this.format('list', 'checked');\n        e.preventDefault();\n      }\n    };\n    ui.addEventListener('mousedown', listEventHandler);\n    ui.addEventListener('touchstart', listEventHandler);\n    this.attachUI(ui);\n  }\n\n  format(name: string, value: string) {\n    if (name === this.statics.blotName && value) {\n      this.domNode.setAttribute('data-list', value);\n    } else {\n      super.format(name, value);\n    }\n  }\n}\nListItem.blotName = 'list';\nListItem.tagName = 'LI';\n\nListContainer.allowedChildren = [ListItem];\nListItem.requiredContainer = ListContainer;\n\nexport { ListContainer, ListItem as default };\n","import Inline from '../blots/inline.js';\n\nclass Bold extends Inline {\n  static blotName = 'bold';\n  static tagName = ['STRONG', 'B'];\n\n  static create() {\n    return super.create();\n  }\n\n  static formats() {\n    return true;\n  }\n\n  optimize(context: { [key: string]: any }) {\n    super.optimize(context);\n    if (this.domNode.tagName !== this.statics.tagName[0]) {\n      this.replaceWith(this.statics.blotName);\n    }\n  }\n}\n\nexport default Bold;\n","import Bold from './bold.js';\n\nclass Italic extends Bold {\n  static blotName = 'italic';\n  static tagName = ['EM', 'I'];\n}\n\nexport default Italic;\n","import Inline from '../blots/inline.js';\n\nclass Link extends Inline {\n  static blotName = 'link';\n  static tagName = 'A';\n  static SANITIZED_URL = 'about:blank';\n  static PROTOCOL_WHITELIST = ['http', 'https', 'mailto', 'tel', 'sms'];\n\n  static create(value: string) {\n    const node = super.create(value) as HTMLElement;\n    node.setAttribute('href', this.sanitize(value));\n    node.setAttribute('rel', 'noopener noreferrer');\n    node.setAttribute('target', '_blank');\n    return node;\n  }\n\n  static formats(domNode: HTMLElement) {\n    return domNode.getAttribute('href');\n  }\n\n  static sanitize(url: string) {\n    return sanitize(url, this.PROTOCOL_WHITELIST) ? url : this.SANITIZED_URL;\n  }\n\n  format(name: string, value: unknown) {\n    if (name !== this.statics.blotName || !value) {\n      super.format(name, value);\n    } else {\n      // @ts-expect-error\n      this.domNode.setAttribute('href', this.constructor.sanitize(value));\n    }\n  }\n}\n\nfunction sanitize(url: string, protocols: string[]) {\n  const anchor = document.createElement('a');\n  anchor.href = url;\n  const protocol = anchor.href.slice(0, anchor.href.indexOf(':'));\n  return protocols.indexOf(protocol) > -1;\n}\n\nexport { Link as default, sanitize };\n","import Inline from '../blots/inline.js';\n\nclass Script extends Inline {\n  static blotName = 'script';\n  static tagName = ['SUB', 'SUP'];\n\n  static create(value: 'super' | 'sub' | (string & {})) {\n    if (value === 'super') {\n      return document.createElement('sup');\n    }\n    if (value === 'sub') {\n      return document.createElement('sub');\n    }\n    return super.create(value);\n  }\n\n  static formats(domNode: HTMLElement) {\n    if (domNode.tagName === 'SUB') return 'sub';\n    if (domNode.tagName === 'SUP') return 'super';\n    return undefined;\n  }\n}\n\nexport default Script;\n","import Bold from './bold.js';\n\nclass Strike extends Bold {\n  static blotName = 'strike';\n  static tagName = ['S', 'STRIKE'];\n}\n\nexport default Strike;\n","import Inline from '../blots/inline.js';\n\nclass Underline extends Inline {\n  static blotName = 'underline';\n  static tagName = 'U';\n}\n\nexport default Underline;\n","import Embed from '../blots/embed.js';\n\nclass Formula extends Embed {\n  static blotName = 'formula';\n  static className = 'ql-formula';\n  static tagName = 'SPAN';\n\n  static create(value: string) {\n    // @ts-expect-error\n    if (window.katex == null) {\n      throw new Error('Formula module requires KaTeX.');\n    }\n    const node = super.create(value) as Element;\n    if (typeof value === 'string') {\n      // @ts-expect-error\n      window.katex.render(value, node, {\n        throwOnError: false,\n        errorColor: '#f00',\n      });\n      node.setAttribute('data-value', value);\n    }\n    return node;\n  }\n\n  static value(domNode: Element) {\n    return domNode.getAttribute('data-value');\n  }\n\n  html() {\n    const { formula } = this.value();\n    return `<span>${formula}</span>`;\n  }\n}\n\nexport default Formula;\n","import { EmbedBlot } from 'parchment';\nimport { sanitize } from './link.js';\n\nconst ATTRIBUTES = ['alt', 'height', 'width'];\n\nclass Image extends EmbedBlot {\n  static blotName = 'image';\n  static tagName = 'IMG';\n\n  static create(value: string) {\n    const node = super.create(value) as Element;\n    if (typeof value === 'string') {\n      node.setAttribute('src', this.sanitize(value));\n    }\n    return node;\n  }\n\n  static formats(domNode: Element) {\n    return ATTRIBUTES.reduce(\n      (formats: Record<string, string | null>, attribute) => {\n        if (domNode.hasAttribute(attribute)) {\n          formats[attribute] = domNode.getAttribute(attribute);\n        }\n        return formats;\n      },\n      {},\n    );\n  }\n\n  static match(url: string) {\n    return /\\.(jpe?g|gif|png)$/.test(url) || /^data:image\\/.+;base64/.test(url);\n  }\n\n  static sanitize(url: string) {\n    return sanitize(url, ['http', 'https', 'data']) ? url : '//:0';\n  }\n\n  static value(domNode: Element) {\n    return domNode.getAttribute('src');\n  }\n\n  domNode: HTMLImageElement;\n\n  format(name: string, value: string) {\n    if (ATTRIBUTES.indexOf(name) > -1) {\n      if (value) {\n        this.domNode.setAttribute(name, value);\n      } else {\n        this.domNode.removeAttribute(name);\n      }\n    } else {\n      super.format(name, value);\n    }\n  }\n}\n\nexport default Image;\n","import { BlockEmbed } from '../blots/block.js';\nimport Link from './link.js';\n\nconst ATTRIBUTES = ['height', 'width'];\n\nclass Video extends BlockEmbed {\n  static blotName = 'video';\n  static className = 'ql-video';\n  static tagName = 'IFRAME';\n\n  static create(value: string) {\n    const node = super.create(value) as Element;\n    node.setAttribute('frameborder', '0');\n    node.setAttribute('allowfullscreen', 'true');\n    node.setAttribute('src', this.sanitize(value));\n    return node;\n  }\n\n  static formats(domNode: Element) {\n    return ATTRIBUTES.reduce(\n      (formats: Record<string, string | null>, attribute) => {\n        if (domNode.hasAttribute(attribute)) {\n          formats[attribute] = domNode.getAttribute(attribute);\n        }\n        return formats;\n      },\n      {},\n    );\n  }\n\n  static sanitize(url: string) {\n    return Link.sanitize(url);\n  }\n\n  static value(domNode: Element) {\n    return domNode.getAttribute('src');\n  }\n\n  domNode: HTMLVideoElement;\n\n  format(name: string, value: string) {\n    if (ATTRIBUTES.indexOf(name) > -1) {\n      if (value) {\n        this.domNode.setAttribute(name, value);\n      } else {\n        this.domNode.removeAttribute(name);\n      }\n    } else {\n      super.format(name, value);\n    }\n  }\n\n  html() {\n    const { video } = this.value();\n    return `<a href=\"${video}\">${video}</a>`;\n  }\n}\n\nexport default Video;\n","import Delta from 'quill-delta';\nimport { ClassAttributor, Scope } from 'parchment';\nimport type { Blot, ScrollBlot } from 'parchment';\nimport Inline from '../blots/inline.js';\nimport Quill from '../core/quill.js';\nimport Module from '../core/module.js';\nimport { blockDelta } from '../blots/block.js';\nimport BreakBlot from '../blots/break.js';\nimport CursorBlot from '../blots/cursor.js';\nimport TextBlot, { escapeText } from '../blots/text.js';\nimport CodeBlock, { CodeBlockContainer } from '../formats/code.js';\nimport { traverse } from './clipboard.js';\n\nconst TokenAttributor = new ClassAttributor('code-token', 'hljs', {\n  scope: Scope.INLINE,\n});\nclass CodeToken extends Inline {\n  static formats(node: Element, scroll: ScrollBlot) {\n    while (node != null && node !== scroll.domNode) {\n      if (node.classList && node.classList.contains(CodeBlock.className)) {\n        // @ts-expect-error\n        return super.formats(node, scroll);\n      }\n      // @ts-expect-error\n      node = node.parentNode;\n    }\n    return undefined;\n  }\n\n  constructor(scroll: ScrollBlot, domNode: Node, value: unknown) {\n    // @ts-expect-error\n    super(scroll, domNode, value);\n    TokenAttributor.add(this.domNode, value);\n  }\n\n  format(format: string, value: unknown) {\n    if (format !== CodeToken.blotName) {\n      super.format(format, value);\n    } else if (value) {\n      TokenAttributor.add(this.domNode, value);\n    } else {\n      TokenAttributor.remove(this.domNode);\n      this.domNode.classList.remove(this.statics.className);\n    }\n  }\n\n  optimize(...args: unknown[]) {\n    // @ts-expect-error\n    super.optimize(...args);\n    if (!TokenAttributor.value(this.domNode)) {\n      this.unwrap();\n    }\n  }\n}\nCodeToken.blotName = 'code-token';\nCodeToken.className = 'ql-token';\n\nclass SyntaxCodeBlock extends CodeBlock {\n  static create(value: unknown) {\n    const domNode = super.create(value);\n    if (typeof value === 'string') {\n      domNode.setAttribute('data-language', value);\n    }\n    return domNode;\n  }\n\n  static formats(domNode: Node) {\n    // @ts-expect-error\n    return domNode.getAttribute('data-language') || 'plain';\n  }\n\n  static register() {} // Syntax module will register\n\n  format(name: string, value: unknown) {\n    if (name === this.statics.blotName && value) {\n      // @ts-expect-error\n      this.domNode.setAttribute('data-language', value);\n    } else {\n      super.format(name, value);\n    }\n  }\n\n  replaceWith(name: string | Blot, value?: any) {\n    this.formatAt(0, this.length(), CodeToken.blotName, false);\n    return super.replaceWith(name, value);\n  }\n}\n\nclass SyntaxCodeBlockContainer extends CodeBlockContainer {\n  forceNext?: boolean;\n  cachedText?: string | null;\n\n  attach() {\n    super.attach();\n    this.forceNext = false;\n    // @ts-expect-error\n    this.scroll.emitMount(this);\n  }\n\n  format(name: string, value: unknown) {\n    if (name === SyntaxCodeBlock.blotName) {\n      this.forceNext = true;\n      this.children.forEach((child) => {\n        // @ts-expect-error\n        child.format(name, value);\n      });\n    }\n  }\n\n  formatAt(index: number, length: number, name: string, value: unknown) {\n    if (name === SyntaxCodeBlock.blotName) {\n      this.forceNext = true;\n    }\n    super.formatAt(index, length, name, value);\n  }\n\n  highlight(\n    highlight: (text: string, language: string) => Delta,\n    forced = false,\n  ) {\n    if (this.children.head == null) return;\n    const nodes = Array.from(this.domNode.childNodes).filter(\n      (node) => node !== this.uiNode,\n    );\n    const text = `${nodes.map((node) => node.textContent).join('\\n')}\\n`;\n    const language = SyntaxCodeBlock.formats(this.children.head.domNode);\n    if (forced || this.forceNext || this.cachedText !== text) {\n      if (text.trim().length > 0 || this.cachedText == null) {\n        const oldDelta = this.children.reduce((delta, child) => {\n          // @ts-expect-error\n          return delta.concat(blockDelta(child, false));\n        }, new Delta());\n        const delta = highlight(text, language);\n        oldDelta.diff(delta).reduce((index, { retain, attributes }) => {\n          // Should be all retains\n          if (!retain) return index;\n          if (attributes) {\n            Object.keys(attributes).forEach((format) => {\n              if (\n                [SyntaxCodeBlock.blotName, CodeToken.blotName].includes(format)\n              ) {\n                // @ts-expect-error\n                this.formatAt(index, retain, format, attributes[format]);\n              }\n            });\n          }\n          // @ts-expect-error\n          return index + retain;\n        }, 0);\n      }\n      this.cachedText = text;\n      this.forceNext = false;\n    }\n  }\n\n  html(index: number, length: number) {\n    const [codeBlock] = this.children.find(index);\n    const language = codeBlock\n      ? SyntaxCodeBlock.formats(codeBlock.domNode)\n      : 'plain';\n\n    return `<pre data-language=\"${language}\">\\n${escapeText(\n      this.code(index, length),\n    )}\\n</pre>`;\n  }\n\n  optimize(context: Record<string, any>) {\n    super.optimize(context);\n    if (\n      this.parent != null &&\n      this.children.head != null &&\n      this.uiNode != null\n    ) {\n      const language = SyntaxCodeBlock.formats(this.children.head.domNode);\n      // @ts-expect-error\n      if (language !== this.uiNode.value) {\n        // @ts-expect-error\n        this.uiNode.value = language;\n      }\n    }\n  }\n}\n\nSyntaxCodeBlockContainer.allowedChildren = [SyntaxCodeBlock];\nSyntaxCodeBlock.requiredContainer = SyntaxCodeBlockContainer;\nSyntaxCodeBlock.allowedChildren = [CodeToken, CursorBlot, TextBlot, BreakBlot];\n\ninterface SyntaxOptions {\n  interval: number;\n  languages: { key: string; label: string }[];\n  hljs: any;\n}\n\nconst highlight = (lib: any, language: string, text: string) => {\n  if (typeof lib.versionString === 'string') {\n    const majorVersion = lib.versionString.split('.')[0];\n    if (parseInt(majorVersion, 10) >= 11) {\n      return lib.highlight(text, { language }).value;\n    }\n  }\n  return lib.highlight(language, text).value;\n};\n\nclass Syntax extends Module<SyntaxOptions> {\n  static DEFAULTS: SyntaxOptions & { hljs: any };\n\n  static register() {\n    Quill.register(CodeToken, true);\n    Quill.register(SyntaxCodeBlock, true);\n    Quill.register(SyntaxCodeBlockContainer, true);\n  }\n\n  languages: Record<string, true>;\n\n  constructor(quill: Quill, options: Partial<SyntaxOptions>) {\n    super(quill, options);\n    if (this.options.hljs == null) {\n      throw new Error(\n        'Syntax module requires highlight.js. Please include the library on the page before Quill.',\n      );\n    }\n    // @ts-expect-error Fix me later\n    this.languages = this.options.languages.reduce(\n      (memo: Record<string, unknown>, { key }) => {\n        memo[key] = true;\n        return memo;\n      },\n      {},\n    );\n    this.highlightBlot = this.highlightBlot.bind(this);\n    this.initListener();\n    this.initTimer();\n  }\n\n  initListener() {\n    this.quill.on(Quill.events.SCROLL_BLOT_MOUNT, (blot: Blot) => {\n      if (!(blot instanceof SyntaxCodeBlockContainer)) return;\n      const select = this.quill.root.ownerDocument.createElement('select');\n      // @ts-expect-error Fix me later\n      this.options.languages.forEach(({ key, label }) => {\n        const option = select.ownerDocument.createElement('option');\n        option.textContent = label;\n        option.setAttribute('value', key);\n        select.appendChild(option);\n      });\n      select.addEventListener('change', () => {\n        blot.format(SyntaxCodeBlock.blotName, select.value);\n        this.quill.root.focus(); // Prevent scrolling\n        this.highlight(blot, true);\n      });\n      if (blot.uiNode == null) {\n        blot.attachUI(select);\n        if (blot.children.head) {\n          select.value = SyntaxCodeBlock.formats(blot.children.head.domNode);\n        }\n      }\n    });\n  }\n\n  initTimer() {\n    let timer: ReturnType<typeof setTimeout> | null = null;\n    this.quill.on(Quill.events.SCROLL_OPTIMIZE, () => {\n      if (timer) {\n        clearTimeout(timer);\n      }\n      timer = setTimeout(() => {\n        this.highlight();\n        timer = null;\n      }, this.options.interval);\n    });\n  }\n\n  highlight(blot: SyntaxCodeBlockContainer | null = null, force = false) {\n    if (this.quill.selection.composing) return;\n    this.quill.update(Quill.sources.USER);\n    const range = this.quill.getSelection();\n    const blots =\n      blot == null\n        ? this.quill.scroll.descendants(SyntaxCodeBlockContainer)\n        : [blot];\n    blots.forEach((container) => {\n      container.highlight(this.highlightBlot, force);\n    });\n    this.quill.update(Quill.sources.SILENT);\n    if (range != null) {\n      this.quill.setSelection(range, Quill.sources.SILENT);\n    }\n  }\n\n  highlightBlot(text: string, language = 'plain') {\n    language = this.languages[language] ? language : 'plain';\n    if (language === 'plain') {\n      return escapeText(text)\n        .split('\\n')\n        .reduce((delta, line, i) => {\n          if (i !== 0) {\n            delta.insert('\\n', { [CodeBlock.blotName]: language });\n          }\n          return delta.insert(line);\n        }, new Delta());\n    }\n    const container = this.quill.root.ownerDocument.createElement('div');\n    container.classList.add(CodeBlock.className);\n    container.innerHTML = highlight(this.options.hljs, language, text);\n    return traverse(\n      this.quill.scroll,\n      container,\n      [\n        (node, delta) => {\n          // @ts-expect-error\n          const value = TokenAttributor.value(node);\n          if (value) {\n            return delta.compose(\n              new Delta().retain(delta.length(), {\n                [CodeToken.blotName]: value,\n              }),\n            );\n          }\n          return delta;\n        },\n      ],\n      [\n        (node, delta) => {\n          // @ts-expect-error\n          return node.data.split('\\n').reduce((memo, nodeText, i) => {\n            if (i !== 0) memo.insert('\\n', { [CodeBlock.blotName]: language });\n            return memo.insert(nodeText);\n          }, delta);\n        },\n      ],\n      new WeakMap(),\n    );\n  }\n}\nSyntax.DEFAULTS = {\n  hljs: (() => {\n    return window.hljs;\n  })(),\n  interval: 1000,\n  languages: [\n    { key: 'plain', label: 'Plain' },\n    { key: 'bash', label: 'Bash' },\n    { key: 'cpp', label: 'C++' },\n    { key: 'cs', label: 'C#' },\n    { key: 'css', label: 'CSS' },\n    { key: 'diff', label: 'Diff' },\n    { key: 'xml', label: 'HTML/XML' },\n    { key: 'java', label: 'Java' },\n    { key: 'javascript', label: 'JavaScript' },\n    { key: 'markdown', label: 'Markdown' },\n    { key: 'php', label: 'PHP' },\n    { key: 'python', label: 'Python' },\n    { key: 'ruby', label: 'Ruby' },\n    { key: 'sql', label: 'SQL' },\n  ],\n};\n\nexport { SyntaxCodeBlock as CodeBlock, CodeToken, Syntax as default };\n","import type { LinkedList } from 'parchment';\nimport Block from '../blots/block.js';\nimport Container from '../blots/container.js';\n\nclass TableCell extends Block {\n  static blotName = 'table';\n  static tagName = 'TD';\n\n  static create(value: string) {\n    const node = super.create() as HTMLElement;\n    if (value) {\n      node.setAttribute('data-row', value);\n    } else {\n      node.setAttribute('data-row', tableId());\n    }\n    return node;\n  }\n\n  static formats(domNode: HTMLElement) {\n    if (domNode.hasAttribute('data-row')) {\n      return domNode.getAttribute('data-row');\n    }\n    return undefined;\n  }\n\n  next: this | null;\n\n  cellOffset() {\n    if (this.parent) {\n      return this.parent.children.indexOf(this);\n    }\n    return -1;\n  }\n\n  format(name: string, value: string) {\n    if (name === TableCell.blotName && value) {\n      this.domNode.setAttribute('data-row', value);\n    } else {\n      super.format(name, value);\n    }\n  }\n\n  row(): TableRow {\n    return this.parent as TableRow;\n  }\n\n  rowOffset() {\n    if (this.row()) {\n      return this.row().rowOffset();\n    }\n    return -1;\n  }\n\n  table() {\n    return this.row() && this.row().table();\n  }\n}\n\nclass TableRow extends Container {\n  static blotName = 'table-row';\n  static tagName = 'TR';\n\n  children: LinkedList<TableCell>;\n  next: this | null;\n\n  checkMerge() {\n    // @ts-expect-error\n    if (super.checkMerge() && this.next.children.head != null) {\n      // @ts-expect-error\n      const thisHead = this.children.head.formats();\n      // @ts-expect-error\n      const thisTail = this.children.tail.formats();\n      // @ts-expect-error\n      const nextHead = this.next.children.head.formats();\n      // @ts-expect-error\n      const nextTail = this.next.children.tail.formats();\n      return (\n        thisHead.table === thisTail.table &&\n        thisHead.table === nextHead.table &&\n        thisHead.table === nextTail.table\n      );\n    }\n    return false;\n  }\n\n  optimize(context: { [key: string]: any }) {\n    super.optimize(context);\n    this.children.forEach((child) => {\n      if (child.next == null) return;\n      const childFormats = child.formats();\n      const nextFormats = child.next.formats();\n      if (childFormats.table !== nextFormats.table) {\n        const next = this.splitAfter(child);\n        if (next) {\n          // @ts-expect-error TODO: parameters of optimize() should be a optional\n          next.optimize();\n        }\n        // We might be able to merge with prev now\n        if (this.prev) {\n          // @ts-expect-error TODO: parameters of optimize() should be a optional\n          this.prev.optimize();\n        }\n      }\n    });\n  }\n\n  rowOffset() {\n    if (this.parent) {\n      return this.parent.children.indexOf(this);\n    }\n    return -1;\n  }\n\n  table() {\n    return this.parent && this.parent.parent;\n  }\n}\n\nclass TableBody extends Container {\n  static blotName = 'table-body';\n  static tagName = 'TBODY';\n\n  children: LinkedList<TableRow>;\n}\n\nclass TableContainer extends Container {\n  static blotName = 'table-container';\n  static tagName = 'TABLE';\n\n  children: LinkedList<TableBody>;\n\n  balanceCells() {\n    const rows = this.descendants(TableRow);\n    const maxColumns = rows.reduce((max, row) => {\n      return Math.max(row.children.length, max);\n    }, 0);\n    rows.forEach((row) => {\n      new Array(maxColumns - row.children.length).fill(0).forEach(() => {\n        let value;\n        if (row.children.head != null) {\n          value = TableCell.formats(row.children.head.domNode);\n        }\n        const blot = this.scroll.create(TableCell.blotName, value);\n        row.appendChild(blot);\n        // @ts-expect-error TODO: parameters of optimize() should be a optional\n        blot.optimize(); // Add break blot\n      });\n    });\n  }\n\n  cells(column: number) {\n    return this.rows().map((row) => row.children.at(column));\n  }\n\n  deleteColumn(index: number) {\n    // @ts-expect-error\n    const [body] = this.descendant(TableBody) as TableBody[];\n    if (body == null || body.children.head == null) return;\n    body.children.forEach((row) => {\n      const cell = row.children.at(index);\n      if (cell != null) {\n        cell.remove();\n      }\n    });\n  }\n\n  insertColumn(index: number) {\n    // @ts-expect-error\n    const [body] = this.descendant(TableBody) as TableBody[];\n    if (body == null || body.children.head == null) return;\n    body.children.forEach((row) => {\n      const ref = row.children.at(index);\n      // @ts-expect-error\n      const value = TableCell.formats(row.children.head.domNode);\n      const cell = this.scroll.create(TableCell.blotName, value);\n      row.insertBefore(cell, ref);\n    });\n  }\n\n  insertRow(index: number) {\n    // @ts-expect-error\n    const [body] = this.descendant(TableBody) as TableBody[];\n    if (body == null || body.children.head == null) return;\n    const id = tableId();\n    const row = this.scroll.create(TableRow.blotName) as TableRow;\n    body.children.head.children.forEach(() => {\n      const cell = this.scroll.create(TableCell.blotName, id);\n      row.appendChild(cell);\n    });\n    const ref = body.children.at(index);\n    body.insertBefore(row, ref);\n  }\n\n  rows() {\n    const body = this.children.head;\n    if (body == null) return [];\n    return body.children.map((row) => row);\n  }\n}\n\nTableContainer.allowedChildren = [TableBody];\nTableBody.requiredContainer = TableContainer;\n\nTableBody.allowedChildren = [TableRow];\nTableRow.requiredContainer = TableBody;\n\nTableRow.allowedChildren = [TableCell];\nTableCell.requiredContainer = TableRow;\n\nfunction tableId() {\n  const id = Math.random().toString(36).slice(2, 6);\n  return `row-${id}`;\n}\n\nexport { TableCell, TableRow, TableBody, TableContainer, tableId };\n","import Delta from 'quill-delta';\nimport Quill from '../core/quill.js';\nimport Module from '../core/module.js';\nimport {\n  TableCell,\n  TableRow,\n  TableBody,\n  TableContainer,\n  tableId,\n} from '../formats/table.js';\n\nclass Table extends Module {\n  static register() {\n    Quill.register(TableCell);\n    Quill.register(TableRow);\n    Quill.register(TableBody);\n    Quill.register(TableContainer);\n  }\n\n  constructor(...args: ConstructorParameters<typeof Module>) {\n    super(...args);\n    this.listenBalanceCells();\n  }\n\n  balanceTables() {\n    this.quill.scroll.descendants(TableContainer).forEach((table) => {\n      table.balanceCells();\n    });\n  }\n\n  deleteColumn() {\n    const [table, , cell] = this.getTable();\n    if (cell == null) return;\n    // @ts-expect-error\n    table.deleteColumn(cell.cellOffset());\n    this.quill.update(Quill.sources.USER);\n  }\n\n  deleteRow() {\n    const [, row] = this.getTable();\n    if (row == null) return;\n    row.remove();\n    this.quill.update(Quill.sources.USER);\n  }\n\n  deleteTable() {\n    const [table] = this.getTable();\n    if (table == null) return;\n    // @ts-expect-error\n    const offset = table.offset();\n    // @ts-expect-error\n    table.remove();\n    this.quill.update(Quill.sources.USER);\n    this.quill.setSelection(offset, Quill.sources.SILENT);\n  }\n\n  getTable(\n    range = this.quill.getSelection(),\n  ): [null, null, null, -1] | [Table, TableRow, TableCell, number] {\n    if (range == null) return [null, null, null, -1];\n    const [cell, offset] = this.quill.getLine(range.index);\n    if (cell == null || cell.statics.blotName !== TableCell.blotName) {\n      return [null, null, null, -1];\n    }\n    const row = cell.parent;\n    const table = row.parent.parent;\n    // @ts-expect-error\n    return [table, row, cell, offset];\n  }\n\n  insertColumn(offset: number) {\n    const range = this.quill.getSelection();\n    if (!range) return;\n    const [table, row, cell] = this.getTable(range);\n    if (cell == null) return;\n    const column = cell.cellOffset();\n    table.insertColumn(column + offset);\n    this.quill.update(Quill.sources.USER);\n    let shift = row.rowOffset();\n    if (offset === 0) {\n      shift += 1;\n    }\n    this.quill.setSelection(\n      range.index + shift,\n      range.length,\n      Quill.sources.SILENT,\n    );\n  }\n\n  insertColumnLeft() {\n    this.insertColumn(0);\n  }\n\n  insertColumnRight() {\n    this.insertColumn(1);\n  }\n\n  insertRow(offset: number) {\n    const range = this.quill.getSelection();\n    if (!range) return;\n    const [table, row, cell] = this.getTable(range);\n    if (cell == null) return;\n    const index = row.rowOffset();\n    table.insertRow(index + offset);\n    this.quill.update(Quill.sources.USER);\n    if (offset > 0) {\n      this.quill.setSelection(range, Quill.sources.SILENT);\n    } else {\n      this.quill.setSelection(\n        range.index + row.children.length,\n        range.length,\n        Quill.sources.SILENT,\n      );\n    }\n  }\n\n  insertRowAbove() {\n    this.insertRow(0);\n  }\n\n  insertRowBelow() {\n    this.insertRow(1);\n  }\n\n  insertTable(rows: number, columns: number) {\n    const range = this.quill.getSelection();\n    if (range == null) return;\n    const delta = new Array(rows).fill(0).reduce((memo) => {\n      const text = new Array(columns).fill('\\n').join('');\n      return memo.insert(text, { table: tableId() });\n    }, new Delta().retain(range.index));\n    this.quill.updateContents(delta, Quill.sources.USER);\n    this.quill.setSelection(range.index, Quill.sources.SILENT);\n    this.balanceTables();\n  }\n\n  listenBalanceCells() {\n    this.quill.on(\n      Quill.events.SCROLL_OPTIMIZE,\n      (mutations: MutationRecord[]) => {\n        mutations.some((mutation) => {\n          if (\n            ['TD', 'TR', 'TBODY', 'TABLE'].includes(\n              (mutation.target as HTMLElement).tagName,\n            )\n          ) {\n            this.quill.once(Quill.events.TEXT_CHANGE, (delta, old, source) => {\n              if (source !== Quill.sources.USER) return;\n              this.balanceTables();\n            });\n            return true;\n          }\n          return false;\n        });\n      },\n    );\n  }\n}\n\nexport default Table;\n","import Delta from 'quill-delta';\nimport { EmbedBlot, Scope } from 'parchment';\nimport Quill from '../core/quill.js';\nimport logger from '../core/logger.js';\nimport Module from '../core/module.js';\nimport type { Range } from '../core/selection.js';\n\nconst debug = logger('quill:toolbar');\n\ntype Handler = (this: Toolbar, value: any) => void;\n\nexport type ToolbarConfig = Array<\n  string[] | Array<string | Record<string, unknown>>\n>;\nexport interface ToolbarProps {\n  container?: HTMLElement | ToolbarConfig | null;\n  handlers?: Record<string, Handler>;\n  option?: number;\n  module?: boolean;\n  theme?: boolean;\n}\n\nclass Toolbar extends Module<ToolbarProps> {\n  static DEFAULTS: ToolbarProps;\n\n  container?: HTMLElement | null;\n  controls: [string, HTMLElement][];\n  handlers: Record<string, Handler>;\n\n  constructor(quill: Quill, options: Partial<ToolbarProps>) {\n    super(quill, options);\n    if (Array.isArray(this.options.container)) {\n      const container = document.createElement('div');\n      container.setAttribute('role', 'toolbar');\n      addControls(container, this.options.container);\n      quill.container?.parentNode?.insertBefore(container, quill.container);\n      this.container = container;\n    } else if (typeof this.options.container === 'string') {\n      this.container = document.querySelector(this.options.container);\n    } else {\n      this.container = this.options.container;\n    }\n    if (!(this.container instanceof HTMLElement)) {\n      debug.error('Container required for toolbar', this.options);\n      return;\n    }\n    this.container.classList.add('ql-toolbar');\n    this.controls = [];\n    this.handlers = {};\n    if (this.options.handlers) {\n      Object.keys(this.options.handlers).forEach((format) => {\n        const handler = this.options.handlers?.[format];\n        if (handler) {\n          this.addHandler(format, handler);\n        }\n      });\n    }\n    Array.from(this.container.querySelectorAll('button, select')).forEach(\n      (input) => {\n        // @ts-expect-error\n        this.attach(input);\n      },\n    );\n    this.quill.on(Quill.events.EDITOR_CHANGE, () => {\n      const [range] = this.quill.selection.getRange(); // quill.getSelection triggers update\n      this.update(range);\n    });\n  }\n\n  addHandler(format: string, handler: Handler) {\n    this.handlers[format] = handler;\n  }\n\n  attach(input: HTMLElement) {\n    let format = Array.from(input.classList).find((className) => {\n      return className.indexOf('ql-') === 0;\n    });\n    if (!format) return;\n    format = format.slice('ql-'.length);\n    if (input.tagName === 'BUTTON') {\n      input.setAttribute('type', 'button');\n    }\n    if (\n      this.handlers[format] == null &&\n      this.quill.scroll.query(format) == null\n    ) {\n      debug.warn('ignoring attaching to nonexistent format', format, input);\n      return;\n    }\n    const eventName = input.tagName === 'SELECT' ? 'change' : 'click';\n    input.addEventListener(eventName, (e) => {\n      let value;\n      if (input.tagName === 'SELECT') {\n        // @ts-expect-error\n        if (input.selectedIndex < 0) return;\n        // @ts-expect-error\n        const selected = input.options[input.selectedIndex];\n        if (selected.hasAttribute('selected')) {\n          value = false;\n        } else {\n          value = selected.value || false;\n        }\n      } else {\n        if (input.classList.contains('ql-active')) {\n          value = false;\n        } else {\n          // @ts-expect-error\n          value = input.value || !input.hasAttribute('value');\n        }\n        e.preventDefault();\n      }\n      this.quill.focus();\n      const [range] = this.quill.selection.getRange();\n      if (this.handlers[format] != null) {\n        this.handlers[format].call(this, value);\n      } else if (\n        // @ts-expect-error\n        this.quill.scroll.query(format).prototype instanceof EmbedBlot\n      ) {\n        value = prompt(`Enter ${format}`); // eslint-disable-line no-alert\n        if (!value) return;\n        this.quill.updateContents(\n          new Delta()\n            // @ts-expect-error Fix me later\n            .retain(range.index)\n            // @ts-expect-error Fix me later\n            .delete(range.length)\n            .insert({ [format]: value }),\n          Quill.sources.USER,\n        );\n      } else {\n        this.quill.format(format, value, Quill.sources.USER);\n      }\n      this.update(range);\n    });\n    this.controls.push([format, input]);\n  }\n\n  update(range: Range | null) {\n    const formats = range == null ? {} : this.quill.getFormat(range);\n    this.controls.forEach((pair) => {\n      const [format, input] = pair;\n      if (input.tagName === 'SELECT') {\n        let option: HTMLOptionElement | null = null;\n        if (range == null) {\n          option = null;\n        } else if (formats[format] == null) {\n          option = input.querySelector('option[selected]');\n        } else if (!Array.isArray(formats[format])) {\n          let value = formats[format];\n          if (typeof value === 'string') {\n            value = value.replace(/\"/g, '\\\\\"');\n          }\n          option = input.querySelector(`option[value=\"${value}\"]`);\n        }\n        if (option == null) {\n          // @ts-expect-error TODO fix me later\n          input.value = ''; // TODO make configurable?\n          // @ts-expect-error TODO fix me later\n          input.selectedIndex = -1;\n        } else {\n          option.selected = true;\n        }\n      } else if (range == null) {\n        input.classList.remove('ql-active');\n        input.setAttribute('aria-pressed', 'false');\n      } else if (input.hasAttribute('value')) {\n        // both being null should match (default values)\n        // '1' should match with 1 (headers)\n        const value = formats[format] as boolean | number | string | object;\n        const isActive =\n          value === input.getAttribute('value') ||\n          (value != null && value.toString() === input.getAttribute('value')) ||\n          (value == null && !input.getAttribute('value'));\n        input.classList.toggle('ql-active', isActive);\n        input.setAttribute('aria-pressed', isActive.toString());\n      } else {\n        const isActive = formats[format] != null;\n        input.classList.toggle('ql-active', isActive);\n        input.setAttribute('aria-pressed', isActive.toString());\n      }\n    });\n  }\n}\nToolbar.DEFAULTS = {};\n\nfunction addButton(container: HTMLElement, format: string, value?: string) {\n  const input = document.createElement('button');\n  input.setAttribute('type', 'button');\n  input.classList.add(`ql-${format}`);\n  input.setAttribute('aria-pressed', 'false');\n  if (value != null) {\n    input.value = value;\n    input.setAttribute('aria-label', `${format}: ${value}`);\n  } else {\n    input.setAttribute('aria-label', format);\n  }\n  container.appendChild(input);\n}\n\nfunction addControls(\n  container: HTMLElement,\n  groups:\n    | (string | Record<string, unknown>)[][]\n    | (string | Record<string, unknown>)[],\n) {\n  if (!Array.isArray(groups[0])) {\n    // @ts-expect-error\n    groups = [groups];\n  }\n  groups.forEach((controls: any) => {\n    const group = document.createElement('span');\n    group.classList.add('ql-formats');\n    controls.forEach((control: any) => {\n      if (typeof control === 'string') {\n        addButton(group, control);\n      } else {\n        const format = Object.keys(control)[0];\n        const value = control[format];\n        if (Array.isArray(value)) {\n          addSelect(group, format, value);\n        } else {\n          addButton(group, format, value);\n        }\n      }\n    });\n    container.appendChild(group);\n  });\n}\n\nfunction addSelect(\n  container: HTMLElement,\n  format: string,\n  values: Array<string | boolean>,\n) {\n  const input = document.createElement('select');\n  input.classList.add(`ql-${format}`);\n  values.forEach((value) => {\n    const option = document.createElement('option');\n    if (value !== false) {\n      option.setAttribute('value', String(value));\n    } else {\n      option.setAttribute('selected', 'selected');\n    }\n    input.appendChild(option);\n  });\n  container.appendChild(input);\n}\n\nToolbar.DEFAULTS = {\n  container: null,\n  handlers: {\n    clean() {\n      const range = this.quill.getSelection();\n      if (range == null) return;\n      if (range.length === 0) {\n        const formats = this.quill.getFormat();\n        Object.keys(formats).forEach((name) => {\n          // Clean functionality in existing apps only clean inline formats\n          if (this.quill.scroll.query(name, Scope.INLINE) != null) {\n            this.quill.format(name, false, Quill.sources.USER);\n          }\n        });\n      } else {\n        this.quill.removeFormat(range.index, range.length, Quill.sources.USER);\n      }\n    },\n    direction(value) {\n      const { align } = this.quill.getFormat();\n      if (value === 'rtl' && align == null) {\n        this.quill.format('align', 'right', Quill.sources.USER);\n      } else if (!value && align === 'right') {\n        this.quill.format('align', false, Quill.sources.USER);\n      }\n      this.quill.format('direction', value, Quill.sources.USER);\n    },\n    indent(value) {\n      const range = this.quill.getSelection();\n      // @ts-expect-error\n      const formats = this.quill.getFormat(range);\n      // @ts-expect-error\n      const indent = parseInt(formats.indent || 0, 10);\n      if (value === '+1' || value === '-1') {\n        let modifier = value === '+1' ? 1 : -1;\n        if (formats.direction === 'rtl') modifier *= -1;\n        this.quill.format('indent', indent + modifier, Quill.sources.USER);\n      }\n    },\n    link(value) {\n      if (value === true) {\n        value = prompt('Enter link URL:'); // eslint-disable-line no-alert\n      }\n      this.quill.format('link', value, Quill.sources.USER);\n    },\n    list(value) {\n      const range = this.quill.getSelection();\n      // @ts-expect-error\n      const formats = this.quill.getFormat(range);\n      if (value === 'check') {\n        if (formats.list === 'checked' || formats.list === 'unchecked') {\n          this.quill.format('list', false, Quill.sources.USER);\n        } else {\n          this.quill.format('list', 'unchecked', Quill.sources.USER);\n        }\n      } else {\n        this.quill.format('list', value, Quill.sources.USER);\n      }\n    },\n  },\n};\n\nexport { Toolbar as default, addControls };\n","import alignLeftIcon from '../assets/icons/align-left.svg';\nimport alignCenterIcon from '../assets/icons/align-center.svg';\nimport alignRightIcon from '../assets/icons/align-right.svg';\nimport alignJustifyIcon from '../assets/icons/align-justify.svg';\nimport backgroundIcon from '../assets/icons/background.svg';\nimport blockquoteIcon from '../assets/icons/blockquote.svg';\nimport boldIcon from '../assets/icons/bold.svg';\nimport cleanIcon from '../assets/icons/clean.svg';\nimport codeIcon from '../assets/icons/code.svg';\nimport colorIcon from '../assets/icons/color.svg';\nimport directionLeftToRightIcon from '../assets/icons/direction-ltr.svg';\nimport directionRightToLeftIcon from '../assets/icons/direction-rtl.svg';\nimport formulaIcon from '../assets/icons/formula.svg';\nimport headerIcon from '../assets/icons/header.svg';\nimport header2Icon from '../assets/icons/header-2.svg';\nimport header3Icon from '../assets/icons/header-3.svg';\nimport header4Icon from '../assets/icons/header-4.svg';\nimport header5Icon from '../assets/icons/header-5.svg';\nimport header6Icon from '../assets/icons/header-6.svg';\nimport italicIcon from '../assets/icons/italic.svg';\nimport imageIcon from '../assets/icons/image.svg';\nimport indentIcon from '../assets/icons/indent.svg';\nimport outdentIcon from '../assets/icons/outdent.svg';\nimport linkIcon from '../assets/icons/link.svg';\nimport listBulletIcon from '../assets/icons/list-bullet.svg';\nimport listCheckIcon from '../assets/icons/list-check.svg';\nimport listOrderedIcon from '../assets/icons/list-ordered.svg';\nimport subscriptIcon from '../assets/icons/subscript.svg';\nimport superscriptIcon from '../assets/icons/superscript.svg';\nimport strikeIcon from '../assets/icons/strike.svg';\nimport tableIcon from '../assets/icons/table.svg';\nimport underlineIcon from '../assets/icons/underline.svg';\nimport videoIcon from '../assets/icons/video.svg';\n\nexport default {\n  align: {\n    '': alignLeftIcon,\n    center: alignCenterIcon,\n    right: alignRightIcon,\n    justify: alignJustifyIcon,\n  },\n  background: backgroundIcon,\n  blockquote: blockquoteIcon,\n  bold: boldIcon,\n  clean: cleanIcon,\n  code: codeIcon,\n  'code-block': codeIcon,\n  color: colorIcon,\n  direction: {\n    '': directionLeftToRightIcon,\n    rtl: directionRightToLeftIcon,\n  },\n  formula: formulaIcon,\n  header: {\n    '1': headerIcon,\n    '2': header2Icon,\n    '3': header3Icon,\n    '4': header4Icon,\n    '5': header5Icon,\n    '6': header6Icon,\n  },\n  italic: italicIcon,\n  image: imageIcon,\n  indent: {\n    '+1': indentIcon,\n    '-1': outdentIcon,\n  },\n  link: linkIcon,\n  list: {\n    bullet: listBulletIcon,\n    check: listCheckIcon,\n    ordered: listOrderedIcon,\n  },\n  script: {\n    sub: subscriptIcon,\n    super: superscriptIcon,\n  },\n  strike: strikeIcon,\n  table: tableIcon,\n  underline: underlineIcon,\n  video: videoIcon,\n};\n","import DropdownIcon from '../assets/icons/dropdown.svg';\n\nlet optionsCounter = 0;\n\nfunction toggleAriaAttribute(element: HTMLElement, attribute: string) {\n  element.setAttribute(\n    attribute,\n    `${!(element.getAttribute(attribute) === 'true')}`,\n  );\n}\n\nclass Picker {\n  select: HTMLSelectElement;\n  container: HTMLElement;\n  label: HTMLElement;\n\n  constructor(select: HTMLSelectElement) {\n    this.select = select;\n    this.container = document.createElement('span');\n    this.buildPicker();\n    this.select.style.display = 'none';\n    // @ts-expect-error Fix me later\n    this.select.parentNode.insertBefore(this.container, this.select);\n\n    this.label.addEventListener('mousedown', () => {\n      this.togglePicker();\n    });\n    this.label.addEventListener('keydown', (event) => {\n      switch (event.key) {\n        case 'Enter':\n          this.togglePicker();\n          break;\n        case 'Escape':\n          this.escape();\n          event.preventDefault();\n          break;\n        default:\n      }\n    });\n    this.select.addEventListener('change', this.update.bind(this));\n  }\n\n  togglePicker() {\n    this.container.classList.toggle('ql-expanded');\n    // Toggle aria-expanded and aria-hidden to make the picker accessible\n    toggleAriaAttribute(this.label, 'aria-expanded');\n    // @ts-expect-error\n    toggleAriaAttribute(this.options, 'aria-hidden');\n  }\n\n  buildItem(option: HTMLOptionElement) {\n    const item = document.createElement('span');\n    // @ts-expect-error\n    item.tabIndex = '0';\n    item.setAttribute('role', 'button');\n    item.classList.add('ql-picker-item');\n    const value = option.getAttribute('value');\n    if (value) {\n      item.setAttribute('data-value', value);\n    }\n    if (option.textContent) {\n      item.setAttribute('data-label', option.textContent);\n    }\n    item.addEventListener('click', () => {\n      this.selectItem(item, true);\n    });\n    item.addEventListener('keydown', (event) => {\n      switch (event.key) {\n        case 'Enter':\n          this.selectItem(item, true);\n          event.preventDefault();\n          break;\n        case 'Escape':\n          this.escape();\n          event.preventDefault();\n          break;\n        default:\n      }\n    });\n\n    return item;\n  }\n\n  buildLabel() {\n    const label = document.createElement('span');\n    label.classList.add('ql-picker-label');\n    label.innerHTML = DropdownIcon;\n    // @ts-expect-error\n    label.tabIndex = '0';\n    label.setAttribute('role', 'button');\n    label.setAttribute('aria-expanded', 'false');\n    this.container.appendChild(label);\n    return label;\n  }\n\n  buildOptions() {\n    const options = document.createElement('span');\n    options.classList.add('ql-picker-options');\n\n    // Don't want screen readers to read this until options are visible\n    options.setAttribute('aria-hidden', 'true');\n    // @ts-expect-error\n    options.tabIndex = '-1';\n\n    // Need a unique id for aria-controls\n    options.id = `ql-picker-options-${optionsCounter}`;\n    optionsCounter += 1;\n    this.label.setAttribute('aria-controls', options.id);\n\n    // @ts-expect-error\n    this.options = options;\n\n    Array.from(this.select.options).forEach((option) => {\n      const item = this.buildItem(option);\n      options.appendChild(item);\n      if (option.selected === true) {\n        this.selectItem(item);\n      }\n    });\n    this.container.appendChild(options);\n  }\n\n  buildPicker() {\n    Array.from(this.select.attributes).forEach((item) => {\n      this.container.setAttribute(item.name, item.value);\n    });\n    this.container.classList.add('ql-picker');\n    this.label = this.buildLabel();\n    this.buildOptions();\n  }\n\n  escape() {\n    // Close menu and return focus to trigger label\n    this.close();\n    // Need setTimeout for accessibility to ensure that the browser executes\n    // focus on the next process thread and after any DOM content changes\n    setTimeout(() => this.label.focus(), 1);\n  }\n\n  close() {\n    this.container.classList.remove('ql-expanded');\n    this.label.setAttribute('aria-expanded', 'false');\n    // @ts-expect-error\n    this.options.setAttribute('aria-hidden', 'true');\n  }\n\n  selectItem(item: HTMLElement | null, trigger = false) {\n    const selected = this.container.querySelector('.ql-selected');\n    if (item === selected) return;\n    if (selected != null) {\n      selected.classList.remove('ql-selected');\n    }\n    if (item == null) return;\n    item.classList.add('ql-selected');\n    // @ts-expect-error Fix me later\n    this.select.selectedIndex = Array.from(item.parentNode.children).indexOf(\n      item,\n    );\n    if (item.hasAttribute('data-value')) {\n      // @ts-expect-error Fix me later\n      this.label.setAttribute('data-value', item.getAttribute('data-value'));\n    } else {\n      this.label.removeAttribute('data-value');\n    }\n    if (item.hasAttribute('data-label')) {\n      // @ts-expect-error Fix me later\n      this.label.setAttribute('data-label', item.getAttribute('data-label'));\n    } else {\n      this.label.removeAttribute('data-label');\n    }\n    if (trigger) {\n      this.select.dispatchEvent(new Event('change'));\n      this.close();\n    }\n  }\n\n  update() {\n    let option;\n    if (this.select.selectedIndex > -1) {\n      const item =\n        // @ts-expect-error Fix me later\n        this.container.querySelector('.ql-picker-options').children[\n          this.select.selectedIndex\n        ];\n      option = this.select.options[this.select.selectedIndex];\n      // @ts-expect-error\n      this.selectItem(item);\n    } else {\n      this.selectItem(null);\n    }\n    const isActive =\n      option != null &&\n      option !== this.select.querySelector('option[selected]');\n    this.label.classList.toggle('ql-active', isActive);\n  }\n}\n\nexport default Picker;\n","import Picker from './picker.js';\n\nclass ColorPicker extends Picker {\n  constructor(select: HTMLSelectElement, label: string) {\n    super(select);\n    this.label.innerHTML = label;\n    this.container.classList.add('ql-color-picker');\n    Array.from(this.container.querySelectorAll('.ql-picker-item'))\n      .slice(0, 7)\n      .forEach((item) => {\n        item.classList.add('ql-primary');\n      });\n  }\n\n  buildItem(option: HTMLOptionElement) {\n    const item = super.buildItem(option);\n    item.style.backgroundColor = option.getAttribute('value') || '';\n    return item;\n  }\n\n  selectItem(item: HTMLElement | null, trigger?: boolean) {\n    super.selectItem(item, trigger);\n    const colorLabel = this.label.querySelector<HTMLElement>('.ql-color-label');\n    const value = item ? item.getAttribute('data-value') || '' : '';\n    if (colorLabel) {\n      if (colorLabel.tagName === 'line') {\n        colorLabel.style.stroke = value;\n      } else {\n        colorLabel.style.fill = value;\n      }\n    }\n  }\n}\n\nexport default ColorPicker;\n","import Picker from './picker.js';\n\nclass IconPicker extends Picker {\n  defaultItem: HTMLElement | null;\n\n  constructor(select: HTMLSelectElement, icons: Record<string, string>) {\n    super(select);\n    this.container.classList.add('ql-icon-picker');\n    Array.from(this.container.querySelectorAll('.ql-picker-item')).forEach(\n      (item) => {\n        item.innerHTML = icons[item.getAttribute('data-value') || ''];\n      },\n    );\n    this.defaultItem = this.container.querySelector('.ql-selected');\n    this.selectItem(this.defaultItem);\n  }\n\n  selectItem(target: HTMLElement | null, trigger?: boolean) {\n    super.selectItem(target, trigger);\n    const item = target || this.defaultItem;\n    if (item != null) {\n      if (this.label.innerHTML === item.innerHTML) return;\n      this.label.innerHTML = item.innerHTML;\n    }\n  }\n}\n\nexport default IconPicker;\n","import type Quill from '../core.js';\nimport type { Bounds } from '../core/selection.js';\n\nconst isScrollable = (el: Element) => {\n  const { overflowY } = getComputedStyle(el, null);\n  return overflowY !== 'visible' && overflowY !== 'clip';\n};\n\nclass Tooltip {\n  quill: Quill;\n  boundsContainer: HTMLElement;\n  root: HTMLDivElement;\n\n  constructor(quill: Quill, boundsContainer?: HTMLElement) {\n    this.quill = quill;\n    this.boundsContainer = boundsContainer || document.body;\n    this.root = quill.addContainer('ql-tooltip');\n    // @ts-expect-error\n    this.root.innerHTML = this.constructor.TEMPLATE;\n    if (isScrollable(this.quill.root)) {\n      this.quill.root.addEventListener('scroll', () => {\n        this.root.style.marginTop = `${-1 * this.quill.root.scrollTop}px`;\n      });\n    }\n    this.hide();\n  }\n\n  hide() {\n    this.root.classList.add('ql-hidden');\n  }\n\n  position(reference: Bounds) {\n    const left =\n      reference.left + reference.width / 2 - this.root.offsetWidth / 2;\n    // root.scrollTop should be 0 if scrollContainer !== root\n    const top = reference.bottom + this.quill.root.scrollTop;\n    this.root.style.left = `${left}px`;\n    this.root.style.top = `${top}px`;\n    this.root.classList.remove('ql-flip');\n    const containerBounds = this.boundsContainer.getBoundingClientRect();\n    const rootBounds = this.root.getBoundingClientRect();\n    let shift = 0;\n    if (rootBounds.right > containerBounds.right) {\n      shift = containerBounds.right - rootBounds.right;\n      this.root.style.left = `${left + shift}px`;\n    }\n    if (rootBounds.left < containerBounds.left) {\n      shift = containerBounds.left - rootBounds.left;\n      this.root.style.left = `${left + shift}px`;\n    }\n    if (rootBounds.bottom > containerBounds.bottom) {\n      const height = rootBounds.bottom - rootBounds.top;\n      const verticalShift = reference.bottom - reference.top + height;\n      this.root.style.top = `${top - verticalShift}px`;\n      this.root.classList.add('ql-flip');\n    }\n    return shift;\n  }\n\n  show() {\n    this.root.classList.remove('ql-editing');\n    this.root.classList.remove('ql-hidden');\n  }\n}\n\nexport default Tooltip;\n","import { merge } from 'lodash-es';\nimport type Quill from '../core/quill.js';\nimport Emitter from '../core/emitter.js';\nimport Theme from '../core/theme.js';\nimport type { ThemeOptions } from '../core/theme.js';\nimport ColorPicker from '../ui/color-picker.js';\nimport IconPicker from '../ui/icon-picker.js';\nimport Picker from '../ui/picker.js';\nimport Tooltip from '../ui/tooltip.js';\nimport type { Range } from '../core/selection.js';\nimport type Clipboard from '../modules/clipboard.js';\nimport type History from '../modules/history.js';\nimport type Keyboard from '../modules/keyboard.js';\nimport type Uploader from '../modules/uploader.js';\nimport type Selection from '../core/selection.js';\n\nconst ALIGNS = [false, 'center', 'right', 'justify'];\n\nconst COLORS = [\n  '#000000',\n  '#e60000',\n  '#ff9900',\n  '#ffff00',\n  '#008a00',\n  '#0066cc',\n  '#9933ff',\n  '#ffffff',\n  '#facccc',\n  '#ffebcc',\n  '#ffffcc',\n  '#cce8cc',\n  '#cce0f5',\n  '#ebd6ff',\n  '#bbbbbb',\n  '#f06666',\n  '#ffc266',\n  '#ffff66',\n  '#66b966',\n  '#66a3e0',\n  '#c285ff',\n  '#888888',\n  '#a10000',\n  '#b26b00',\n  '#b2b200',\n  '#006100',\n  '#0047b2',\n  '#6b24b2',\n  '#444444',\n  '#5c0000',\n  '#663d00',\n  '#666600',\n  '#003700',\n  '#002966',\n  '#3d1466',\n];\n\nconst FONTS = [false, 'serif', 'monospace'];\n\nconst HEADERS = ['1', '2', '3', false];\n\nconst SIZES = ['small', false, 'large', 'huge'];\n\nclass BaseTheme extends Theme {\n  pickers: Picker[];\n  tooltip?: Tooltip;\n\n  constructor(quill: Quill, options: ThemeOptions) {\n    super(quill, options);\n    const listener = (e: MouseEvent) => {\n      if (!document.body.contains(quill.root)) {\n        document.body.removeEventListener('click', listener);\n        return;\n      }\n      if (\n        this.tooltip != null &&\n        // @ts-expect-error\n        !this.tooltip.root.contains(e.target) &&\n        // @ts-expect-error\n        document.activeElement !== this.tooltip.textbox &&\n        !this.quill.hasFocus()\n      ) {\n        this.tooltip.hide();\n      }\n      if (this.pickers != null) {\n        this.pickers.forEach((picker) => {\n          // @ts-expect-error\n          if (!picker.container.contains(e.target)) {\n            picker.close();\n          }\n        });\n      }\n    };\n    quill.emitter.listenDOM('click', document.body, listener);\n  }\n\n  addModule(name: 'clipboard'): Clipboard;\n  addModule(name: 'keyboard'): Keyboard;\n  addModule(name: 'uploader'): Uploader;\n  addModule(name: 'history'): History;\n  addModule(name: 'selection'): Selection;\n  addModule(name: string): unknown;\n  addModule(name: string) {\n    const module = super.addModule(name);\n    if (name === 'toolbar') {\n      // @ts-expect-error\n      this.extendToolbar(module);\n    }\n    return module;\n  }\n\n  buildButtons(\n    buttons: NodeListOf<HTMLElement>,\n    icons: Record<string, Record<string, string> | string>,\n  ) {\n    Array.from(buttons).forEach((button) => {\n      const className = button.getAttribute('class') || '';\n      className.split(/\\s+/).forEach((name) => {\n        if (!name.startsWith('ql-')) return;\n        name = name.slice('ql-'.length);\n        if (icons[name] == null) return;\n        if (name === 'direction') {\n          // @ts-expect-error\n          button.innerHTML = icons[name][''] + icons[name].rtl;\n        } else if (typeof icons[name] === 'string') {\n          // @ts-expect-error\n          button.innerHTML = icons[name];\n        } else {\n          // @ts-expect-error\n          const value = button.value || '';\n          // @ts-expect-error\n          if (value != null && icons[name][value]) {\n            // @ts-expect-error\n            button.innerHTML = icons[name][value];\n          }\n        }\n      });\n    });\n  }\n\n  buildPickers(\n    selects: NodeListOf<HTMLSelectElement>,\n    icons: Record<string, string | Record<string, string>>,\n  ) {\n    this.pickers = Array.from(selects).map((select) => {\n      if (select.classList.contains('ql-align')) {\n        if (select.querySelector('option') == null) {\n          fillSelect(select, ALIGNS);\n        }\n        if (typeof icons.align === 'object') {\n          return new IconPicker(select, icons.align);\n        }\n      }\n      if (\n        select.classList.contains('ql-background') ||\n        select.classList.contains('ql-color')\n      ) {\n        const format = select.classList.contains('ql-background')\n          ? 'background'\n          : 'color';\n        if (select.querySelector('option') == null) {\n          fillSelect(\n            select,\n            COLORS,\n            format === 'background' ? '#ffffff' : '#000000',\n          );\n        }\n        return new ColorPicker(select, icons[format] as string);\n      }\n      if (select.querySelector('option') == null) {\n        if (select.classList.contains('ql-font')) {\n          fillSelect(select, FONTS);\n        } else if (select.classList.contains('ql-header')) {\n          fillSelect(select, HEADERS);\n        } else if (select.classList.contains('ql-size')) {\n          fillSelect(select, SIZES);\n        }\n      }\n      return new Picker(select);\n    });\n    const update = () => {\n      this.pickers.forEach((picker) => {\n        picker.update();\n      });\n    };\n    this.quill.on(Emitter.events.EDITOR_CHANGE, update);\n  }\n}\nBaseTheme.DEFAULTS = merge({}, Theme.DEFAULTS, {\n  modules: {\n    toolbar: {\n      handlers: {\n        formula() {\n          this.quill.theme.tooltip.edit('formula');\n        },\n        image() {\n          let fileInput = this.container.querySelector(\n            'input.ql-image[type=file]',\n          );\n          if (fileInput == null) {\n            fileInput = document.createElement('input');\n            fileInput.setAttribute('type', 'file');\n            fileInput.setAttribute(\n              'accept',\n              this.quill.uploader.options.mimetypes.join(', '),\n            );\n            fileInput.classList.add('ql-image');\n            fileInput.addEventListener('change', () => {\n              const range = this.quill.getSelection(true);\n              this.quill.uploader.upload(range, fileInput.files);\n              fileInput.value = '';\n            });\n            this.container.appendChild(fileInput);\n          }\n          fileInput.click();\n        },\n        video() {\n          this.quill.theme.tooltip.edit('video');\n        },\n      },\n    },\n  },\n});\n\nclass BaseTooltip extends Tooltip {\n  textbox: HTMLInputElement | null;\n  linkRange?: Range;\n\n  constructor(quill: Quill, boundsContainer?: HTMLElement) {\n    super(quill, boundsContainer);\n    this.textbox = this.root.querySelector('input[type=\"text\"]');\n    this.listen();\n  }\n\n  listen() {\n    // @ts-expect-error Fix me later\n    this.textbox.addEventListener('keydown', (event) => {\n      if (event.key === 'Enter') {\n        this.save();\n        event.preventDefault();\n      } else if (event.key === 'Escape') {\n        this.cancel();\n        event.preventDefault();\n      }\n    });\n  }\n\n  cancel() {\n    this.hide();\n    this.restoreFocus();\n  }\n\n  edit(mode = 'link', preview: string | null = null) {\n    this.root.classList.remove('ql-hidden');\n    this.root.classList.add('ql-editing');\n    if (this.textbox == null) return;\n\n    if (preview != null) {\n      this.textbox.value = preview;\n    } else if (mode !== this.root.getAttribute('data-mode')) {\n      this.textbox.value = '';\n    }\n    const bounds = this.quill.getBounds(this.quill.selection.savedRange);\n    if (bounds != null) {\n      this.position(bounds);\n    }\n    this.textbox.select();\n    this.textbox.setAttribute(\n      'placeholder',\n      this.textbox.getAttribute(`data-${mode}`) || '',\n    );\n    this.root.setAttribute('data-mode', mode);\n  }\n\n  restoreFocus() {\n    this.quill.focus({ preventScroll: true });\n  }\n\n  save() {\n    // @ts-expect-error Fix me later\n    let { value } = this.textbox;\n    switch (this.root.getAttribute('data-mode')) {\n      case 'link': {\n        const { scrollTop } = this.quill.root;\n        if (this.linkRange) {\n          this.quill.formatText(\n            this.linkRange,\n            'link',\n            value,\n            Emitter.sources.USER,\n          );\n          delete this.linkRange;\n        } else {\n          this.restoreFocus();\n          this.quill.format('link', value, Emitter.sources.USER);\n        }\n        this.quill.root.scrollTop = scrollTop;\n        break;\n      }\n      case 'video': {\n        value = extractVideoUrl(value);\n      } // eslint-disable-next-line no-fallthrough\n      case 'formula': {\n        if (!value) break;\n        const range = this.quill.getSelection(true);\n        if (range != null) {\n          const index = range.index + range.length;\n          this.quill.insertEmbed(\n            index,\n            // @ts-expect-error Fix me later\n            this.root.getAttribute('data-mode'),\n            value,\n            Emitter.sources.USER,\n          );\n          if (this.root.getAttribute('data-mode') === 'formula') {\n            this.quill.insertText(index + 1, ' ', Emitter.sources.USER);\n          }\n          this.quill.setSelection(index + 2, Emitter.sources.USER);\n        }\n        break;\n      }\n      default:\n    }\n    // @ts-expect-error Fix me later\n    this.textbox.value = '';\n    this.hide();\n  }\n}\n\nfunction extractVideoUrl(url: string) {\n  let match =\n    url.match(\n      /^(?:(https?):\\/\\/)?(?:(?:www|m)\\.)?youtube\\.com\\/watch.*v=([a-zA-Z0-9_-]+)/,\n    ) ||\n    url.match(/^(?:(https?):\\/\\/)?(?:(?:www|m)\\.)?youtu\\.be\\/([a-zA-Z0-9_-]+)/);\n  if (match) {\n    return `${match[1] || 'https'}://www.youtube.com/embed/${\n      match[2]\n    }?showinfo=0`;\n  }\n  // eslint-disable-next-line no-cond-assign\n  if ((match = url.match(/^(?:(https?):\\/\\/)?(?:www\\.)?vimeo\\.com\\/(\\d+)/))) {\n    return `${match[1] || 'https'}://player.vimeo.com/video/${match[2]}/`;\n  }\n  return url;\n}\n\nfunction fillSelect(\n  select: HTMLSelectElement,\n  values: Array<string | boolean>,\n  defaultValue: unknown = false,\n) {\n  values.forEach((value) => {\n    const option = document.createElement('option');\n    if (value === defaultValue) {\n      option.setAttribute('selected', 'selected');\n    } else {\n      option.setAttribute('value', String(value));\n    }\n    select.appendChild(option);\n  });\n}\n\nexport { BaseTooltip, BaseTheme as default };\n","import { merge } from 'lodash-es';\nimport Emitter from '../core/emitter.js';\nimport BaseTheme, { BaseTooltip } from './base.js';\nimport { Range } from '../core/selection.js';\nimport type { Bounds } from '../core/selection.js';\nimport icons from '../ui/icons.js';\nimport Quill from '../core/quill.js';\nimport type { ThemeOptions } from '../core/theme.js';\nimport type Toolbar from '../modules/toolbar.js';\nimport type { ToolbarConfig } from '../modules/toolbar.js';\n\nconst TOOLBAR_CONFIG: ToolbarConfig = [\n  ['bold', 'italic', 'link'],\n  [{ header: 1 }, { header: 2 }, 'blockquote'],\n];\n\nclass BubbleTooltip extends BaseTooltip {\n  static TEMPLATE = [\n    '<span class=\"ql-tooltip-arrow\"></span>',\n    '<div class=\"ql-tooltip-editor\">',\n    '<input type=\"text\" data-formula=\"e=mc^2\" data-link=\"https://quilljs.com\" data-video=\"Embed URL\">',\n    '<a class=\"ql-close\"></a>',\n    '</div>',\n  ].join('');\n\n  constructor(quill: Quill, bounds?: HTMLElement) {\n    super(quill, bounds);\n    this.quill.on(\n      Emitter.events.EDITOR_CHANGE,\n      (type, range, oldRange, source) => {\n        if (type !== Emitter.events.SELECTION_CHANGE) return;\n        if (\n          range != null &&\n          range.length > 0 &&\n          source === Emitter.sources.USER\n        ) {\n          this.show();\n          // Lock our width so we will expand beyond our offsetParent boundaries\n          this.root.style.left = '0px';\n          this.root.style.width = '';\n          this.root.style.width = `${this.root.offsetWidth}px`;\n          const lines = this.quill.getLines(range.index, range.length);\n          if (lines.length === 1) {\n            const bounds = this.quill.getBounds(range);\n            if (bounds != null) {\n              this.position(bounds);\n            }\n          } else {\n            const lastLine = lines[lines.length - 1];\n            const index = this.quill.getIndex(lastLine);\n            const length = Math.min(\n              lastLine.length() - 1,\n              range.index + range.length - index,\n            );\n            const indexBounds = this.quill.getBounds(new Range(index, length));\n            if (indexBounds != null) {\n              this.position(indexBounds);\n            }\n          }\n        } else if (\n          document.activeElement !== this.textbox &&\n          this.quill.hasFocus()\n        ) {\n          this.hide();\n        }\n      },\n    );\n  }\n\n  listen() {\n    super.listen();\n    // @ts-expect-error Fix me later\n    this.root.querySelector('.ql-close').addEventListener('click', () => {\n      this.root.classList.remove('ql-editing');\n    });\n    this.quill.on(Emitter.events.SCROLL_OPTIMIZE, () => {\n      // Let selection be restored by toolbar handlers before repositioning\n      setTimeout(() => {\n        if (this.root.classList.contains('ql-hidden')) return;\n        const range = this.quill.getSelection();\n        if (range != null) {\n          const bounds = this.quill.getBounds(range);\n          if (bounds != null) {\n            this.position(bounds);\n          }\n        }\n      }, 1);\n    });\n  }\n\n  cancel() {\n    this.show();\n  }\n\n  position(reference: Bounds) {\n    const shift = super.position(reference);\n    const arrow = this.root.querySelector('.ql-tooltip-arrow');\n    // @ts-expect-error\n    arrow.style.marginLeft = '';\n    if (shift !== 0) {\n      // @ts-expect-error\n      arrow.style.marginLeft = `${-1 * shift - arrow.offsetWidth / 2}px`;\n    }\n    return shift;\n  }\n}\n\nclass BubbleTheme extends BaseTheme {\n  tooltip: BubbleTooltip;\n\n  constructor(quill: Quill, options: ThemeOptions) {\n    if (\n      options.modules.toolbar != null &&\n      options.modules.toolbar.container == null\n    ) {\n      options.modules.toolbar.container = TOOLBAR_CONFIG;\n    }\n    super(quill, options);\n    this.quill.container.classList.add('ql-bubble');\n  }\n\n  extendToolbar(toolbar: Toolbar) {\n    // @ts-expect-error\n    this.tooltip = new BubbleTooltip(this.quill, this.options.bounds);\n    if (toolbar.container != null) {\n      this.tooltip.root.appendChild<HTMLElement>(toolbar.container);\n      this.buildButtons(toolbar.container.querySelectorAll('button'), icons);\n      this.buildPickers(toolbar.container.querySelectorAll('select'), icons);\n    }\n  }\n}\nBubbleTheme.DEFAULTS = merge({}, BaseTheme.DEFAULTS, {\n  modules: {\n    toolbar: {\n      handlers: {\n        link(value: string) {\n          if (!value) {\n            this.quill.format('link', false, Quill.sources.USER);\n          } else {\n            // @ts-expect-error\n            this.quill.theme.tooltip.edit();\n          }\n        },\n      },\n    },\n  },\n} satisfies ThemeOptions);\n\nexport { BubbleTooltip, BubbleTheme as default };\n","import { merge } from 'lodash-es';\nimport Emitter from '../core/emitter.js';\nimport BaseTheme, { BaseTooltip } from './base.js';\nimport LinkBlot from '../formats/link.js';\nimport { Range } from '../core/selection.js';\nimport icons from '../ui/icons.js';\nimport Quill from '../core/quill.js';\nimport type { Context } from '../modules/keyboard.js';\nimport type Toolbar from '../modules/toolbar.js';\nimport type { ToolbarConfig } from '../modules/toolbar.js';\nimport type { ThemeOptions } from '../core/theme.js';\n\nconst TOOLBAR_CONFIG: ToolbarConfig = [\n  [{ header: ['1', '2', '3', false] }],\n  ['bold', 'italic', 'underline', 'link'],\n  [{ list: 'ordered' }, { list: 'bullet' }],\n  ['clean'],\n];\n\nclass SnowTooltip extends BaseTooltip {\n  static TEMPLATE = [\n    '<a class=\"ql-preview\" rel=\"noopener noreferrer\" target=\"_blank\" href=\"about:blank\"></a>',\n    '<input type=\"text\" data-formula=\"e=mc^2\" data-link=\"https://quilljs.com\" data-video=\"Embed URL\">',\n    '<a class=\"ql-action\"></a>',\n    '<a class=\"ql-remove\"></a>',\n  ].join('');\n\n  preview = this.root.querySelector('a.ql-preview');\n\n  listen() {\n    super.listen();\n    // @ts-expect-error Fix me later\n    this.root\n      .querySelector('a.ql-action')\n      .addEventListener('click', (event) => {\n        if (this.root.classList.contains('ql-editing')) {\n          this.save();\n        } else {\n          // @ts-expect-error Fix me later\n          this.edit('link', this.preview.textContent);\n        }\n        event.preventDefault();\n      });\n    // @ts-expect-error Fix me later\n    this.root\n      .querySelector('a.ql-remove')\n      .addEventListener('click', (event) => {\n        if (this.linkRange != null) {\n          const range = this.linkRange;\n          this.restoreFocus();\n          this.quill.formatText(range, 'link', false, Emitter.sources.USER);\n          delete this.linkRange;\n        }\n        event.preventDefault();\n        this.hide();\n      });\n    this.quill.on(\n      Emitter.events.SELECTION_CHANGE,\n      (range, oldRange, source) => {\n        if (range == null) return;\n        if (range.length === 0 && source === Emitter.sources.USER) {\n          const [link, offset] = this.quill.scroll.descendant(\n            LinkBlot,\n            range.index,\n          );\n          if (link != null) {\n            this.linkRange = new Range(range.index - offset, link.length());\n            const preview = LinkBlot.formats(link.domNode);\n            // @ts-expect-error Fix me later\n            this.preview.textContent = preview;\n            // @ts-expect-error Fix me later\n            this.preview.setAttribute('href', preview);\n            this.show();\n            const bounds = this.quill.getBounds(this.linkRange);\n            if (bounds != null) {\n              this.position(bounds);\n            }\n            return;\n          }\n        } else {\n          delete this.linkRange;\n        }\n        this.hide();\n      },\n    );\n  }\n\n  show() {\n    super.show();\n    this.root.removeAttribute('data-mode');\n  }\n}\n\nclass SnowTheme extends BaseTheme {\n  constructor(quill: Quill, options: ThemeOptions) {\n    if (\n      options.modules.toolbar != null &&\n      options.modules.toolbar.container == null\n    ) {\n      options.modules.toolbar.container = TOOLBAR_CONFIG;\n    }\n    super(quill, options);\n    this.quill.container.classList.add('ql-snow');\n  }\n\n  extendToolbar(toolbar: Toolbar) {\n    if (toolbar.container != null) {\n      toolbar.container.classList.add('ql-snow');\n      this.buildButtons(toolbar.container.querySelectorAll('button'), icons);\n      this.buildPickers(toolbar.container.querySelectorAll('select'), icons);\n      // @ts-expect-error\n      this.tooltip = new SnowTooltip(this.quill, this.options.bounds);\n      if (toolbar.container.querySelector('.ql-link')) {\n        this.quill.keyboard.addBinding(\n          { key: 'k', shortKey: true },\n          (_range: Range, context: Context) => {\n            toolbar.handlers.link.call(toolbar, !context.format.link);\n          },\n        );\n      }\n    }\n  }\n}\nSnowTheme.DEFAULTS = merge({}, BaseTheme.DEFAULTS, {\n  modules: {\n    toolbar: {\n      handlers: {\n        link(value: string) {\n          if (value) {\n            const range = this.quill.getSelection();\n            if (range == null || range.length === 0) return;\n            let preview = this.quill.getText(range);\n            if (\n              /^\\S+@\\S+\\.\\S+$/.test(preview) &&\n              preview.indexOf('mailto:') !== 0\n            ) {\n              preview = `mailto:${preview}`;\n            }\n            // @ts-expect-error\n            const { tooltip } = this.quill.theme;\n            tooltip.edit('link', preview);\n          } else {\n            this.quill.format('link', false, Quill.sources.USER);\n          }\n        },\n      },\n    },\n  },\n} satisfies ThemeOptions);\n\nexport default SnowTheme;\n","import Quill, { Parchment, Range } from './core.js';\nimport type {\n  Bounds,\n  DebugLevel,\n  EmitterSource,\n  ExpandedQuillOptions,\n  QuillOptions,\n} from './core.js';\n\nimport { AlignClass, AlignStyle } from './formats/align.js';\nimport {\n  DirectionAttribute,\n  DirectionClass,\n  DirectionStyle,\n} from './formats/direction.js';\nimport Indent from './formats/indent.js';\n\nimport Blockquote from './formats/blockquote.js';\nimport Header from './formats/header.js';\nimport List from './formats/list.js';\n\nimport { BackgroundClass, BackgroundStyle } from './formats/background.js';\nimport { ColorClass, ColorStyle } from './formats/color.js';\nimport { FontClass, FontStyle } from './formats/font.js';\nimport { SizeClass, SizeStyle } from './formats/size.js';\n\nimport Bold from './formats/bold.js';\nimport Italic from './formats/italic.js';\nimport Link from './formats/link.js';\nimport Script from './formats/script.js';\nimport Strike from './formats/strike.js';\nimport Underline from './formats/underline.js';\n\nimport Formula from './formats/formula.js';\nimport Image from './formats/image.js';\nimport Video from './formats/video.js';\n\nimport CodeBlock, { Code as InlineCode } from './formats/code.js';\n\nimport Syntax from './modules/syntax.js';\nimport Table from './modules/table.js';\nimport Toolbar from './modules/toolbar.js';\n\nimport Icons from './ui/icons.js';\nimport Picker from './ui/picker.js';\nimport ColorPicker from './ui/color-picker.js';\nimport IconPicker from './ui/icon-picker.js';\nimport Tooltip from './ui/tooltip.js';\n\nimport BubbleTheme from './themes/bubble.js';\nimport SnowTheme from './themes/snow.js';\n\nQuill.register(\n  {\n    'attributors/attribute/direction': DirectionAttribute,\n\n    'attributors/class/align': AlignClass,\n    'attributors/class/background': BackgroundClass,\n    'attributors/class/color': ColorClass,\n    'attributors/class/direction': DirectionClass,\n    'attributors/class/font': FontClass,\n    'attributors/class/size': SizeClass,\n\n    'attributors/style/align': AlignStyle,\n    'attributors/style/background': BackgroundStyle,\n    'attributors/style/color': ColorStyle,\n    'attributors/style/direction': DirectionStyle,\n    'attributors/style/font': FontStyle,\n    'attributors/style/size': SizeStyle,\n  },\n  true,\n);\n\nQuill.register(\n  {\n    'formats/align': AlignClass,\n    'formats/direction': DirectionClass,\n    'formats/indent': Indent,\n\n    'formats/background': BackgroundStyle,\n    'formats/color': ColorStyle,\n    'formats/font': FontClass,\n    'formats/size': SizeClass,\n\n    'formats/blockquote': Blockquote,\n    'formats/code-block': CodeBlock,\n    'formats/header': Header,\n    'formats/list': List,\n\n    'formats/bold': Bold,\n    'formats/code': InlineCode,\n    'formats/italic': Italic,\n    'formats/link': Link,\n    'formats/script': Script,\n    'formats/strike': Strike,\n    'formats/underline': Underline,\n\n    'formats/formula': Formula,\n    'formats/image': Image,\n    'formats/video': Video,\n\n    'modules/syntax': Syntax,\n    'modules/table': Table,\n    'modules/toolbar': Toolbar,\n\n    'themes/bubble': BubbleTheme,\n    'themes/snow': SnowTheme,\n\n    'ui/icons': Icons,\n    'ui/picker': Picker,\n    'ui/icon-picker': IconPicker,\n    'ui/color-picker': ColorPicker,\n    'ui/tooltip': Tooltip,\n  },\n  true,\n);\n\nexport { Module } from './core.js';\nexport type {\n  Bounds,\n  DebugLevel,\n  EmitterSource,\n  ExpandedQuillOptions,\n  QuillOptions,\n};\nexport { Parchment, Range };\n\nexport default Quill;\n"],"names":["DIFF_DELETE","DIFF_INSERT","DIFF_EQUAL","diff_main","text1","text2","cursor_pos","cleanup","_fix_unicode","editdiff","find_cursor_edit_diff","commonlength","diff_commonPrefix","commonprefix","substring","diff_commonSuffix","commonsuffix","length","diffs","diff_compute_","unshift","push","diff_cleanupMerge","diff_cleanupSemantic","longtext","shorttext","i","indexOf","hm","diff_halfMatch_","text1_a","text1_b","text2_a","text2_b","mid_common","diffs_a","diffs_b","concat","diff_bisect_","text1_length","text2_length","max_d","Math","ceil","v_offset","v_length","v1","Array","v2","x","delta","front","k1start","k1end","k2start","k2end","d","k1","k1_offset","x1","y1","charAt","k2_offset","x2","diff_bisectSplit_","k2","y2","y","text1a","text2a","text1b","text2b","diffsb","pointermin","pointermax","min","pointermid","pointerstart","floor","is_surrogate_pair_start","charCodeAt","diff_commonOverlap_","text_length","best","pattern","found","slice","pointerend","is_surrogate_pair_end","diff_halfMatchI_","best_longtext_a","best_longtext_b","best_shorttext_a","best_shorttext_b","seed","j","best_common","prefixLength","suffixLength","hm1","hm2","changes","equalities","equalitiesLength","lastequality","pointer","length_insertions1","length_deletions1","length_insertions2","length_deletions2","max","splice","diff_cleanupSemanticLossless","deletion","insertion","overlap_length1","overlap_length2","nonAlphaNumericRegex_","whitespaceRegex_","linebreakRegex_","blanklineEndRegex_","blanklineStartRegex_","diff_cleanupSemanticScore_","one","two","char1","char2","nonAlphaNumeric1","match","nonAlphaNumeric2","whitespace1","whitespace2","lineBreak1","lineBreak2","blankLine1","blankLine2","equality1","edit","equality2","commonOffset","commonString","bestEquality1","bestEdit","bestEquality2","bestScore","score","fix_unicode","count_delete","count_insert","text_delete","text_insert","previous_equality","ends_with_pair_start","stray","k","starts_with_pair_end","n","pop","charCode","str","remove_empty_tuples","tuples","ret","make_edit_splice","before","oldMiddle","newMiddle","after","oldText","newText","oldRange","index","newRange","oldLength","newLength","oldCursor","oldBefore","oldAfter","maybeNewCursor","newCursor","newBefore","newAfter","oldPrefix","newPrefix","cursor","oldSuffix","newSuffix","diff","INSERT","DELETE","EQUAL","module","exports","LARGE_ARRAY_SIZE","HASH_UNDEFINED","MAX_SAFE_INTEGER","argsTag","arrayTag","boolTag","dateTag","errorTag","funcTag","genTag","mapTag","numberTag","objectTag","promiseTag","regexpTag","setTag","stringTag","symbolTag","weakMapTag","arrayBufferTag","dataViewTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","reRegExpChar","reFlags","reIsHostCtor","reIsUint","cloneableTags","freeGlobal","global","_typeof","Object","freeSelf","self","root","Function","freeExports","nodeType","freeModule","moduleExports","addMapEntry","map","pair","set","addSetEntry","value","add","arrayEach","array","iteratee","arrayPush","values","offset","arrayReduce","accumulator","initAccum","baseTimes","result","getValue","object","key","undefined","isHostObject","toString","e","mapToArray","size","forEach","overArg","func","transform","arg","setToArray","arrayProto","prototype","funcProto","objectProto","coreJsData","maskSrcKey","uid","exec","keys","IE_PROTO","funcToString","hasOwnProperty","objectToString","reIsNative","RegExp","call","replace","Buffer","Symbol","Uint8Array","getPrototype","getPrototypeOf","objectCreate","create","propertyIsEnumerable","nativeGetSymbols","getOwnPropertySymbols","nativeIsBuffer","isBuffer","nativeKeys","DataView","getNative","Map","Promise","Set","WeakMap","nativeCreate","dataViewCtorString","toSource","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","symbolProto","symbolValueOf","valueOf","Hash","entries","this","clear","entry","hashClear","__data__","hashDelete","has","hashGet","data","hashHas","hashSet","ListCache","listCacheClear","listCacheDelete","assocIndexOf","lastIndex","listCacheGet","listCacheHas","listCacheSet","MapCache","mapCacheClear","mapCacheDelete","getMapData","mapCacheGet","get","mapCacheHas","mapCacheSet","Stack","stackClear","stackDelete","stackGet","stackHas","stackSet","cache","pairs","arrayLikeKeys","inherited","isArray","isArguments","String","skipIndexes","isIndex","assignValue","objValue","eq","baseAssign","source","copyObject","baseClone","isDeep","isFull","customizer","stack","isObject","isArr","initCloneArray","copyArray","tag","getTag","isFunc","cloneBuffer","initCloneObject","copySymbols","initCloneByTag","stacked","props","getAllKeys","subValue","baseCreate","proto","baseGetAllKeys","keysFunc","symbolsFunc","baseGetTag","baseIsNative","isMasked","isFunction","test","baseKeys","isPrototype","buffer","constructor","copy","cloneArrayBuffer","arrayBuffer","byteLength","cloneDataView","dataView","byteOffset","cloneMap","cloneFunc","cloneRegExp","regexp","cloneSet","cloneSymbol","symbol","cloneTypedArray","typedArray","newValue","getSymbols","isKeyable","stubArray","input","Ctor","type","cloneDeep","other","isArrayLikeObject","ArrayBuffer","resolve","ctorString","isArrayLike","isLength","isObjectLike","stubFalse","COMPARE_PARTIAL_FLAG","COMPARE_UNORDERED_FLAG","asyncTag","nullTag","proxyTag","undefinedTag","typedArrayTags","freeProcess","process","nodeUtil","binding","nodeIsTypedArray","isTypedArray","arrayFilter","predicate","resIndex","arraySome","baseUnary","cacheHas","nativeObjectToString","symToStringTag","toStringTag","SetCache","setCacheAdd","setCacheHas","isArg","isBuff","isType","getRawTag","baseIsArguments","baseIsEqual","bitmask","baseIsEqualDeep","equalFunc","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","equalArrays","equalByTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","equalObjects","baseIsTypedArray","isPartial","arrLength","othLength","seen","arrValue","othValue","compared","othIndex","name","message","convert","objProps","objLength","othProps","skipCtor","objCtor","othCtor","isOwn","unmasked","arguments","isEqual","AttributeMap","require","compose","a","b","keepNull","attributes","reduce","attrs","invert","attr","base","baseInverted","memo","priority","AttributeMap_1","Op_1","OpIterator_1","NULL_CHARACTER","fromCharCode","getEmbedTypeAndData","Error","embedType","Delta","ops","_classCallCheck","_createClass","newOp","insert","retain","lastOp","filter","passed","failed","op","target","initialValue","elem","start","end","Infinity","iter","hasNext","nextOp","next","thisIter","otherIter","firstOther","peek","firstLeft","peekType","peekLength","thisOp","otherOp","action","_getEmbedTypeAndData","_getEmbedTypeAndData2","_slicedToArray","thisData","otherData","handler","getHandler","_defineProperty","rest","chop","strings","prep","join","retDelta","diffResult","component","opLength","newline","line","inverted","baseIndex","baseOp","_getEmbedTypeAndData3","_getEmbedTypeAndData4","opData","baseOpData","transformPosition","transformedData","nextType","handlers","Op","OpIterator","Iterator","retOp","substr","prefix","Events","EE","fn","context","once","addListener","emitter","event","TypeError","listener","evt","_events","_eventsCount","clearEvent","EventEmitter","__proto__","eventNames","events","names","listeners","l","ee","listenerCount","emit","a1","a2","a3","a4","a5","args","len","removeListener","apply","on","removeAllListeners","off","prefixed","$","stat","isNaN","number","globalThis","microtask","aCallable","validateArgumentsLength","fails","DESCRIPTORS","WRONG_ARITY","getOwnPropertyDescriptor","enumerable","dontCallGetSet","forced","queueMicrotask","_objectWithoutPropertiesLoose","r","t","_objectWithoutProperties","o","objectWithoutPropertiesLoose","defineProperty","baseAssignValue","assignMergeValue","createBaseFor","fromRight","iterable","baseFor","allocUnsafe","objectCtorString","isPlainObject","types","safeGet","isNew","nativeKeysIn","baseKeysIn","isProto","keysIn","toPlainObject","baseMergeDeep","srcIndex","mergeFunc","srcValue","isCommon","isTyped","baseMerge","identity","thisArg","nativeMax","overRest","otherArgs","constant","baseSetToString","string","HOT_COUNT","HOT_SPAN","nativeNow","Date","now","shortOut","count","lastCalled","stamp","remaining","setToString","baseRest","isIterateeCall","createAssigner","assigner","sources","guard","merge","_isNativeFunction","_construct","isNativeReflectConstruct","Reflect","construct","p","bind","setPrototypeOf","_wrapNativeSuper","isNativeFunction","Wrapper","writable","configurable","Scope","Scope2","TYPE","LEVEL","ATTRIBUTE","BLOT","INLINE","BLOCK","BLOCK_BLOT","INLINE_BLOT","BLOCK_ATTRIBUTE","INLINE_ATTRIBUTE","ANY","Attributor","attrName","keyName","options","attributeBit","scope","whitelist","node","canAdd","setAttribute","_node","removeAttribute","getAttribute","from","item","ParchmentError","_Error","_this","_callSuper","_inherits","_Registry","classes","tags","scroll","match2","query","blotClass","Node","TEXT_NODE","blot","blots","domNode","bubble","find","_this2","Text","text","block","inline","Element","split","some","tagName","_this3","_len","definitions","_key","definition","isBlot","isAttr","blotName","className","toUpperCase","parentNode","_unused","Registry","ClassAttributor","_Attributor","remove","classList","ClassAttributor$1","camelize","parts","part","StyleAttributor","_Attributor2","style","trim","StyleAttributor$1","AttributorStore","build","attribute","_this4","styles","_this5","format","_this6","_this7","AttributorStore$1","_ShadowBlot","prev","cloneNode","parent","removeChild","isolate","wrap","statics","def","ref","insertBefore","children","_context","requiredContainer","detach","replacement","_force","_mutations","wrapper","appendChild","rawValue","parseInt","document","createElement","ShadowBlot","_LeafBlot","_ShadowBlot2","compareDocumentPosition","DOCUMENT_POSITION_CONTAINED_BY","_inclusive","childNodes","_domNode","LeafBlot","LeafBlot$1","LinkedList","head","tail","_len2","nodes","_key2","append","_toConsumableArray","iterator","cur","refNode","contains","curNode","inclusive","callback","_this$find","_this$find2","startNode","curIndex","curLength","makeAttachedBlot","_unused2","child","replaceChild","attach","_ParentBlot","_ShadowBlot3","_this8","uiNode","_get","_getPrototypeOf","uiClass","firstChild","_this9","reverse","err","forEachAt","childLength","deleteAt","criteria","_this$children$find","_this$children$find2","descendant","Number","MAX_VALUE","descendants","lengthLeft","childIndex","_this10","done","allowedChildren","splitAfter","unwrap","formatAt","_this$children$find3","_this$children$find4","insertAt","childBlot","refBlot","refDomNode","nextSibling","targetParent","enforceAllowedChildren","defaultChild","_this$children$find5","_this$children$find6","position","path","moveChildren","force","clone","_length","mutations","_this11","addedNodes","removedNodes","mutation","body","sort","DOCUMENT_POSITION_FOLLOWING","ParentBlot","ParentBlot$1","obj1","obj2","prop","_InlineBlot","_ParentBlot$","_this12","_this13","formats","replaceWith","_this14","move","toLowerCase","InlineBlot","InlineBlot$1","_BlockBlot","_ParentBlot$2","_this15","_this16","BlockBlot","BlockBlot$1","_ContainerBlot","_ParentBlot$3","checkMerge","ContainerBlot","ContainerBlot$1","EmbedBlot","_LeafBlot$","_scroll","EmbedBlot$1","OBSERVER_CONFIG","characterData","characterDataOldValue","childList","subtree","MAX_OPTIMIZE_ITERATIONS","_ScrollBlot","_ParentBlot$4","registry","_this17","_assertThisInitialized","observer","MutationObserver","update","observe","_this$registry","register","disconnect","_this18","mutationsMap","records","takeRecords","mark","markParent","optimize","previousSibling","grandChild","_this19","ScrollBlot","ScrollBlot$1","_TextBlot","_LeafBlot$2","_this20","splitText","_this21","createTextNode","TextBlot","TextBlot$1","baseAssignIn","getSymbolsIn","copySymbolsIn","getAllKeysIn","baseIsMap","nodeIsMap","isMap","baseIsSet","nodeIsSet","isSet","CLONE_DEEP_FLAG","CLONE_FLAT_FLAG","CLONE_SYMBOLS_FLAG","isFlat","arrStacked","othStacked","objStacked","Break","_EmbedBlot","escapeText","s","entityMap","Inline","compare","selfIndex","order","otherIndex","_Inline","NEWLINE_LENGTH","Block","blockDelta","lines","shift","lineIndex","BlockEmbed","_objectSpread","blocks","leaf","bubbleFormats","Cursor","selection","textNode","CONTENTS","savedLength","composing","range","getNativeRange","lastChild","mergedTextBlot","prevTextBlot","prevTextLength","nextTextBlot","nextText","newTextNode","remapOffset","startOffset","endNode","endOffset","restore","levels","level","debug","method","_console","console","namespace","ns","logger","newLevel","EVENTS","eventName","addEventListener","querySelectorAll","_quill$emitter","quill","instances","handleDOM","Emitter","_EventEmitter","domListeners","error","_debug$log","_get2","log","_len3","_key3","_ref","EDITOR_CHANGE","SCROLL_BEFORE_UPDATE","SCROLL_BLOT_MOUNT","SCROLL_BLOT_UNMOUNT","SCROLL_OPTIMIZE","SCROLL_UPDATE","SCROLL_EMBED_UPDATE","SELECTION_CHANGE","TEXT_CHANGE","COMPOSITION_BEFORE_START","COMPOSITION_START","COMPOSITION_BEFORE_END","COMPOSITION_END","API","SILENT","USER","Range","Selection","mouseDown","savedRange","lastRange","lastNative","handleComposition","handleDragging","listenDOM","setTimeout","hasFocus","native","setNativeRange","triggeredByTyping","ignored","_context$range","focus","preventScroll","setRange","nativeRange","collapsed","scrollLength","_this$scroll$leaf","_this$scroll$leaf2","_this$scroll$leaf3","_this$scroll$leaf4","_this$scroll$line","_this$scroll$line2","_this$scroll$line3","_this$scroll$line4","nextLine","_leaf$position","_leaf$position2","createRange","setStart","_this$scroll$leaf5","_this$scroll$leaf6","_leaf$position3","_leaf$position4","setEnd","getBoundingClientRect","rect","side","bottom","top","height","left","right","width","getSelection","rangeCount","getRangeAt","normalizeNative","info","isConnected","normalized","normalizedToRange","activeElement","positions","indexes","_position","startContainer","endContainer","getPosition","_this5$scroll$leaf","_this5$scroll$leaf2","leafOffset","removeAllRanges","addRange","blur","rangeToNative","_this$getRange","getRange","_this$getRange2","_this$emitter","_this$emitter2","ASCII","Editor","getDelta","batchStart","normalizedDelta","normalizeDelta","deleteDelta","normalizedOps","splitOpLines","isImplicitNewlinePrepended","isImplicitNewlineAppended","endsWith","_line$descendant","_line$descendant2","isInlineEmbed","_this$scroll$descenda","_this$scroll$descenda2","_this$scroll$descenda3","_this$scroll$descenda4","updateEmbedAt","prependedLength","addedLength","batchEnd","leaves","_path","_map","combineFormats","_map2","lineFormats","leafFormats","lineOffset","lineLength","isWithinLine","convertHTML","getContents","contents","change","insertContents","embed","getText","_this$scroll$line5","_this$scroll$line6","suffix","applyDelta","selectionInfo","oldDelta","textBlot","oldValue","CursorBlot","relativeSelectionInfo","shiftRange","diffDelta","convertListHTML","items","lastIndent","_getListType","getListType","_getListType2","endTag","_items","_toArray","_items$","indent","_getListType3","_getListType4","previousType","_getListType5","_getListType6","isRoot","html","list","_blot$domNode","outerHTML","innerHTML","_outerHTML$split","_outerHTML$split2","combined","merged","combinedValue","amount","Module","GUARD_TEXT","Embed","contentNode","childNode","leftGuard","rightGuard","prevLength","Composition","setupListeners","isComposing","handleCompositionStart","handleCompositionEnd","Theme","modules","addModule","ModuleClass","_Theme","default","getParentElement","element","parentElement","getRootNode","host","getElementRect","scaleX","abs","offsetWidth","scaleY","offsetHeight","clientWidth","clientHeight","paddingValueToInt","getScrollDistance","targetStart","targetEnd","scrollStart","scrollEnd","scrollPaddingStart","scrollPaddingEnd","scrollRectIntoView","targetRect","ownerDocument","current","_window$visualViewpor","_window$visualViewpor2","_window$visualViewpor3","_window$visualViewpor4","isDocumentBody","bounding","window","visualViewport","documentElement","getComputedStyle","scrollDistanceX","scrollPaddingLeft","scrollPaddingRight","scrollDistanceY","scrollPaddingTop","scrollPaddingBottom","_document$defaultView","defaultView","scrollBy","_current","scrollLeft","scrollTop","scrolledLeft","scrolledTop","MAX_REGISTER_ITERATIONS","CORE_FORMATS","createRegistryWithFormats","sourceRegistry","coreBlot","iterations","_format$requiredConta","globalRegistry","Parchment","Quill","container","expandConfig","addContainer","scrollBlotName","editor","composition","theme","keyboard","clipboard","history","uploader","init","toggle","isBlank","_this$selection$getRa","_this$selection$getRa2","modify","_this$selection$getRa3","_this$selection$getRa4","setContents","placeholder","readOnly","disable","allowReadOnlyEdits","_overload","overload","_overload2","deleteText","enable","modifier","enabled","scrollSelectionIntoView","formatLine","formatText","setSelection","_overload3","_overload4","_overload5","_overload6","bounds","getBounds","containerBounds","getLength","_overload7","_overload8","getFormat","_overload9","_overload10","getHTML","_length2","_overload11","_overload12","insertEmbed","_overload13","_overload14","insertText","isEnabled","_this$emitter3","_overload15","_overload16","removeFormat","warn","delete1","applied","delete2","_overload17","_overload18","limit","imports","overwrite","startsWith","resolveSelector","selector","querySelector","expandModuleConfig","config","expanded","_ref3","omitUndefinedValuesFromOptions","obj","fromEntries","containerOrSelector","shouldUseDefaultTheme","DEFAULTS","_Quill$DEFAULTS","quillModuleDefaults","quillDefaults","_excluded","_theme$DEFAULTS","themeModuleDefaults","themeDefaults","_excluded2","userModuleOptions","toolbar","modulesWithDefaults","_ref2","_ref4","moduleClass","_this$emitter4","_this$emitter5","lengthOrSource","pos","_map3","_map4","parchment","Container","isLine","isUpdatable","updateContent","Scroll","batch","handleDragStart","_this$line","_this$line2","first","_this$line3","_this$line4","last","renderBlocks","deltaToRenderBlocks","shouldInsertNewlineChar","insertInlineContents","newlineCharLength","lineEndIndex","refBlotOffset","renderBlock","createBlock","blockEmbed","_last","getLines","blotIndex","blotLength","_this$descendant","_this$descendant2","preventDefault","currentBlockDelta","splitted","_op$attributes","_op$attributes2","_ref5","isBlockBlot","_ref6","inlineContents","_parent$descendant","_parent$descendant2","_parent$descendant3","_parent$descendant4","AlignAttribute","AlignClass","AlignStyle","ColorAttributor","_StyleAttributor","hex","ColorClass","ColorStyle","BackgroundClass","BackgroundStyle","CodeBlockContainer","_Container","innerText","code","CodeBlock","_Block","Code","DirectionAttribute","DirectionClass","DirectionStyle","FontClass","FontStyleAttributor","FontStyle","SizeClass","SizeStyle","SHORTKEY","navigator","platform","Keyboard","_Module","bindings","addBinding","shiftKey","handleEnter","metaKey","ctrlKey","altKey","userAgent","handleBackspace","handleDelete","handleDeleteRange","listen","keyBinding","normalize","singleBinding","defaultPrevented","keyCode","which","matches","_this3$quill$getLine","getLine","_this3$quill$getLine2","_this3$quill$getLeaf","getLeaf","_this3$quill$getLeaf2","leafStart","offsetStart","leafEnd","offsetEnd","prefixText","suffixText","curContext","empty","prevented","every","_this$quill$getLine","_this$quill$getLine2","_this$quill$getLine3","_this$quill$getLine4","isPrevLineEmpty","curFormats","prevFormats","formatDelta","updateContents","_this$quill$getLine5","_this$quill$getLine6","_this$quill$getLine7","_this$quill$getLine8","nextFormats","deleteRange","defaultOptions","bold","makeFormatHandler","italic","underline","outdent","makeCodeBlockHandler","tab","table","cutoff","_this$quill$getLine9","_this$quill$getLine10","_this$quill$getLine11","_this$quill$getLine12","header","getModule","_module$getTable","getTable","_module$getTable2","row","cell","tableSide","blockquote","_this$quill$getLine13","_this$quill$getLine14","_this$quill$getLine15","_this$quill$getLine16","numLines","makeEmbedArrowHandler","makeTableArrowHandler","TAB","textContent","where","_this$quill$getLeaf","_this$quill$getLeaf2","shortKey","up","targetRow","targetCell","targetLine","firstFormats","lastFormats","_table","normalWeightRegexp","blockTagNames","isBlockElement","includes","normalizeEmptyLines","doc","br","previousElementSibling","nextElementSibling","_br$parentNode","normalizeFontWeight","_node$getAttribute","_node$parentNode","fragment","createDocumentFragment","ignoreRegexp","idRegexp","indentRegexp","parseListItem","idMatch","id","indentMatch","typeRegexp","typeMatch","normalizeListItem","msoList","others","shouldIgnore","listItems","parsed","_loop","_childListItems$","childListItems","_listItems$","ul","listItem","li","NORMALIZERS","msWord","googleDocs","normalizeExternalHTML","CLIPBOARD_CONFIG","matchText","matchNewline","matchBreak","ELEMENT_NODE","matchBlot","matchAttributor","matchStyles","matchIndent","matchList","matchCodeBlock","matchTable","createMatchAlias","matchIgnore","ATTRIBUTE_ATTRIBUTORS","STYLE_ATTRIBUTORS","Clipboard","_this$options$matcher","onCaptureCopy","onCapturePaste","matchers","matcher","addMatcher","deltaEndsWith","DOMParser","parseFromString","normalizeHTML","nodeMatches","_this$prepareMatching","prepareMatching","_this$prepareMatching2","elementMatchers","textMatchers","traverse","paste","_e$clipboardData","_e$clipboardData2","isCut","_this$quill$selection","_this$quill$selection2","_this$onCopy","onCopy","clipboardData","setData","urlList","url","_e$clipboardData3","_e$clipboardData4","_e$clipboardData6","getData","_e$clipboardData5","normalizeURIList","files","upload","_doc$body$firstElemen","childElementCount","firstElementChild","onPaste","getSemanticHTML","pastedDelta","_pair","applyFormat","newDelta","endText","isBetweenInlineElements","preNodes","isPre","childrenDelta","reducedDelta","_ref8","language","composed","checkedAttr","HTMLParagraphElement","_style$fontWeight","fontStyle","textDecoration","strike","fontWeight","_ref9","parseFloat","textIndent","_node$parentElement","_node$parentElement2","rows","_node$parentElement3","replacer","collapse","replaced","History","undo","redo","currentRange","ignoreChange","userOnly","record","transformRange","inputType","dest","inverseDelta","lastRecorded","restoreSelection","changeDelta","undoDelta","undoRange","timestamp","delay","maxStack","transformStack","stackItem","getLastChangeIndex","remoteDelta","oldItem","endsWithNewlineChange","deleteLength","changeIndex","Uploader","caretRangeFromPoint","clientX","clientY","caretPositionFromPoint","offsetNode","_e$dataTransfer","dataTransfer","uploads","file","_this2$options$mimety","mimetypes","promises","reader","FileReader","onload","readAsDataURL","all","then","images","image","INSERT_TYPES","Input","handleBeforeInput","staticRange","getTargetRanges","getPlainTextFromInputEvent","replaceText","_event$dataTransfer","isMac","TTL_FOR_VALID_SELECTION_CHANGE","canMoveCaretBeforeUINode","UINode","handleArrowKeys","handleNavigationShortcuts","isRTL","ensureListeningToSelectionChange","selectionChangeDeadline","isListening","handleSelectionChange","setStartAfter","setEndAfter","IndentAttributor","_ClassAttributor","normalizedValue","IndentClass","Blockquote","Header","ListContainer","ListItem","ui","listEventHandler","attachUI","Bold","Italic","_Bold","Link","sanitize","PROTOCOL_WHITELIST","SANITIZED_URL","protocols","anchor","href","protocol","Script","Strike","Underline","Formula","_Embed","_this$value","formula","katex","render","throwOnError","errorColor","ATTRIBUTES","Image","hasAttribute","Video","_BlockEmbed","video","TokenAttributor","CodeToken","SyntaxCodeBlock","_CodeBlock","SyntaxCodeBlockContainer","_CodeBlockContainer","forceNext","emitMount","highlight","cachedText","codeBlock","BreakBlot","lib","versionString","majorVersion","Syntax","hljs","languages","highlightBlot","initListener","initTimer","select","label","option","timer","clearTimeout","interval","nodeText","TableCell","rowOffset","tableId","TableRow","thisHead","thisTail","nextHead","nextTail","childFormats","TableBody","_Container2","TableContainer","_Container3","maxColumns","fill","column","at","_this$descendant3","_this$descendant4","_this$descendant5","_this$descendant6","random","Table","listenBalanceCells","balanceCells","_this$getTable","_this$getTable2","deleteColumn","cellOffset","_this$getTable3","_this$getTable4","_this$getTable5","_this$getTable6","_this$getTable7","_this$getTable8","insertColumn","_this$getTable9","_this$getTable10","insertRow","columns","balanceTables","old","Toolbar","_quill$container","addControls","HTMLElement","controls","_this$options$handler","addHandler","_possibleConstructorReturn","selectedIndex","selected","_this2$quill$selectio","_this2$quill$selectio2","prompt","isActive","addButton","groups","group","control","addSelect","clean","direction","_this$quill$getFormat","align","link","alignLeftIcon","center","alignCenterIcon","alignRightIcon","justify","alignJustifyIcon","background","backgroundIcon","blockquoteIcon","boldIcon","cleanIcon","codeIcon","color","colorIcon","directionLeftToRightIcon","rtl","directionRightToLeftIcon","formulaIcon","headerIcon","header2Icon","header3Icon","header4Icon","header5Icon","header6Icon","italicIcon","imageIcon","indentIcon","outdentIcon","linkIcon","bullet","listBulletIcon","check","listCheckIcon","ordered","listOrderedIcon","script","sub","subscriptIcon","super","superscriptIcon","strikeIcon","tableIcon","underlineIcon","videoIcon","optionsCounter","toggleAriaAttribute","Picker","buildPicker","display","togglePicker","escape","tabIndex","selectItem","DropdownIcon","buildItem","buildLabel","buildOptions","close","trigger","dispatchEvent","Event","ColorPicker","_Picker","backgroundColor","colorLabel","stroke","IconPicker","icons","defaultItem","isScrollable","el","_getComputedStyle","overflowY","Tooltip","boundsContainer","TEMPLATE","marginTop","hide","reference","rootBounds","verticalShift","ALIGNS","COLORS","FONTS","HEADERS","SIZES","BaseTheme","tooltip","textbox","pickers","picker","removeEventListener","extendToolbar","buttons","button","selects","fillSelect","fileInput","click","BaseTooltip","_Tooltip","save","cancel","restoreFocus","mode","preview","linkRange","extractVideoUrl","defaultValue","TOOLBAR_CONFIG","BubbleTooltip","_BaseTooltip","show","lastLine","getIndex","indexBounds","arrow","marginLeft","BubbleTheme","_BaseTheme","buildButtons","buildPickers","SnowTooltip","_this2$quill$scroll$d","LinkBlot","_this2$quill$scroll$d2","SnowTheme","_range","Indent","List","InlineCode","Icons"],"sourceRoot":""}