"use strict";(self["webpackChunkepharma"]=self["webpackChunkepharma"]||[]).push([[491],{20305:(e,t,n)=>{n.d(t,{A:()=>x});var r=n(56768),l=n(45130),i=n(24232),o=(0,r.Lk)("p",{class:"h5"},"Informations générales",-1),s={class:"form-row"},a={class:"form-group col-md-6"},d=(0,r.Lk)("label",null,"libelle",-1),u=["disabled"],c={class:"form-group col-md-6"},m=(0,r.Lk)("label",null,"Pourcentage assurance %",-1),b=["disabled"],f=(0,r.Lk)("br",null,null,-1),p={key:0,class:"d-flex justify-content-end"},h={type:"submit",class:"btn btn-light"},k={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"};function L(e,t,n,L,g,C){var v=this;return(0,r.uX)(),(0,r.CE)("form",{onSubmit:t[3]||(t[3]=(0,l.D$)((function(t){return e.saveLine()}),["prevent"])),class:"py-3"},[o,(0,r.Lk)("div",s,[(0,r.Lk)("div",a,[d,(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control bg-bg-input border border-dark px-[4rem]",required:"","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.formClient.libelle=t}),disabled:this.formLocked},null,8,u),[[l.Jo,e.formClient.libelle]])]),(0,r.Lk)("div",c,[m,(0,r.bo)((0,r.Lk)("input",{type:"number",class:"form-control bg-bg-input border border-dark px-[4rem]",min:"0",required:"","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.formClient.remise_percent=t}),disabled:this.formLocked},null,8,b),[[l.Jo,e.formClient.remise_percent]])])]),f,0==this.formLocked?((0,r.uX)(),(0,r.CE)("div",p,[(0,r.Lk)("button",{type:"button",class:"btn btn-light mr-2",onClick:t[2]||(t[2]=function(e){return v.dialogRef.close()})},"Annuler"),(0,r.Lk)("button",h,[(0,r.eW)((0,i.v_)(e.buttonLabel)+" ",1),1==e.isLoading?((0,r.uX)(),(0,r.CE)("span",k)):(0,r.Q3)("",!0)])])):(0,r.Q3)("",!0)],32)}n(51629),n(26099),n(23500);var g=n(46587),C=n.n(g);const v=(0,r.pM)({name:"FormClentBase",inject:["dialogRef"],props:{datas:{type:Object,default:null},formLocked:{type:Boolean,default:!1}},data:function(){return{table:"clients",isLoading:!1,formClient:{remise_percent:0,created_by:this.$store.getters.user.fullname},line:null}},created:function(){this.datas&&(this.line=this.datas)},mounted:function(){this.line&&(this.formClient={libelle:this.line.libelle,remise_percent:this.line.remise_percent})},computed:{buttonLabel:function(){return this.line?"Mettre à jour":"Enregistrer"}},methods:{saveLine:function(){var e=this;this.isLoading=!0;var t="/api/"+this.table;this.line&&(t="/api/"+this.table+"/"+this.line.id+"/update"),this.axios.post(t,this.formClient).then((function(t){e.isLoading=!1,!0===t.data.success?(C()("#refresh"+e.table).click(),e.line||e.resetForm(),e.dialogRef.close(),e.$toast.add({severity:"success",detail:t.data.message,life:3e3})):t.data.errors.forEach((function(t){e.$toast.add({severity:"warn",summary:"Oups !",detail:t,life:7e3})}))}))["catch"]((function(){e.isLoading=!1,e.$toast.add({severity:"error",summary:"Probleme de connexion",detail:"Une erreur s'est produite lors de la connexion au serveur !",life:5e3})}))},resetForm:function(){this.formClient={remise_percent:0,created_by:this.$store.getters.user.fullname}}}});var _=n(71241);const y=(0,_.A)(v,[["render",L]]),x=y},20243:(e,t,n)=>{n.d(t,{A:()=>H});var r=n(56768),l=n(45130),i=n(24232),o={class:"row"},s={class:"form-group col-md-3"},a=(0,r.Lk)("label",null,"Nom",-1),d=["disabled"],u={class:"form-group col-md-3"},c=(0,r.Lk)("label",null,"Code",-1),m=["disabled"],b={class:"form-group col-md-3"},f=(0,r.Lk)("label",null,"Téléphone",-1),p=["disabled"],h={class:"form-group col-md-3"},k=(0,r.Lk)("label",null,"Email",-1),L=["disabled"],g={class:"form-group col-md-3"},C=(0,r.Lk)("label",null,"Ville",-1),v=["disabled"],_={key:0,class:"form-group col-md-3"},y=(0,r.Lk)("label",null,"Client",-1),x={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},E=["disabled"],U=["value"],V={class:"form-group col-md-3"},$=(0,r.Lk)("label",null,"Numéro d'assurance",-1),J=["disabled"],X={class:"form-group col-md-3"},j=(0,r.Lk)("label",null,"Numéro CNSS",-1),w=["disabled"],A={class:"form-group col-md-3"},F=(0,r.Lk)("label",null,"Pourcentage assurance %",-1),I=["disabled"],Q={class:"form-group col-md-3"},P=(0,r.Lk)("label",null,"Plafond dette",-1),R=["disabled"],O={key:1,class:"form-group col-md-3"},q=(0,r.Lk)("label",null,"Crédit disponible",-1),M={key:0,class:"d-flex justify-content-end"},N={type:"submit",class:"btn btn-light"},S={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"};function B(e,t,n,B,D,T){var W=this;return(0,r.uX)(),(0,r.CE)("form",{onSubmit:t[13]||(t[13]=(0,l.D$)((function(t){return e.saveLine()}),["prevent"])),class:"py-3"},[(0,r.Lk)("div",o,[(0,r.Lk)("div",s,[a,(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control bg-bg-input border border-dark px-[4rem]","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.formClient.nom=t}),disabled:this.formLocked},null,8,d),[[l.Jo,e.formClient.nom]])]),(0,r.Lk)("div",u,[c,(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control bg-bg-input border border-dark px-[4rem]","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.formClient.code=t}),disabled:this.formLocked},null,8,m),[[l.Jo,e.formClient.code]])]),(0,r.Lk)("div",b,[f,(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control bg-bg-input border border-dark px-[4rem]","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.formClient.telephone=t}),disabled:this.formLocked},null,8,p),[[l.Jo,e.formClient.telephone]])]),(0,r.Lk)("div",h,[k,(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control bg-bg-input border border-dark px-[4rem]","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.formClient.email=t}),disabled:this.formLocked},null,8,L),[[l.Jo,e.formClient.email]])]),(0,r.Lk)("div",g,[C,(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control bg-bg-input border border-dark px-[4rem]","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.formClient.ville=t}),disabled:this.formLocked},null,8,v),[[l.Jo,e.formClient.ville]])]),e.client?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",_,[y,1==e.resIsLoading?((0,r.uX)(),(0,r.CE)("span",x)):(0,r.Q3)("",!0),(0,r.bo)((0,r.Lk)("select",{class:"form-control bg-bg-input border border-dark px-[4rem]","onUpdate:modelValue":t[5]||(t[5]=function(t){return e.formClient.client_id=t}),onChange:t[6]||(t[6]=function(t){return e.setLibelle()}),required:"",disabled:this.formLocked},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.clients,(function(e){return(0,r.uX)(),(0,r.CE)("option",{key:e.id,value:e.id},(0,i.v_)(e.libelle),9,U)})),128))],40,E),[[l.u1,e.formClient.client_id]])])),(0,r.Lk)("div",V,[$,(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control bg-bg-input border border-dark px-[4rem]","onUpdate:modelValue":t[7]||(t[7]=function(t){return e.formClient.numero_assurance=t}),disabled:this.formLocked},null,8,J),[[l.Jo,e.formClient.numero_assurance]])]),(0,r.Lk)("div",X,[j,(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control bg-bg-input border border-dark px-[4rem]","onUpdate:modelValue":t[8]||(t[8]=function(t){return e.formClient.numero_cnss=t}),disabled:this.formLocked},null,8,w),[[l.Jo,e.formClient.numero_cnss]])]),(0,r.Lk)("div",A,[F,(0,r.bo)((0,r.Lk)("input",{type:"number",class:"form-control bg-bg-input border border-dark px-[4rem]",min:"0",required:"","onUpdate:modelValue":t[9]||(t[9]=function(t){return e.formClient.remise_percent=t}),disabled:this.formLocked},null,8,I),[[l.Jo,e.formClient.remise_percent]])]),(0,r.Lk)("div",Q,[P,(0,r.bo)((0,r.Lk)("input",{type:"number",class:"form-control bg-bg-input border border-dark px-[4rem]","onUpdate:modelValue":t[10]||(t[10]=function(t){return e.formClient.plafond_dette=t}),disabled:this.formLocked},null,8,R),[[l.Jo,e.formClient.plafond_dette]])]),this.formLocked?((0,r.uX)(),(0,r.CE)("div",O,[q,(0,r.bo)((0,r.Lk)("input",{type:"number",class:"form-control bg-bg-input border border-dark px-[4rem]","onUpdate:modelValue":t[11]||(t[11]=function(t){return e.formClient.current_remboursement_amount=t}),disabled:""},null,512),[[l.Jo,e.formClient.current_remboursement_amount]])])):(0,r.Q3)("",!0)]),0==this.formLocked?((0,r.uX)(),(0,r.CE)("div",M,[(0,r.Lk)("button",{type:"button",class:"btn btn-light mr-2",onClick:t[12]||(t[12]=function(e){return W.dialogRef.close()})},"Annuler"),(0,r.Lk)("button",N,[(0,r.eW)((0,i.v_)(e.buttonLabel)+" ",1),1==e.isLoading?((0,r.uX)(),(0,r.CE)("span",S)):(0,r.Q3)("",!0)])])):(0,r.Q3)("",!0)],32)}var D=n(23772),T=(n(2008),n(51629),n(26099),n(23500),n(46587)),W=n.n(T);const K=(0,r.pM)({name:"FormClentTier",inject:["dialogRef"],props:{datas:{type:Object,default:null},formLocked:{type:Boolean,default:!1},client:{type:Object,default:null}},data:function(){return{resIsLoading:!1,table:"clients",isLoading:!1,clients:[],line:null,formClient:{created_by:this.$store.getters.user.fullname}}},created:function(){this.datas&&(this.line=this.datas)},mounted:function(){this.line?this.formClient=(0,D.A)({nom:this.line.nom,libelle:this.line.libelle,email:this.line.email,telephone:this.line.telephone,remise_percent:this.line.remise_percent,ville:this.line.ville,current_remboursement_amount:this.line.current_remboursement_amount,numero_assurance:this.line.numero_assurance,numero_cnss:this.line.numero_cnss,code:this.line.code,client_id:this.line.client_id,plafond_dette:this.line.plafond_dette},"current_remboursement_amount",this.line.current_remboursement_amount):this.client&&(this.formClient={libelle:this.client.libelle,remise_percent:this.client.remise_percent,client_id:this.client.id}),this.getClients()},computed:{buttonLabel:function(){return this.line?"Mettre à jour":"Enregistrer"}},methods:{getClients:function(){var e=this;this.resIsLoading=!0,this.axios.get("/api/"+this.table+"/base").then((function(t){e.resIsLoading=!1;var n=t.data.data;e.clients=n.filter((function(e){return"comptant"!==e.libelle.toLowerCase()}))}))["catch"]((function(){e.resIsLoading=!1,e.$toast.add({severity:"error",summary:"Probleme de connexion",detail:"Une erreur s'est produite lors de la connexion au serveur !",life:5e3})}))},setLibelle:function(){var e=this,t=this.clients.filter((function(t){return t.id==e.formClient.client_id}));t.length>0&&t[0].libelle&&(this.formClient.libelle=t[0].libelle,this.formClient.remise_percent=t[0].remise_percent)},saveLine:function(){var e=this;this.isLoading=!0;var t="/api/"+this.table;this.line&&(t="/api/"+this.table+"/"+this.line.id+"/update"),this.axios.post(t,this.formClient).then((function(t){e.isLoading=!1,!0===t.data.success?(W()("#refresh"+e.table).click(),e.line||e.resetForm(),e.dialogRef.close(),e.$toast.add({severity:"success",detail:t.data.message,life:3e3})):t.data.errors.forEach((function(t){e.$toast.add({severity:"warn",summary:"Oups !",detail:t,life:7e3})}))}))["catch"]((function(){e.isLoading=!1,e.$toast.add({severity:"error",summary:"Probleme de connexion",detail:"Une erreur s'est produite lors de la connexion au serveur !",life:5e3})}))},resetForm:function(){this.formClient={created_by:this.$store.getters.user.fullname}}}});var z=n(71241);const G=(0,z.A)(K,[["render",B]]),H=G}}]);
//# sourceMappingURL=491.02782b80.js.map