{"version":3,"file":"js/357.19029535.js","mappings":"mKAGYA,EAAAA,EAAAA,IAAgC,SAA7B,6BAAyB,G,GAEvBC,MAAM,Y,GACFA,MAAM,uB,GACPD,EAAAA,EAAAA,IAAqC,aAA9B,0BAAsB,G,GAG5BC,MAAM,uB,GACPD,EAAAA,EAAAA,IAA4B,aAArB,iBAAa,G,GAGnBC,MAAM,uB,GACPD,EAAAA,EAAAA,IAA6B,aAAtB,kBAAc,G,GAGpBC,MAAM,uB,GACPD,EAAAA,EAAAA,IAA0B,aAAnB,eAAW,G,GAGjBC,MAAM,uB,GACPD,EAAAA,EAAAA,IAA2B,aAApB,gBAAY,G,GAK1BC,MAAM,8B,GAECC,KAAK,SAASD,MAAM,iB,GA9BxCE,IAAA,EAgC+CF,MAAM,mCAAmCG,KAAK,SAAS,cAAY,Q,qDA/B9GC,EAAAA,EAAAA,IAkCO,QAlCAC,SAAMC,EAAA,MAAAA,EAAA,KADjBC,EAAAA,EAAAA,KAAA,SAAAC,GAAA,OAC2BC,EAAAC,YAAU,kB,EAC7BX,EAAAA,EAAAA,IAyBM,YAxBFY,GAEAZ,EAAAA,EAAAA,IAqBM,MArBNa,EAqBM,EApBFb,EAAAA,EAAAA,IAGM,MAHNc,EAGM,CAFFC,GAAqC,SACrCf,EAAAA,EAAAA,IAAgI,SAAzHE,KAAK,SAASD,MAAM,wDAAwDe,IAAI,IAR3G,sBAAAT,EAAA,KAAAA,EAAA,YAAAE,GAAA,OAQwHC,EAAAO,KAAKC,aAAYT,CAAA,GAAEU,SAAA,I,iBAAnBT,EAAAO,KAAKC,mBAE7GlB,EAAAA,EAAAA,IAGM,MAHNoB,EAGM,CAFFC,GAA4B,SAC5BrB,EAAAA,EAAAA,IAA+I,SAAxIE,KAAK,OAAOD,MAAM,wDAZ7C,sBAAAM,EAAA,KAAAA,EAAA,YAAAE,GAAA,OAY8GC,EAAAO,KAAKK,WAAUb,CAAA,GAAGc,SAAMhB,EAAA,KAAAA,EAAA,qBAAEG,EAAAc,gBAAAd,EAAAc,eAAAC,MAAAf,EAAAgB,UAAc,GAAEP,SAAA,I,iBAA1CT,EAAAO,KAAKK,iBAEnGtB,EAAAA,EAAAA,IAGM,MAHN2B,EAGM,CAFFC,GAA6B,SAC7B5B,EAAAA,EAAAA,IAAiJ,SAA1IE,KAAK,OAAOD,MAAM,wDAhB7C,sBAAAM,EAAA,KAAAA,EAAA,YAAAE,GAAA,OAgB8GC,EAAAO,KAAKY,YAAWpB,CAAA,GAAGc,SAAMhB,EAAA,KAAAA,EAAA,qBAAEG,EAAAoB,iBAAApB,EAAAoB,gBAAAL,MAAAf,EAAAgB,UAAe,GAAEP,SAAA,I,iBAA5CT,EAAAO,KAAKY,kBAEnG7B,EAAAA,EAAAA,IAGM,MAHN+B,EAGM,CAFFC,GAA0B,SAC1BhC,EAAAA,EAAAA,IAA2I,SAApIE,KAAK,OAAOD,MAAM,wDApB7C,sBAAAM,EAAA,KAAAA,EAAA,YAAAE,GAAA,OAoB8GC,EAAAO,KAAKgB,SAAQxB,CAAA,GAAGc,SAAMhB,EAAA,KAAAA,EAAA,qBAAEG,EAAAc,gBAAAd,EAAAc,eAAAC,MAAAf,EAAAgB,UAAc,GAAEP,SAAA,I,iBAAxCT,EAAAO,KAAKgB,eAEnGjC,EAAAA,EAAAA,IAGM,MAHNkC,EAGM,CAFFC,GAA2B,SAC3BnC,EAAAA,EAAAA,IAA6I,SAAtIE,KAAK,OAAOD,MAAM,wDAxB7C,sBAAAM,EAAA,KAAAA,EAAA,YAAAE,GAAA,OAwB8GC,EAAAO,KAAKmB,UAAS3B,CAAA,GAAGc,SAAMhB,EAAA,KAAAA,EAAA,qBAAEG,EAAAoB,iBAAApB,EAAAoB,gBAAAL,MAAAf,EAAAgB,UAAe,GAAEP,SAAA,I,iBAA1CT,EAAAO,KAAKmB,oBAI3GpC,EAAAA,EAAAA,IAMM,MANNqC,EAMM,EALFrC,EAAAA,EAAAA,IAAgG,UAAxFE,KAAK,SAASD,MAAM,qBAAsBqC,QAAK/B,EAAA,KAAAA,EAAA,YAAAE,GAAA,OAAA8B,EAAOC,UAAUC,OAAK,IAAI,WACjFzC,EAAAA,EAAAA,IAGS,SAHT0C,EAGS,EAjCrBC,EAAAA,EAAAA,IA8BwD,iBAEf,GAAbjC,EAAAkC,YAAS,WAArBvC,EAAAA,EAAAA,IAAgH,OAAhHwC,KAhChBC,EAAAA,EAAAA,IAAA,e,0EA0CA,SAAeC,EAAAA,EAAAA,IAAgB,CAC3BC,KAAM,cACNC,OAAQ,CAAC,aACTC,KAAI,WACA,MAAO,CACHC,MAAO,SACPP,WAAW,EACX3B,KAAM,CACFC,aAAc,KACdI,WAAY,KACZO,YAAa,KACbI,SAAU,KACVG,UAAW,MAGvB,EACAgB,QAAS,CACLzC,WAAU,WAAG,IAAA4B,EAAA,KACTc,KAAKT,WAAY,EACjBS,KAAKC,MACAC,KAAK,QAAUF,KAAKF,MAAOE,KAAKpC,MAChCuC,MAAK,SAACC,GACHlB,EAAKK,WAAY,GACa,IAA1Ba,EAASP,KAAKQ,SACdnB,EAAKoB,YACLC,IAAE,WAAarB,EAAKY,OAAOU,QAC3BtB,EAAKC,UAAUC,QACfF,EAAKuB,OAAOC,IAAI,CACZC,SAAU,UACVC,OAAQR,EAASP,KAAKgB,QACtBC,KAAM,OAGVV,EAASP,KAAKkB,OAAOC,SAAQ,SAACC,GAC1B/B,EAAKuB,OAAOC,IAAI,CACZC,SAAU,OACVO,QAAS,SACTN,OAAQK,EACRH,KAAM,KAEd,GAER,IAAC,UACM,WACH5B,EAAKK,WAAY,EACjBL,EAAKuB,OAAOC,IAAI,CACZC,SAAU,QACVO,QAAS,wBACTN,OAAQ,8DACRE,KAAM,KAEd,GACR,EACAR,UAAS,WACLN,KAAKpC,KAAO,CACRC,aAAc,KACdI,WAAY,KACZO,YAAa,KACbI,SAAU,KACVG,UAAW,KAEnB,EACAZ,eAAc,WACd,IAAMgD,EAAQ,IAAIC,KAGlB,GAFAD,EAAME,SAAS,EAAG,EAAG,EAAG,GAEpBrB,KAAKpC,KAAKK,WAAY,CACtB,IAAMqD,EAAoB,IAAIF,KAAKpB,KAAKpC,KAAKK,YACzCqD,EAAoBH,IACpBnB,KAAKpC,KAAKK,WAAa,KACvB+B,KAAKS,OAAOC,IAAI,CACZC,SAAU,OACVO,QAAS,gBACTN,OAAQ,8DACRE,KAAM,MAGlB,CAEA,GAAId,KAAKpC,KAAKgB,SAAU,CACpB,IAAM2C,EAAkB,IAAIH,KAAKpB,KAAKpC,KAAKgB,UACvC2C,EAAkBJ,IAClBnB,KAAKpC,KAAKgB,SAAW,KACrBoB,KAAKS,OAAOC,IAAI,CACZC,SAAU,OACVO,QAAS,gBACTN,OAAQ,iEACRE,KAAM,OAIVd,KAAKpC,KAAKK,YAAcsD,EAAkB,IAAIH,KAAKpB,KAAKpC,KAAKK,cAC7D+B,KAAKpC,KAAKgB,SAAW,KACrBoB,KAAKS,OAAOC,IAAI,CACZC,SAAU,OACVO,QAAS,wBACTN,OAAQ,iEACRE,KAAM,MAGlB,CACJ,EAEArC,gBAAe,WACf,IAAM+C,EAAM,IAAIJ,KAGhB,GAAIpB,KAAKpC,KAAKY,YAAa,CACvB,IAAKwB,KAAKpC,KAAKK,WAQX,OAPA+B,KAAKS,OAAOC,IAAI,CACZC,SAAU,OACVO,QAAS,iBACTN,OAAQ,iDACRE,KAAM,WAEVd,KAAKpC,KAAKY,YAAc,MAI5B,IAAM8C,EAAoB,IAAIF,KAAKpB,KAAKpC,KAAKK,YAC7CwD,EAAmCzB,KAAKpC,KAAKY,YAAYkD,MAAM,KAAIC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAA5DI,EAAUF,EAAA,GAAEG,EAAYH,EAAA,GACzBI,EAAoB,IAAIX,KAC9BW,EAAkBV,SAASQ,EAAYC,EAAc,EAAG,GAEpDR,EAAkBU,iBAAmBR,EAAIQ,gBAAkBD,EAAoBP,IAC/ExB,KAAKpC,KAAKY,YAAc,KACxBwB,KAAKS,OAAOC,IAAI,CACZC,SAAU,OACVO,QAAS,iBACTN,OAAQ,mEACRE,KAAM,MAGlB,CAGA,GAAId,KAAKpC,KAAKmB,UAAW,CACrB,IAAKiB,KAAKpC,KAAKgB,SAQX,OAPAoB,KAAKS,OAAOC,IAAI,CACZC,SAAU,OACVO,QAAS,iBACTN,OAAQ,0CACRE,KAAM,WAEVd,KAAKpC,KAAKmB,UAAY,MAI1B,IAAMwC,EAAkB,IAAIH,KAAKpB,KAAKpC,KAAKgB,UAC3CqD,EAA+BjC,KAAKpC,KAAKmB,UAAU2C,MAAM,KAAIQ,GAAAN,EAAAA,EAAAA,GAAAK,EAAA,GAAtDE,EAAQD,EAAA,GAAEE,EAAUF,EAAA,GACrBG,EAAkB,IAAIjB,KAc5B,GAbAiB,EAAgBhB,SAASc,EAAUC,EAAY,EAAG,GAE9Cb,EAAgBS,iBAAmBR,EAAIQ,gBAAkBK,EAAkBb,IAC3ExB,KAAKpC,KAAKmB,UAAY,KACtBiB,KAAKS,OAAOC,IAAI,CACZC,SAAU,OACVO,QAAS,iBACTN,OAAQ,iEACRE,KAAM,OAKVd,KAAKpC,KAAKK,aAAe+B,KAAKpC,KAAKgB,UAAYoB,KAAKpC,KAAKY,aAAewB,KAAKpC,KAAKmB,UAAW,CAC7F,IAAAuD,EAAmCtC,KAAKpC,KAAKY,YAAYkD,MAAM,KAAIa,GAAAX,EAAAA,EAAAA,GAAAU,EAAA,GAA5DT,EAAUU,EAAA,GAAET,EAAYS,EAAA,GACzBR,EAAoB,IAAIX,KAC9BW,EAAkBV,SAASQ,EAAYC,EAAc,EAAG,GAEpDO,EAAkBN,IAClB/B,KAAKpC,KAAKmB,UAAY,KACtBiB,KAAKS,OAAOC,IAAI,CACZC,SAAU,OACVO,QAAS,yBACTN,OAAQ,iEACRE,KAAM,MAGlB,CACJ,CACJ,K,eCzNA,MAAM0B,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,G","sources":["webpack://epharma/./src/views/gestion/gardes/CreateGarde.vue","webpack://epharma/./src/views/gestion/gardes/CreateGarde.vue?d86c"],"sourcesContent":["<template>\n    <form @submit.prevent=\"createLine()\">\n        <div>\n            <p>Informations personnelles</p>\n\n            <div class=\"form-row\">\n                <div class=\"form-group col-md-3\">\n                    <label>Montant de la taxe CFA</label>\n                    <input type=\"number\" class=\"form-control bg-bg-input border border-dark px-[4rem]\" min=\"0\" v-model=\"form.montant_taxe\" required>\n                </div>\n                <div class=\"form-group col-md-3\">\n                    <label>Date de début</label>\n                    <input type=\"date\" class=\"form-control bg-bg-input border border-dark px-[4rem]\" v-model=\"form.date_debut\" @change=\"validationDate\" required />\n                </div>\n                <div class=\"form-group col-md-3\">\n                    <label>Heure de début</label>\n                    <input type=\"time\" class=\"form-control bg-bg-input border border-dark px-[4rem]\" v-model=\"form.heure_debut\" @change=\"validationHeure\" required />\n                </div>\n                <div class=\"form-group col-md-3\">\n                    <label>Date de fin</label>\n                    <input type=\"date\" class=\"form-control bg-bg-input border border-dark px-[4rem]\" v-model=\"form.date_fin\" @change=\"validationDate\" required>\n                </div>\n                <div class=\"form-group col-md-3\">\n                    <label>Heure de fin</label>\n                    <input type=\"time\" class=\"form-control bg-bg-input border border-dark px-[4rem]\" v-model=\"form.heure_fin\" @change=\"validationHeure\" required>\n                </div>\n            </div>\n        </div>\n        <div class=\"d-flex justify-content-end\">\n            <button type=\"button\" class=\"btn btn-light mr-2\" @click=\"this.dialogRef.close()\">Fermer</button>\n            <button type=\"submit\" class=\"btn btn-light\">\n                Enregistrer\n                <span v-if=\"isLoading == true\" class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\n            </button>\n        </div>\n    </form>\n</template>\n\n<script>\nimport $ from \"jquery\";\nimport { defineComponent } from \"vue\";\n\nexport default defineComponent({\n    name: \"CreateGarde\",\n    inject: [\"dialogRef\"],\n    data() {\n        return {\n            table: \"gardes\",\n            isLoading: false,\n            form: {\n                montant_taxe: null,\n                date_debut: null,\n                heure_debut: null,\n                date_fin: null,\n                heure_fin: null,\n            },\n        };\n    },\n    methods: {\n        createLine() {\n            this.isLoading = true;\n            this.axios\n                .post(\"/api/\" + this.table, this.form)\n                .then((response) => {\n                    this.isLoading = false;\n                    if (response.data.success === true) {\n                        this.resetForm();\n                        $(\"#refresh\" + this.table).click();\n                        this.dialogRef.close();\n                        this.$toast.add({\n                            severity: \"success\",\n                            detail: response.data.message,\n                            life: 3000,\n                        });\n                    } else {\n                        response.data.errors.forEach((element) => {\n                            this.$toast.add({\n                                severity: \"warn\",\n                                summary: \"Oups !\",\n                                detail: element,\n                                life: 7000,\n                            });\n                        });\n                    }\n                })\n                .catch(() => {\n                    this.isLoading = false;\n                    this.$toast.add({\n                        severity: \"error\",\n                        summary: \"Problème de connexion\",\n                        detail: \"Une erreur s'est produite lors de la connexion au serveur !\",\n                        life: 5000,\n                    });\n                });\n        },\n        resetForm() {\n            this.form = {\n                montant_taxe: null,\n                date_debut: null,\n                heure_debut: null,\n                date_fin: null,\n                heure_fin: null,\n            };\n        },\n        validationDate() {\n        const today = new Date();\n        today.setHours(0, 0, 0, 0); \n        //condition pour verifier si la date de debut est antérieure à la date actuelle \n        if (this.form.date_debut) {\n            const selectedDateDebut = new Date(this.form.date_debut);\n            if (selectedDateDebut < today) {\n                this.form.date_debut = null;\n                this.$toast.add({\n                    severity: \"warn\",\n                    summary: \"Date invalide\",\n                    detail: \"La date de début ne peut pas être antérieure à aujourd'hui.\",\n                    life: 5000,\n                });\n            }\n        }\n        //condition pour verifier si la date de fin est antérieure à la date actuelle et l'incohérence de date\n        if (this.form.date_fin) {\n            const selectedDateFin = new Date(this.form.date_fin);\n            if (selectedDateFin < today) {\n                this.form.date_fin = null;\n                this.$toast.add({\n                    severity: \"warn\",\n                    summary: \"Date invalide\",\n                    detail: \"La date de fin ne peut pas être antérieure à la date actuelle.\",\n                    life: 5000,\n                });\n            }\n\n            if (this.form.date_debut && selectedDateFin < new Date(this.form.date_debut)) {\n                this.form.date_fin = null;\n                this.$toast.add({\n                    severity: \"warn\",\n                    summary: \"Incohérence des dates\",\n                    detail: \"La date de fin ne peut pas être antérieure à la date de début.\",\n                    life: 5000,\n                });\n            }\n        }\n    },\n\n    validationHeure() {\n    const now = new Date();\n\n    // Vérification pour l'heure de début\n    if (this.form.heure_debut) {\n        if (!this.form.date_debut) {\n            this.$toast.add({\n                severity: \"warn\",\n                summary: \"Heure invalide\",\n                detail: \"Veuillez noter la date de début avant l'heure.\",\n                life: 5000,\n            });\n            this.form.heure_debut = null;\n            return;\n        }\n\n        const selectedDateDebut = new Date(this.form.date_debut);\n        const [hoursDebut, minutesDebut] = this.form.heure_debut.split(\":\");\n        const selectedTimeDebut = new Date();\n        selectedTimeDebut.setHours(hoursDebut, minutesDebut, 0, 0);\n\n        if (selectedDateDebut.toDateString() === now.toDateString() && selectedTimeDebut < now) {\n            this.form.heure_debut = null;\n            this.$toast.add({\n                severity: \"warn\",\n                summary: \"Heure invalide\",\n                detail: \"L'heure de début ne peut pas être antérieure à l'heure actuelle.\",\n                life: 5000,\n            });\n        }\n    }\n\n    // Vérification pour l'heure de fin\n    if (this.form.heure_fin) {\n        if (!this.form.date_fin) {\n            this.$toast.add({\n                severity: \"warn\",\n                summary: \"Heure invalide\",\n                detail: \"Veuillez noter les dates avant l'heure.\",\n                life: 5000,\n            });\n            this.form.heure_fin = null;\n            return;\n        }\n\n        const selectedDateFin = new Date(this.form.date_fin);\n        const [hoursFin, minutesFin] = this.form.heure_fin.split(\":\");\n        const selectedTimeFin = new Date();\n        selectedTimeFin.setHours(hoursFin, minutesFin, 0, 0);\n\n        if (selectedDateFin.toDateString() === now.toDateString() && selectedTimeFin < now) {\n            this.form.heure_fin = null;\n            this.$toast.add({\n                severity: \"warn\",\n                summary: \"Heure invalide\",\n                detail: \"L'heure de fin ne peut pas être antérieure à l'heure actuelle.\",\n                life: 5000,\n            });\n        }\n\n        // Validation de l'incohérence entre début et fin\n        if (this.form.date_debut === this.form.date_fin && this.form.heure_debut && this.form.heure_fin) {\n            const [hoursDebut, minutesDebut] = this.form.heure_debut.split(\":\");\n            const selectedTimeDebut = new Date();\n            selectedTimeDebut.setHours(hoursDebut, minutesDebut, 0, 0);\n\n            if (selectedTimeFin < selectedTimeDebut) {\n                this.form.heure_fin = null;\n                this.$toast.add({\n                    severity: \"warn\",\n                    summary: \"Incohérence des heures\",\n                    detail: \"L'heure de fin ne peut pas être antérieure à l'heure de début.\",\n                    life: 5000,\n                });\n            }\n        }\n    }\n}\n\n\n\n    \n    },\n});\n</script>\n","import { render } from \"./CreateGarde.vue?vue&type=template&id=0b9032f0\"\nimport script from \"./CreateGarde.vue?vue&type=script&lang=js\"\nexport * from \"./CreateGarde.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","class","type","key","role","_createElementBlock","onSubmit","_cache","_withModifiers","$event","_ctx","createLine","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","min","form","montant_taxe","required","_hoisted_5","_hoisted_6","date_debut","onChange","validationDate","apply","arguments","_hoisted_7","_hoisted_8","heure_debut","validationHeure","_hoisted_9","_hoisted_10","date_fin","_hoisted_11","_hoisted_12","heure_fin","_hoisted_13","onClick","_this","dialogRef","close","_hoisted_14","_createTextVNode","isLoading","_hoisted_15","_createCommentVNode","defineComponent","name","inject","data","table","methods","this","axios","post","then","response","success","resetForm","$","click","$toast","add","severity","detail","message","life","errors","forEach","element","summary","today","Date","setHours","selectedDateDebut","selectedDateFin","now","_this$form$heure_debu","split","_this$form$heure_debu2","_slicedToArray","hoursDebut","minutesDebut","selectedTimeDebut","toDateString","_this$form$heure_fin$","_this$form$heure_fin$2","hoursFin","minutesFin","selectedTimeFin","_this$form$heure_debu3","_this$form$heure_debu4","__exports__","render"],"sourceRoot":""}