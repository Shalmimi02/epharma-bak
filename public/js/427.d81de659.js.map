{"version":3,"file":"js/427.d81de659.js","mappings":"wJAAAA,IAAA,G,GAcoBC,EAAAA,EAAAA,IAAiC,KAA9BC,MAAM,qBAAmB,S,GAdhDF,IAAA,G,GAkBwBC,EAAAA,EAAAA,IAA4D,KAAzDC,MAAM,gDAA8C,S,GAlB/EF,IAAA,G,GAqBwBC,EAAAA,EAAAA,IAAkC,KAA/BC,MAAM,sBAAoB,S,GAKjCD,EAAAA,EAAAA,IAA+B,KAA5BC,MAAM,mBAAiB,S,GA1B9CF,IAAA,EA8BgEE,MAAM,mCAAmCC,KAAK,SAAS,cAAY,Q,EA9BnI,qC,sIAAAC,EAAAA,EAAAA,IAAAC,EAAAA,GAAA,MACeC,EAAAC,cAAc,aAAc,uBAAf,WAAxBH,EAAAA,EAAAA,IAEM,MAHVI,EAAA,CAE4BF,EAAAG,MAAQ,IAAH,WAAzBC,EAAAA,EAAAA,IAA0EC,EAAA,CAA1CX,IAAKM,EAAAM,WAAaC,UAAWP,EAAAO,W,wBAFrEC,EAAAA,EAAAA,IAAA,WAAAA,EAAAA,EAAAA,IAAA,QAIkD,IAAdR,EAAAS,YAAS,WAAzCL,EAAAA,EAAAA,IAA2GM,EAAA,CAJ/GhB,IAAA,EAIiBE,MAAM,OAAiCe,KAAK,gBAAgBC,MAAA,mBAJ7EJ,EAAAA,EAAAA,IAAA,QAKIb,EAAAA,EAAAA,IA+BM,yBA7BFS,EAAAA,EAAAA,IA4BgBS,EAAA,CA5BDC,UAAA,GAAWpB,IAAKM,EAAAN,IAC1BqB,IAAG,QAAYf,EAAAgB,MAAQ,kBAAoBhB,EAAAiB,WAAWC,GAAK,mBAAqBlB,EAAAmB,aAAe,kBAAoBnB,EAAAiB,WAAWG,MAC9HC,QAASrB,EAAAqB,QAAUL,MAAOhB,EAAAgB,MAAQM,WAAYtB,EAAAuB,QAAcC,kBAAmBxB,EAAAyB,YAC/EC,cAAe1B,EAAA2B,iB,CACLC,oBAAkBC,EAAAA,EAAAA,KACzB,iBAGS,CAFoB,GAEpB,EAFMC,YAA4C,WAArB9B,EAAAiB,WAAWc,QAA4C,UAArB/B,EAAAiB,WAAWc,SAAM,WADzFjC,EAAAA,EAAAA,IAGS,UAfzBJ,IAAA,EAYwBsC,KAAK,SAASpC,MAAM,qBAAsBqC,QAAKC,EAAA,KAAAA,EAAA,YAAAC,GAAA,OAAEnC,EAAAoC,iBAAiB,UAAD,I,CAErEC,GAdpBC,EAAAA,EAAAA,IAcqD,kBAdrD9B,EAAAA,EAAAA,IAAA,QAgBgBb,EAAAA,EAAAA,IAOS,UAPDqC,KAAK,SAASpC,MAAM,qBAAsBqC,QAAKC,EAAA,KAAAA,EAAA,qBAAElC,EAAAuC,gBAAAvC,EAAAuC,eAAAC,MAAAxC,EAAAyC,UAAc,I,CACvDzC,EAAAmB,eAAY,WAAxBrB,EAAAA,EAAAA,IAEO,OAnB3B4C,EAAA,CAkBwBC,GAlBxBL,EAAAA,EAAAA,IAkBoF,wBAChE,WACAxC,EAAAA,EAAAA,IAEO,OAtB3B8C,EAAA,CAqBwBC,GArBxBP,EAAAA,EAAAA,IAqB0D,gBAIb,GAHzB,EAGWR,YAA4C,WAArB9B,EAAAiB,WAAWc,QAA4C,UAArB/B,EAAAiB,WAAWc,SAAM,WADzFjC,EAAAA,EAAAA,IAGS,UA3BzBJ,IAAA,EAwBwBsC,KAAK,SAASpC,MAAM,yBAA0BqC,QAAKC,EAAA,KAAAA,EAAA,YAAAC,GAAA,OAAEnC,EAAAoC,iBAAiB,SAAD,I,CAEzEU,GA1BpBR,EAAAA,EAAAA,IA0BmD,iBA1BnD9B,EAAAA,EAAAA,IAAA,O,IA6BuBuC,aAAWlB,EAAAA,EAAAA,KACjB,SAAgImB,GADrG,OACfhD,EAAAiD,eAAeD,EAAUE,KAAKhC,MAAE,WAA5CpB,EAAAA,EAAAA,IAAgI,OAAhIqD,MAAgI,WACjIrD,EAAAA,EAAAA,IAEsD,SAjCtEJ,IAAA,EA+B8BsC,KAAK,SAASpC,MAAM,4CAA6CsB,GAAI8B,EAAUE,KAAKhC,GAAIkC,IAAI,IACrGC,MAAOL,EAAUE,KAAKI,WAAaC,SAAM,SAAApB,GAAA,OAAEnC,EAAAwD,uBAAuBR,EAAUE,KAAMf,EAAM,EACzFvB,MAAA,gBAAuB6C,SAAQC,EAAO5B,Y,QAjC1D6B,I,IAAAC,EAAA,G,+OA2CA,SAAeC,EAAAA,EAAAA,IAAgB,CAC3BC,KAAM,0BACNC,OAAQ,CAAC,aACTC,WAAY,CAAEC,aAAAA,EAAAA,GACdC,MAAO,CAAC,aAAc,SACtBhB,KAAI,WACA,MAAO,CACHlC,MAAO,qBACPP,WAAW,EACXwC,eAAgB,GAChB9B,cAAc,EACdF,WAAYkD,KAAKC,MACjB/C,QAAS,CACL,CACI3B,IAAK,kBACL2E,MAAO,UACPC,YAAY,GAEhB,CACI5E,IAAK,aACL2E,MAAO,aACPC,YAAY,GAEhB,CACI5E,IAAK,MACL2E,MAAO,eACPC,YAAY,GAEhB,CACI5E,IAAK,QACL2E,MAAO,QACPC,YAAY,GAEhB,CACI5E,IAAK,aACL2E,MAAO,aACPC,YAAY,GAEhB,CACI5E,IAAK,cACL2E,MAAO,MACPC,YAAY,GAEhB,CACI5E,IAAK,qBACL2E,MAAO,eACPE,OAAQ,QACRD,YAAY,GAEhB,CACI5E,IAAK,wBACL2E,MAAO,gBACPE,OAAQ,QACRD,YAAY,IAGpB5E,IAAK,EACLY,WAAY,EACZiB,QAAS,GACThB,UAAW,GAEnB,EACAiE,QAAS,CAELC,eAAc,SAACC,GAGX,YAFaC,IAATD,GAAsBA,EAAKE,SAAS,KAAMF,GAAc,IACvDA,GAAc,IACZA,CACX,EACAzE,cAAa,SAAC4E,EAAUC,GACpB,IAAKX,KAAKY,OAAOC,QAAQC,cACrB,OAAO,EAEX,IAAMC,EAAaf,KAAKY,OAAOC,QAAQC,cAAcE,MAAK,SAACC,GAAI,OAAKA,EAAKC,OAASR,CAAQ,IAC1F,OAAOK,GAAcA,EAAWI,SAASV,SAASE,EACtD,EACA1C,iBAAgB,SAACmD,GAAQ,IAAA7B,EAAA,KACrBS,KAAKqB,SAASC,QAAQ,CAClBC,MAAO,WACPC,OAAQ,iBACRC,QAAS,iCACTC,OAAQ,WACJnC,EAAKjD,WAAY,EACjB,IAAIqF,EAAO,CACP,OAAUP,GAEd7B,EAAKqC,MAAMC,KAAK,oBAAsBtC,EAAKzC,WAAWC,GAAK,UAAW4E,GAAMG,MAAK,SAAAC,GAC7ExC,EAAKjD,WAAY,GACa,IAA1ByF,EAAShD,KAAKiD,SACdC,IAAE,uBAAuBC,QACzB3C,EAAK4C,MAAM,gBACX5C,EAAK6C,OAAOC,IAAI,CACZC,SAAU,UACVC,OAAQR,EAAShD,KAAK0C,QACtBe,KAAM,MAEVjD,EAAKkD,UAAUC,SAGfX,EAAShD,KAAK4D,OAAOC,SAAQ,SAAAC,GACzBtD,EAAK6C,OAAOC,IAAI,CACZC,SAAU,OACVQ,QAAS,SACTP,OAAQM,EACRL,KAAM,KAEd,GAER,IAAE,UAAO,WACLjD,EAAKjD,WAAY,EACjBiD,EAAK6C,OAAOC,IAAI,CACZC,SAAU,QACVQ,QAAS,wBACTP,OAAQ,8DACRC,KAAM,KAEd,GACJ,GAER,EACMlF,YAAW,SAACyF,GAAU,IAAAC,EAAA,YAAAC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAA,SAAAC,IAAA,OAAAF,EAAAA,EAAAA,KAAAG,MAAA,SAAAC,GAAA,eAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EAClBR,EAAKS,oBAAkB,OAC7BT,EAAKhH,MAAQ+G,EAAO,wBAAAO,EAAAI,OAAA,GAAAN,EAAA,IAFIH,EAG5B,EACAU,YAAW,SAACC,GACR5D,KAAK5C,QAAUwG,EACf5D,KAAKzE,KACT,EACM8D,uBAAsB,SAACwE,EAAMC,GAAO,IAAAC,EAAA,YAAAd,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAA,SAAAa,IAAA,IAAAC,EAAAtC,EAAAI,EAAA,OAAAmB,EAAAA,EAAAA,KAAAG,MAAA,SAAAa,GAAA,eAAAA,EAAAX,KAAAW,EAAAV,MAAA,OASrC,OARKS,EAAcH,EAAMK,OAAOjF,MACjC6E,EAAKjF,gBAAasF,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAASL,EAAKjF,gBAAc,IAAAuF,EAAAA,EAAAA,GAAA,GAAGR,EAAK9G,IAAK,IAG3D8G,EAAK1E,WAAa8E,EAEdtC,EAAO,CACP,WAAcsC,GACjBC,EAAAX,KAAA,EAAAW,EAAAV,KAAA,EAG0BO,EAAKnC,MAAMC,KAAK,QAADyC,OAASP,EAAKlH,MAAK,KAAAyH,OAAIT,EAAK9G,GAAE,WAAW4E,GAAK,OAA9EI,EAAOmC,EAAAK,KAETxC,EAAShD,KAAKiD,QACd+B,EAAK3B,OAAOC,IAAI,CACZC,SAAU,UACVC,OAAQR,EAAShD,KAAK0C,QACtBe,KAAM,OAKVT,EAAShD,KAAK4D,OAAOC,SAAQ,SAAAC,GACzBkB,EAAK3B,OAAOC,IAAI,CACZC,SAAU,OACVQ,QAAS,SACTP,OAAQM,EACRL,KAAM,KAEd,IAGAsB,EAAMK,OAAOjF,MAAQ2E,EAAK1E,YAC9B+E,EAAAV,KAAA,iBAAAU,EAAAX,KAAA,GAAAW,EAAAM,GAAAN,EAAA,YAEAH,EAAK3B,OAAOC,IAAI,CACZC,SAAU,QACVQ,QAAS,wBACTP,OAAQ,8DACRC,KAAM,MAIVsB,EAAMK,OAAOjF,MAAQ2E,EAAK1E,WAAY,QAE4B,OAF5B+E,EAAAX,KAAA,GAEtCQ,EAAKjF,gBAAasF,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAASL,EAAKjF,gBAAc,IAAAuF,EAAAA,EAAAA,GAAA,GAAGR,EAAK9G,IAAK,IAAOmH,EAAAO,OAAA,6BAAAP,EAAAR,OAAA,GAAAM,EAAA,wBA9ChCf,EAgD1C,EACA7E,eAAc,WACe,GAArB4B,KAAKhD,aACLgD,KAAKhD,cAAe,EACjBgD,KAAKhD,cAAe,EAC3BgD,KAAKzE,KACT,EAEAkI,kBAAiB,WAAG,IAAAiB,EAAA,KAChB1E,KAAK1D,WAAY,EACjB0D,KAAK4B,MAAM+C,IAAI,kCAAoC3E,KAAKlD,WAAWC,IAAI+E,MAAK,SAAAC,GACxE2C,EAAKpI,WAAY,EACjBoI,EAAKtI,UAAY,GACjBsI,EAAKtI,UAAUwI,KACX,CACI1F,MAAO6C,EAAShD,KAAK8F,iBACrB3E,MAAO,8BAEX,CACIhB,MAAO6C,EAAShD,KAAK+F,sBACrB5E,MAAO,oBAEX,CACIhB,MAAO6C,EAAShD,KAAKgG,sBACrB7E,MAAO,qBAEX,CACIhB,MAAO6C,EAAShD,KAAKiG,iBACrB9E,MAAO,mBAGfwE,EAAKvI,YACT,IAAE,UAAO,WACLuI,EAAKpI,WAAY,EACjBoI,EAAKtC,OAAOC,IAAI,CACZC,SAAU,QACVQ,QAAS,wBACTP,OAAQ,8DACRC,KAAM,KAEd,GACJ,EACAyC,UAAS,WAAG,IAAAC,EAAA,KACRlF,KAAK1D,WAAY,EACjB0D,KAAK4B,MAAM+C,IAAI,gBAAgB7C,MAAK,SAAAC,GAChCmD,EAAKC,OAASpD,EAAShD,KAAKA,KAC5BmG,EAAK5I,WAAY,CACrB,IAAE,UAAO,WACL4I,EAAK5I,WAAY,EACjB4I,EAAK9C,OAAOC,IAAI,CACZC,SAAU,QACVQ,QAAS,wBACTP,OAAQ,8DACRC,KAAM,KAEd,GACJ,GAGJ4C,QAAO,WAEHpF,KAAKlE,cAAc,aAAc,qBAEnCkE,KAAK9C,QAAU,CACL,CACI3B,IAAK,kBACL2E,MAAO,UACPC,YAAY,GAEhB,CACI5E,IAAK,aACL2E,MAAO,aACPC,YAAY,GAEhB,CACI5E,IAAK,MACL2E,MAAO,eACPC,YAAY,GAEhB,CACI5E,IAAK,QACL2E,MAAO,QACPC,YAAY,GAEhB,CACI5E,IAAK,aACL2E,MAAO,aACPC,YAAY,GAEhB,CACI5E,IAAK,cACL2E,MAAO,MACPC,YAAY,GAEhB,CACI5E,IAAK,qBACL2E,MAAO,eACPE,OAAQ,QACRD,YAAY,GAEhB,CACI5E,IAAK,wBACL2E,MAAO,gBACPE,OAAQ,QACRD,YAAY,IAK1BH,KAAK9C,QAAU,CACL,CACI3B,IAAK,kBACL2E,MAAO,UACPC,YAAY,GAsBhB,CACI5E,IAAK,cACL2E,MAAO,MACPC,YAAY,GAEhB,CACI5E,IAAK,qBACL2E,MAAO,eACPE,OAAQ,QACRD,YAAY,GAEhB,CACI5E,IAAK,wBACL2E,MAAO,gBACPE,OAAQ,QACRD,YAAY,GAI5B,I,eChXJ,MAAMkF,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,G","sources":["webpack://epharma/./src/views/gestion/inventaires/EditInventairePartiel.vue","webpack://epharma/./src/views/gestion/inventaires/EditInventairePartiel.vue?beff"],"sourcesContent":["<template>\n    <div v-if=\"hasPermission('PRIVILEGES', 'inventaire_master')\">\n        <MoneyCounter v-if=\"lines > 0\" :key=\"keyCounter\" :compteurs=\"compteurs\" />\n    </div>\n    <ProgressBar class=\"my-1\" v-if=\"isLoading === true\" mode=\"indeterminate\" style=\"height: 6px\"></ProgressBar>\n    <div>\n        <!-- <searchByKeyword class=\"mb-3 mt-3\" v-on:set-keyword-filter=\"searchLines\" /> -->\n        <AsdecodeTable useSearch :key=\"key\"\n            :url=\"'/api/' + table + '?inventaire_id=' + inventaire.id + '&show_diff_only=' + showDiffOnly + '&rayon_libelle=' + inventaire.rayon\"\n            :columns=\"columns\" :table=\"table\" :newKeyWord=\"keyWord\" v-on:set-total-records=\"updateLines\"\n            @get-table-url=\"refreshCounters\">\n            <template #header_action_btns>\n                <button type=\"button\" class=\"btn btn-light mr-2\" @click=\"updateInventaire('Terminé')\"\n                    v-if=\"this.formLocked == false && inventaire.statut != 'Terminé' && inventaire.statut != 'Annulé'\">\n                    <i class=\"fa-solid fa-check\"></i> Terminer\n                </button>\n                <button type=\"button\" class=\"btn btn-light mr-2\" @click=\"SwitchWithDiff\">\n                    <span v-if=\"showDiffOnly\">\n                        <i class=\"fa-solid fa-filter-circle-xmark text-primary\"></i> Tout afficher\n                    </span>\n                    <span v-else>\n                        <i class=\"fa-solid fa-filter\"></i> Ecart\n                    </span>\n                </button>\n                <button type=\"button\" class=\"btn btn-danger ml-auto\" @click=\"updateInventaire('Annulé')\"\n                    v-if=\"this.formLocked == false && inventaire.statut != 'Terminé' && inventaire.statut != 'Annulé'\">\n                    <i class=\"fa-solid fa-ban\"></i> Annuler\n                </button>\n            </template>\n            <template #action_btns=slotProps>\n                 <span v-if=\"isLoadingInput[slotProps.data.id]\" class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\n                <input v-else type=\"number\" class=\"form-control border border-dark px-[4rem]\" :id=\"slotProps.data.id\" min=\"0\"\n                    :value=\"slotProps.data.qte_reelle\" @change=\"updateIventaireProduit(slotProps.data, $event)\"\n                    style=\"width: 100px;\" :disabled=\"this.formLocked\">\n            </template>\n        </AsdecodeTable>\n    </div>\n</template>\n\n<script>\nimport { defineComponent, defineAsyncComponent } from 'vue';\nimport MoneyCounter from '@/components/MoneyCounter.vue'\nimport $ from 'jquery';\nexport default defineComponent({\n    name: 'CreateInventairePartiel',\n    inject: ['dialogRef'],\n    components: { MoneyCounter },\n    props: ['formLocked', 'datas'],\n    data() {\n        return {\n            table: 'inventaire_produit',\n            isLoading: false,\n            isLoadingInput: [],\n            showDiffOnly: false,\n            inventaire: this.datas,\n            columns: [\n                {\n                    key: 'produit_libelle',\n                    label: 'LIBELLE',\n                    exportable: true\n                },\n                {\n                    key: 'qte_reelle',\n                    label: 'QTE REELLE',\n                    exportable: true\n                },\n                {\n                    key: 'qte',\n                    label: 'QTE EN STOCK',\n                    exportable: true\n                },\n                {\n                    key: 'ecart',\n                    label: 'ECART',\n                    exportable: true\n                },\n                {\n                    key: 'qte_finale',\n                    label: 'QTE FINALE',\n                    exportable: true\n                },\n                {\n                    key: 'produit_cip',\n                    label: 'CIP',\n                    exportable: true\n                },\n                {\n                    key: 'produit_prix_achat',\n                    label: 'PRIX D\\'ACHAT',\n                    format: 'money',\n                    exportable: true\n                },\n                {\n                    key: 'produit_prix_de_vente',\n                    label: 'PRIX DE VENTE',\n                    format: 'money',\n                    exportable: true\n                },\n            ],\n            key: 1,\n            keyCounter: 1,\n            keyWord: '',\n            compteurs: []\n        }\n    },\n    methods: {\n        //fonction pour empecher les erreurs lors du filtre\n        checkUrlFormat(link) {\n            if (link !== undefined && link.includes('?')) link = link + '&'\n            else link = link + '?'\n            return link\n        },\n        hasPermission(menuName, submenuName) {\n            if (!this.$store.getters.habilitations) {\n                return false;\n            }\n            const permission = this.$store.getters.habilitations.find((perm) => perm.menu === menuName);\n            return permission && permission.submenus.includes(submenuName);\n        },\n        updateInventaire(status) {\n            this.$confirm.require({\n                group: 'headless',\n                header: 'Etes-vous sûr?',\n                message: 'Cette action est irréversible!',\n                accept: () => {\n                    this.isLoading = true\n                    let form = {\n                        'statut': status\n                    }\n                    this.axios.post('/api/inventaires/' + this.inventaire.id + '/update', form).then(response => {\n                        this.isLoading = false\n                        if (response.data.success === true) {\n                            $('#refreshinventaires').click()\n                            this.$emit('line_updated')\n                            this.$toast.add({\n                                severity: 'success',\n                                detail: response.data.message,\n                                life: 3000\n                            });\n                            this.dialogRef.close()\n                        }\n                        else {\n                            response.data.errors.forEach(element => {\n                                this.$toast.add({\n                                    severity: 'warn',\n                                    summary: 'Oups !',\n                                    detail: element,\n                                    life: 7000\n                                });\n                            });\n                        }\n                    }).catch(() => {\n                        this.isLoading = false\n                        this.$toast.add({\n                            severity: 'error',\n                            summary: 'Probleme de connexion',\n                            detail: 'Une erreur s\\'est produite lors de la connexion au serveur !',\n                            life: 5000\n                        });\n                    })\n                }\n            })\n        },\n        async updateLines(nb_lines) {\n            await this.calculerCoutTotal()\n            this.lines = nb_lines\n        },\n        searchLines(keyword) {\n            this.keyWord = keyword\n            this.key++\n        },\n        async updateIventaireProduit(line, event) {\n            const newQuantity = event.target.value; // Récuperation la nouvelle valeur saisie\n            this.isLoadingInput = { ...this.isLoadingInput, [line.id]: true };\n\n            // Mettre à jour immédiatement l'interface utilisateur\n            line.qte_reelle = newQuantity;\n\n            let form = {\n                'qte_reelle': newQuantity\n            };\n\n            try {\n                const response = await this.axios.post(`/api/${this.table}/${line.id}/update`, form);\n\n                if (response.data.success) {\n                    this.$toast.add({\n                        severity: 'success',\n                        detail: response.data.message,\n                        life: 3000\n                    });\n\n                    \n                } else {\n                    response.data.errors.forEach(element => {\n                        this.$toast.add({\n                            severity: 'warn',\n                            summary: 'Oups !',\n                            detail: element,\n                            life: 7000\n                        });\n                    });\n\n                    // Revenir à la valeur précédente en cas d'erreur\n                    event.target.value = line.qte_reelle; // Réafficher la valeur précédente\n                }\n            } catch (error) {\n                this.$toast.add({\n                    severity: 'error',\n                    summary: 'Probleme de connexion',\n                    detail: 'Une erreur s\\'est produite lors de la connexion au serveur !',\n                    life: 5000\n                });\n\n                \n                event.target.value = line.qte_reelle; // Réafficher la valeur précédente\n            } finally {\n                this.isLoadingInput = { ...this.isLoadingInput, [line.id]: false };\n            }\n        },\n        SwitchWithDiff() {\n            if (this.showDiffOnly == true) {\n                this.showDiffOnly = false\n            } else this.showDiffOnly = true\n            this.key++\n        },\n\n        calculerCoutTotal() {\n            this.isLoading = true\n            this.axios.get('/api/inventaires-calc-compteur/' + this.inventaire.id).then(response => {\n                this.isLoading = false\n                this.compteurs = []\n                this.compteurs.push(\n                    {\n                        value: response.data.cout_total_achat,\n                        label: 'VALEUR  DU STOCK À L\\'ACHAT'\n                    },\n                    {\n                        value: response.data.cout_total_achat_reel,\n                        label: 'VAL À L\\'ACHAT AP'\n                    },\n                    {\n                        value: response.data.cout_total_vente_reel,\n                        label: 'VAL À LA VENTE AP'\n                    },\n                    {\n                        value: response.data.diff_total_achat,\n                        label: 'DIFF DU STOCK '\n                    },\n                )\n                this.keyCounter++\n            }).catch(() => {\n                this.isLoading = false\n                this.$toast.add({\n                    severity: 'error',\n                    summary: 'Probleme de connexion',\n                    detail: 'Une erreur s\\'est produite lors de la connexion au serveur !',\n                    life: 5000\n                });\n            })\n        },\n        getRayons() {\n            this.isLoading = true\n            this.axios.get('/api/rayons/').then(response => {\n                this.rayons = response.data.data\n                this.isLoading = false\n            }).catch(() => {\n                this.isLoading = false\n                this.$toast.add({\n                    severity: 'error',\n                    summary: 'Probleme de connexion',\n                    detail: 'Une erreur s\\'est produite lors de la connexion au serveur !',\n                    life: 5000\n                });\n            })\n        }\n\n    }, \n    mounted() {\n        // Définir les colonnes en fonction de la permission\n    if (this.hasPermission('PRIVILEGES', 'inventaire_master')) {\n      // L'utilisateur a la permission : afficher toutes les colonnes\n      this.columns = [\n                {\n                    key: 'produit_libelle',\n                    label: 'LIBELLE',\n                    exportable: true\n                },\n                {\n                    key: 'qte_reelle',\n                    label: 'QTE REELLE',\n                    exportable: true\n                },\n                {\n                    key: 'qte',\n                    label: 'QTE EN STOCK',\n                    exportable: true\n                },\n                {\n                    key: 'ecart',\n                    label: 'ECART',\n                    exportable: true\n                },\n                {\n                    key: 'qte_finale',\n                    label: 'QTE FINALE',\n                    exportable: true\n                },\n                {\n                    key: 'produit_cip',\n                    label: 'CIP',\n                    exportable: true\n                },\n                {\n                    key: 'produit_prix_achat',\n                    label: 'PRIX D\\'ACHAT',\n                    format: 'money',\n                    exportable: true\n                },\n                {\n                    key: 'produit_prix_de_vente',\n                    label: 'PRIX DE VENTE',\n                    format: 'money',\n                    exportable: true\n                },\n            ];\n    } else {\n      // Sinon, on retire certaines colonnes (ici, les colonnes de prix par exemple)\n      this.columns = [\n                {\n                    key: 'produit_libelle',\n                    label: 'LIBELLE',\n                    exportable: true\n                },\n                // {\n                //     key: 'qte_reelle',\n                //     label: 'QTE REELLE',\n                //     exportable: true\n                // },\n                // {\n                //     key: 'qte',\n                //     label: 'QTE EN STOCK',\n                //     exportable: true\n                // },\n                // {\n                //     key: 'ecart',\n                //     label: 'ECART',\n                //     exportable: true\n                // },\n                // {\n                //     key: 'qte_finale',\n                //     label: 'QTE FINALE',\n                //     exportable: true\n                // },\n                {\n                    key: 'produit_cip',\n                    label: 'CIP',\n                    exportable: true\n                },\n                {\n                    key: 'produit_prix_achat',\n                    label: 'PRIX D\\'ACHAT',\n                    format: 'money',\n                    exportable: true\n                },\n                {\n                    key: 'produit_prix_de_vente',\n                    label: 'PRIX DE VENTE',\n                    format: 'money',\n                    exportable: true\n                },\n        ];\n    }\n    }\n\n})\n\n</script>","import { render } from \"./EditInventairePartiel.vue?vue&type=template&id=4868e3ec\"\nimport script from \"./EditInventairePartiel.vue?vue&type=script&lang=js\"\nexport * from \"./EditInventairePartiel.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["key","_createElementVNode","class","role","_createElementBlock","_Fragment","_ctx","hasPermission","_hoisted_1","lines","_createBlock","_component_MoneyCounter","keyCounter","compteurs","_createCommentVNode","isLoading","_component_ProgressBar","mode","style","_component_AsdecodeTable","useSearch","url","table","inventaire","id","showDiffOnly","rayon","columns","newKeyWord","keyWord","onSetTotalRecords","updateLines","onGetTableUrl","refreshCounters","header_action_btns","_withCtx","formLocked","statut","type","onClick","_cache","$event","updateInventaire","_hoisted_2","_createTextVNode","SwitchWithDiff","apply","arguments","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","action_btns","slotProps","isLoadingInput","data","_hoisted_8","min","value","qte_reelle","onChange","updateIventaireProduit","disabled","_this","_hoisted_9","_","defineComponent","name","inject","components","MoneyCounter","props","this","datas","label","exportable","format","methods","checkUrlFormat","link","undefined","includes","menuName","submenuName","$store","getters","habilitations","permission","find","perm","menu","submenus","status","$confirm","require","group","header","message","accept","form","axios","post","then","response","success","$","click","$emit","$toast","add","severity","detail","life","dialogRef","close","errors","forEach","element","summary","nb_lines","_this2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","calculerCoutTotal","stop","searchLines","keyword","line","event","_this3","_callee2","newQuantity","_context2","target","_objectSpread","_defineProperty","concat","sent","t0","finish","_this4","get","push","cout_total_achat","cout_total_achat_reel","cout_total_vente_reel","diff_total_achat","getRayons","_this5","rayons","mounted","__exports__","render"],"sourceRoot":""}